!function(r){var i={};function n(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=r,n.c=i,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=42)}([function(t,e,r){"use strict";var I=r(33),R=r(35);function E(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=n,e.resolve=function(t,e){return n(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?n(t,!1,!0).resolveObject(e):e},e.format=function(t){R.isString(t)&&(t=n(t));return t instanceof E?t.format():E.prototype.format.call(t)},e.Url=E;var O=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,w=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,e=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),C=["'"].concat(e),P=["%","/","?",";","#"].concat(C),N=["/","?","#"],M=/^[+a-z0-9A-Z_-]{0,63}$/,L=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,D={javascript:!0,"javascript:":!0},U={javascript:!0,"javascript:":!0},F={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},B=r(36);function n(t,e,r){if(t&&R.isObject(t)&&t instanceof E)return t;var i=new E;return i.parse(t,e,r),i}E.prototype.parse=function(t,e,r){if(!R.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),n=-1!==i&&i<t.indexOf("#")?"?":"#",i=t.split(n);i[0]=i[0].replace(/\\/g,"/");var s=(s=t=i.join(n)).trim();if(!r&&1===t.split("#").length){var o=w.exec(s);if(o)return this.path=s,this.href=s,this.pathname=o[1],o[2]?(this.search=o[2],this.query=e?B.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var a,o=O.exec(s);if(o&&(S=(o=o[0]).toLowerCase(),this.protocol=S,s=s.substr(o.length)),(r||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(a="//"===s.substr(0,2))||o&&U[o]||(s=s.substr(2),this.slashes=!0)),!U[o]&&(a||o&&!F[o])){for(var h=-1,u=0;u<N.length;u++)-1!==(l=s.indexOf(N[u]))&&(-1===h||l<h)&&(h=l);-1!==(E=-1===h?s.lastIndexOf("@"):s.lastIndexOf("@",h))&&(T=s.slice(0,E),s=s.slice(E+1),this.auth=decodeURIComponent(T));for(var l,h=-1,u=0;u<P.length;u++)-1!==(l=s.indexOf(P[u]))&&(-1===h||l<h)&&(h=l);-1===h&&(h=s.length),this.host=s.slice(0,h),s=s.slice(h),this.parseHost(),this.hostname=this.hostname||"";var c="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!c)for(var d=this.hostname.split(/\./),u=0,f=d.length;u<f;u++){var p=d[u];if(p&&!p.match(M)){for(var _="",y=0,m=p.length;y<m;y++)127<p.charCodeAt(y)?_+="x":_+=p[y];if(!_.match(M)){var v=d.slice(0,u),x=d.slice(u+1),g=p.match(L);g&&(v.push(g[1]),x.unshift(g[2])),x.length&&(s="/"+x.join(".")+s),this.hostname=v.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),c||(this.hostname=I.toASCII(this.hostname));var E=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+E,this.href+=this.host,c&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!D[S])for(u=0,f=C.length;u<f;u++){var b,A=C[u];-1!==s.indexOf(A)&&((b=encodeURIComponent(A))===A&&(b=escape(A)),s=s.split(A).join(b))}c=s.indexOf("#");-1!==c&&(this.hash=s.substr(c),s=s.slice(0,c));var S,c=s.indexOf("?");return-1!==c?(this.search=s.substr(c),this.query=s.substr(c+1),e&&(this.query=B.parse(this.query)),s=s.slice(0,c)):e&&(this.search="",this.query={}),s&&(this.pathname=s),F[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(E=this.pathname||"",S=this.search||"",this.path=E+S),this.href=this.format(),this},E.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&R.isObject(this.query)&&Object.keys(this.query).length&&(s=B.stringify(this.query));s=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||F[e])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n=n||"",i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),e+n+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+i},E.prototype.resolve=function(t){return this.resolveObject(n(t,!1,!0)).format()},E.prototype.resolveObject=function(t){R.isString(t)&&((f=new E).parse(t,!1,!0),t=f);for(var e=new E,r=Object.keys(this),i=0;i<r.length;i++){var n=r[i];e[n]=this[n]}if(e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),o=0;o<s.length;o++){var a=s[o];"protocol"!==a&&(e[a]=t[a])}return F[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(t.protocol&&t.protocol!==e.protocol){if(!F[t.protocol]){for(var h=Object.keys(t),u=0;u<h.length;u++){var l=h[u];e[l]=t[l]}return e.href=e.format(),e}if(e.protocol=t.protocol,t.host||U[t.protocol])e.pathname=t.pathname;else{for(var c=(t.pathname||"").split("/");c.length&&!(t.host=c.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==c[0]&&c.unshift(""),c.length<2&&c.unshift(""),e.pathname=c.join("/")}return e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,(e.pathname||e.search)&&(p=e.pathname||"",_=e.search||"",e.path=p+_),e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var d=e.pathname&&"/"===e.pathname.charAt(0),f=t.host||t.pathname&&"/"===t.pathname.charAt(0),p=f||d||e.host&&t.pathname,_=p,y=e.pathname&&e.pathname.split("/")||[],c=t.pathname&&t.pathname.split("/")||[],d=e.protocol&&!F[e.protocol];if(d&&(e.hostname="",e.port=null,e.host&&(""===y[0]?y[0]=e.host:y.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===c[0]?c[0]=t.host:c.unshift(t.host)),t.host=null),p=p&&(""===c[0]||""===y[0])),f)e.host=(t.host||""===t.host?t:e).host,e.hostname=(t.hostname||""===t.hostname?t:e).hostname,e.search=t.search,e.query=t.query,y=c;else if(c.length)(y=y||[]).pop(),y=y.concat(c),e.search=t.search,e.query=t.query;else if(!R.isNullOrUndefined(t.search))return d&&(e.hostname=e.host=y.shift(),(g=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=g.shift(),e.host=e.hostname=g.shift())),e.search=t.search,e.query=t.query,R.isNull(e.pathname)&&R.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.href=e.format(),e;if(!y.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var m=y.slice(-1)[0],f=(e.host||t.host||1<y.length)&&("."===m||".."===m)||""===m,v=0,x=y.length;0<=x;x--)"."===(m=y[x])?y.splice(x,1):".."===m?(y.splice(x,1),v++):v&&(y.splice(x,1),v--);if(!p&&!_)for(;v--;)y.unshift("..");!p||""===y[0]||y[0]&&"/"===y[0].charAt(0)||y.unshift(""),f&&"/"!==y.join("/").substr(-1)&&y.push("");var g,f=""===y[0]||y[0]&&"/"===y[0].charAt(0);return d&&(e.hostname=e.host=!f&&y.length?y.shift():"",(g=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=g.shift(),e.host=e.hostname=g.shift())),(p=p||e.host&&y.length)&&!f&&y.unshift(""),y.length?e.pathname=y.join("/"):(e.pathname=null,e.path=null),R.isNull(e.pathname)&&R.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},E.prototype.parseHost=function(){var t=this.host,e=i.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t};function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=(i(a,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),a);function a(t,e,r){void 0===e&&(e=!1),s(this,a),this._fn=t,this._once=e,this._thisArg=r,this._next=this._prev=this._owner=null}function h(t,e){return t._head?(t._tail._next=e)._prev=t._tail:t._head=e,(t._tail=e)._owner=t,e}i(u,[{key:"handlers",value:function(){var t=this._head;if(!(arguments.length<=0||void 0===arguments[0])&&arguments[0])return!!t;for(var e=[];t;)e.push(t),t=t._next;return e}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return h(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return h(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),i=u;function u(){s(this,u),this._head=this._tail=void 0}i.MiniSignalBinding=o,e.default=i,t.exports=e.default},function(t,e,r){"use strict";var i=Object.prototype.hasOwnProperty,f="~";function n(){}function s(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,r,i,n){if("function"!=typeof r)throw new TypeError("The listener must be a function");n=new s(r,i||t,n),e=f?f+e:e;return t._events[e]?t._events[e].fn?t._events[e]=[t._events[e],n]:t._events[e].push(n):(t._events[e]=n,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(f=!1)),a.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)i.call(t,e)&&r.push(f?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=this._events[f?f+t:t];if(!e)return[];if(e.fn)return[e.fn];for(var r=0,i=e.length,n=new Array(i);r<i;r++)n[r]=e[r].fn;return n},a.prototype.listenerCount=function(t){t=this._events[f?f+t:t];return t?t.fn?1:t.length:0},a.prototype.emit=function(t,e,r,i,n,s){var o=f?f+t:t;if(!this._events[o])return!1;var a,h=this._events[o],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,i),!0;case 5:return h.fn.call(h.context,e,r,i,n),!0;case 6:return h.fn.call(h.context,e,r,i,n,s),!0}for(d=1,a=new Array(u-1);d<u;d++)a[d-1]=arguments[d];h.fn.apply(h.context,a)}else for(var l,c=h.length,d=0;d<c;d++)switch(h[d].once&&this.removeListener(t,h[d].fn,void 0,!0),u){case 1:h[d].fn.call(h[d].context);break;case 2:h[d].fn.call(h[d].context,e);break;case 3:h[d].fn.call(h[d].context,e,r);break;case 4:h[d].fn.call(h[d].context,e,r,i);break;default:if(!a)for(l=1,a=new Array(u-1);l<u;l++)a[l-1]=arguments[l];h[d].fn.apply(h[d].context,a)}return!0},a.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,r,i){t=f?f+t:t;if(!this._events[t])return this;if(!e)return h(this,t),this;var n=this._events[t];if(n.fn)n.fn!==e||i&&!n.once||r&&n.context!==r||h(this,t);else{for(var s=0,o=[],a=n.length;s<a;s++)(n[s].fn!==e||i&&!n[s].once||r&&n[s].context!==r)&&o.push(n[s]);o.length?this._events[t]=1===o.length?o[0]:o:h(this,t)}return this},a.prototype.removeAllListeners=function(t){return t?this._events[t=f?f+t:t]&&h(this,t):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=f,t.exports=a.EventEmitter=a},function(t,e,r){"use strict";t.exports=function(t,e){for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[(e=e||{}).strictMode?"strict":"loose"].exec(t),n={},s=14;s--;)n[i.key[s]]=r[s]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,function(t,e,r){e&&(n[i.q.name][e]=r)}),n}},function(t,e){var r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,s,o,a,h=e&&e.length,u=h?e[0]*r:t.length,l=_(t,0,u,r,!0),c=[];if(!l||l.next===l.prev)return c;if(h&&(l=function(t,e,r,i){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)o=e[n]*i,a=n<s-1?e[n+1]*i:t.length,(a=_(t,o,a,i,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(h.sort(v),n=0;n<h.length;n++)!function(t,e){(e=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(s===i.y)return i;if(s===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!r)return null;if(n===o)return r;var h,u=r,l=r.x,c=r.y,d=1/0;i=r;for(;n>=i.x&&i.x>=l&&n!==i.x&&g(s<c?n:o,s,l,c,s<c?o:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),T(i,t)&&(h<d||h===d&&(i.x>r.x||i.x===r.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(r,i)))&&(r=i,d=h)),i=i.next,i!==u;);return r}(t,e))&&(t=b(e,t),y(e,e.next),y(t,t.next))}(h[n],r),r=y(r,r.next);return r}(t,e,l,r)),t.length>80*r){for(var d=i=t[0],f=n=t[1],p=r;p<u;p+=r)(s=t[p])<d&&(d=s),(o=t[p+1])<f&&(f=o),i<s&&(i=s),n<o&&(n=o);a=0!==(a=Math.max(i-d,n-f))?1/a:0}return m(l,c,r,d,f,a),c}function _(t,e,r,i,n){var s,o;if(n===0<A(t,e,r,i))for(s=e;s<r;s+=i)o=a(s,t[s],t[s+1],o);else for(s=r-i;e<=s;s-=i)o=a(s,t[s],t[s+1],o);return o&&l(o,o.next)&&(d(o),o=o.next),o}function y(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!l(i,i.next)&&0!==E(i.prev,i,i.next))i=i.next;else{if(d(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function m(t,e,r,i,n,s,o){if(t){!o&&s&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=x(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,h,u=1;do{for(r=t,s=t=null,o=0;r;){for(o++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}}while(s.nextZ=null,u*=2,1<o)}(n)}(t,i,n,s);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,r,i){var n=t.prev,s=t,o=t.next;if(0<=E(n,s,o))return!1;var a=(n.x<s.x?n.x<o.x?n:o:s.x<o.x?s:o).x,h=(n.y<s.y?n.y<o.y?n:o:s.y<o.y?s:o).y,u=(n.x>s.x?n.x>o.x?n:o:s.x>o.x?s:o).x,l=(n.y>s.y?n.y>o.y?n:o:s.y>o.y?s:o).y,c=x(a,h,e,r,i),d=x(u,l,e,r,i),f=t.prevZ,p=t.nextZ;for(;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&0<=E(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,n,s):function(t){var e=t.prev,r=t,i=t.next;if(0<=E(e,r,i))return!1;var n=t.next.next;for(;n!==t.prev;){if(g(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(a.i/r),e.push(t.i/r),e.push(h.i/r),d(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?m(t=function(t,e,r){var i=t;do{var n=i.prev,s=i.next.next}while(!l(n,s)&&c(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),d(i),d(i.next),i=t=s),i=i.next,i!==t);return y(i)}(y(t),e,r),e,r,i,n,s,2):2===o&&function(t,e,r,i,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&c(r,r.next,t,e))return!0}while(r=r.next,r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,a)){var h=b(o,a);return o=y(o,o.next),h=y(h,h.next),m(o,e,r,i,n,s),m(h,e,r,i,n,s)}a=a.next}}while(o=o.next,o!==t)}(t,e,r,i,n,s):m(y(t),e,r,i,n,s,1);break}}}function v(t,e){return t.x-e.x}function x(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,r,i,n,s,o,a){return 0<=(n-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(i-a)-(r-o)*(e-a)&&0<=(r-o)*(s-a)-(n-o)*(i-a)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,r,i){var n=u(E(t,e,r)),s=u(E(t,e,i)),o=u(E(r,i,t)),a=u(E(r,i,e));return n!==s&&o!==a||(0===n&&h(t,r,e)||(0===s&&h(t,i,e)||(0===o&&h(r,t,i)||!(0!==a||!h(r,e,i)))))}function h(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function u(t){return 0<t?1:t<0?-1:0}function T(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function b(t,e){var r=new o(t.i,t.x,t.y),i=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(s.next=i).prev=s,i}function a(t,e,r,i){r=new o(t,e,r);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,u,l,r))}for(var c=0,a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,f,p){"use strict";!function(e){var t=p(30),r=p(31),i=setTimeout;function h(t){return Boolean(t&&void 0!==t.length)}function n(){}function s(t){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(t,this)}function o(r,i){for(;3===r._state;)r=r._value;0!==r._state?(r._handled=!0,s._immediateFn(function(){var t,e=1===r._state?i.onFulfilled:i.onRejected;if(null!==e){try{t=e(r._value)}catch(t){return void u(i.promise,t)}a(i.promise,t)}else(1===r._state?a:u)(i.promise,r._value)})):r._deferreds.push(i)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if(t instanceof s)return e._state=3,e._value=t,void l(e);if("function"==typeof r)return void d((i=r,n=t,function(){i.apply(n,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){u(e,t)}var i,n}function u(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&s._immediateFn(function(){t._handled||s._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)o(t,t._deferreds[e]);t._deferreds=null}function c(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function d(t,e){var r=!1;try{t(function(t){r||(r=!0,a(e,t))},function(t){r||(r=!0,u(e,t))})}catch(t){if(r)return;r=!0,u(e,t)}}s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){var r=new this.constructor(n);return o(this,new c(t,e,r)),r},s.prototype.finally=t.a,s.all=function(e){return new s(function(n,s){if(!h(e))return s(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return n([]);var a=o.length;for(var t=0;t<o.length;t++)!function e(r,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if("function"==typeof i)return void i.call(t,function(t){e(r,t)},s)}o[r]=t,0==--a&&n(o)}catch(t){s(t)}}(t,o[t])})},s.allSettled=r.a,s.resolve=function(e){return e&&"object"==typeof e&&e.constructor===s?e:new s(function(t){t(e)})},s.reject=function(r){return new s(function(t,e){e(r)})},s.race=function(n){return new s(function(t,e){if(!h(n))return e(new TypeError("Promise.race accepts an array"));for(var r=0,i=n.length;r<i;r++)s.resolve(n[r]).then(t,e)})},s._immediateFn="function"==typeof e?function(t){e(t)}:function(t){i(t,0)},s._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},f.a=s}.call(this,p(39).setImmediate)},function(t,e,r){"use strict";e.a=function(e){var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){return r.reject(t)})})}},function(t,e,r){"use strict";e.a=function(r){return new this(function(n,t){if(!r||void 0===r.length)return t(new TypeError(typeof r+" "+r+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var s=Array.prototype.slice.call(r);if(0===s.length)return n([]);var o=s.length;for(var e=0;e<s.length;e++)!function e(r,t){if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if("function"==typeof i)return void i.call(t,function(t){e(r,t)},function(t){s[r]={status:"rejected",reason:t},0==--o&&n(s)})}s[r]={status:"fulfilled",value:t},0==--o&&n(s)}(e,s[e])})}},function(t,e,r){"use strict";var h=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},i)).join("")?void 0:1}catch(t){return}}()?Object.assign:function(t,e){for(var r,i=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),n=1;n<arguments.length;n++){for(var s in r=Object(arguments[n]))u.call(r,s)&&(i[s]=r[s]);if(h)for(var o=h(r),a=0;a<o.length;a++)l.call(r,o[a])&&(i[o[a]]=r[o[a]])}return i}},function(t,C,P){!function(f,_){var w;!function(){C&&C.nodeType,f&&f.nodeType;var t="object"==typeof _&&_;t.global!==t&&t.window!==t&&t.self;var e,y=2147483647,m=36,v=1,x=26,n=38,s=700,g=72,E=128,T="-",r=/^xn--/,i=/[^\x20-\x7E]/,o=/[\x2E\u3002\uFF0E\uFF61]/g,a={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=m-v,b=Math.floor,A=String.fromCharCode;function S(t){throw RangeError(a[t])}function u(t,e){for(var r=t.length,i=[];r--;)i[r]=e(t[r]);return i}function l(t,e){var r=t.split("@"),i="";return 1<r.length&&(i=r[0]+"@",t=r[1]),i+u((t=t.replace(o,".")).split("."),e).join(".")}function I(t){for(var e,r,i=[],n=0,s=t.length;n<s;)55296<=(e=t.charCodeAt(n++))&&e<=56319&&n<s?56320==(64512&(r=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&r)+65536):(i.push(e),n--):i.push(e);return i}function p(t){return u(t,function(t){var e="";return 65535<t&&(e+=A((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=A(t)}).join("")}function R(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function O(t,e,r){var i=0;for(t=r?b(t/s):t>>1,t+=b(t/e);h*x>>1<t;i+=m)t=b(t/h);return b(i+(h+1)*t/(t+n))}function c(t){var e,r,i,n,s,o,a,h=[],u=t.length,l=0,c=E,d=g,f=t.lastIndexOf(T);for(f<0&&(f=0),r=0;r<f;++r)128<=t.charCodeAt(r)&&S("not-basic"),h.push(t.charCodeAt(r));for(i=0<f?f+1:0;i<u;){for(n=l,s=1,o=m;u<=i&&S("invalid-input"),a=t.charCodeAt(i++),(m<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:m)||a>b((y-l)/s))&&S("overflow"),l+=a*s,!(a<(a=o<=d?v:d+x<=o?x:o-d));o+=m)s>b(y/(a=m-a))&&S("overflow"),s*=a;d=O(l-n,e=h.length+1,0==n),b(l/e)>y-c&&S("overflow"),c+=b(l/e),l%=e,h.splice(l++,0,c)}return p(h)}function d(t){for(var e,r,i,n,s,o,a,h,u,l,c=[],d=(t=I(t)).length,f=E,p=g,_=e=0;_<d;++_)(a=t[_])<128&&c.push(A(a));for(r=i=c.length,i&&c.push(T);r<d;){for(n=y,_=0;_<d;++_)f<=(a=t[_])&&a<n&&(n=a);for(n-f>b((y-e)/(h=r+1))&&S("overflow"),e+=(n-f)*h,f=n,_=0;_<d;++_)if((a=t[_])<f&&++e>y&&S("overflow"),a==f){for(s=e,o=m;!(s<(u=o<=p?v:p+x<=o?x:o-p));o+=m)c.push(A(R(u+(l=s-u)%(u=m-u),0))),s=b(l/u);c.push(A(R(s,0))),p=O(e,h,r==i),e=0,++r}++e,++f}return c.join("")}e={version:"1.3.2",ucs2:{decode:I,encode:p},decode:c,encode:d,toASCII:function(t){return l(t,function(t){return i.test(t)?"xn--"+d(t):t})},toUnicode:function(t){return l(t,function(t){return r.test(t)?c(t.slice(4).toLowerCase()):t})}},void 0===(w=function(){return e}.call(C,P,C,f))||(f.exports=w)}()}.call(this,P(34)(t),P(4))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(37),e.encode=e.stringify=r(38)},function(t,e,r){"use strict";t.exports=function(t,e,r,i){r=r||"=";var n={};if("string"!=typeof t||0===t.length)return n;var s=/\+/g;t=t.split(e=e||"&");e=1e3;i&&"number"==typeof i.maxKeys&&(e=i.maxKeys);var o=t.length;0<e&&e<o&&(o=e);for(var a=0;a<o;++a){var h,u=t[a].replace(s,"%20"),l=u.indexOf(r),l=0<=l?(h=u.substr(0,l),u.substr(l+1)):(h=u,""),u=decodeURIComponent(h),l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(n,u)?c(n[u])?n[u].push(l):n[u]=[n[u],l]:n[u]=l}return n};var c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";function s(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}t.exports=function(r,i,n,t){return i=i||"&",n=n||"=","object"==typeof(r=null===r?void 0:r)?a(h(r),function(t){var e=encodeURIComponent(s(t))+n;return o(r[t])?a(r[t],function(t){return e+encodeURIComponent(s(t))}).join(i):e+encodeURIComponent(s(r[t]))}).join(i):t?encodeURIComponent(s(t))+n+encodeURIComponent(s(r)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var r=[],i=0;i<t.length;i++)r.push(e(t[i],i));return r}var h=Object.keys||function(t){var e,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r}},function(t,n,s){!function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new i(r.call(setTimeout,e,arguments),clearTimeout)},n.setInterval=function(){return new i(r.call(setInterval,e,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(e,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},s(40),n.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,n.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}.call(this,s(4))},function(t,e,r){!function(t,f){!function(r,i){"use strict";var n,s,o,a,h,u,e,t;function l(t){delete s[t]}function c(t){if(o)setTimeout(c,0,t);else{var e=s[t];if(e){o=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(i,r)}}(e)}finally{l(t),o=!1}}}}function d(){function t(t){t.source===r&&"string"==typeof t.data&&0===t.data.indexOf(e)&&c(+t.data.slice(e.length))}var e="setImmediate$"+Math.random()+"$";r.addEventListener?r.addEventListener("message",t,!1):r.attachEvent("onmessage",t),h=function(t){r.postMessage(e+t,"*")}}r.setImmediate||(n=1,o=!(s={}),a=r.document,t=(t=Object.getPrototypeOf&&Object.getPrototypeOf(r))&&t.setTimeout?t:r,"[object process]"==={}.toString.call(r.process)?h=function(t){f.nextTick(function(){c(t)})}:!function(){if(r.postMessage&&!r.importScripts){var t=!0,e=r.onmessage;return r.onmessage=function(){t=!1},r.postMessage("","*"),r.onmessage=e,t}}()?h=r.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){c(t.data)},function(t){e.port2.postMessage(t)}):a&&"onreadystatechange"in a.createElement("script")?(u=a.documentElement,function(t){var e=a.createElement("script");e.onreadystatechange=function(){c(t),e.onreadystatechange=null,u.removeChild(e),e=null},u.appendChild(e)}):function(t){setTimeout(c,0,t)}:d(),t.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];return s[n]={callback:t,args:e},h(n),n++},t.clearImmediate=l)}("undefined"==typeof self?void 0===t?this:t:self)}.call(this,r(4),r(41))},function(t,e){var r,i,t=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:n}catch(t){r=n}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var a,h=[],u=!1,l=-1;function c(){u&&a&&(u=!1,a.length?h=a.concat(h):l=-1,h.length&&d())}function d(){if(!u){var t=o(c);u=!0;for(var e=h.length;e;){for(a=h,h=[];++l<e;)a&&a[l].run();l=-1,e=h.length}a=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new f(t,e)),1!==h.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,e,r){"use strict";r.r(e);function n(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var s=/iPhone/i,o=/iPod/i,a=/iPad/i,h=/\biOS-universal(?:.+)Mac\b/i,u=/\bAndroid(?:.+)Mobile\b/i,l=/Android/i,c=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,d=/Silk/i,f=/Windows Phone/i,p=/\bWindows(?:.+)ARM\b/i,_=/BlackBerry/i,y=/BB10/i,m=/Opera Mini/i,v=/\b(CriOS|Chrome)(?:.+)Mobile/i,x=/Mobile(?:.+)Firefox\b/i;var i=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(s)&&!i(f),ipod:i(o),tablet:!i(s)&&(i(a)||n(e))&&!i(f),universal:i(h),device:(i(s)||i(o)||i(a)||i(h)||n(e))&&!i(f)},amazon:{phone:i(c),tablet:!i(c)&&i(d),device:i(c)||i(d)},android:{phone:!i(f)&&i(c)||!i(f)&&i(u),tablet:!i(f)&&!i(c)&&!i(u)&&(i(d)||i(l)),device:!i(f)&&(i(c)||i(d)||i(u)||i(l))||i(/\bokhttp\b/i)},windows:{phone:i(f),tablet:i(p),device:i(f)||i(p)},other:{blackberry:i(_),blackberry10:i(y),opera:i(m),firefox:i(x),chrome:i(v),device:i(_)||i(y)||i(m)||i(x)||i(v)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(window.navigator);var g,E,T,b,A={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(g=32,T=!0,(i.tablet||i.phone)&&(i.apple.device&&(E=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(E[1],10)<11&&(T=!1),i.android.device&&(E=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(E[1],10)<7&&(T=!1)),T?g:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:i.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!i.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},S=2*Math.PI,I=180/Math.PI,R=Math.PI/180;(ee=b=b||{})[ee.POLY=0]="POLY",ee[ee.RECT=1]="RECT",ee[ee.CIRC=2]="CIRC",ee[ee.ELIP=3]="ELIP",ee[ee.RREC=4]="RREC";var O=(Object.defineProperty(w.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(w,"EMPTY",{get:function(){return new w(0,0,0,0)},enumerable:!1,configurable:!0}),w.prototype.clone=function(){return new w(this.x,this.y,this.width,this.height)},w.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},w.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},w.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},w.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},w.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},w.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},w.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},w);function w(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=b.RECT}C.prototype.clone=function(){return new C(this.x,this.y,this.radius)},C.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},C.prototype.getBounds=function(){return new O(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)};function C(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=b.CIRC}P.prototype.clone=function(){return new P(this.x,this.y,this.width,this.height)},P.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},P.prototype.getBounds=function(){return new O(this.x-this.width,this.y-this.height,this.width,this.height)};function P(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=b.ELIP}N.prototype.clone=function(){var t=new N(this.points.slice());return t.closeStroke=this.closeStroke,t},N.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r};function N(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=b.POLY,this.closeStroke=!0}M.prototype.clone=function(){return new M(this.x,this.y,this.width,this.height,this.radius)},M.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1};function M(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=b.RREC}var L=(D.prototype.clone=function(){return new D(this.x,this.y)},D.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},D.prototype.copyTo=function(t){return t.set(this.x,this.y),t},D.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},D.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},D);function D(t,e){void 0===e&&(e=0),this.x=t=void 0===t?0:t,this.y=e}var U=(F.prototype.clone=function(t,e){return new F(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},F.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},F.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},F.prototype.copyTo=function(t){return t.set(this._x,this._y),t},F.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(F.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),F);function F(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var B=(k.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},k.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},k.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},k.prototype.apply=function(t,e){e=e||new L;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},k.prototype.applyInverse=function(t,e){e=e||new L;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},k.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},k.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},k.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},k.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},k.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},k.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},k.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=-Math.atan2(-i,n),o=Math.atan2(r,e),a=Math.abs(s+o);return a<1e-5||Math.abs(S-a)<1e-5?(t.rotation=o,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=o),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx,t.position.y=this.ty,t},k.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},k.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},k.prototype.clone=function(){var t=new k;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},k.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},k.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(k,"IDENTITY",{get:function(){return new k},enumerable:!1,configurable:!0}),Object.defineProperty(k,"TEMP_MATRIX",{get:function(){return new k},enumerable:!1,configurable:!0}),k);function k(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var G=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],X=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],H=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],V=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],j=[],Y=[],z=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];j.push(e);for(var r=0;r<16;r++)for(var i=z(G[t]*G[r]+H[t]*X[r]),n=z(X[t]*G[r]+V[t]*X[r]),s=z(G[t]*H[r]+H[t]*V[r]),o=z(X[t]*H[r]+V[t]*V[r]),a=0;a<16;a++)if(G[a]===i&&X[a]===n&&H[a]===s&&V[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new B;h.set(G[t],X[t],H[t],V[t],0,0),Y.push(h)}}();var W={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return G[t]},uY:function(t){return X[t]},vX:function(t){return H[t]},vY:function(t){return V[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return j[t][e]},sub:function(t,e){return j[t][W.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?W.S:W.N:2*Math.abs(e)<=Math.abs(t)?0<t?W.E:W.W:0<e?0<t?W.SE:W.SW:0<t?W.NE:W.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=Y[W.inv(e)];e.tx=r,e.ty=i,t.append(e)}},Z=(K.prototype.onChange=function(){this._localID++},K.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},K.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},K.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},K.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(K.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),K.IDENTITY=new K,K);function K(){this.worldTransform=new B,this.localTransform=new B,this.position=new U(this.onChange,this,0,0),this.scale=new U(this.onChange,this,1,1),this.pivot=new U(this.onChange,this,0,0),this.skew=new U(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}var q,J,Q,$,tt,et,rt,it,nt,st,ot,at,ht,ut,lt,ct,dt,ft=r(2),pt=r.n(ft),_t=(r(5),r(0));(xe=q=q||{})[xe.WEBGL_LEGACY=0]="WEBGL_LEGACY",xe[xe.WEBGL=1]="WEBGL",xe[xe.WEBGL2=2]="WEBGL2",(Oe=J=J||{})[Oe.UNKNOWN=0]="UNKNOWN",Oe[Oe.WEBGL=1]="WEBGL",Oe[Oe.CANVAS=2]="CANVAS",(Le=Q=Q||{})[Le.COLOR=16384]="COLOR",Le[Le.DEPTH=256]="DEPTH",Le[Le.STENCIL=1024]="STENCIL",(kt=$=$||{})[kt.NORMAL=0]="NORMAL",kt[kt.ADD=1]="ADD",kt[kt.MULTIPLY=2]="MULTIPLY",kt[kt.SCREEN=3]="SCREEN",kt[kt.OVERLAY=4]="OVERLAY",kt[kt.DARKEN=5]="DARKEN",kt[kt.LIGHTEN=6]="LIGHTEN",kt[kt.COLOR_DODGE=7]="COLOR_DODGE",kt[kt.COLOR_BURN=8]="COLOR_BURN",kt[kt.HARD_LIGHT=9]="HARD_LIGHT",kt[kt.SOFT_LIGHT=10]="SOFT_LIGHT",kt[kt.DIFFERENCE=11]="DIFFERENCE",kt[kt.EXCLUSION=12]="EXCLUSION",kt[kt.HUE=13]="HUE",kt[kt.SATURATION=14]="SATURATION",kt[kt.COLOR=15]="COLOR",kt[kt.LUMINOSITY=16]="LUMINOSITY",kt[kt.NORMAL_NPM=17]="NORMAL_NPM",kt[kt.ADD_NPM=18]="ADD_NPM",kt[kt.SCREEN_NPM=19]="SCREEN_NPM",kt[kt.NONE=20]="NONE",kt[kt.SRC_OVER=0]="SRC_OVER",kt[kt.SRC_IN=21]="SRC_IN",kt[kt.SRC_OUT=22]="SRC_OUT",kt[kt.SRC_ATOP=23]="SRC_ATOP",kt[kt.DST_OVER=24]="DST_OVER",kt[kt.DST_IN=25]="DST_IN",kt[kt.DST_OUT=26]="DST_OUT",kt[kt.DST_ATOP=27]="DST_ATOP",kt[kt.ERASE=26]="ERASE",kt[kt.SUBTRACT=28]="SUBTRACT",kt[kt.XOR=29]="XOR",(e=tt=tt||{})[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",(ee=et=et||{})[ee.RGBA=6408]="RGBA",ee[ee.RGB=6407]="RGB",ee[ee.ALPHA=6406]="ALPHA",ee[ee.LUMINANCE=6409]="LUMINANCE",ee[ee.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",ee[ee.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",ee[ee.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(ft=rt=rt||{})[ft.TEXTURE_2D=3553]="TEXTURE_2D",ft[ft.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",ft[ft.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",ft[ft.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",ft[ft.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",ft[ft.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",ft[ft.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",ft[ft.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",ft[ft.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(xe=it=it||{})[xe.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",xe[xe.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",xe[xe.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",xe[xe.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",xe[xe.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",xe[xe.FLOAT=5126]="FLOAT",xe[xe.HALF_FLOAT=36193]="HALF_FLOAT",(Oe=nt=nt||{})[Oe.NEAREST=0]="NEAREST",Oe[Oe.LINEAR=1]="LINEAR",(Le=st=st||{})[Le.CLAMP=33071]="CLAMP",Le[Le.REPEAT=10497]="REPEAT",Le[Le.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(kt=ot=ot||{})[kt.OFF=0]="OFF",kt[kt.POW2=1]="POW2",kt[kt.ON=2]="ON",(e=at=at||{})[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(ee=ht=ht||{})[ee.NO=0]="NO",ee[ee.YES=1]="YES",ee[ee.AUTO=2]="AUTO",ee[ee.BLEND=0]="BLEND",ee[ee.CLEAR=1]="CLEAR",ee[ee.BLIT=2]="BLIT",(ft=ut=ut||{})[ft.AUTO=0]="AUTO",ft[ft.MANUAL=1]="MANUAL",(xe=lt=lt||{}).LOW="lowp",xe.MEDIUM="mediump",xe.HIGH="highp",(Oe=ct=ct||{})[Oe.NONE=0]="NONE",Oe[Oe.SCISSOR=1]="SCISSOR",Oe[Oe.STENCIL=2]="STENCIL",Oe[Oe.SPRITE=3]="SPRITE",(Le=dt=dt||{})[Le.NONE=0]="NONE",Le[Le.LOW=2]="LOW",Le[Le.MEDIUM=4]="MEDIUM",Le[Le.HIGH=8]="HIGH",A.RETINA_PREFIX=/@([0-9\.]+)x/;var yt,mt=!(A.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0),vt="5.3.9";var xt=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[$.NORMAL_NPM]=$.NORMAL,t[$.ADD_NPM]=$.ADD,t[$.SCREEN_NPM]=$.SCREEN,e[$.NORMAL]=$.NORMAL_NPM,e[$.ADD]=$.ADD_NPM,e[$.SCREEN]=$.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function gt(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function Et(t){return!(t&t-1||!t)}function Tt(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}function bt(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}function At(t){return 0===t?0:t<0?-1:1}var St=0;var It={};function Rt(t,e,r){var i;void 0===r&&(r=3),It[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),It[e]=!0)}var Ot={},wt=Object.create(null),Ct=Object.create(null);Pt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},Pt.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},Pt.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(Pt.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Pt.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function Pt(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||A.RESOLUTION,this.resize(t,e)}var Nt;function Mt(t,e){t=A.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}A.SORTABLE_CHILDREN=!1;var Lt=(Dt.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Dt.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Dt.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?O.EMPTY:((t=t||new O(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},Dt.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},Dt.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},Dt.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},Dt.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},Dt.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},Dt.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},Dt.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},Dt.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},Dt.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},Dt.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},Dt.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},Dt.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},Dt.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},Dt);function Dt(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var Ut=function(t,e){return(Ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Ft(t,e){function r(){this.constructor=t}Ut(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Bt,kt=(Ft(Gt,Bt=pt.a),Gt.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(Gt.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},Gt.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},Gt.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},Gt.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new O),e=this._boundsRect),this._bounds.getRectangle(e)},Gt.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new O),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Lt);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},Gt.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},Gt.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},Gt.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},Gt.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},Gt.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(Gt.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Ht),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),Gt.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},Gt.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(Gt.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(Gt.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(Gt.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(Gt.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(Gt.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Gt.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Gt.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Gt.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Gt.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(Gt.prototype,"angle",{get:function(){return this.transform.rotation*I},set:function(t){this.transform.rotation=t*R},enumerable:!1,configurable:!0}),Object.defineProperty(Gt.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Gt.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(Gt.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),Gt);function Gt(){var t=Bt.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new Z,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Lt,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var Xt,Ht=(Ft(Vt,Xt=kt),Vt);function Vt(){var t=null!==Xt&&Xt.apply(this,arguments)||this;return t.sortDirty=null,t}function jt(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}kt.prototype.displayObjectUpdateTransform=kt.prototype.updateTransform;var Yt,zt=(Ft(Wt,Yt=kt),Wt.prototype.onChildrenChange=function(t){},Wt.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},Wt.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},Wt.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},Wt.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},Wt.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);bt(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},Wt.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},Wt.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,bt(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},Wt.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,bt(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},Wt.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Wt.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(jt),this.sortDirty=!1},Wt.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},Wt.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},Wt.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=Yt.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},Wt.prototype._calculateBounds=function(){},Wt.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},Wt.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},Wt.prototype._render=function(t){},Wt.prototype.destroy=function(t){Yt.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(Wt.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Wt.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),Wt);function Wt(){var t=Yt.call(this)||this;return t.children=[],t.sortableChildren=A.SORTABLE_CHILDREN,t.sortDirty=!1,t}zt.prototype.containerUpdateTransform=zt.prototype.updateTransform;var Zt,Kt=(qt.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},qt.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},qt.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},qt.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},qt.prototype.contains=function(t){return-1!==this.items.indexOf(t)},qt.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},qt.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(qt.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(qt.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),qt);function qt(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(Kt.prototype,{dispatch:{value:Kt.prototype.emit},run:{value:Kt.prototype.emit}}),A.TARGET_FPMS=.06,(e=Zt=Zt||{})[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY";var Jt=(Qt.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},Qt.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},Qt.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},Qt.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},Qt);function Qt(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.fn=t,this.context=e,this.priority=r,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}var $t=(te.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},te.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},te.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},te.prototype.add=function(t,e,r){return void 0===r&&(r=Zt.NORMAL),this._addListener(new Jt(t,e,r))},te.prototype.addOnce=function(t,e,r){return void 0===r&&(r=Zt.NORMAL),this._addListener(new Jt(t,e,r,!0))},te.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},te.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(te.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),te.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},te.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},te.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},te.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(te.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(te,"shared",{get:function(){var t;return te._shared||((t=te._shared=new te).autoStart=!0,t._protected=!0),te._shared},enumerable:!1,configurable:!0}),Object.defineProperty(te,"system",{get:function(){var t;return te._system||((t=te._system=new te).autoStart=!0,t._protected=!0),te._system},enumerable:!1,configurable:!0}),te);function te(){var e=this;this._head=new Jt(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}var ee=(re.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,Zt.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?$t.shared:new $t,t.autoStart&&this.start()},re.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())},re);function re(){}A.PREFER_ENV=i.any?q.WEBGL:q.WEBGL2,A.STRICT_TEXTURE_CACHE=!1;var ie=[];function ne(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=ie.length-1;0<=n;--n){var s=ie[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var se=function(t,e){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function oe(t,e){function r(){this.constructor=t}se(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var ae=(he.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},he.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},he.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(he.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),he.prototype.update=function(){this.destroyed||this.onUpdate.emit()},he.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(he.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),he.prototype.style=function(t,e,r){return!1},he.prototype.dispose=function(){},he.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},he.test=function(t,e){return!1},he);function he(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Kt("setRealSize"),this.onUpdate=new Kt("update"),this.onError=new Kt("onError")}var ue,le=(oe(ce,ue=ae),ce.prototype.upload=function(t,e,r){t=t.gl;return t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===at.UNPACK),r.width===e.width&&r.height===e.height?t.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(r.width=e.width,r.height=e.height,t.texImage2D(e.target,0,r.internalFormat,e.width,e.height,0,e.format,r.type,this.data)),!0},ce.prototype.dispose=function(){this.data=null},ce.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},ce);function ce(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=ue.call(this,e,i)||this).data=t,r}var de,fe={scaleMode:nt.NEAREST,format:et.RGBA,alphaMode:at.NPM},pe=(oe(_e,de=pt.a),Object.defineProperty(_e.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(_e.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),_e.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},_e.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},_e.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},_e.prototype._refreshPOT=function(){this.isPowerOfTwo=Et(this.realWidth)&&Et(this.realHeight)},_e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},_e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},_e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},_e.prototype.onError=function(t){this.emit("error",this,t)},_e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ct[this.cacheId],delete wt[this.cacheId],this.cacheId=null),this.dispose(),_e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},_e.prototype.dispose=function(){this.emit("dispose",this)},_e.prototype.castToBaseTexture=function(){return this},_e.from=function(t,e,r){void 0===r&&(r=A.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(t._pixiId="pixiid_"+ ++St),t._pixiId),s=Ct[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new _e(t,e)).cacheId=n,_e.addToCache(s,n)),s},_e.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new le(t,{width:e,height:r}),t=t instanceof Float32Array?it.FLOAT:it.UNSIGNED_BYTE;return new _e(n,Object.assign(fe,i||{width:e,height:r,type:t}))},_e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Ct[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),Ct[e]=t)},_e.removeFromCache=function(t){if("string"==typeof t){var e=Ct[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete Ct[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete Ct[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},_e._globalBatch=0,_e);function _e(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=de.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,p=e.resourceOptions;return!t||t instanceof ae||((t=ne(t,p)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||A.RESOLUTION,r.mipmap=void 0!==n?n:A.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:A.ANISOTROPIC_LEVEL,r.wrapMode=u||A.WRAP_MODE,r.scaleMode=void 0!==o?o:A.SCALE_MODE,r.format=l||et.RGBA,r.type=c||it.UNSIGNED_BYTE,r.target=d||rt.TEXTURE_2D,r.alphaMode=void 0!==i?i:at.UNPACK,void 0!==e.premultiplyAlpha&&(r.premultiplyAlpha=e.premultiplyAlpha),r.uid=++St,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var ye,ft=(oe(me,ye=ae),me.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof ae?this.addResourceAt(t[r],r):this.addResourceAt(ne(t[r],e),r))},me.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},me.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},me.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");ye.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},me.prototype.unbind=function(t){ye.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},me.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},me);function me(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=ye.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new pe;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var ve,xe=(oe(ge,ve=ft),ge.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},ge.prototype.bind=function(t){ve.prototype.bind.call(this,t),t.target=rt.TEXTURE_2D_ARRAY},ge.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},ge);function ge(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=ve.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var Ee,Te=(oe(be,Ee=ae),be.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,(Nt=Nt||document.createElement("a")).href=t;var r=Object(_t.parse)(Nt.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},be.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===at.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},be.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),Ee.prototype.update.call(this))},be.prototype.dispose=function(){this.source=null},be);function be(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=Ee.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var Ae,Se=(oe(Ie,Ae=Te),Ie.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},Ie);function Ie(){return null!==Ae&&Ae.apply(this,arguments)||this}var Re,Oe=(oe(we,Re=ft),we.prototype.bind=function(t){Re.prototype.bind.call(this,t),t.target=rt.TEXTURE_CUBE_MAP},we.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=rt.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},we.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<we.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},we.test=function(t){return Array.isArray(t)&&t.length===we.SIDES},we.SIDES=6,we);function we(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==we.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=Re.call(this,6,{width:n,height:s})||this,a=0;a<we.SIDES;a++)r.items[a].target=rt.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var Ce,Pe=(oe(Ne,Ce=Te),Ne.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},Ne.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===at.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},Ne.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return Ce.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(Ce.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},Ne.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,Ce.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},Ne.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},Ne);function Ne(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,Te.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=Ce.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,void 0!==e.premultiplyAlpha&&(i.premultiplyAlpha=e.premultiplyAlpha),i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var Me,Le=(oe(De,Me=Te),De.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},De.prototype._loadSvg=function(){var s=this,o=new Image;Te.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++St,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},De.getSize=function(t){var e=De.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},De.prototype.dispose=function(){Me.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},De.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},De.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,De);function De(t,e){var r=this;return e=e||{},(r=Me.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var Ue,kt=(oe(Fe,Ue=Te),Fe.prototype.update=function(t){void 0===t&&(t=0),this.destroyed||(t=$t.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(Ue.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},Fe.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},Fe.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},Fe.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},Fe.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},Fe.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&($t.shared.add(this.update,this),this._isConnectedToTicker=!0)},Fe.prototype._onPlayStop=function(){this._isConnectedToTicker&&($t.shared.remove(this.update,this),this._isConnectedToTicker=!1)},Fe.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},Fe.prototype.dispose=function(){this._isConnectedToTicker&&$t.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),Ue.prototype.dispose.call(this)},Object.defineProperty(Fe.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?($t.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&($t.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(Fe.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),Fe.test=function(t,e){return t instanceof HTMLVideoElement||-1<Fe.TYPES.indexOf(e)},Fe.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Fe.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},Fe);function Fe(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];Te.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||Fe.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=Ue.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var Be,e=(oe(ke,Be=Te),ke.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},ke);function ke(){return null!==Be&&Be.apply(this,arguments)||this}ie.push(Pe,e,Se,kt,Le,le,Oe,xe);Ge.prototype.destroy=function(){this.renderer=null},xe=Ge;function Ge(t){this.renderer=t}var Xe,He=(oe(Ve,Xe=le),Ve.prototype.upload=function(t,e,r){var i=t.gl;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===at.UNPACK),r.width===e.width&&r.height===e.height?i.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(r.width=e.width,r.height=e.height,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},Ve);function Ve(){return null!==Xe&&Xe.apply(this,arguments)||this}var je=(Object.defineProperty(Ye.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),Ye.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new pe(null,{scaleMode:nt.NEAREST,resolution:1,mipmap:ot.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Ye.prototype.addDepthTexture=function(t){return this.depthTexture=t||new pe(new He(null,{width:this.width,height:this.height}),{scaleMode:nt.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ot.OFF,format:et.DEPTH_COMPONENT,type:it.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Ye.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Ye.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Ye.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},Ye.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Ye.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},Ye);function Ye(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Kt("disposeFramebuffer"),this.multisample=dt.NONE}var ze,We=(oe(Ze,ze=pe),Ze.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},Ze.prototype.dispose=function(){this.framebuffer.dispose(),ze.prototype.dispose.call(this)},Ze.prototype.destroy=function(){ze.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},Ze);function Ze(t){var e=this,e=ze.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=0,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new je(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var Ke=(qe.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=W.add(r,W.NW),this.x0=s+i*W.uX(r),this.y0=e+n*W.uY(r),r=W.add(r,2),this.x1=s+i*W.uX(r),this.y1=e+n*W.uY(r),r=W.add(r,2),this.x2=s+i*W.uX(r),this.y2=e+n*W.uY(r),r=W.add(r,2),this.x3=s+i*W.uX(r),this.y3=e+n*W.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},qe);function qe(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var Je,Qe=new Ke,$e=(oe(tr,Je=pt.a),tr.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},tr.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},tr.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture)&&t.url&&wt[t.url]&&tr.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,tr.removeFromCache(this),this.textureCacheIds=null},tr.prototype.clone=function(){return new tr(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},tr.prototype.updateUvs=function(){this._uvs===Qe&&(this._uvs=new Ke),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},tr.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=A.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(t._pixiId="pixiid_"+ ++St),t._pixiId),s=wt[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=Mt(t)),(s=new tr(new pe(t,e))).baseTexture.cacheId=n,pe.addToCache(s.baseTexture,n),tr.addToCache(s,n)),s},tr.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=tr.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},tr.fromBuffer=function(t,e,r,i){return new tr(pe.fromBuffer(t,e,r,i))},tr.fromLoader=function(t,e,r){t=new Pe(t);t.url=e;t=new tr(new pe(t,{scaleMode:A.SCALE_MODE,resolution:Mt(e)}));return pe.addToCache(t.baseTexture,r=r||e),tr.addToCache(t,r),r!==e&&(pe.addToCache(t.baseTexture,e),tr.addToCache(t,e)),t},tr.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),wt[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),wt[e]=t)},tr.removeFromCache=function(t){if("string"==typeof t){var e=wt[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete wt[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)wt[t.textureCacheIds[i]]===t&&delete wt[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(tr.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(tr.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(tr.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(tr.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(tr.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),tr.prototype.castToBaseTexture=function(){return this.baseTexture},tr);function tr(t,e,r,i,n,s){var o=Je.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new O(0,0,1,1)),t instanceof tr&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=Qe,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new L(s.x,s.y):new L(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function er(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}$e.EMPTY=new $e(new pe),er($e.EMPTY),er($e.EMPTY.baseTexture),$e.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new $e(new pe(new Se(t)))}(),er($e.WHITE),er($e.WHITE.baseTexture);var rr,ir=(oe(nr,rr=$e),Object.defineProperty(nr.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),nr.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},nr.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},nr.create=function(t){return new nr(new We(t="number"==typeof t?{width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t))},nr);function nr(t,e){var r,i,n,s,o=this,a=null;return t instanceof We||(r=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4],console.warn("Please use RenderTexture.create("+r+", "+i+") instead of the ctor directly."),a=arguments[0],e=null,t=new We({width:r,height:i,scaleMode:n,resolution:s})),(o=rr.call(this,t,e)||this).legacyRenderer=a,o.valid=!0,o.filterFrame=null,o.filterPoolKey=null,o.updateUvs(),o}var sr=(or.prototype.createTexture=function(t,e){e=new We(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new ir(e)},or.prototype.getOptimalTexture=function(t,e,r){var i=or.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=gt(t)))<<16|65535&(e=gt(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},or.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},or.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},or.prototype.returnFilterTexture=function(t){this.returnTexture(t)},or.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},or.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=or.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},or.SCREEN_KEY="screen",or);function or(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var ar=(hr.prototype.destroy=function(){this.buffer=null},hr.from=function(t,e,r,i,n){return new hr(t,e,r,i,n)},hr);function hr(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=5126),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var ur=0,lr=(cr.prototype.update=function(t){this.data=t||this.data,this._updateID++},cr.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},cr.prototype.destroy=function(){this.dispose(),this.data=null},cr.from=function(t){return new cr(t=t instanceof Array?new Float32Array(t):t)},cr);function cr(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=ur++,this.disposeRunner=new Kt("disposeBuffer")}function dr(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var fr={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var pr={5126:4,5123:2,5121:1},_r=0,yr={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Oe=(mr.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof lr||(e instanceof Array&&(e=new Float32Array(e)),e=new lr(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new ar(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},mr.prototype.getAttribute=function(t){return this.attributes[t]},mr.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},mr.prototype.addIndex=function(t){return t instanceof lr||(t instanceof Array&&(t=new Uint16Array(t)),t=new lr(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},mr.prototype.getIndex=function(){return this.indexBuffer},mr.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new lr;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*pr[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=dr(l);n[c]||(n[c]=new fr[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},mr.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},mr.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},mr.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},mr.prototype.clone=function(){for(var t=new mr,e=0;e<this.buffers.length;e++)t.buffers[e]=new lr(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new ar(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},mr.merge=function(t){for(var e=new mr,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new yr[dr(o.buffers[s].data)](i[s]),e.buffers[s]=new lr(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*pr[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},mr);function mr(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=_r++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Kt("disposeGeometry"),this.refCount=0}var vr,xr=(oe(gr,vr=Oe),gr);function gr(){var t=vr.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var Er,Tr=(oe(br,Er=Oe),br.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},br.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},br);function br(){var t=Er.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new lr(t.vertices),t.uvBuffer=new lr(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var Ar=0,Sr=(Ir.prototype.update=function(){this.dirtyId++},Ir.prototype.add=function(t,e,r){this.uniforms[t]=new Ir(e,r)},Ir.from=function(t,e){return new Ir(t,e)},Ir);function Ir(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Ar++,this.static=!!e}var Rr=(Or.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},Or);function Or(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new O,this.destinationFrame=new O,this.filters=[]}var wr,Cr=(oe(Pr,wr=xe),Pr.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new Rr,s=e[0].resolution,o=e[0].padding,a=e[0].autoFit,h=e[0].legacy,u=1;u<e.length;u++)var l=e[u],s=Math.min(s,l.resolution),o=this.useMaxPadding?Math.max(o,l.padding):o+l.padding,a=a&&l.autoFit,h=h||l.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=r.renderTexture.current),i.push(n),n.resolution=s,n.legacy=h,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(o),a&&n.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),n.sourceFrame.ceil(s),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,s),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;t=this.tempRect;t.width=n.sourceFrame.width,t.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,r.renderTexture.bind(n.renderTexture,n.sourceFrame,t),r.renderTexture.clear()},Pr.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,ht.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,ht.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,ht.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},Pr.prototype.bindAndClear=function(t,e){var r;void 0===e&&(e=ht.CLEAR),t&&t.filterFrame?((r=this.tempRect).width=t.filterFrame.width,r.height=t.filterFrame.height,this.renderer.renderTexture.bind(t,t.filterFrame,r)):this.renderer.renderTexture.bind(t),"boolean"==typeof e&&(e=e?ht.CLEAR:ht.BLEND,Rt("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(e===ht.CLEAR||e===ht.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},Pr.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.state.set(t.state),n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(tt.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(tt.TRIANGLE_STRIP))},Pr.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(B.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},Pr.prototype.destroy=function(){this.texturePool.clear(!1)},Pr.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},Pr.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},Pr.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},Pr.prototype.emptyPool=function(){this.texturePool.clear(!0)},Pr.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},Pr);function Pr(t){var e=wr.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new sr,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new xr,e.quadUv=new Tr,e.tempRect=new O,e.activeState={},e.globalUniforms=new Sr({outputFrame:e.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var Nr=(Mr.prototype.flush=function(){},Mr.prototype.destroy=function(){this.renderer=null},Mr.prototype.start=function(){},Mr.prototype.stop=function(){this.flush()},Mr.prototype.render=function(t){},Mr);function Mr(t){this.renderer=t}var Lr,Dr=(oe(Ur,Lr=xe),Ur.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},Ur.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},Ur.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},Ur.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},Ur.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},Ur);function Ur(t){var e=Lr.call(this,t)||this;return e.emptyRenderer=new Nr(t),e.currentRenderer=e.emptyRenderer,e}var Fr,Br=0,kr=(oe(Gr,Fr=xe),Object.defineProperty(Gr.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),Gr.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Br++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},Gr.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Br++,this.renderer.runners.contextChange.emit(t)},Gr.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},Gr.prototype.createContext=function(t,e){var r;if(r=A.PREFER_ENV>=q.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},Gr.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},Gr.prototype.handleContextLost=function(t){t.preventDefault()},Gr.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},Gr.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},Gr.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},Gr.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},Gr);function Gr(t){var e=Fr.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var Xr,Hr=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=dt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},Vr=new O,jr=(oe(Yr,Xr=xe),Yr.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new O,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,A.PREFER_ENV===q.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},Yr.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},Yr.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(Yr.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),Yr.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=Q.COLOR|Q.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},Yr.prototype.initFramebuffer=function(t){var e=this.gl,e=new Hr(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},Yr.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},Yr.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},Yr.prototype.detectSamples=function(t){var e=this.msaaSamples,r=dt.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?dt.NONE:r},Yr.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new je(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=Vr).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},Yr.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},Yr.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},Yr.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},Yr.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new O},Yr);function Yr(t){t=Xr.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new je(10,10),t.msaaSamples=null,t}var zr,Wr=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Zr={5126:4,5123:2,5121:1},Kr=(oe(qr,zr=xe),qr.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=A.PREFER_ENV===q.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},qr.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},qr.prototype.reset=function(){this.unbind()},qr.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},qr.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},qr.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},qr.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*Zr[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*Zr[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*Zr[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new Wr(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},qr.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},qr.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},qr.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},qr.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},qr.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},qr.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},qr);function qr(t){t=zr.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var Jr=(Qr.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=ct.NONE,this.autoDetect=!0),this._target=null},Qr.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},Qr);function Qr(t){void 0===t&&(t=null),this.type=ct.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function $r(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function ti(t,e,r,i){var n=$r(t,t.VERTEX_SHADER,e),s=$r(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function ei(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function ri(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return ei(2*e);case"bvec3":return ei(3*e);case"bvec4":return ei(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ii,ni={},si=ni;function oi(){var t,e;return(si===ni||si&&si.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=A.PREFER_ENV>=q.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),si=e),si}function ai(t,e,r){if("precision"===t.substring(0,9))return r!==lt.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===lt.HIGH&&r!==lt.HIGH?lt.MEDIUM:e)+" float;\n"+t}var hi={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var ui=null,li={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function ci(t,e){if(!ui){var r=Object.keys(li);ui={};for(var i=0;i<r.length;++i){var n=r[i];ui[t[n]]=li[n]}}return ui[e]}var di=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],fi={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},pi={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var _i,yi=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function mi(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=yi.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var vi=0,xi={},gi=(Ei.prototype.extractData=function(t,e){var r=oi();r?(e=ti(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},Ei.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=ci(e,o.type),a={type:a,name:o.name,size:hi[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},Ei.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=ci(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:ri(h,s.size)}}return r},Object.defineProperty(Ei,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Ei,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),Ei.from=function(t,e,r){var i=t+e,n=Ot[i];return n||(Ot[i]=n=new Ei(t,e,r)),n},Ei);function Ei(t,e,r){void 0===r&&(r="pixi-shader"),this.id=vi++,this.vertexSrc=t||Ei.defaultVertexSrc,this.fragmentSrc=e||Ei.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),xi[r]?(xi[r]++,r+="-"+xi[r]):xi[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=ai(this.vertexSrc,A.PRECISION_VERTEX,lt.HIGH),this.fragmentSrc=ai(this.fragmentSrc,A.PRECISION_FRAGMENT,(ii||(ii=lt.MEDIUM,(r=oi())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),ii=r.precision?lt.HIGH:lt.MEDIUM)),ii))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var Ti=(bi.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},bi.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(bi.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),bi.from=function(t,e,r){return new bi(gi.from(t,e),r)},bi);function bi(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof Sr?e:new Sr(e):new Sr({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var Ai=(Object.defineProperty(Si.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(Si.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(Si.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(Si.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(Si.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(Si.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==$.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Si.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),Si.for2d=function(){var t=new Si;return t.depthTest=!1,t.blend=!0,t},Si);function Si(){this.data=0,this.blendMode=$.NORMAL,this.polygonOffset=0,this.blend=!0}var Ii,Le=(oe(Ri,Ii=Ti),Ri.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(Ri.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ri,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Ri,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),Ri);function Ri(t,e,r){var i=this,e=gi.from(t||Ri.defaultVertexSrc,e||Ri.defaultFragmentSrc);return(i=Ii.call(this,e,r)||this).padding=0,i.resolution=A.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new Ai,i}var Oi=new B,wi=(Object.defineProperty(Ci.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),Ci.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},Ci.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(Oi.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Oi));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},Ci);function Ci(t,e){this._texture=t,this.mapCoord=new B,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var Pi,Ni=(oe(Mi,Pi=Le),Mi.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new wi(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},Mi);function Mi(t){var e=this,r=new B,e=Pi.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var Li,Di=(oe(Ui,Li=xe),Ui.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},Ui.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new Jr).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case ct.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case ct.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case ct.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},Ui.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case ct.SCISSOR:this.renderer.scissor.pop();break;case ct.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case ct.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},Ui.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=ct.SPRITE:(t.type=ct.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=ct.SCISSOR)))},Ui.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new Ni(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},Ui.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},Ui);function Ui(t){t=Li.call(this,t)||this;return t.enableScissor=!1,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var Fi,kt=(oe(Bi,Fi=xe),Bi.prototype.getStackLength=function(){return this.maskStack.length},Bi.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},Bi.prototype._useCurrent=function(){},Bi.prototype.destroy=function(){Fi.prototype.destroy.call(this),this.maskStack=null},Bi);function Bi(t){t=Fi.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var ki,Gi=(oe(Xi,ki=kt),Xi.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},Xi.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},Xi.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},Xi.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,r=(t.x-n.x)*o+s.x,n=(t.y-n.y)*o+s.y,s=t.width*o,t=t.height*o;i&&(r+=i.tx*o,n+=i.ty*o),e||(n=this.renderer.height-t-n),this.renderer.gl.scissor(r,n,s,t)},Xi);function Xi(t){t=ki.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var Hi,Vi=(oe(ji,Hi=kt),ji.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},ji.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},ji.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},ji.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},ji.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},ji);function ji(t){t=Hi.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var Yi,zi=(oe(Wi,Yi=xe),Wi.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},Wi.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},Wi.prototype.setTransform=function(t){},Wi);function Wi(t){t=Yi.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new B,t.transform=null,t}var Zi,Ki=new O,qi=new O,Ji=new O,Qi=(oe($i,Zi=xe),$i.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(Ki.width=t.frame.width,Ki.height=t.frame.height,e=Ki),r||(qi.x=t.frame.x,qi.y=t.frame.y,qi.width=e.width,qi.height=e.height,r=qi),n=i.framebuffer):(s=o.resolution,e||(Ki.width=o.screen.width,Ki.height=o.screen.height,e=Ki),r||((r=Ki).width=e.width,r.height=e.height)),Ji.x=r.x*s,Ji.y=r.y*s,Ji.width=r.width*s,Ji.height=r.height*s,this.renderer.framebuffer.bind(n,Ji),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},$i.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e)},$i.prototype.resize=function(){this.bind(null)},$i.prototype.reset=function(){this.bind(null)},$i);function $i(t){var e=Zi.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new O,e.destinationFrame=new O,e}var tn=(en.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},en);function en(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var rn,nn=0,sn={textureCount:0},on=(oe(an,rn=xe),an.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof _i)return _i;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");_i=!0===t({a:"b"},"a","b")}catch(t){_i=!1}return _i}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},an.prototype.contextChange=function(t){this.gl=t,this.reset()},an.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(sn.textureCount=0,this.syncUniformGroup(t.uniformGroup,sn)),i},an.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},an.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},an.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},an.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<di.length;h++)if(di[h].test(n,o)){i.push(di[h].code(r,o)),a=!0;break}a||(s=(1===n.size?fi:pi)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},an.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},an.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},an.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=ti(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:ri(a.type,a.size)}}t=new tn(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},an.prototype.reset=function(){this.program=null,this.shader=null},an.prototype.destroy=function(){this.destroyed=!0},an);function an(t){t=rn.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=nn++,t}var hn,un=(oe(ln,hn=xe),ln.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[$.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.ADD]=[t.ONE,t.ONE],e[$.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.NONE]=[0,0],e[$.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[$.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[$.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[$.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[$.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[$.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[$.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[$.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[$.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[$.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[$.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},ln.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},ln.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},ln.prototype.setBlend=function(t){this.updateCheck(ln.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},ln.prototype.setOffset=function(t){this.updateCheck(ln.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},ln.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},ln.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},ln.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},ln.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},ln.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},ln.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},ln.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},ln.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},ln.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},ln);function ln(t){t=hn.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=$.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.checks=[],t.defaultState=new Ai,t.defaultState.blend=!0,t}var cn,dn=(oe(fn,cn=xe),fn.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ut.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},fn.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},fn.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},fn);function fn(t){t=cn.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=A.GC_MAX_IDLE,t.checkCountMax=A.GC_MAX_CHECK_COUNT,t.mode=A.GC_MODE,t}var pn,_n=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},yn=(oe(mn,pn=xe),mn.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new _n(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new _n(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},mn.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},mn.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},mn.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},mn.prototype.initTexture=function(t){var e=new _n(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},mn.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===it.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},mn.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)||(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},mn.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&bt(this.managedTextures,t,1))},mn.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==ot.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=st.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},mn.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===nt.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===nt.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===nt.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===nt.LINEAR?i.LINEAR:i.NEAREST)},mn);function mn(t){t=pn.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new pe,t}var vn,xn=new B,e=(oe(gn,vn=pt.a),gn.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(gn.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(gn.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),gn.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},gn.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=ir.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return xn.tx=-i.x,xn.ty=-i.y,this.render(t,r,!1,xn,!!t.parent),r},gn.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=J.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(gn.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),gn);function gn(t,e){void 0===t&&(t=J.UNKNOWN);var r=vn.call(this)||this;return(e=Object.assign({},A.RENDER_OPTIONS,e)).roundPixels&&(A.ROUND_PIXELS=e.roundPixels,Rt("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),r.options=e,r.type=t,r.screen=new O(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||A.RESOLUTION,r.transparent=e.transparent,r.autoDensity=e.autoDensity||e.autoResize||!1,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,0],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r._lastObjectRendered=null,r.plugins={},r}var En,Tn=(oe(bn,En=e),bn.create=function(t){if(yt=void 0===yt?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:A.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():yt)return new bn(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},bn.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},bn.prototype.render=function(t,e,r,i,n){this.renderingToScreen=!e,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,this.context.isLost||(e||(this._lastObjectRendered=t),n||(n=t.enableTempParent(),t.updateTransform(),t.disableTempParent(n)),this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},bn.prototype.resize=function(t,e){En.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},bn.prototype.reset=function(){return this.runners.reset.emit(),this},bn.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},bn.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();En.prototype.destroy.call(this,t),this.gl=null},bn.registerPlugin=function(t,e){(bn.__plugins=bn.__plugins||{})[t]=e},bn);function bn(t){var e,r=En.call(this,J.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Kt("destroy"),contextChange:new Kt("contextChange"),reset:new Kt("reset"),update:new Kt("update"),postrender:new Kt("postrender"),prerender:new Kt("prerender"),resize:new Kt("resize")},r.globalUniforms=new Sr({projectionMatrix:new B},!0),r.addSystem(Di,"mask").addSystem(kr,"context").addSystem(un,"state").addSystem(on,"shader").addSystem(yn,"texture").addSystem(Kr,"geometry").addSystem(jr,"framebuffer").addSystem(Gi,"scissor").addSystem(Vi,"stencil").addSystem(zi,"projection").addSystem(dn,"textureGC").addSystem(Cr,"filter").addSystem(Qi,"renderTexture").addSystem(Dr,"batch"),r.initPlugins(bn.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.transparent,antialias:t.antialias,premultipliedAlpha:r.transparent&&"notMultiplied"!==r.transparent,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",mt||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=window.console).log.apply(t,["\n %c %c %c PixiJS "+vt+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):window.console&&window.console.log("PixiJS "+vt+" - "+e+" - http://www.pixijs.com/"),mt=!0),r.resize(r.options.width,r.options.height),r}var An=function(){this.texArray=null,this.blend=0,this.type=tt.TRIANGLES,this.start=0,this.size=0,this.data=null},Sn=(In.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},In);function In(){this.elements=[],this.ids=[],this.count=0}var Rn=(Object.defineProperty(On.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(On.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(On.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(On.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(On.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),On.prototype.view=function(t){return this[t+"View"]},On.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},On.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},On);function On(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var wn,Cn=(oe(Pn,wn=Nr),Pn.prototype.contextChange=function(){var t=this.renderer.gl;A.PREFER_ENV===q.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=mi(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},Pn.prototype.initFlushBuffers=function(){for(var t=Pn._drawCallPool,e=Pn._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new An);for(;e.length<i;)e.push(new Sn);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},Pn.prototype.onPrerender=function(){this._flushId=0},Pn.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},Pn.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=Pn._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++pe._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;pe._globalBatch=o},Pn.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=Pn._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=xt[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},Pn.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},Pn.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},Pn.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=Pn._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},Pn.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},Pn.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},Pn.prototype.stop=function(){this.flush()},Pn.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),wn.prototype.destroy.call(this)},Pn.prototype.getAttributeBuffer=function(t){var e=gt(Math.ceil(t/8)),t=Tt(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new Rn(e*this.vertexSize*4)),t},Pn.prototype.getIndexBuffer=function(t){var e=gt(Math.ceil(t/12)),r=Tt(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},Pn.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},Pn._drawCallPool=[],Pn._textureArrayPool=[],Pn);function Pn(t){var e=wn.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=Ai.for2d(),e.size=4*A.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var Nn=(Mn.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=Sr.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new gi(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new B,default:this.defaultGroupCache[t]};return new Ti(this.programCache[t],i)},Mn.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},Mn);function Mn(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var Ln,Dn=(oe(Un,Ln=Oe),Un);function Un(t){void 0===t&&(t=!1);var e=Ln.call(this)||this;return e._buffer=new lr(null,t,!1),e._indexBuffer=new lr(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,it.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,it.FLOAT).addAttribute("aColor",e._buffer,4,!0,it.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,it.FLOAT).addIndex(e._indexBuffer),e}var Fn="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Bn="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function kn(){}var Le=(kn.create=function(t){var e,t=Object.assign({vertex:Fn,fragment:Bn,geometryClass:Dn,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return oe(o,e=Cn),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new Nn(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(kn,"defaultVertexSrc",{get:function(){return Fn},enumerable:!1,configurable:!0}),Object.defineProperty(kn,"defaultFragmentTemplate",{get:function(){return Bn},enumerable:!1,configurable:!0}),kn).create(),Gn=(Xn.registerPlugin=function(t){Xn._plugins.push(t)},Xn.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(Xn.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(Xn.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),Xn.prototype.destroy=function(t,e){var r=this,i=Xn._plugins.slice(0);i.reverse(),i.forEach(function(t){t.destroy.call(r)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null},Xn);function Xn(e){var r=this;e=Object.assign({forceCanvas:!1},e),this.renderer=Tn.create(e),this.stage=new zt,Xn._plugins.forEach(function(t){t.init.call(r,e)})}Gn._plugins=[];Hn.init=function(t){var r=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.queueResize),(this._resizeTo=t)&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){r._resizeTo&&(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){var t,e;r._resizeTo&&(r.cancelResize(),e=r._resizeTo===window?(t=window.innerWidth,window.innerHeight):(t=(e=r._resizeTo).clientWidth,e.clientHeight),r.renderer.resize(t,e))},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},Hn.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},kt=Hn;function Hn(){}Gn.registerPlugin(kt);var Vn=function(t,e){return(Vn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var jn,Yn,zn,Wn=new L,Zn=new Uint16Array([0,1,2,0,2,3]),Kn=(Vn(Yn=Jn,zn=jn=zt),Yn.prototype=null===zn?Object.create(zn):(qn.prototype=zn.prototype,new qn),Jn.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=At(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=At(this.scale.y)*this._height/this._texture.orig.height)},Jn.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},Jn.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,s=e.d,o=e.tx,a=e.ty,h=this.vertexData,u=t.trim,l=t.orig,c=this._anchor,d=0,f=0,e=0,t=0,e=u?(d=(f=u.x-c._x*l.width)+u.width,(t=u.y-c._y*l.height)+u.height):(d=(f=-c._x*l.width)+l.width,(t=-c._y*l.height)+l.height);if(h[0]=r*f+n*t+o,h[1]=s*t+i*f+a,h[2]=r*d+n*t+o,h[3]=s*t+i*d+a,h[4]=r*d+n*e+o,h[5]=s*e+i*d+a,h[6]=r*f+n*e+o,h[7]=s*e+i*f+a,this._roundPixels)for(var p=A.RESOLUTION,_=0;_<h.length;++_)h[_]=Math.round((h[_]*p|0)/p)}},Jn.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,h=n.d,u=n.tx,l=n.ty,t=-i._x*r.width,n=t+r.width,i=-i._y*r.height,r=i+r.height;e[0]=s*t+a*i+u,e[1]=h*i+o*t+l,e[2]=s*n+a*i+u,e[3]=h*i+o*n+l,e[4]=s*n+a*r+u,e[5]=h*r+o*n+l,e[6]=s*t+a*r+u,e[7]=h*r+o*t+l},Jn.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},Jn.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},Jn.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new O),t=this._localBoundsRect),this._bounds.getRectangle(t)):jn.prototype.getLocalBounds.call(this,t)},Jn.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Wn);var e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x,t=0;return Wn.x>=i&&Wn.x<i+e&&(t=-r*this.anchor.y,Wn.y>=t&&Wn.y<t+r)},Jn.prototype.destroy=function(t){jn.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&(t="boolean"==typeof t?t:t&&t.baseTexture,this._texture.destroy(!!t)),this._texture=null},Jn.from=function(t,e){return new Jn(t instanceof $e?t:$e.from(t,e))},Object.defineProperty(Jn.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(Jn.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=At(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Jn.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=At(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(Jn.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Jn.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(Jn.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||$e.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),Jn);function qn(){this.constructor=Yn}function Jn(t){var e=jn.call(this)||this;return e._anchor=new U(e._onAnchorUpdate,e,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),e._texture=null,e._width=0,e._height=0,e._tint=null,e._tintRGB=null,e.tint=16777215,e.blendMode=$.NORMAL,e._cachedTint=16777215,e.uvs=null,e.texture=t||$e.EMPTY,e.vertexData=new Float32Array(8),e.vertexTrimmedData=null,e._transformID=-1,e._textureID=-1,e._transformTrimmedID=-1,e._textureTrimmedID=-1,e.indices=Zn,e.pluginName="batch",e.isSprite=!0,e._roundPixels=A.ROUND_PIXELS,e}var Qn=function(t,e){return(Qn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function $n(t,e){function r(){this.constructor=t}Qn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var ts,es=new L,rs=($n(is,ts=Kn),Object.defineProperty(is.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(is.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(is.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),is.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},is.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},is.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,i)},is.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new O),t=this._localBoundsRect),this._bounds.getRectangle(t)):ts.prototype.getLocalBounds.call(this,t)},is.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,es);var e=this._width,r=this._height,t=-e*this.anchor._x;if(es.x>=t&&es.x<t+e){e=-r*this.anchor._y;if(es.y>=e&&es.y<e+r)return!0}return!1},is.prototype.destroy=function(t){ts.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},is.from=function(t,e){return"number"==typeof e&&(Rt("5.3.0","TilingSprite.from use options instead of width and height args"),e={width:e,height:arguments[2]}),new is($e.from(t,e),e.width,e.height)},Object.defineProperty(is.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(is.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),is);function is(t,e,r){void 0===e&&(e=100),void 0===r&&(r=100);var i=ts.call(this,t)||this;return i.tileTransform=new Z,i._width=e,i._height=r,i.uvMatrix=i.texture.uvMatrix||new wi(t),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}var ns,ss="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",os=new B,xe=($n(as,ns=Nr),as.prototype.render=function(t){var e=this.renderer,r=this.quad,i=r.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((i=r.uvs)[0]=i[6]=-t.anchor.x,i[1]=i[3]=-t.anchor.y,i[2]=i[4]=1-t.anchor.x,i[5]=i[7]=1-t.anchor.y),r.invalidate();var n=t._texture,s=n.baseTexture,o=t.tileTransform.localTransform,a=t.uvMatrix,h=s.isPowerOfTwo&&n.frame.width===s.width&&n.frame.height===s.height;h&&(s._glTextures[e.CONTEXT_UID]?h=s.wrapMode!==st.CLAMP:s.wrapMode===st.CLAMP&&(s.wrapMode=st.REPEAT));var u=h?this.simpleShader:this.shader,l=n.width,c=n.height,d=t._width,i=t._height;os.set(o.a*l/d,o.b*l/i,o.c*c/d,o.d*c/i,o.tx/d,o.ty/i),os.invert(),h?os.prepend(a.mapCoord):(u.uniforms.uMapCoord=a.mapCoord.toArray(!0),u.uniforms.uClampFrame=a.uClampFrame,u.uniforms.uClampOffset=a.uClampOffset),u.uniforms.uTransform=os.toArray(!0),u.uniforms.uColor=(o=t.tint,i=t.worldAlpha,h=u.uniforms.uColor,a=s.alphaMode,(h=h||new Float32Array(4))[0]=(o>>16&255)/255,h[1]=(o>>8&255)/255,h[2]=(255&o)/255,!a&&void 0!==a||(h[0]*=i,h[1]*=i,h[2]*=i),h[3]=i,h),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.uSampler=n,e.shader.bind(u),e.geometry.bind(r),this.state.blendMode=(t=t.blendMode,s=s.alphaMode,xt[s?1:0][t]),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},as);function as(t){var e=ns.call(this,t)||this,t={globals:e.renderer.globalUniforms};return e.shader=Ti.from(ss,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",t),e.simpleShader=Ti.from(ss,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",t),e.quad=new Tr,e.state=Ai.for2d(),e}var e=r(3),hs=r.n(e),Oe=r(1),us=r.n(Oe);function ls(){}function cs(r,i,n,s){var o=0,a=r.length;!function t(e){e||o===a?n&&n(e):s?setTimeout(function(){i(r[o++],t)},1):i(r[o++],t)}()}function ds(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var r=0,i={_tasks:[],concurrency:t,saturated:ls,unsaturated:ls,buffer:t/4,empty:ls,drain:ls,error:ls,started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){r=0,i.drain=ls,i.started=!1,i._tasks=[]},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!i.paused&&r<i.concurrency&&i._tasks.length;){var t=i._tasks.shift();0===i._tasks.length&&i.empty(),(r+=1)===i.concurrency&&i.saturated(),e(t.data,function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}(function(t){return function(){--r,t.callback.apply(t,arguments),null!=arguments[0]&&i.error(arguments[0],t.data),r<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}(t)))}},length:function(){return i._tasks.length},running:function(){return r},idle:function(){return i._tasks.length+r===0},pause:function(){!0!==i.paused&&(i.paused=!0)},resume:function(){if(!1!==i.paused){i.paused=!1;for(var t=1;t<=i.concurrency;t++)i.process()}}};function n(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");i.started=!0,null==t&&i.idle()?setTimeout(function(){return i.drain()},1):(r={data:t,callback:"function"==typeof r?r:ls},e?i._tasks.unshift(r):i._tasks.push(r),setTimeout(function(){return i.process()},1))}return i}var fs={};function ps(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _s(t,e,r){return e&&ps(t.prototype,e),r&&ps(t,r),t}var ys=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),ms=null;function vs(){}var xs=function(){function s(t,e,r){if("string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(s.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=s.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=vs,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new us.a,this.onProgress=new us.a,this.onComplete=new us.a,this.onAfterMiddleware=new us.a}s.setExtensionLoadType=function(t,e){gs(s._loadTypeMap,t,e)},s.setExtensionXhrType=function(t,e){gs(s._xhrTypeMap,t,e)};var t=s.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=s.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(t){var e=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(e)},1);else switch(t&&this.onComplete.once(t),this._setFlag(s.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case s.LOAD_TYPE.IMAGE:this.type=s.TYPE.IMAGE,this._loadElement("image");break;case s.LOAD_TYPE.AUDIO:this.type=s.TYPE.AUDIO,this._loadSourceElement("audio");break;case s.LOAD_TYPE.VIDEO:this.type=s.TYPE.VIDEO,this._loadSourceElement("video");break;case s.LOAD_TYPE.XHR:default:ys&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t._hasFlag=function(t){return 0!=(this._flags&t)},t._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(s.STATUS_FLAGS.COMPLETE,!0),this._setFlag(s.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var i=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=s.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},t._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t._createSource=function(t,e,r){r=r||t+"/"+this._getExtension(e);t=document.createElement("source");return t.src=e,t.type=r,t},t._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var t=this.xhr;this.abort(Es(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t._xhrOnTimeout=function(){var t=this.xhr;this.abort(Es(t)+" Request timed out.")},t._xhrOnAbort=function(){var t=this.xhr;this.abort(Es(t)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var t,e,r=this.xhr,i="",n=void 0===r.status?200:r.status;if(""!==r.responseType&&"text"!==r.responseType&&void 0!==r.responseType||(i=r.responseText),0===n&&(0<i.length||r.responseType===s.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2==(n/100|0)){if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=s.TYPE.TEXT;else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=s.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT)try{window.DOMParser?(t=new DOMParser,this.data=t.parseFromString(i,"text/xml")):((e=document.createElement("div")).innerHTML=i,this.data=e),this.type=s.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=r.response||i;this.complete()}else this.abort("["+r.status+"] "+r.statusText+": "+r.responseURL)},t._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,(ms=ms||document.createElement("a")).href=t;var r=!(t=hs()(ms.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},t._determineXhrType=function(){return s._xhrTypeMap[this.extension]||s.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return s._loadTypeMap[this.extension]||s.LOAD_TYPE.XHR},t._getExtension=function(){var t,e,r=this.url;return(this.isDataUrl?(e=r.indexOf("/"),r.substring(e+1,r.indexOf(";",e))):(t=r.indexOf("?"),e=r.indexOf("#"),e=Math.min(-1<t?t:r.length,-1<e?e:r.length),(r=r.substring(0,e)).substring(r.lastIndexOf(".")+1))).toLowerCase()},t._getMimeFromXhrType=function(t){switch(t){case s.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case s.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case s.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case s.XHR_RESPONSE_TYPE.JSON:return"application/json";case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},_s(s,[{key:"isDataUrl",get:function(){return this._hasFlag(s.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(s.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(s.STATUS_FLAGS.LOADING)}}]),s}();function gs(t,e,r){(e=e&&0===e.indexOf(".")?e.substring(1):e)&&(t[e]=r)}function Es(t){return t.toString().replace("object ","")}xs.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},xs.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},xs.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},xs.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},xs._loadTypeMap={gif:xs.LOAD_TYPE.IMAGE,png:xs.LOAD_TYPE.IMAGE,bmp:xs.LOAD_TYPE.IMAGE,jpg:xs.LOAD_TYPE.IMAGE,jpeg:xs.LOAD_TYPE.IMAGE,tif:xs.LOAD_TYPE.IMAGE,tiff:xs.LOAD_TYPE.IMAGE,webp:xs.LOAD_TYPE.IMAGE,tga:xs.LOAD_TYPE.IMAGE,svg:xs.LOAD_TYPE.IMAGE,"svg+xml":xs.LOAD_TYPE.IMAGE,mp3:xs.LOAD_TYPE.AUDIO,ogg:xs.LOAD_TYPE.AUDIO,wav:xs.LOAD_TYPE.AUDIO,mp4:xs.LOAD_TYPE.VIDEO,webm:xs.LOAD_TYPE.VIDEO},xs._xhrTypeMap={xhtml:xs.XHR_RESPONSE_TYPE.DOCUMENT,html:xs.XHR_RESPONSE_TYPE.DOCUMENT,htm:xs.XHR_RESPONSE_TYPE.DOCUMENT,xml:xs.XHR_RESPONSE_TYPE.DOCUMENT,tmx:xs.XHR_RESPONSE_TYPE.DOCUMENT,svg:xs.XHR_RESPONSE_TYPE.DOCUMENT,tsx:xs.XHR_RESPONSE_TYPE.DOCUMENT,gif:xs.XHR_RESPONSE_TYPE.BLOB,png:xs.XHR_RESPONSE_TYPE.BLOB,bmp:xs.XHR_RESPONSE_TYPE.BLOB,jpg:xs.XHR_RESPONSE_TYPE.BLOB,jpeg:xs.XHR_RESPONSE_TYPE.BLOB,tif:xs.XHR_RESPONSE_TYPE.BLOB,tiff:xs.XHR_RESPONSE_TYPE.BLOB,webp:xs.XHR_RESPONSE_TYPE.BLOB,tga:xs.XHR_RESPONSE_TYPE.BLOB,json:xs.XHR_RESPONSE_TYPE.JSON,text:xs.XHR_RESPONSE_TYPE.TEXT,txt:xs.XHR_RESPONSE_TYPE.TEXT,ttf:xs.XHR_RESPONSE_TYPE.BUFFER,otf:xs.XHR_RESPONSE_TYPE.BUFFER},xs.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Ts="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var bs=window.URL||window.webkitURL;var kt={caching:function(t,e){var r=this;fs[t.url]?(t.data=fs[t.url],t.complete()):t.onComplete.once(function(){return fs[r.url]=r.data}),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===xs.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=bs.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=xs.TYPE.IMAGE,void(t.data.onload=function(){bs.revokeObjectURL(r),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],n=[0,0,0,0],s=0;s<i.length;++s)r<t.length?i[s]=255&t.charCodeAt(r++):i[s]=0;switch(n[0]=i[0]>>2,n[1]=(3&i[0])<<4|i[1]>>4,n[2]=(15&i[1])<<2|i[2]>>6,n[3]=63&i[2],r-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var o=0;o<n.length;++o)e+=Ts.charAt(n[o])}return e}(t.xhr.responseText),t.type=xs.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},As=/(#[\w-]+)?$/,Ss=function(){function s(t,e){var r=this;void 0===e&&(e=10),this.baseUrl=t=void 0===t?"":t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=ds(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new us.a,this.onError=new us.a,this.onLoad=new us.a,this.onStart=new us.a,this.onComplete=new us.a;for(var i=0;i<s._defaultBeforeMiddleware.length;++i)this.pre(s._defaultBeforeMiddleware[i]);for(var n=0;n<s._defaultAfterMiddleware.length;++n)this.use(s._defaultAfterMiddleware[n])}var t=s.prototype;return t.add=function(t,e,r,i){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(i=e||t.callback||t.onComplete,e=(r=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(i=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new xs(t,e,r),"function"==typeof i&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var s=r.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var h=s.progressChunk*(o.length+1)/(o.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var u=0;u<o.length;++u)o[u].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},t.pre=function(t){return this._beforeMiddleware.push(t),this},t.use=function(t){return this._afterMiddleware.push(t),this},t.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){t=this.resources[t];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},t.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(t){var e=hs()(t,{strictMode:!0});return e=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString&&(t=As.exec(e)[0],-1!==(e=e.substr(0,e.length-t.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=t),e},t._loadResource=function(r,t){var i=this;r._dequeue=t,cs(this._beforeMiddleware,function(t,e){t.call(i,r,function(){e(r.isComplete?{}:null)})},function(){r.isComplete?i._onLoad(r):(r._onLoadBinding=r.onComplete.once(i._onLoad,i),r.load())},!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(r){var i=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),cs(this._afterMiddleware,function(t,e){t.call(i,r,e)},function(){r.onAfterMiddleware.dispatch(r),i.progress=Math.min(100,i.progress+r.progressChunk),i.onProgress.dispatch(i,r),r.error?i.onError.dispatch(r.error,i,r):i.onLoad.dispatch(i,r),i._resourcesParsing.splice(i._resourcesParsing.indexOf(r),1),i._queue.idle()&&0===i._resourcesParsing.length&&i._onComplete()},!0)},_s(s,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),s}();Ss._defaultBeforeMiddleware=[],Ss._defaultAfterMiddleware=[],Ss.pre=function(t){return Ss._defaultBeforeMiddleware.push(t),Ss},Ss.use=function(t){return Ss._defaultAfterMiddleware.push(t),Ss};var Is=xs,Rs=function(t,e){return(Rs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};Os.use=function(t,e){t.data&&t.type===xs.TYPE.IMAGE&&(t.texture=$e.fromLoader(t.data,t.url,t.name)),e()},e=Os;function Os(){}var ws,Cs,Ps,Ns=(Rs(Cs=Ls,Ps=ws=Ss),Cs.prototype=null===Ps?Object.create(Ps):(Ms.prototype=Ps.prototype,new Ms),Ls.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(Ls,"shared",{get:function(){var t=Ls._shared;return t||((t=new Ls)._protected=!0,Ls._shared=t),t},enumerable:!1,configurable:!0}),Ls.registerPlugin=function(t){return Ls._plugins.push(t),t.add&&t.add(),Ls},Ls._plugins=[],Ls);function Ms(){this.constructor=Cs}function Ls(t,e){for(var r=ws.call(this,t,e)||this,i=0;i<Ls._plugins.length;++i){var n=Ls._plugins[i],s=n.pre,n=n.use;s&&r.pre(s),n&&r.use(n)}return r._protected=!1,r}Ns.registerPlugin({use:kt.parsing}),Ns.registerPlugin(e);var Ds,Oe=(Us.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Ns.shared:new Ns},Us.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},Us);function Us(){}var Fs=function(t,e){return(Fs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function Bs(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Fs(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var ks=function(){return(ks=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},Gs=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid","caf"],Xs={};function Hs(t){var i=ks({m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"'},t||{}),n=document.createElement("audio"),s={},o=/^no$/;Gs.forEach(function(t){var e=n.canPlayType("audio/"+t).replace(o,""),r=i[t]?n.canPlayType(i[t]).replace(o,""):"";s[t]=!!e||!!r}),Object.assign(Xs,s)}Hs();var Vs=/\.(\{([^\}]+)\})(\?.*)?$/;function js(t){var e=Vs,r="string"==typeof t?t:t.url;if(!e.test(r))return r;for(var e=e.exec(r),i=e[2].split(","),n=i[i.length-1],s=0,o=i.length;s<o;s++){var a=i[s];if(Xs[a]){n=a;break}}e=r.replace(e[1],n);return"string"!=typeof t&&((t=t).extension=n,t.url=e),e}var Ys,zs,Ws,Zs,Ks,qs,Js,Qs,$s,to,eo,ro,io=(Uo.add=function(){Uo.setLegacy(Ds.useLegacy)},Uo.setLegacy=function(t){var e=Gs;t?e.forEach(function(t){Is.setExtensionXhrType(t,Is.XHR_RESPONSE_TYPE.DEFAULT),Is.setExtensionLoadType(t,Is.LOAD_TYPE.AUDIO)}):e.forEach(function(t){Is.setExtensionXhrType(t,Is.XHR_RESPONSE_TYPE.BUFFER),Is.setExtensionLoadType(t,Is.LOAD_TYPE.XHR)})},Uo.pre=function(t,e){js(t),e()},Uo.use=function(t,e){t.data&&-1<Gs.indexOf(t.extension)?t.sound=Ds.add(t.name,{loaded:e,preload:!0,url:t.url,source:t.data}):e()},Uo),no=0,so=(Bs(Do,ro=pt.a),Do.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"paused":this.paused=e;break;case"loop":this.loop=e;break;case"muted":this.muted=e}return this},Object.defineProperty(Do.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(Do.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!1,configurable:!0}),Do.prototype._onPlay=function(){this._playing=!0},Do.prototype._onPause=function(){this._playing=!1},Do.prototype.init=function(t){this._playing=!1,this._duration=t.source.duration;var e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t},Do.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},Do.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(Do.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(Do.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(Do.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(Do.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!1,configurable:!0}),Do.prototype.refresh=function(){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var r=t.volume*(t.muted?0:1),i=e.volume*(e.muted?0:1),n=this._volume*(this._muted?0:1);this._source.volume=n*r*i,this._source.playbackRate=this._speed*t.speed*e.speed},Do.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,t=this._paused||e.paused||t.paused;t!==this._pausedReal&&((this._pausedReal=t)?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",t))},Do.prototype.play=function(t){var e=this,r=t.start,i=t.end,n=t.speed,s=t.loop,o=t.volume,t=t.muted;this._speed=n,this._volume=o,this._loop=!!s,this._muted=t,this.refresh(),this.loop&&null!==i&&(this.loop=!1),this._start=r,this._end=i||this._duration,this._start=Math.max(0,this._start-Do.PADDING),this._end=Math.min(this._end+Do.PADDING,this._duration),this._source.onloadedmetadata=function(){e._source&&(e._source.currentTime=r,e._source.onloadedmetadata=null,e.emit("progress",r,e._duration),$t.shared.add(e._onUpdate,e))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},Do.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},Do.prototype._onComplete=function(){$t.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},Do.prototype.destroy=function(){$t.shared.remove(this._onUpdate,this),this.removeAllListeners();var t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},Do.prototype.toString=function(){return"[HTMLAudioInstance id="+this.id+"]"},Do.PADDING=.1,Do),oo=(Bs(Lo,eo=pt.a),Lo.prototype.init=function(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)},Lo.prototype.create=function(){return new so(this)},Object.defineProperty(Lo.prototype,"isPlayable",{get:function(){return!!this._source&&4===this._source.readyState},enumerable:!1,configurable:!0}),Object.defineProperty(Lo.prototype,"duration",{get:function(){return this._source.duration},enumerable:!1,configurable:!0}),Object.defineProperty(Lo.prototype,"context",{get:function(){return this.parent.context},enumerable:!1,configurable:!0}),Object.defineProperty(Lo.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),Lo.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(Lo.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Lo.prototype.load=function(e){var t,r,i,n,s,o=this._source,a=this.parent;4!==o.readyState?a.url?(o.src=a.url,t=function(){n(),a.isLoaded=!0;var t=a.autoPlayStart();e&&e(null,a,t)},r=function(){n(),e&&e(new Error("Sound loading has been aborted"))},i=function(){n();var t="Failed to load audio element (code: "+o.error.code+")";e&&e(new Error(t))},n=function(){o.removeEventListener("canplaythrough",t),o.removeEventListener("load",t),o.removeEventListener("abort",r),o.removeEventListener("error",i)},o.addEventListener("canplaythrough",t,!1),o.addEventListener("load",t,!1),o.addEventListener("abort",r,!1),o.addEventListener("error",i,!1),o.load()):e(new Error("sound.url or sound.source must be set")):(a.isLoaded=!0,s=a.autoPlayStart(),e&&setTimeout(function(){e(null,a,s)},0))},Lo),ao=(Mo.prototype.play=function(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},Mo.prototype.destroy=function(){this.parent=null},Mo),ho=(No.setParamValue=function(t,e){var r;return t.setValueAtTime?(r=Ds.context,t.setValueAtTime(e,r.audioContext.currentTime)):t.value=e,e},No),uo=0,lo=(Bs(Po,to=pt.a),Po.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"muted":this.muted=e;break;case"loop":this.loop=e;break;case"paused":this.paused=e}return this},Po.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(Po.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh(),this._update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Po.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(Po.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(Po.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!1,configurable:!0}),Po.prototype.refresh=function(){var t,e,r,i,n;this._source&&(t=this._media.context,e=this._media.parent,this._source.loop=this._loop||e.loop,r=t.volume*(t.muted?0:1),i=e.volume*(e.muted?0:1),n=this._volume*(this._muted?0:1),ho.setParamValue(this._gain.gain,n*i*r),ho.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed))},Po.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,t=this._paused||e.paused||t.paused;t!==this._pausedReal&&((this._pausedReal=t)?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",t))},Po.prototype.play=function(t){var e=t.start,r=t.end,i=t.speed,n=t.loop,s=t.volume,o=t.muted;this._paused=!1;var a=this._media.nodes.cloneBufferSource(),t=a.source,a=a.gain;this._source=t,this._gain=a,this._speed=i,this._volume=s,this._loop=!!n,this._muted=o,this.refresh();o=this._source.buffer.duration;this._duration=o,this._end=r,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=r,this._source.loopStart=e,this._source.start(0,e)):r?this._source.start(0,e,r-e):this._source.start(0,e),this.emit("start"),this._update(!0),this.enableTicker(!0)},Po.prototype.enableTicker=function(t){$t.shared.remove(this._updateListener,this),t&&$t.shared.add(this._updateListener,this)},Object.defineProperty(Po.prototype,"progress",{get:function(){return this._progress},enumerable:!1,configurable:!0}),Object.defineProperty(Po.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!1,configurable:!0}),Po.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},Po.prototype.toString=function(){return"[WebAudioInstance id="+this.id+"]"},Po.prototype._now=function(){return this._media.context.audioContext.currentTime},Po.prototype._updateListener=function(){this._update()},Po.prototype._update=function(t){var e,r;void 0===t&&(t=!1),this._source&&(0<(e=(r=this._now())-this._lastUpdate)||t)&&(t=this._source.playbackRate.value,this._elapsed+=e*t,this._lastUpdate=r,e=this._duration,t=void 0,t=this._source.loopStart?(r=this._source.loopEnd-this._source.loopStart,(this._source.loopStart+this._elapsed%r)/e):this._elapsed%e/e,this._progress=t,this.emit("progress",this._progress,e))},Po.prototype.init=function(t){(this._media=t).context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)},Po.prototype._internalStop=function(){this._source&&(this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect(),this._source.buffer=null,this._source=null)},Po.prototype._onComplete=function(){this._source&&(this.enableTicker(!1),this._source.onended=null,this._source.disconnect(),this._source.buffer=null),this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},Po),kt=(Object.defineProperty(Co.prototype,"destination",{get:function(){return this._input},enumerable:!1,configurable:!0}),Object.defineProperty(Co.prototype,"filters",{get:function(){return this._filters},set:function(t){var e,r=this;this._filters&&(this._filters.forEach(function(t){t&&t.disconnect()}),this._filters=null,this._input.connect(this._output)),t&&t.length&&(this._filters=t.slice(0),this._input.disconnect(),e=null,t.forEach(function(t){(null===e?r._input:e).connect(t.destination),e=t}),e.connect(this._output))},enumerable:!1,configurable:!0}),Co.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},Co),co=(Bs(wo,$s=kt),Object.defineProperty(wo.prototype,"script",{get:function(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(wo.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script},enumerable:!1,configurable:!0}),wo.prototype.destroy=function(){$s.prototype.destroy.call(this),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null},wo.prototype.cloneBufferSource=function(){var t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,ho.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;t=this.context.audioContext.createGain();return e.connect(t),t.connect(this.destination),{source:e,gain:t}},Object.defineProperty(wo.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!1,configurable:!0}),wo.BUFFER_SIZE=0,wo),fo=(Oo.prototype.init=function(t){this.parent=t,this._nodes=new co(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source},Oo.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null,this._source.buffer=null,this._source=null,this.source=null},Oo.prototype.create=function(){return new lo(this)},Object.defineProperty(Oo.prototype,"context",{get:function(){return this.parent.context},enumerable:!1,configurable:!0}),Object.defineProperty(Oo.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(Oo.prototype,"filters",{get:function(){return this._nodes.filters},set:function(t){this._nodes.filters=t},enumerable:!1,configurable:!0}),Object.defineProperty(Oo.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!1,configurable:!0}),Object.defineProperty(Oo.prototype,"buffer",{get:function(){return this._source.buffer},set:function(t){this._source.buffer=t},enumerable:!1,configurable:!0}),Object.defineProperty(Oo.prototype,"nodes",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),Oo.prototype.load=function(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t&&t(new Error("sound.url or sound.source must be set"))},Oo.prototype._loadUrl=function(t){var e=this,r=new XMLHttpRequest,i=this.parent.url;r.open("GET",i,!0),r.responseType="arraybuffer",r.onload=function(){e.source=r.response,e._decode(r.response,t)},r.send()},Oo.prototype._decode=function(t,r){var i=this;this.parent.context.decode(t,function(t,e){t?r&&r(t):(i.parent.isLoaded=!0,i.buffer=e,e=i.parent.autoPlayStart(),r&&r(null,i.parent,e))})},Oo),po=(Ro.from=function(t){var e={};return"string"==typeof t?e.url=t:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?e.source=t:e=t,(e=ks({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},e)).url&&(e.url=js(e.url)),Object.freeze(e),new Ro(new(Ds.useLegacy?oo:fo),e)},Object.defineProperty(Ro.prototype,"context",{get:function(){return Ds.context},enumerable:!1,configurable:!0}),Ro.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},Ro.prototype.resume=function(){return this.isPlaying=0<this._instances.length,this.paused=!1,this},Object.defineProperty(Ro.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!1,configurable:!0}),Object.defineProperty(Ro.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(Ro.prototype,"filters",{get:function(){return this.media.filters},set:function(t){this.media.filters=t},enumerable:!1,configurable:!0}),Ro.prototype.addSprites=function(t,e){if("object"==typeof t){var r,i={};for(r in t)i[r]=this.addSprites(r,t[r]);return i}e=new ao(this,e);return this._sprites[t]=e},Ro.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},Ro.prototype.removeSprites=function(t){if(t){var e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(var r in this._sprites)this.removeSprites(r);return this},Object.defineProperty(Ro.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!1,configurable:!0}),Ro.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var t=this._instances.length-1;0<=t;t--)this._instances[t].stop();return this},Ro.prototype.play=function(t,e){var s,r,o=this;if("string"==typeof t?s={sprite:r=t,loop:this.loop,complete:e}:"function"==typeof t?(s={}).complete=t:s=t,(s=ks({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},s||{})).sprite&&(t=s.sprite,r=this._sprites[t],s.start=r.start,s.end=r.end,s.speed=r.speed||1,s.loop=r.loop||s.loop,delete s.sprite),s.offset&&(s.start=s.offset),!this.isLoaded)return new Promise(function(i,n){o.autoPlay=!0,o._autoPlayOptions=s,o._preload(function(t,e,r){t?n(t):(s.loaded&&s.loaded(t,e,r),i(r))})});this.singleInstance&&this._removeInstances();var i=this._createInstance();return this._instances.push(i),this.isPlaying=!0,i.once("end",function(){s.complete&&s.complete(o),o._onComplete(i)}),i.once("stop",function(){o._onComplete(i)}),i.play(s),i},Ro.prototype.refresh=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refresh()},Ro.prototype.refreshPaused=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refreshPaused()},Object.defineProperty(Ro.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(Ro.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(Ro.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!1,configurable:!0}),Ro.prototype._preload=function(t){this.media.load(t)},Object.defineProperty(Ro.prototype,"instances",{get:function(){return this._instances},enumerable:!1,configurable:!0}),Object.defineProperty(Ro.prototype,"sprites",{get:function(){return this._sprites},enumerable:!1,configurable:!0}),Object.defineProperty(Ro.prototype,"duration",{get:function(){return this.media.duration},enumerable:!1,configurable:!0}),Ro.prototype.autoPlayStart=function(){var t;return t=this.autoPlay?this.play(this._autoPlayOptions):t},Ro.prototype._removeInstances=function(){for(var t=this._instances.length-1;0<=t;t--)this._poolInstance(this._instances[t]);this._instances.length=0},Ro.prototype._onComplete=function(t){var e;this._instances&&(-1<(e=this._instances.indexOf(t))&&this._instances.splice(e,1),this.isPlaying=0<this._instances.length),this._poolInstance(t)},Ro.prototype._createInstance=function(){if(0<Ro._pool.length){var t=Ro._pool.pop();return t.init(this.media),t}return this.media.create()},Ro.prototype._poolInstance=function(t){t.destroy(),Ro._pool.indexOf(t)<0&&Ro._pool.push(t)},Ro._pool=[],Ro),_o=(Bs(Io,Qs=pt.a),Io.prototype.refresh=function(){this.emit("refresh")},Io.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(Io.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(Io.prototype,"audioContext",{get:function(){return null},enumerable:!1,configurable:!0}),Io.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},Io.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},Io.prototype.destroy=function(){this.removeAllListeners()},Io),yo=(Bs(So,Js=kt),So.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},So.prototype.playEmptySound=function(){var t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()},Object.defineProperty(So,"AudioContext",{get:function(){var t=window;return t.AudioContext||t.webkitAudioContext||null},enumerable:!1,configurable:!0}),Object.defineProperty(So,"OfflineAudioContext",{get:function(){var t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null},enumerable:!1,configurable:!0}),So.prototype.destroy=function(){Js.prototype.destroy.call(this);var t=this._ctx;void 0!==t.close&&t.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(So.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!1,configurable:!0}),Object.defineProperty(So.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!1,configurable:!0}),Object.defineProperty(So.prototype,"paused",{get:function(){return this._paused},set:function(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t},enumerable:!1,configurable:!0}),So.prototype.refresh=function(){this.events.emit("refresh")},So.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},So.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},So.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},So.prototype.decode=function(t,e){function r(t){e(new Error(t.message||"Unable to decode file"))}t=this._offlineCtx.decodeAudioData(t,function(t){e(null,t)},r);t&&t.catch(r)},So),e=(Ao.prototype.init=function(){return this.supported&&(this._webAudioContext=new yo),this._htmlAudioContext=new _o,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(Ao.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(Ao.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(t){this.useLegacy||(this._context.filters=t)},enumerable:!1,configurable:!0}),Object.defineProperty(Ao.prototype,"supported",{get:function(){return null!==yo.AudioContext},enumerable:!1,configurable:!0}),Ao.prototype.add=function(t,e){if("object"==typeof t){var r,i={};for(r in t){var n=this._getOptions(t[r],e);i[r]=this.add(r,n)}return i}if(e instanceof po)return this._sounds[t]=e;var s=this._getOptions(e),s=po.from(s);return this._sounds[t]=s},Ao.prototype._getOptions=function(t,e){t="string"==typeof t?{url:t}:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?{source:t}:t;return ks(ks({},t),e||{})},Object.defineProperty(Ao.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(t){io.setLegacy(t),this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!1,configurable:!0}),Ao.prototype.remove=function(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this},Object.defineProperty(Ao.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(t){this._context.volume=t,this._context.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(Ao.prototype,"speedAll",{get:function(){return this._context.speed},set:function(t){this._context.speed=t,this._context.refresh()},enumerable:!1,configurable:!0}),Ao.prototype.togglePauseAll=function(){return this._context.togglePause()},Ao.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},Ao.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},Ao.prototype.toggleMuteAll=function(){return this._context.toggleMute()},Ao.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},Ao.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},Ao.prototype.removeAll=function(){for(var t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this},Ao.prototype.stopAll=function(){for(var t in this._sounds)this._sounds[t].stop();return this},Ao.prototype.exists=function(t,e){return void 0===e&&(e=!1),!!this._sounds[t]},Ao.prototype.find=function(t){return this.exists(t,!0),this._sounds[t]},Ao.prototype.play=function(t,e){return this.find(t).play(e)},Ao.prototype.stop=function(t){return this.find(t).stop()},Ao.prototype.pause=function(t){return this.find(t).pause()},Ao.prototype.resume=function(t){return this.find(t).resume()},Ao.prototype.volume=function(t,e){t=this.find(t);return void 0!==e&&(t.volume=e),t.volume},Ao.prototype.speed=function(t,e){t=this.find(t);return void 0!==e&&(t.speed=e),t.speed},Ao.prototype.duration=function(t){return this.find(t).duration},Ao.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},Ao),kt=(bo.prototype.init=function(t,e){this.destination=t,this.source=e||t},bo.prototype.connect=function(t){this.source.connect(t)},bo.prototype.disconnect=function(){this.source.disconnect()},bo.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},bo);Bs(To,qs=kt),To.prototype.setGain=function(t,e){if(void 0===e&&(e=0),!this.bandsMap[t])throw new Error("No band found for frequency "+t);ho.setParamValue(this.bandsMap[t].gain,e)},To.prototype.getGain=function(t){if(!this.bandsMap[t])throw new Error("No band found for frequency "+t);return this.bandsMap[t].gain.value},Object.defineProperty(To.prototype,"f32",{get:function(){return this.getGain(To.F32)},set:function(t){this.setGain(To.F32,t)},enumerable:!1,configurable:!0}),Object.defineProperty(To.prototype,"f64",{get:function(){return this.getGain(To.F64)},set:function(t){this.setGain(To.F64,t)},enumerable:!1,configurable:!0}),Object.defineProperty(To.prototype,"f125",{get:function(){return this.getGain(To.F125)},set:function(t){this.setGain(To.F125,t)},enumerable:!1,configurable:!0}),Object.defineProperty(To.prototype,"f250",{get:function(){return this.getGain(To.F250)},set:function(t){this.setGain(To.F250,t)},enumerable:!1,configurable:!0}),Object.defineProperty(To.prototype,"f500",{get:function(){return this.getGain(To.F500)},set:function(t){this.setGain(To.F500,t)},enumerable:!1,configurable:!0}),Object.defineProperty(To.prototype,"f1k",{get:function(){return this.getGain(To.F1K)},set:function(t){this.setGain(To.F1K,t)},enumerable:!1,configurable:!0}),Object.defineProperty(To.prototype,"f2k",{get:function(){return this.getGain(To.F2K)},set:function(t){this.setGain(To.F2K,t)},enumerable:!1,configurable:!0}),Object.defineProperty(To.prototype,"f4k",{get:function(){return this.getGain(To.F4K)},set:function(t){this.setGain(To.F4K,t)},enumerable:!1,configurable:!0}),Object.defineProperty(To.prototype,"f8k",{get:function(){return this.getGain(To.F8K)},set:function(t){this.setGain(To.F8K,t)},enumerable:!1,configurable:!0}),Object.defineProperty(To.prototype,"f16k",{get:function(){return this.getGain(To.F16K)},set:function(t){this.setGain(To.F16K,t)},enumerable:!1,configurable:!0}),To.prototype.reset=function(){this.bands.forEach(function(t){ho.setParamValue(t.gain,0)})},To.prototype.destroy=function(){this.bands.forEach(function(t){t.disconnect()}),this.bands=null,this.bandsMap=null},To.F32=32,To.F64=64,To.F125=125,To.F250=250,To.F500=500,To.F1K=1e3,To.F2K=2e3,To.F4K=4e3,To.F8K=8e3,To.F16K=16e3,Bs(Eo,Ks=kt),Object.defineProperty(Eo.prototype,"amount",{get:function(){return this._amount},set:function(t){this._amount=t*=1e3;for(var e,r=new Float32Array(44100),i=Math.PI/180,n=0;n<44100;++n)r[n]=(3+t)*(e=2*n/44100-1)*20*i/(Math.PI+t*Math.abs(e));this._distortion.curve=r,this._distortion.oversample="4x"},enumerable:!1,configurable:!0}),Eo.prototype.destroy=function(){this._distortion=null,Ks.prototype.destroy.call(this)},Bs(go,Zs=kt),Object.defineProperty(go.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._stereo?ho.setParamValue(this._stereo.pan,t):this._panner.setPosition(t,0,1-Math.abs(t))},enumerable:!1,configurable:!0}),go.prototype.destroy=function(){Zs.prototype.destroy.call(this),this._stereo=null,this._panner=null},Bs(xo,Ws=kt),xo.prototype._clamp=function(t,e,r){return Math.min(r,Math.max(e,t))},Object.defineProperty(xo.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=this._clamp(t,1,50),this._rebuild()},enumerable:!1,configurable:!0}),Object.defineProperty(xo.prototype,"decay",{get:function(){return this._decay},set:function(t){this._decay=this._clamp(t,0,100),this._rebuild()},enumerable:!1,configurable:!0}),Object.defineProperty(xo.prototype,"reverse",{get:function(){return this._reverse},set:function(t){this._reverse=t,this._rebuild()},enumerable:!1,configurable:!0}),xo.prototype._rebuild=function(){for(var t,e=Ds.context.audioContext,r=e.sampleRate,i=r*this._seconds,e=e.createBuffer(2,i,r),n=e.getChannelData(0),s=e.getChannelData(1),o=0;o<i;o++)t=this._reverse?i-o:o,n[o]=(2*Math.random()-1)*Math.pow(1-t/i,this._decay),s[o]=(2*Math.random()-1)*Math.pow(1-t/i,this._decay);r=Ds.context.audioContext.createConvolver();r.buffer=e,this.init(r)},Bs(vo,zs=kt),vo.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,zs.prototype.destroy.call(this)},Bs(mo,Ys=kt);function mo(){if(!Ds.useLegacy){var t=Ds.context.audioContext,e=t.createBiquadFilter(),r=t.createBiquadFilter(),i=t.createBiquadFilter(),t=t.createBiquadFilter();return e.type="lowpass",ho.setParamValue(e.frequency,2e3),r.type="lowpass",ho.setParamValue(r.frequency,2e3),i.type="highpass",ho.setParamValue(i.frequency,500),t.type="highpass",ho.setParamValue(t.frequency,500),e.connect(r),r.connect(i),i.connect(t),Ys.call(this,e,t)||this}Ys.call(this,null)}function vo(){var t=this;if(!Ds.useLegacy){var e=Ds.context.audioContext,r=e.createChannelSplitter(),e=e.createChannelMerger();return e.connect(r),(t=zs.call(this,e,r)||this)._merger=e,t}t=zs.call(this,null)||this}function xo(t,e,r){void 0===t&&(t=3),void 0===e&&(e=2),void 0===r&&(r=!1);var i=this;if(!Ds.useLegacy)return(i=Ws.call(this,null)||this)._seconds=i._clamp(t,1,50),i._decay=i._clamp(e,0,100),i._reverse=r,i._rebuild(),i;i=Ws.call(this,null)||this}function go(t){void 0===t&&(t=0);var e=this;if(!Ds.useLegacy){var r,i,n=Ds.context.audioContext,n=n.createStereoPanner?r=n.createStereoPanner():((i=n.createPanner()).panningModel="equalpower",i);return(e=Zs.call(this,n)||this)._stereo=r,e._panner=i,e.pan=t,e}e=Zs.call(this,null)||this}function Eo(t){void 0===t&&(t=0);var e=this;if(!Ds.useLegacy){var r=Ds.context.audioContext.createWaveShaper();return(e=Ks.call(this,r)||this)._distortion=r,e.amount=t,e}e=Ks.call(this,null)||this}function To(t,e,r,i,n,s,o,a,h,u){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===u&&(u=0);var l=this;if(!Ds.useLegacy){u=[{f:To.F32,type:"lowshelf",gain:t},{f:To.F64,type:"peaking",gain:e},{f:To.F125,type:"peaking",gain:r},{f:To.F250,type:"peaking",gain:i},{f:To.F500,type:"peaking",gain:n},{f:To.F1K,type:"peaking",gain:s},{f:To.F2K,type:"peaking",gain:o},{f:To.F4K,type:"peaking",gain:a},{f:To.F8K,type:"peaking",gain:h},{f:To.F16K,type:"highshelf",gain:u}].map(function(t){var e=Ds.context.audioContext.createBiquadFilter();return e.type=t.type,ho.setParamValue(e.Q,1),e.frequency.value=t.f,ho.setParamValue(e.gain,t.gain),e});(l=qs.call(this,u[0],u[u.length-1])||this).bands=u,l.bandsMap={};for(var c=0;c<l.bands.length;c++){var d=l.bands[c];0<c&&l.bands[c-1].connect(d),l.bandsMap[d.frequency.value]=d}return l}l=qs.call(this,null)||this}function bo(t,e){this.init(t,e)}function Ao(){this.init()}function So(){var t=this,e=window,r=new So.AudioContext,i=r.createDynamicsCompressor(),n=r.createAnalyser();return n.connect(i),i.connect(r.destination),(t=Js.call(this,n,i)||this)._ctx=r,t._offlineCtx=new So.OfflineAudioContext(1,2,e.OfflineAudioContext?r.sampleRate:44100),t._unlocked=!1,t.compressor=i,t.analyser=n,t.events=new pt.a,t.volume=1,t.speed=1,t.muted=!1,t.paused=!1,"running"!==r.state&&(t._unlock(),t._unlock=t._unlock.bind(t),document.addEventListener("mousedown",t._unlock,!0),document.addEventListener("touchstart",t._unlock,!0),document.addEventListener("touchend",t._unlock,!0)),t}function Io(){var t=null!==Qs&&Qs.apply(this,arguments)||this;return t.speed=1,t.muted=!1,t.volume=1,t.paused=!1,t}function Ro(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);t=e.complete;this._autoPlayOptions=t?{complete:t}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}function Oo(){}function wo(t){var e=this,r=t.audioContext,i=r.createBufferSource(),n=r.createGain(),r=r.createAnalyser();return i.connect(r),r.connect(n),n.connect(t.destination),(e=$s.call(this,r,n)||this).context=t,e.bufferSource=i,e.gain=n,e.analyser=r,e}function Co(t,e){this._output=e,this._input=t}function Po(t){var e=to.call(this)||this;return e.id=uo++,e._media=null,e._paused=!1,e._muted=!1,e._elapsed=0,e.init(t),e}function No(){}function Mo(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start}function Lo(){return null!==eo&&eo.apply(this,arguments)||this}function Do(t){var e=ro.call(this)||this;return e.id=no++,e.init(t),e}function Uo(){}e=new e,Ds=e;Ns.registerPlugin(io);function Fo(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var Bo=/iPhone/i,ko=/iPod/i,Go=/iPad/i,Xo=/\biOS-universal(?:.+)Mac\b/i,Ho=/\bAndroid(?:.+)Mobile\b/i,Vo=/Android/i,jo=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Yo=/Silk/i,zo=/Windows Phone/i,Wo=/\bWindows(?:.+)ARM\b/i,Zo=/BlackBerry/i,Ko=/BB10/i,qo=/Opera Mini/i,Jo=/\b(CriOS|Chrome)(?:.+)Mobile/i,Qo=/Mobile(?:.+)Firefox\b/i;var $o=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(Bo)&&!i(zo),ipod:i(ko),tablet:!i(Bo)&&(i(Go)||Fo(e))&&!i(zo),universal:i(Xo),device:(i(Bo)||i(ko)||i(Go)||i(Xo)||Fo(e))&&!i(zo)},amazon:{phone:i(jo),tablet:!i(jo)&&i(Yo),device:i(jo)||i(Yo)},android:{phone:!i(zo)&&i(jo)||!i(zo)&&i(Ho),tablet:!i(zo)&&!i(jo)&&!i(Ho)&&(i(Yo)||i(Vo)),device:!i(zo)&&(i(jo)||i(Yo)||i(Ho)||i(Vo))||i(/\bokhttp\b/i)},windows:{phone:i(zo),tablet:i(Wo),device:i(zo)||i(Wo)},other:{blackberry:i(Zo),blackberry10:i(Ko),opera:i(qo),firefox:i(Qo),chrome:i(Jo),device:i(Zo)||i(Ko)||i(qo)||i(Qo)||i(Jo)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(e={})[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",(e={})[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",(e={})[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",(e={})[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",(e={})[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",(e={})[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(e={})[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(e={})[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=36193]="HALF_FLOAT",(e={})[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",(e=Wh=Wh||{})[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",(e=Bh=Bh||{})[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(e=nu=nu||{})[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",(e={})[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(e={})[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",(e=Dh=Dh||{})[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",(e=$h=$h||{}).LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",(e={})[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",(e={})[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH";var ta,ea,ra,ia,na,sa,oa,aa,ha,ua,la,ca,da,fa,pa,_a,ya,ma,va,xa,ga,Ea={MIPMAP_TEXTURES:nu.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(ta=32,ra=!0,($o.tablet||$o.phone)&&($o.apple.device&&(ea=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(ea[1],10)<11&&(ra=!1),$o.android.device&&(ea=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(ea[1],10)<7&&(ra=!1)),ra?ta:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Dh.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:Bh.CLAMP,SCALE_MODE:Wh.LINEAR,PRECISION_VERTEX:$h.HIGH,PRECISION_FRAGMENT:$o.apple.device?$h.HIGH:$h.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!$o.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};(e=ia=ia||{})[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",(nu=na=na||{})[nu.UNKNOWN=0]="UNKNOWN",nu[nu.WEBGL=1]="WEBGL",nu[nu.CANVAS=2]="CANVAS",(Dh=sa=sa||{})[Dh.COLOR=16384]="COLOR",Dh[Dh.DEPTH=256]="DEPTH",Dh[Dh.STENCIL=1024]="STENCIL",(Bh=oa=oa||{})[Bh.NORMAL=0]="NORMAL",Bh[Bh.ADD=1]="ADD",Bh[Bh.MULTIPLY=2]="MULTIPLY",Bh[Bh.SCREEN=3]="SCREEN",Bh[Bh.OVERLAY=4]="OVERLAY",Bh[Bh.DARKEN=5]="DARKEN",Bh[Bh.LIGHTEN=6]="LIGHTEN",Bh[Bh.COLOR_DODGE=7]="COLOR_DODGE",Bh[Bh.COLOR_BURN=8]="COLOR_BURN",Bh[Bh.HARD_LIGHT=9]="HARD_LIGHT",Bh[Bh.SOFT_LIGHT=10]="SOFT_LIGHT",Bh[Bh.DIFFERENCE=11]="DIFFERENCE",Bh[Bh.EXCLUSION=12]="EXCLUSION",Bh[Bh.HUE=13]="HUE",Bh[Bh.SATURATION=14]="SATURATION",Bh[Bh.COLOR=15]="COLOR",Bh[Bh.LUMINOSITY=16]="LUMINOSITY",Bh[Bh.NORMAL_NPM=17]="NORMAL_NPM",Bh[Bh.ADD_NPM=18]="ADD_NPM",Bh[Bh.SCREEN_NPM=19]="SCREEN_NPM",Bh[Bh.NONE=20]="NONE",Bh[Bh.SRC_OVER=0]="SRC_OVER",Bh[Bh.SRC_IN=21]="SRC_IN",Bh[Bh.SRC_OUT=22]="SRC_OUT",Bh[Bh.SRC_ATOP=23]="SRC_ATOP",Bh[Bh.DST_OVER=24]="DST_OVER",Bh[Bh.DST_IN=25]="DST_IN",Bh[Bh.DST_OUT=26]="DST_OUT",Bh[Bh.DST_ATOP=27]="DST_ATOP",Bh[Bh.ERASE=26]="ERASE",Bh[Bh.SUBTRACT=28]="SUBTRACT",Bh[Bh.XOR=29]="XOR",(Wh=aa=aa||{})[Wh.POINTS=0]="POINTS",Wh[Wh.LINES=1]="LINES",Wh[Wh.LINE_LOOP=2]="LINE_LOOP",Wh[Wh.LINE_STRIP=3]="LINE_STRIP",Wh[Wh.TRIANGLES=4]="TRIANGLES",Wh[Wh.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Wh[Wh.TRIANGLE_FAN=6]="TRIANGLE_FAN",($h=ha=ha||{})[$h.RGBA=6408]="RGBA",$h[$h.RGB=6407]="RGB",$h[$h.ALPHA=6406]="ALPHA",$h[$h.LUMINANCE=6409]="LUMINANCE",$h[$h.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",$h[$h.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",$h[$h.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(e=ua=ua||{})[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(nu=la=la||{})[nu.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",nu[nu.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",nu[nu.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",nu[nu.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",nu[nu.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",nu[nu.FLOAT=5126]="FLOAT",nu[nu.HALF_FLOAT=36193]="HALF_FLOAT",(Dh=ca=ca||{})[Dh.FLOAT=0]="FLOAT",Dh[Dh.INT=1]="INT",Dh[Dh.UINT=2]="UINT",(Bh=da=da||{})[Bh.NEAREST=0]="NEAREST",Bh[Bh.LINEAR=1]="LINEAR",(Wh=fa=fa||{})[Wh.CLAMP=33071]="CLAMP",Wh[Wh.REPEAT=10497]="REPEAT",Wh[Wh.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",($h=pa=pa||{})[$h.OFF=0]="OFF",$h[$h.POW2=1]="POW2",$h[$h.ON=2]="ON",$h[$h.ON_MANUAL=3]="ON_MANUAL",(e=_a=_a||{})[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(nu=ya=ya||{})[nu.NO=0]="NO",nu[nu.YES=1]="YES",nu[nu.AUTO=2]="AUTO",nu[nu.BLEND=0]="BLEND",nu[nu.CLEAR=1]="CLEAR",nu[nu.BLIT=2]="BLIT",(Dh=ma=ma||{})[Dh.AUTO=0]="AUTO",Dh[Dh.MANUAL=1]="MANUAL",(Bh=va=va||{}).LOW="lowp",Bh.MEDIUM="mediump",Bh.HIGH="highp",(Wh=xa=xa||{})[Wh.NONE=0]="NONE",Wh[Wh.SCISSOR=1]="SCISSOR",Wh[Wh.STENCIL=2]="STENCIL",Wh[Wh.SPRITE=3]="SPRITE",($h=ga=ga||{})[$h.NONE=0]="NONE",$h[$h.LOW=2]="LOW",$h[$h.MEDIUM=4]="MEDIUM",$h[$h.HIGH=8]="HIGH";r(6);var Ta={parse:_t.parse,format:_t.format,resolve:_t.resolve};Ea.RETINA_PREFIX=/@([0-9\.]+)x/;var ba,Aa=Ea.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,Sa="6.0.4";var Ia=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[oa.NORMAL_NPM]=oa.NORMAL,t[oa.ADD_NPM]=oa.ADD,t[oa.SCREEN_NPM]=oa.SCREEN,e[oa.NORMAL]=oa.NORMAL_NPM,e[oa.ADD]=oa.ADD_NPM,e[oa.SCREEN]=oa.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function Ra(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function Oa(t){return!(t&t-1||!t)}function wa(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}function Ca(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}function Pa(t){return 0===t?0:t<0?-1:1}var Na=0;var Ma={};function La(t,e,r){var i;void 0===r&&(r=3),Ma[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),Ma[e]=!0)}var Da={},Ua=Object.create(null),Fa=Object.create(null);Ba.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},Ba.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},Ba.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(Ba.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ba.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function Ba(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||Ea.RESOLUTION,this.resize(t,e)}var ka;function Ga(t,e){t=Ea.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var Xa,Ha=(Va.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},Va.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},Va.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},Va.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},Va.prototype.contains=function(t){return-1!==this.items.indexOf(t)},Va.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Va.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(Va.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(Va.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Va);function Va(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(Ha.prototype,{dispatch:{value:Ha.prototype.emit},run:{value:Ha.prototype.emit}}),Ea.TARGET_FPMS=.06,(e=Xa=Xa||{})[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY";var ja=(Ya.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},Ya.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},Ya.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},Ya.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},Ya);function Ya(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var za=(Wa.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Wa.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Wa.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Wa.prototype.add=function(t,e,r){return void 0===r&&(r=Xa.NORMAL),this._addListener(new ja(t,e,r))},Wa.prototype.addOnce=function(t,e,r){return void 0===r&&(r=Xa.NORMAL),this._addListener(new ja(t,e,r,!0))},Wa.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},Wa.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Wa.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),Wa.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Wa.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Wa.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},Wa.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*Ea.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(Wa.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(Wa.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,Ea.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(Wa.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(Wa,"shared",{get:function(){var t;return Wa._shared||((t=Wa._shared=new Wa).autoStart=!0,t._protected=!0),Wa._shared},enumerable:!1,configurable:!0}),Object.defineProperty(Wa,"system",{get:function(){var t;return Wa._system||((t=Wa._system=new Wa).autoStart=!0,t._protected=!0),Wa._system},enumerable:!1,configurable:!0}),Wa);function Wa(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ja(null,null,1/0),this.deltaMS=1/Ea.TARGET_FPMS,this.elapsedMS=1/Ea.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}Za.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,Xa.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?za.shared:new za,t.autoStart&&this.start()},Za.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function Za(){}var Ka,qa=2*Math.PI,Ja=180/Math.PI,Qa=Math.PI/180;(nu=Ka=Ka||{})[nu.POLY=0]="POLY",nu[nu.RECT=1]="RECT",nu[nu.CIRC=2]="CIRC",nu[nu.ELIP=3]="ELIP",nu[nu.RREC=4]="RREC";var $a=(Object.defineProperty(th.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(th.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(th.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(th.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(th,"EMPTY",{get:function(){return new th(0,0,0,0)},enumerable:!1,configurable:!0}),th.prototype.clone=function(){return new th(this.x,this.y,this.width,this.height)},th.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},th.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},th.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},th.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},th.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},th.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},th.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},th.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},th);function th(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=Ka.RECT}eh.prototype.clone=function(){return new eh(this.x,this.y,this.radius)},eh.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},eh.prototype.getBounds=function(){return new $a(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},eh.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function eh(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=Ka.CIRC}rh.prototype.clone=function(){return new rh(this.x,this.y,this.width,this.height)},rh.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},rh.prototype.getBounds=function(){return new $a(this.x-this.width,this.y-this.height,this.width,this.height)},rh.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function rh(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=Ka.ELIP}ih.prototype.clone=function(){var t=new ih(this.points.slice());return t.closeStroke=this.closeStroke,t},ih.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},ih.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function ih(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=Ka.POLY,this.closeStroke=!0}nh.prototype.clone=function(){return new nh(this.x,this.y,this.width,this.height,this.radius)},nh.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},nh.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function nh(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=Ka.RREC}var sh=(oh.prototype.clone=function(){return new oh(this.x,this.y)},oh.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},oh.prototype.copyTo=function(t){return t.set(this.x,this.y),t},oh.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},oh.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},oh.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},oh);function oh(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var ah=(hh.prototype.clone=function(t,e){return new hh(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},hh.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},hh.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},hh.prototype.copyTo=function(t){return t.set(this._x,this._y),t},hh.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},hh.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(hh.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(hh.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),hh);function hh(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var uh=(lh.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},lh.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},lh.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},lh.prototype.apply=function(t,e){e=e||new sh;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},lh.prototype.applyInverse=function(t,e){e=e||new sh;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},lh.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},lh.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},lh.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},lh.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},lh.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},lh.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},lh.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(qa-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},lh.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},lh.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},lh.prototype.clone=function(){var t=new lh;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},lh.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},lh.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},lh.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(lh,"IDENTITY",{get:function(){return new lh},enumerable:!1,configurable:!0}),Object.defineProperty(lh,"TEMP_MATRIX",{get:function(){return new lh},enumerable:!1,configurable:!0}),lh);function lh(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var ch=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],dh=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],fh=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ph=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],_h=[],yh=[],mh=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];_h.push(e);for(var r=0;r<16;r++)for(var i=mh(ch[t]*ch[r]+fh[t]*dh[r]),n=mh(dh[t]*ch[r]+ph[t]*dh[r]),s=mh(ch[t]*fh[r]+fh[t]*ph[r]),o=mh(dh[t]*fh[r]+ph[t]*ph[r]),a=0;a<16;a++)if(ch[a]===i&&dh[a]===n&&fh[a]===s&&ph[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new uh;h.set(ch[t],dh[t],fh[t],ph[t],0,0),yh.push(h)}}();var vh={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return ch[t]},uY:function(t){return dh[t]},vX:function(t){return fh[t]},vY:function(t){return ph[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return _h[t][e]},sub:function(t,e){return _h[t][vh.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?vh.S:vh.N:2*Math.abs(e)<=Math.abs(t)?0<t?vh.E:vh.W:0<e?0<t?vh.SE:vh.SW:0<t?vh.NE:vh.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=yh[vh.inv(e)];e.tx=r,e.ty=i,t.append(e)}},xh=(gh.prototype.onChange=function(){this._localID++},gh.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},gh.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},gh.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},gh.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},gh.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(gh.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),gh.IDENTITY=new gh,gh);function gh(){this.worldTransform=new uh,this.localTransform=new uh,this.position=new ah(this.onChange,this,0,0),this.scale=new ah(this.onChange,this,1,1),this.pivot=new ah(this.onChange,this,0,0),this.skew=new ah(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}Ea.PREFER_ENV=$o.any?ia.WEBGL:ia.WEBGL2,Ea.STRICT_TEXTURE_CACHE=!1;var Eh=[];function Th(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=Eh.length-1;0<=n;--n){var s=Eh[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var bh=function(t,e){return(bh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Ah(t,e){function r(){this.constructor=t}bh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Sh=(Ih.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},Ih.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},Ih.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(Ih.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),Ih.prototype.update=function(){this.destroyed||this.onUpdate.emit()},Ih.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(Ih.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(Ih.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Ih.prototype.style=function(t,e,r){return!1},Ih.prototype.dispose=function(){},Ih.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Ih.test=function(t,e){return!1},Ih);function Ih(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Ha("setRealSize"),this.onUpdate=new Ha("update"),this.onError=new Ha("onError")}var Rh,Oh=(Ah(wh,Rh=Sh),wh.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===_a.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},wh.prototype.dispose=function(){this.data=null},wh.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},wh);function wh(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=Rh.call(this,e,i)||this).data=t,r}var Ch,Ph={scaleMode:da.NEAREST,format:ha.RGBA,alphaMode:_a.NPM},Nh=(Ah(Mh,Ch=pt.a),Object.defineProperty(Mh.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(Mh.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Mh.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},Mh.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},Mh.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},Mh.prototype._refreshPOT=function(){this.isPowerOfTwo=Oa(this.realWidth)&&Oa(this.realHeight)},Mh.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},Mh.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},Mh.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},Mh.prototype.onError=function(t){this.emit("error",this,t)},Mh.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Fa[this.cacheId],delete Ua[this.cacheId],this.cacheId=null),this.dispose(),Mh.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},Mh.prototype.dispose=function(){this.emit("dispose",this)},Mh.prototype.castToBaseTexture=function(){return this},Mh.from=function(t,e,r){void 0===r&&(r=Ea.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++Na),t._pixiId),s=Fa[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new Mh(t,e)).cacheId=n,Mh.addToCache(s,n)),s},Mh.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new Oh(t,{width:e,height:r}),t=t instanceof Float32Array?la.FLOAT:la.UNSIGNED_BYTE;return new Mh(n,Object.assign(Ph,i||{width:e,height:r,type:t}))},Mh.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Fa[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),Fa[e]=t)},Mh.removeFromCache=function(t){if("string"==typeof t){var e=Fa[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete Fa[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete Fa[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Mh._globalBatch=0,Mh);function Mh(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=Ch.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof Sh||((t=Th(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||Ea.RESOLUTION,r.mipmap=void 0!==n?n:Ea.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:Ea.ANISOTROPIC_LEVEL,r.wrapMode=u||Ea.WRAP_MODE,r.scaleMode=void 0!==o?o:Ea.SCALE_MODE,r.format=l||ha.RGBA,r.type=c||la.UNSIGNED_BYTE,r.target=d||ua.TEXTURE_2D,r.alphaMode=void 0!==i?i:_a.UNPACK,r.uid=++Na,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var Lh,Dh=(Ah(Uh,Lh=Sh),Uh.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof Sh?this.addResourceAt(t[r],r):this.addResourceAt(Th(t[r],e),r))},Uh.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},Uh.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},Uh.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");Lh.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},Uh.prototype.unbind=function(t){Lh.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},Uh.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},Uh);function Uh(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=Lh.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new Nh;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var Fh,Bh=(Ah(kh,Fh=Dh),kh.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},kh.prototype.bind=function(t){Fh.prototype.bind.call(this,t),t.target=ua.TEXTURE_2D_ARRAY},kh.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},kh);function kh(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=Fh.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var Gh,Xh=(Ah(Hh,Gh=Sh),Hh.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(ka=ka||document.createElement("a")).href=t;var r=Ta.parse(ka.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},Hh.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===_a.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},Hh.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),Gh.prototype.update.call(this))},Hh.prototype.dispose=function(){this.source=null},Hh);function Hh(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=Gh.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var Vh,jh=(Ah(Yh,Vh=Xh),Yh.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},Yh);function Yh(t){return Vh.call(this,t)||this}var zh,Wh=(Ah(Zh,zh=Dh),Zh.prototype.bind=function(t){zh.prototype.bind.call(this,t),t.target=ua.TEXTURE_CUBE_MAP},Zh.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=ua.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},Zh.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<Zh.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},Zh.test=function(t){return Array.isArray(t)&&t.length===Zh.SIDES},Zh.SIDES=6,Zh);function Zh(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==Zh.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=zh.call(this,6,{width:n,height:s})||this,a=0;a<Zh.SIDES;a++)r.items[a].target=ua.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var Kh,qh=(Ah(Jh,Kh=Xh),Jh.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},Jh.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===_a.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},Jh.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return Kh.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(Kh.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},Jh.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,Kh.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},Jh.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},Jh);function Jh(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,Xh.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=Kh.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:Ea.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var Qh,$h=(Ah(tu,Qh=Xh),tu.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},tu.prototype._loadSvg=function(){var s=this,o=new Image;Xh.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++Na,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},tu.getSize=function(t){var e=tu.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},tu.prototype.dispose=function(){Qh.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},tu.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},tu.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,tu);function tu(t,e){var r=this;return e=e||{},(r=Qh.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var eu,e=(Ah(ru,eu=Xh),ru.prototype.update=function(t){var e;this.destroyed||(e=za.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(eu.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},ru.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},ru.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},ru.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},ru.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},ru.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(za.shared.add(this.update,this),this._isConnectedToTicker=!0)},ru.prototype._onPlayStop=function(){this._isConnectedToTicker&&(za.shared.remove(this.update,this),this._isConnectedToTicker=!1)},ru.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},ru.prototype.dispose=function(){this._isConnectedToTicker&&za.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),eu.prototype.dispose.call(this)},Object.defineProperty(ru.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(za.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(za.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(ru.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),ru.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<ru.TYPES.indexOf(e)},ru.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],ru.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},ru);function ru(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];Xh.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||ru.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=eu.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var iu,nu=(Ah(su,iu=Xh),su.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},su);function su(t){return iu.call(this,t)||this}Eh.push(qh,nu,jh,e,$h,Oh,Wh,Bh);var ou={__proto__:null,Resource:Sh,BaseImageResource:Xh,INSTALLED:Eh,autoDetectResource:Th,AbstractMultiResource:Dh,ArrayResource:Bh,BufferResource:Oh,CanvasResource:jh,CubeResource:Wh,ImageResource:qh,SVGResource:$h,VideoResource:e,ImageBitmapResource:nu},$h=(au.prototype.destroy=function(){this.renderer=null},au);function au(t){this.renderer=t}var hu,uu=(Ah(lu,hu=Oh),lu.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===_a.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},lu);function lu(){return null!==hu&&hu.apply(this,arguments)||this}var cu=(Object.defineProperty(du.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),du.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new Nh(null,{scaleMode:da.NEAREST,resolution:1,mipmap:pa.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},du.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Nh(new uu(null,{width:this.width,height:this.height}),{scaleMode:da.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:pa.OFF,format:ha.DEPTH_COMPONENT,type:la.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},du.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},du.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},du.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},du.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},du.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},du);function du(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ha("disposeFramebuffer"),this.multisample=ga.NONE}var fu,pu=(Ah(_u,fu=Nh),_u.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},_u.prototype.dispose=function(){this.framebuffer.dispose(),fu.prototype.dispose.call(this)},_u.prototype.destroy=function(){fu.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},_u);function _u(t){var e=this,e=fu.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=pa.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new cu(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var yu=(mu.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=vh.add(r,vh.NW),this.x0=s+i*vh.uX(r),this.y0=e+n*vh.uY(r),r=vh.add(r,2),this.x1=s+i*vh.uX(r),this.y1=e+n*vh.uY(r),r=vh.add(r,2),this.x2=s+i*vh.uX(r),this.y2=e+n*vh.uY(r),r=vh.add(r,2),this.x3=s+i*vh.uX(r),this.y3=e+n*vh.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},mu.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},mu);function mu(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var vu,xu=new yu,gu=(Ah(Eu,vu=pt.a),Eu.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},Eu.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},Eu.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&Ua[t.url]&&Eu.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Eu.removeFromCache(this),this.textureCacheIds=null},Eu.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new Eu(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},Eu.prototype.updateUvs=function(){this._uvs===xu&&(this._uvs=new yu),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},Eu.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=Ea.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++Na),t._pixiId),s=Ua[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=Ga(t)),(s=new Eu(new Nh(t,e))).baseTexture.cacheId=n,Nh.addToCache(s.baseTexture,n),Eu.addToCache(s,n)),s},Eu.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=Eu.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},Eu.fromBuffer=function(t,e,r,i){return new Eu(Nh.fromBuffer(t,e,r,i))},Eu.fromLoader=function(t,e,r,i){t=new Nh(t,Object.assign({scaleMode:Ea.SCALE_MODE,resolution:Ga(e)},i)),i=t.resource;i instanceof qh&&(i.url=e);var n=new Eu(t);return Nh.addToCache(n.baseTexture,r=r||e),Eu.addToCache(n,r),r!==e&&(Nh.addToCache(n.baseTexture,e),Eu.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},Eu.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Ua[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),Ua[e]=t)},Eu.removeFromCache=function(t){if("string"==typeof t){var e=Ua[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete Ua[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)Ua[t.textureCacheIds[i]]===t&&delete Ua[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(Eu.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(Eu.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Eu.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Eu.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(Eu.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),Eu.prototype.castToBaseTexture=function(){return this.baseTexture},Eu);function Eu(t,e,r,i,n,s){var o=vu.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new $a(0,0,1,1)),t instanceof Eu&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=xu,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new sh(s.x,s.y):new sh(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function Tu(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}gu.EMPTY=new gu(new Nh),Tu(gu.EMPTY),Tu(gu.EMPTY.baseTexture),gu.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new gu(new Nh(new jh(t)))}(),Tu(gu.WHITE),Tu(gu.WHITE.baseTexture);var bu,Au=(Ah(Su,bu=gu),Object.defineProperty(Su.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Su.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},Su.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},Su.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(La("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new Su(new pu(t))},Su);function Su(t,e){e=bu.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var Iu=(Ru.prototype.createTexture=function(t,e){e=new pu(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Au(e)},Ru.prototype.getOptimalTexture=function(t,e,r){var i=Ru.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=Ra(t)))<<16|65535&(e=Ra(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},Ru.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},Ru.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},Ru.prototype.returnFilterTexture=function(t){this.returnTexture(t)},Ru.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},Ru.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=Ru.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},Ru.SCREEN_KEY="screen",Ru);function Ru(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var Ou=(wu.prototype.destroy=function(){this.buffer=null},wu.from=function(t,e,r,i,n){return new wu(t,e,r,i,n)},wu);function wu(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=la.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var Cu=0,Pu=(Nu.prototype.update=function(t){this.data=t||this.data,this._updateID++},Nu.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Nu.prototype.destroy=function(){this.dispose(),this.data=null},Nu.from=function(t){return new Nu(t=t instanceof Array?new Float32Array(t):t)},Nu);function Nu(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=Cu++,this.disposeRunner=new Ha("disposeBuffer")}function Mu(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var Lu={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Du={5126:4,5123:2,5121:1},Uu=0,Fu={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},e=(Bu.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Pu||(e instanceof Array&&(e=new Float32Array(e)),e=new Pu(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new Ou(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},Bu.prototype.getAttribute=function(t){return this.attributes[t]},Bu.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},Bu.prototype.addIndex=function(t){return t instanceof Pu||(t instanceof Array&&(t=new Uint16Array(t)),t=new Pu(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},Bu.prototype.getIndex=function(){return this.indexBuffer},Bu.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new Pu;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*Du[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=Mu(l);n[c]||(n[c]=new Lu[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Bu.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},Bu.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Bu.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},Bu.prototype.clone=function(){for(var t=new Bu,e=0;e<this.buffers.length;e++)t.buffers[e]=new Pu(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new Ou(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},Bu.merge=function(t){for(var e=new Bu,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new Fu[Mu(o.buffers[s].data)](i[s]),e.buffers[s]=new Pu(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*Du[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},Bu);function Bu(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Uu++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ha("disposeGeometry"),this.refCount=0}var ku,Gu=(Ah(Xu,ku=e),Xu);function Xu(){var t=ku.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var Hu,Vu=(Ah(ju,Hu=e),ju.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},ju.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},ju);function ju(){var t=Hu.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Pu(t.vertices),t.uvBuffer=new Pu(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var Yu=0,zu=(Wu.prototype.update=function(){this.dirtyId++},Wu.prototype.add=function(t,e,r){this.uniforms[t]=new Wu(e,r)},Wu.from=function(t,e){return new Wu(t,e)},Wu);function Wu(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Yu++,this.static=!!e}var Zu=(Ku.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},Ku);function Ku(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new $a,this.destinationFrame=new $a,this.bindingSourceFrame=new $a,this.bindingDestinationFrame=new $a,this.filters=[],this.transform=null}var qu,Ju=[new sh,new sh,new sh,new sh],Qu=new uh,$u=(Ah(tl,qu=$h),tl.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new Zu,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(Qu.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},tl.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,ya.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,ya.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,ya.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},tl.prototype.bindAndClear=function(t,e){void 0===e&&(e=ya.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===ya.CLEAR||e===ya.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},tl.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(aa.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(aa.TRIANGLE_STRIP))},tl.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(uh.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},tl.prototype.destroy=function(){this.texturePool.clear(!1)},tl.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},tl.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},tl.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},tl.prototype.emptyPool=function(){this.texturePool.clear(!0)},tl.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},tl.prototype.transformAABB=function(t,e){var r=Ju[0],i=Ju[1],n=Ju[2],s=Ju[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},tl.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?Qu.copyFrom(n):Qu.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},tl);function tl(t){var e=qu.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new Iu,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new Gu,e.quadUv=new Vu,e.tempRect=new $a,e.activeState={},e.globalUniforms=new zu({outputFrame:new $a,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var el=(rl.prototype.flush=function(){},rl.prototype.destroy=function(){this.renderer=null},rl.prototype.start=function(){},rl.prototype.stop=function(){this.flush()},rl.prototype.render=function(t){},rl);function rl(t){this.renderer=t}var il,nl=(Ah(sl,il=$h),sl.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},sl.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},sl.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},sl.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},sl.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},sl);function sl(t){var e=il.call(this,t)||this;return e.emptyRenderer=new el(t),e.currentRenderer=e.emptyRenderer,e}var ol,al=0,hl=(Ah(ul,ol=$h),Object.defineProperty(ul.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),ul.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=al++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},ul.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=al++,this.renderer.runners.contextChange.emit(t)},ul.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},ul.prototype.createContext=function(t,e){var r;if(r=Ea.PREFER_ENV>=ia.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},ul.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},ul.prototype.handleContextLost=function(t){t.preventDefault()},ul.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},ul.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},ul.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},ul.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},ul);function ul(t){var e=ol.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var ll,cl=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=ga.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},dl=new $a,fl=(Ah(pl,ll=$h),pl.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new $a,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,Ea.PREFER_ENV===ia.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},pl.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},pl.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(pl.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),pl.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=sa.COLOR|sa.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},pl.prototype.initFramebuffer=function(t){var e=this.gl,e=new cl(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},pl.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},pl.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},pl.prototype.detectSamples=function(t){var e=this.msaaSamples,r=ga.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?ga.NONE:r},pl.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new cu(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=dl).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},pl.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},pl.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},pl.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},pl.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new $a},pl);function pl(t){t=ll.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new cu(10,10),t.msaaSamples=null,t}var _l,yl=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},ml={5126:4,5123:2,5121:1},vl=(Ah(xl,_l=$h),xl.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=Ea.PREFER_ENV===ia.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},xl.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},xl.prototype.reset=function(){this.unbind()},xl.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},xl.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},xl.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},xl.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*ml[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*ml[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*ml[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new yl(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},xl.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},xl.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},xl.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},xl.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},xl.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},xl.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},xl);function xl(t){t=_l.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var gl=(El.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=xa.NONE,this.autoDetect=!0),this._target=null},El.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},El);function El(t){void 0===t&&(t=null),this.type=xa.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function Tl(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function bl(t,e,r,i){var n=Tl(t,t.VERTEX_SHADER,e),s=Tl(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function Al(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function Sl(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Al(2*e);case"bvec3":return Al(3*e);case"bvec4":return Al(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Il,Rl={},Ol=Rl;function wl(){var t,e;return(Ol===Rl||Ol&&Ol.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=Ea.PREFER_ENV>=ia.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Ol=e),Ol}function Cl(t,e,r){if("precision"===t.substring(0,9))return r!==va.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===va.HIGH&&r!==va.HIGH?va.MEDIUM:e)+" float;\n"+t}var Pl={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var Nl=null,Ml={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Ll(t,e){if(!Nl){var r=Object.keys(Ml);Nl={};for(var i=0;i<r.length;++i){var n=r[i];Nl[t[n]]=Ml[n]}}return Nl[e]}var Dl=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Ul={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Fl={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Bl,kl=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Gl(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=kl.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var Xl=0,Hl={},Vl=(jl.prototype.extractData=function(t,e){var r=wl();r?(e=bl(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},jl.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=Ll(e,o.type),a={type:a,name:o.name,size:Pl[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},jl.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=Ll(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:Sl(h,s.size)}}return r},Object.defineProperty(jl,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(jl,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),jl.from=function(t,e,r){var i=t+e,n=Da[i];return n||(Da[i]=n=new jl(t,e,r)),n},jl);function jl(t,e,r){void 0===r&&(r="pixi-shader"),this.id=Xl++,this.vertexSrc=t||jl.defaultVertexSrc,this.fragmentSrc=e||jl.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),Hl[r]?(Hl[r]++,r+="-"+Hl[r]):Hl[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=Cl(this.vertexSrc,Ea.PRECISION_VERTEX,va.HIGH),this.fragmentSrc=Cl(this.fragmentSrc,Ea.PRECISION_FRAGMENT,(Il||(Il=va.MEDIUM,(r=wl())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),Il=r.precision?va.HIGH:va.MEDIUM)),Il))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var Yl=(zl.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},zl.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(zl.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),zl.from=function(t,e,r){return new zl(Vl.from(t,e),r)},zl);function zl(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof zu?e:new zu(e):new zu({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var Wl=(Object.defineProperty(Zl.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(Zl.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(Zl.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(Zl.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(Zl.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(Zl.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(Zl.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==oa.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Zl.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),Zl.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},Zl.for2d=function(){var t=new Zl;return t.depthTest=!1,t.blend=!0,t},Zl);function Zl(){this.data=0,this.blendMode=oa.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var Kl,nu=(Ah(ql,Kl=Yl),ql.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(ql.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(ql,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(ql,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),ql);function ql(t,e,r){var i=this,e=Vl.from(t||ql.defaultVertexSrc,e||ql.defaultFragmentSrc);return(i=Kl.call(this,e,r)||this).padding=0,i.resolution=Ea.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new Wl,i}var Jl=new uh,Ql=(Object.defineProperty($l.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),$l.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},$l.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(Jl.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Jl));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},$l);function $l(t,e){this._texture=t,this.mapCoord=new uh,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var tc,ec=(Ah(rc,tc=nu),rc.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Ql(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},rc);function rc(t){var e=this,r=new uh,e=tc.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var ic,nc=(Ah(sc,ic=$h),sc.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},sc.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new gl).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case xa.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case xa.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case xa.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},sc.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case xa.SCISSOR:this.renderer.scissor.pop();break;case xa.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case xa.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},sc.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=xa.SPRITE:(t.type=xa.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=xa.SCISSOR)))},sc.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new ec(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},sc.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},sc);function sc(t){t=ic.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var oc,nu=(Ah(ac,oc=$h),ac.prototype.getStackLength=function(){return this.maskStack.length},ac.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},ac.prototype._useCurrent=function(){},ac.prototype.destroy=function(){oc.prototype.destroy.call(this),this.maskStack=null},ac);function ac(t){t=oc.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var hc,uc=(Ah(lc,hc=nu),lc.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},lc.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},lc.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},lc.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},lc);function lc(t){t=hc.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var cc,dc=(Ah(fc,cc=nu),fc.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},fc.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},fc.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},fc.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},fc.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},fc);function fc(t){t=cc.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var pc,_c=(Ah(yc,pc=$h),yc.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},yc.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},yc.prototype.setTransform=function(t){},yc);function yc(t){t=pc.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new uh,t.transform=null,t}var mc,vc=new $a,xc=new $a,gc=(Ah(Ec,mc=$h),Ec.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(vc.width=t.frame.width,vc.height=t.frame.height,e=vc),r||(xc.x=t.frame.x,xc.y=t.frame.y,xc.width=e.width,xc.height=e.height,r=xc),n=i.framebuffer):(s=o.resolution,e||(vc.width=o.screen.width,vc.height=o.screen.height,e=vc),r||((r=vc).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},Ec.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},Ec.prototype.resize=function(){this.bind(null)},Ec.prototype.reset=function(){this.bind(null)},Ec);function Ec(t){var e=mc.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new $a,e.destinationFrame=new $a,e.viewportFrame=new $a,e}var Tc=(bc.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},bc);function bc(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var Ac,Sc=0,Ic={textureCount:0},Rc=(Ah(Oc,Ac=$h),Oc.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Bl)return Bl;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Bl=!0===t({a:"b"},"a","b")}catch(t){Bl=!1}return Bl}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},Oc.prototype.contextChange=function(t){this.gl=t,this.reset()},Oc.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(Ic.textureCount=0,this.syncUniformGroup(t.uniformGroup,Ic)),i},Oc.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},Oc.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},Oc.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},Oc.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<Dl.length;h++)if(Dl[h].test(n,o)){i.push(Dl[h].code(r,o)),a=!0;break}a||(s=(1===n.size?Ul:Fl)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},Oc.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},Oc.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},Oc.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=bl(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:Sl(a.type,a.size)}}t=new Tc(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},Oc.prototype.reset=function(){this.program=null,this.shader=null},Oc.prototype.destroy=function(){this.destroyed=!0},Oc);function Oc(t){t=Ac.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=Sc++,t}var wc,Cc=(Ah(Pc,wc=$h),Pc.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[oa.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.ADD]=[t.ONE,t.ONE],e[oa.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.NONE]=[0,0],e[oa.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[oa.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[oa.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[oa.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[oa.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[oa.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[oa.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[oa.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[oa.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[oa.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[oa.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},Pc.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},Pc.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},Pc.prototype.setBlend=function(t){this.updateCheck(Pc.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},Pc.prototype.setOffset=function(t){this.updateCheck(Pc.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},Pc.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},Pc.prototype.setDepthMask=function(t){this.gl.depthMask(t)},Pc.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},Pc.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},Pc.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},Pc.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},Pc.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},Pc.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},Pc.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},Pc.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},Pc);function Pc(t){t=wc.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=oa.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new Wl,t.defaultState.blend=!0,t}var Nc,Mc=(Ah(Lc,Nc=$h),Lc.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ma.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},Lc.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},Lc.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},Lc);function Lc(t){t=Nc.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=Ea.GC_MAX_IDLE,t.checkCountMax=Ea.GC_MAX_CHECK_COUNT,t.mode=Ea.GC_MODE,t}var Dc,Uc=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},Fc=(Ah(Bc,Dc=$h),Bc.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new Uc(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Uc(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},Bc.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},Bc.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},Bc.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},Bc.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==ca.FLOAT&&this.renderer.texture.unbind(s)}},Bc.prototype.initTexture=function(t){var e=new Uc(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},Bc.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===la.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},Bc.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==ca.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},Bc.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&Ca(this.managedTextures,t,1))},Bc.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==pa.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=fa.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},Bc.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==pa.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===da.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===da.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===da.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===da.LINEAR?i.LINEAR:i.NEAREST)},Bc);function Bc(t){t=Dc.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new Nh,t.hasIntegerTextures=!1,t}var kc,Gc={__proto__:null,FilterSystem:$u,BatchSystem:nl,ContextSystem:hl,FramebufferSystem:fl,GeometrySystem:vl,MaskSystem:nc,ScissorSystem:uc,StencilSystem:dc,ProjectionSystem:_c,RenderTextureSystem:gc,ShaderSystem:Rc,StateSystem:Cc,TextureGCSystem:Mc,TextureSystem:Fc},Xc=new uh,$h=(Ah(Hc,kc=pt.a),Hc.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(Hc.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(Hc.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),Hc.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},Hc.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=Au.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return Xc.tx=-i.x,Xc.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:Xc,skipUpdateTransform:!!t.parent}),r},Hc.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=na.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(Hc.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(Hc.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),Hc);function Hc(t,e){void 0===t&&(t=na.UNKNOWN);var r=kc.call(this)||this;return e=Object.assign({},Ea.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new $a(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||Ea.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(La("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var Vc;Ah(jc,Vc=$h),jc.create=function(t){if(ba=void 0===ba?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:Ea.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():ba)return new jc(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},jc.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},jc.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof Au?(La("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},jc.prototype.resize=function(t,e){Vc.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},jc.prototype.reset=function(){return this.runners.reset.emit(),this},jc.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},jc.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();Vc.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(jc.prototype,"extract",{get:function(){return La("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),jc.registerPlugin=function(t,e){(jc.__plugins=jc.__plugins||{})[t]=e};function jc(t){var e,r=Vc.call(this,na.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Ha("destroy"),contextChange:new Ha("contextChange"),reset:new Ha("reset"),update:new Ha("update"),postrender:new Ha("postrender"),prerender:new Ha("prerender"),resize:new Ha("resize")},r.globalUniforms=new zu({projectionMatrix:new uh},!0),r.addSystem(nc,"mask").addSystem(hl,"context").addSystem(Cc,"state").addSystem(Rc,"shader").addSystem(Fc,"texture").addSystem(vl,"geometry").addSystem(fl,"framebuffer").addSystem(uc,"scissor").addSystem(dc,"stencil").addSystem(_c,"projection").addSystem(Mc,"textureGC").addSystem($u,"filter").addSystem(gc,"renderTexture").addSystem(nl,"batch"),r.initPlugins(jc.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",Aa||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+Sa+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+Sa+" - "+e+" - http://www.pixijs.com/"),Aa=!0),r.resize(r.options.width,r.options.height),r}var Yc=function(){this.texArray=null,this.blend=0,this.type=aa.TRIANGLES,this.start=0,this.size=0,this.data=null},zc=(Wc.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},Wc);function Wc(){this.elements=[],this.ids=[],this.count=0}var Zc=(Object.defineProperty(Kc.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(Kc.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(Kc.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(Kc.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(Kc.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),Kc.prototype.view=function(t){return this[t+"View"]},Kc.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},Kc.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Kc);function Kc(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var qc,Jc=(Ah(Qc,qc=el),Qc.prototype.contextChange=function(){var t=this.renderer.gl;Ea.PREFER_ENV===ia.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Ea.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Gl(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},Qc.prototype.initFlushBuffers=function(){for(var t=Qc._drawCallPool,e=Qc._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new Yc);for(;e.length<i;)e.push(new zc);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},Qc.prototype.onPrerender=function(){this._flushId=0},Qc.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},Qc.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=Qc._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++Nh._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;Nh._globalBatch=o},Qc.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=Qc._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=Ia[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},Qc.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},Qc.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;Ea.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},Qc.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=Qc._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},Qc.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},Qc.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Ea.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},Qc.prototype.stop=function(){this.flush()},Qc.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),qc.prototype.destroy.call(this)},Qc.prototype.getAttributeBuffer=function(t){var e=Ra(Math.ceil(t/8)),t=wa(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new Zc(e*this.vertexSize*4)),t},Qc.prototype.getIndexBuffer=function(t){var e=Ra(Math.ceil(t/12)),r=wa(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},Qc.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},Qc._drawCallPool=[],Qc._textureArrayPool=[],Qc);function Qc(t){var e=qc.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=Wl.for2d(),e.size=4*Ea.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var $c=(td.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=zu.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Vl(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new uh,default:this.defaultGroupCache[t]};return new Yl(this.programCache[t],i)},td.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},td);function td(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var ed,rd=(Ah(id,ed=e),id);function id(t){void 0===t&&(t=!1);var e=ed.call(this)||this;return e._buffer=new Pu(null,t,!1),e._indexBuffer=new Pu(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,la.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,la.FLOAT).addAttribute("aColor",e._buffer,4,!0,la.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,la.FLOAT).addIndex(e._indexBuffer),e}var nd="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",sd="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function od(){}(od.create=function(t){var e,t=Object.assign({vertex:nd,fragment:sd,geometryClass:rd,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return Ah(o,e=Jc),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new $c(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(od,"defaultVertexSrc",{get:function(){return nd},enumerable:!1,configurable:!0}),Object.defineProperty(od,"defaultFragmentTemplate",{get:function(){return sd},enumerable:!1,configurable:!0}),od).create();var ad={};for(hd in ou)!function(t){Object.defineProperty(ad,t,{get:function(){return La("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),ou[t]}})}(hd);var hd,ud={};for(hd in Gc)!function(t){Object.defineProperty(ud,t,{get:function(){return La("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),Gc[t]}})}(hd);Ea.SORTABLE_CHILDREN=!1;var ld=(cd.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},cd.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},cd.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?$a.EMPTY:((t=t||new $a(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},cd.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},cd.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,t=t.ty,o=r*e.x+n*e.y+o,t=i*e.x+s*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},cd.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},cd.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},cd.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},cd.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},cd.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},cd.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},cd.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},cd.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},cd.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},cd.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},cd.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},cd.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},cd);function cd(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var dd=function(t,e){return(dd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function fd(t,e){function r(){this.constructor=t}dd(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var pd,$h=(fd(_d,pd=pt.a),_d.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(_d.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},_d.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},_d.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},_d.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new $a),e=this._boundsRect),this._bounds.getRectangle(e)},_d.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new $a),t=this._localBoundsRect),this._localBounds||(this._localBounds=new ld);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},_d.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},_d.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},_d.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},_d.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},_d.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(_d.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new md),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),_d.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},_d.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(_d.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"angle",{get:function(){return this.transform.rotation*Ja},set:function(t){this.transform.rotation=t*Qa},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),_d);function _d(){var t=pd.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new xh,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new ld,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var yd,md=(fd(vd,yd=$h),vd);function vd(){var t=null!==yd&&yd.apply(this,arguments)||this;return t.sortDirty=null,t}function xd(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}$h.prototype.displayObjectUpdateTransform=$h.prototype.updateTransform;var gd,Ed=(fd(Td,gd=$h),Td.prototype.onChildrenChange=function(t){},Td.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},Td.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},Td.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},Td.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},Td.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);Ca(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},Td.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},Td.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,Ca(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},Td.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Ca(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},Td.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Td.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(xd),this.sortDirty=!1},Td.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},Td.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},Td.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=gd.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},Td.prototype._calculateBounds=function(){},Td.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},Td.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},Td.prototype._render=function(t){},Td.prototype.destroy=function(t){gd.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(Td.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Td.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),Td);function Td(){var t=gd.call(this)||this;return t.children=[],t.sortableChildren=Ea.SORTABLE_CHILDREN,t.sortDirty=!1,t}Ed.prototype.containerUpdateTransform=Ed.prototype.updateTransform;var bd=function(t,e){return(bd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Ad,Sd,Id,Rd=new sh,Od=new Uint16Array([0,1,2,0,2,3]),wd=(bd(Sd=Pd,Id=Ad=Ed),Sd.prototype=null===Id?Object.create(Id):(Cd.prototype=Id.prototype,new Cd),Pd.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Pa(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Pa(this.scale.y)*this._height/this._texture.orig.height)},Pd.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},Pd.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,s=e.d,o=e.tx,a=e.ty,h=this.vertexData,u=t.trim,l=t.orig,c=this._anchor,d=0,f=0,e=0,t=0,e=u?(d=(f=u.x-c._x*l.width)+u.width,(t=u.y-c._y*l.height)+u.height):(d=(f=-c._x*l.width)+l.width,(t=-c._y*l.height)+l.height);if(h[0]=r*f+n*t+o,h[1]=s*t+i*f+a,h[2]=r*d+n*t+o,h[3]=s*t+i*d+a,h[4]=r*d+n*e+o,h[5]=s*e+i*d+a,h[6]=r*f+n*e+o,h[7]=s*e+i*f+a,this._roundPixels)for(var p=Ea.RESOLUTION,_=0;_<h.length;++_)h[_]=Math.round((h[_]*p|0)/p)}},Pd.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,h=n.d,u=n.tx,l=n.ty,t=-i._x*r.width,n=t+r.width,i=-i._y*r.height,r=i+r.height;e[0]=s*t+a*i+u,e[1]=h*i+o*t+l,e[2]=s*n+a*i+u,e[3]=h*i+o*n+l,e[4]=s*n+a*r+u,e[5]=h*r+o*n+l,e[6]=s*t+a*r+u,e[7]=h*r+o*t+l},Pd.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},Pd.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},Pd.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new $a),t=this._localBoundsRect),this._bounds.getRectangle(t)):Ad.prototype.getLocalBounds.call(this,t)},Pd.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Rd);var e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x,t=0;return Rd.x>=i&&Rd.x<i+e&&(t=-r*this.anchor.y,Rd.y>=t&&Rd.y<t+r)},Pd.prototype.destroy=function(t){Ad.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&(t="boolean"==typeof t?t:t&&t.baseTexture,this._texture.destroy(!!t)),this._texture=null},Pd.from=function(t,e){return new Pd(t instanceof gu?t:gu.from(t,e))},Object.defineProperty(Pd.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(Pd.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Pa(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Pd.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Pa(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(Pd.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Pd.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(Pd.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||gu.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),Pd);function Cd(){this.constructor=Sd}function Pd(t){var e=Ad.call(this)||this;return e._anchor=new ah(e._onAnchorUpdate,e,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),e._texture=null,e._width=0,e._height=0,e._tint=null,e._tintRGB=null,e.tint=16777215,e.blendMode=oa.NORMAL,e._cachedTint=16777215,e.uvs=null,e.texture=t||gu.EMPTY,e.vertexData=new Float32Array(8),e.vertexTrimmedData=null,e._transformID=-1,e._textureID=-1,e._transformTrimmedID=-1,e._textureTrimmedID=-1,e.indices=Od,e.pluginName="batch",e.isSprite=!0,e._roundPixels=Ea.ROUND_PIXELS,e}var Nd=function(t,e){return(Nd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Md,Ld,Dd;Nd(Ld=Fd,Dd=Md=wd),Ld.prototype=null===Dd?Object.create(Dd):(Ud.prototype=Dd.prototype,new Ud),Fd.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(za.shared.remove(this.update,this),this._isConnectedToTicker=!1))},Fd.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(za.shared.add(this.update,this,Xa.HIGH),this._isConnectedToTicker=!0))},Fd.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},Fd.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},Fd.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}},Fd.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},Fd.prototype.destroy=function(t){this.stop(),Md.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},Fd.fromFrames=function(t){for(var e=[],r=0;r<t.length;++r)e.push(gu.from(t[r]));return new Fd(e)},Fd.fromImages=function(t){for(var e=[],r=0;r<t.length;++r)e.push(gu.from(t[r]));return new Fd(e)},Object.defineProperty(Fd.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(Fd.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof gu)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(Fd.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(Fd.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(Fd.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(za.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(za.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0});function Ud(){this.constructor=Ld}function Fd(t,e){void 0===e&&(e=!0);var r=Md.call(this,t[0]instanceof gu?t[0]:t[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=e,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=t,r}e=r(29),$h=r(32),$h=r.n($h);self.Promise||(self.Promise=e.a),Object.assign||(Object.assign=$h.a);var Bd;Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),self.performance&&self.performance.now||(Bd=Date.now(),self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-Bd});for(var kd=Date.now(),Gd=["ms","moz","webkit","o"],Xd=0;Xd<Gd.length&&!self.requestAnimationFrame;++Xd){var Hd=Gd[Xd];self.requestAnimationFrame=self[Hd+"RequestAnimationFrame"],self.cancelAnimationFrame=self[Hd+"CancelAnimationFrame"]||self[Hd+"CancelRequestAnimationFrame"]}self.requestAnimationFrame||(self.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+kd-e;return r<0&&(r=0),kd=e,self.setTimeout(function(){kd=Date.now(),t(performance.now())},r)}),self.cancelAnimationFrame||(self.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:0<t?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),self.ArrayBuffer||(self.ArrayBuffer=Array),self.Float32Array||(self.Float32Array=Array),self.Uint32Array||(self.Uint32Array=Array),self.Uint16Array||(self.Uint16Array=Array),self.Uint8Array||(self.Uint8Array=Array),self.Int32Array||(self.Int32Array=Array);function Vd(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var jd=/iPhone/i,Yd=/iPod/i,zd=/iPad/i,Wd=/\biOS-universal(?:.+)Mac\b/i,Zd=/\bAndroid(?:.+)Mobile\b/i,Kd=/Android/i,qd=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Jd=/Silk/i,Qd=/Windows Phone/i,$d=/\bWindows(?:.+)ARM\b/i,tf=/BlackBerry/i,ef=/BB10/i,rf=/Opera Mini/i,nf=/\b(CriOS|Chrome)(?:.+)Mobile/i,sf=/Mobile(?:.+)Firefox\b/i;var of,af,hf,uf,lf=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(jd)&&!i(Qd),ipod:i(Yd),tablet:!i(jd)&&(i(zd)||Vd(e))&&!i(Qd),universal:i(Wd),device:(i(jd)||i(Yd)||i(zd)||i(Wd)||Vd(e))&&!i(Qd)},amazon:{phone:i(qd),tablet:!i(qd)&&i(Jd),device:i(qd)||i(Jd)},android:{phone:!i(Qd)&&i(qd)||!i(Qd)&&i(Zd),tablet:!i(Qd)&&!i(qd)&&!i(Zd)&&(i(Jd)||i(Kd)),device:!i(Qd)&&(i(qd)||i(Jd)||i(Zd)||i(Kd))||i(/\bokhttp\b/i)},windows:{phone:i(Qd),tablet:i($d),device:i(Qd)||i($d)},other:{blackberry:i(tf),blackberry10:i(ef),opera:i(rf),firefox:i(sf),chrome:i(nf),device:i(tf)||i(ef)||i(rf)||i(sf)||i(nf)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);($h={})[$h.WEBGL_LEGACY=0]="WEBGL_LEGACY",$h[$h.WEBGL=1]="WEBGL",$h[$h.WEBGL2=2]="WEBGL2",($h={})[$h.UNKNOWN=0]="UNKNOWN",$h[$h.WEBGL=1]="WEBGL",$h[$h.CANVAS=2]="CANVAS",($h={})[$h.COLOR=16384]="COLOR",$h[$h.DEPTH=256]="DEPTH",$h[$h.STENCIL=1024]="STENCIL",($h={})[$h.NORMAL=0]="NORMAL",$h[$h.ADD=1]="ADD",$h[$h.MULTIPLY=2]="MULTIPLY",$h[$h.SCREEN=3]="SCREEN",$h[$h.OVERLAY=4]="OVERLAY",$h[$h.DARKEN=5]="DARKEN",$h[$h.LIGHTEN=6]="LIGHTEN",$h[$h.COLOR_DODGE=7]="COLOR_DODGE",$h[$h.COLOR_BURN=8]="COLOR_BURN",$h[$h.HARD_LIGHT=9]="HARD_LIGHT",$h[$h.SOFT_LIGHT=10]="SOFT_LIGHT",$h[$h.DIFFERENCE=11]="DIFFERENCE",$h[$h.EXCLUSION=12]="EXCLUSION",$h[$h.HUE=13]="HUE",$h[$h.SATURATION=14]="SATURATION",$h[$h.COLOR=15]="COLOR",$h[$h.LUMINOSITY=16]="LUMINOSITY",$h[$h.NORMAL_NPM=17]="NORMAL_NPM",$h[$h.ADD_NPM=18]="ADD_NPM",$h[$h.SCREEN_NPM=19]="SCREEN_NPM",$h[$h.NONE=20]="NONE",$h[$h.SRC_OVER=0]="SRC_OVER",$h[$h.SRC_IN=21]="SRC_IN",$h[$h.SRC_OUT=22]="SRC_OUT",$h[$h.SRC_ATOP=23]="SRC_ATOP",$h[$h.DST_OVER=24]="DST_OVER",$h[$h.DST_IN=25]="DST_IN",$h[$h.DST_OUT=26]="DST_OUT",$h[$h.DST_ATOP=27]="DST_ATOP",$h[$h.ERASE=26]="ERASE",$h[$h.SUBTRACT=28]="SUBTRACT",$h[$h.XOR=29]="XOR",($h={})[$h.POINTS=0]="POINTS",$h[$h.LINES=1]="LINES",$h[$h.LINE_LOOP=2]="LINE_LOOP",$h[$h.LINE_STRIP=3]="LINE_STRIP",$h[$h.TRIANGLES=4]="TRIANGLES",$h[$h.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",$h[$h.TRIANGLE_FAN=6]="TRIANGLE_FAN",($h={})[$h.RGBA=6408]="RGBA",$h[$h.RGB=6407]="RGB",$h[$h.ALPHA=6406]="ALPHA",$h[$h.LUMINANCE=6409]="LUMINANCE",$h[$h.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",$h[$h.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",$h[$h.DEPTH_STENCIL=34041]="DEPTH_STENCIL",($h={})[$h.TEXTURE_2D=3553]="TEXTURE_2D",$h[$h.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",$h[$h.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",$h[$h.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",$h[$h.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",$h[$h.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",$h[$h.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",$h[$h.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",$h[$h.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",($h={})[$h.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",$h[$h.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",$h[$h.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",$h[$h.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",$h[$h.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",$h[$h.FLOAT=5126]="FLOAT",$h[$h.HALF_FLOAT=36193]="HALF_FLOAT",($h={})[$h.FLOAT=0]="FLOAT",$h[$h.INT=1]="INT",$h[$h.UINT=2]="UINT",($h=of=of||{})[$h.NEAREST=0]="NEAREST",$h[$h.LINEAR=1]="LINEAR",($h=af=af||{})[$h.CLAMP=33071]="CLAMP",$h[$h.REPEAT=10497]="REPEAT",$h[$h.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",($h=hf=hf||{})[$h.OFF=0]="OFF",$h[$h.POW2=1]="POW2",$h[$h.ON=2]="ON",$h[$h.ON_MANUAL=3]="ON_MANUAL",($h={})[$h.NPM=0]="NPM",$h[$h.UNPACK=1]="UNPACK",$h[$h.PMA=2]="PMA",$h[$h.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",$h[$h.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",$h[$h.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",($h={})[$h.NO=0]="NO",$h[$h.YES=1]="YES",$h[$h.AUTO=2]="AUTO",$h[$h.BLEND=0]="BLEND",$h[$h.CLEAR=1]="CLEAR",$h[$h.BLIT=2]="BLIT",($h=uf=uf||{})[$h.AUTO=0]="AUTO",$h[$h.MANUAL=1]="MANUAL",($h=_p=_p||{}).LOW="lowp",$h.MEDIUM="mediump",$h.HIGH="highp",($h={})[$h.NONE=0]="NONE",$h[$h.SCISSOR=1]="SCISSOR",$h[$h.STENCIL=2]="STENCIL",$h[$h.SPRITE=3]="SPRITE",($h={})[$h.NONE=0]="NONE",$h[$h.LOW=2]="LOW",$h[$h.MEDIUM=4]="MEDIUM",$h[$h.HIGH=8]="HIGH";var cf,df,ff,pf,_f,yf,mf,vf,xf,gf,Ef,Tf,bf,Af,Sf,If,Rf,Of,wf,Cf,Pf,Nf={MIPMAP_TEXTURES:hf.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(cf=32,ff=!0,(lf.tablet||lf.phone)&&(lf.apple.device&&(df=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(df[1],10)<11&&(ff=!1),lf.android.device&&(df=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(df[1],10)<7&&(ff=!1)),ff?cf:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:uf.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:af.CLAMP,SCALE_MODE:of.LINEAR,PRECISION_VERTEX:_p.HIGH,PRECISION_FRAGMENT:lf.apple.device?_p.HIGH:_p.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!lf.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};r(7);(_p=pf=pf||{})[_p.WEBGL_LEGACY=0]="WEBGL_LEGACY",_p[_p.WEBGL=1]="WEBGL",_p[_p.WEBGL2=2]="WEBGL2",(_p=_f=_f||{})[_p.UNKNOWN=0]="UNKNOWN",_p[_p.WEBGL=1]="WEBGL",_p[_p.CANVAS=2]="CANVAS",(_p=yf=yf||{})[_p.COLOR=16384]="COLOR",_p[_p.DEPTH=256]="DEPTH",_p[_p.STENCIL=1024]="STENCIL",(_p=mf=mf||{})[_p.NORMAL=0]="NORMAL",_p[_p.ADD=1]="ADD",_p[_p.MULTIPLY=2]="MULTIPLY",_p[_p.SCREEN=3]="SCREEN",_p[_p.OVERLAY=4]="OVERLAY",_p[_p.DARKEN=5]="DARKEN",_p[_p.LIGHTEN=6]="LIGHTEN",_p[_p.COLOR_DODGE=7]="COLOR_DODGE",_p[_p.COLOR_BURN=8]="COLOR_BURN",_p[_p.HARD_LIGHT=9]="HARD_LIGHT",_p[_p.SOFT_LIGHT=10]="SOFT_LIGHT",_p[_p.DIFFERENCE=11]="DIFFERENCE",_p[_p.EXCLUSION=12]="EXCLUSION",_p[_p.HUE=13]="HUE",_p[_p.SATURATION=14]="SATURATION",_p[_p.COLOR=15]="COLOR",_p[_p.LUMINOSITY=16]="LUMINOSITY",_p[_p.NORMAL_NPM=17]="NORMAL_NPM",_p[_p.ADD_NPM=18]="ADD_NPM",_p[_p.SCREEN_NPM=19]="SCREEN_NPM",_p[_p.NONE=20]="NONE",_p[_p.SRC_OVER=0]="SRC_OVER",_p[_p.SRC_IN=21]="SRC_IN",_p[_p.SRC_OUT=22]="SRC_OUT",_p[_p.SRC_ATOP=23]="SRC_ATOP",_p[_p.DST_OVER=24]="DST_OVER",_p[_p.DST_IN=25]="DST_IN",_p[_p.DST_OUT=26]="DST_OUT",_p[_p.DST_ATOP=27]="DST_ATOP",_p[_p.ERASE=26]="ERASE",_p[_p.SUBTRACT=28]="SUBTRACT",_p[_p.XOR=29]="XOR",(_p=vf=vf||{})[_p.POINTS=0]="POINTS",_p[_p.LINES=1]="LINES",_p[_p.LINE_LOOP=2]="LINE_LOOP",_p[_p.LINE_STRIP=3]="LINE_STRIP",_p[_p.TRIANGLES=4]="TRIANGLES",_p[_p.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",_p[_p.TRIANGLE_FAN=6]="TRIANGLE_FAN",(_p=xf=xf||{})[_p.RGBA=6408]="RGBA",_p[_p.RGB=6407]="RGB",_p[_p.ALPHA=6406]="ALPHA",_p[_p.LUMINANCE=6409]="LUMINANCE",_p[_p.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",_p[_p.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",_p[_p.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(_p=gf=gf||{})[_p.TEXTURE_2D=3553]="TEXTURE_2D",_p[_p.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",_p[_p.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",_p[_p.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",_p[_p.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",_p[_p.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",_p[_p.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",_p[_p.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",_p[_p.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(_p=Ef=Ef||{})[_p.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",_p[_p.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",_p[_p.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",_p[_p.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",_p[_p.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",_p[_p.FLOAT=5126]="FLOAT",_p[_p.HALF_FLOAT=36193]="HALF_FLOAT",(_p=Tf=Tf||{})[_p.FLOAT=0]="FLOAT",_p[_p.INT=1]="INT",_p[_p.UINT=2]="UINT",(_p=bf=bf||{})[_p.NEAREST=0]="NEAREST",_p[_p.LINEAR=1]="LINEAR",(_p=Af=Af||{})[_p.CLAMP=33071]="CLAMP",_p[_p.REPEAT=10497]="REPEAT",_p[_p.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(_p=Sf=Sf||{})[_p.OFF=0]="OFF",_p[_p.POW2=1]="POW2",_p[_p.ON=2]="ON",_p[_p.ON_MANUAL=3]="ON_MANUAL",(_p=If=If||{})[_p.NPM=0]="NPM",_p[_p.UNPACK=1]="UNPACK",_p[_p.PMA=2]="PMA",_p[_p.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",_p[_p.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",_p[_p.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(_p=Rf=Rf||{})[_p.NO=0]="NO",_p[_p.YES=1]="YES",_p[_p.AUTO=2]="AUTO",_p[_p.BLEND=0]="BLEND",_p[_p.CLEAR=1]="CLEAR",_p[_p.BLIT=2]="BLIT",(_p=Of=Of||{})[_p.AUTO=0]="AUTO",_p[_p.MANUAL=1]="MANUAL",(_p=wf=wf||{}).LOW="lowp",_p.MEDIUM="mediump",_p.HIGH="highp",(_p=Cf=Cf||{})[_p.NONE=0]="NONE",_p[_p.SCISSOR=1]="SCISSOR",_p[_p.STENCIL=2]="STENCIL",_p[_p.SPRITE=3]="SPRITE",(_p=Pf=Pf||{})[_p.NONE=0]="NONE",_p[_p.LOW=2]="LOW",_p[_p.MEDIUM=4]="MEDIUM",_p[_p.HIGH=8]="HIGH";var Mf={parse:_t.parse,format:_t.format,resolve:_t.resolve};Nf.RETINA_PREFIX=/@([0-9\.]+)x/;var Lf,Df=Nf.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,Uf="6.0.4";var Ff=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[mf.NORMAL_NPM]=mf.NORMAL,t[mf.ADD_NPM]=mf.ADD,t[mf.SCREEN_NPM]=mf.SCREEN,e[mf.NORMAL]=mf.NORMAL_NPM,e[mf.ADD]=mf.ADD_NPM,e[mf.SCREEN]=mf.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function Bf(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function kf(t){return!(t&t-1||!t)}function Gf(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}function Xf(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}function Hf(t){return 0===t?0:t<0?-1:1}var Vf=0;var jf={};function Yf(t,e,r){var i;void 0===r&&(r=3),jf[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),jf[e]=!0)}var zf={},Wf=Object.create(null),Zf=Object.create(null);Kf.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},Kf.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},Kf.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(Kf.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Kf.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function Kf(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||Nf.RESOLUTION,this.resize(t,e)}var qf;function Jf(t,e){t=Nf.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}function Qf(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var $f=/iPhone/i,tp=/iPod/i,ep=/iPad/i,rp=/\biOS-universal(?:.+)Mac\b/i,ip=/\bAndroid(?:.+)Mobile\b/i,np=/Android/i,sp=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,op=/Silk/i,ap=/Windows Phone/i,hp=/\bWindows(?:.+)ARM\b/i,up=/BlackBerry/i,lp=/BB10/i,cp=/Opera Mini/i,dp=/\b(CriOS|Chrome)(?:.+)Mobile/i,fp=/Mobile(?:.+)Firefox\b/i;var pp,_p,yp=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))($f)&&!i(ap),ipod:i(tp),tablet:!i($f)&&(i(ep)||Qf(e))&&!i(ap),universal:i(rp),device:(i($f)||i(tp)||i(ep)||i(rp)||Qf(e))&&!i(ap)},amazon:{phone:i(sp),tablet:!i(sp)&&i(op),device:i(sp)||i(op)},android:{phone:!i(ap)&&i(sp)||!i(ap)&&i(ip),tablet:!i(ap)&&!i(sp)&&!i(ip)&&(i(op)||i(np)),device:!i(ap)&&(i(sp)||i(op)||i(ip)||i(np))||i(/\bokhttp\b/i)},windows:{phone:i(ap),tablet:i(hp),device:i(ap)||i(hp)},other:{blackberry:i(up),blackberry10:i(lp),opera:i(cp),firefox:i(fp),chrome:i(dp),device:i(up)||i(lp)||i(cp)||i(fp)||i(dp)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(_p={})[_p.WEBGL_LEGACY=0]="WEBGL_LEGACY",_p[_p.WEBGL=1]="WEBGL",_p[_p.WEBGL2=2]="WEBGL2",(_p={})[_p.UNKNOWN=0]="UNKNOWN",_p[_p.WEBGL=1]="WEBGL",_p[_p.CANVAS=2]="CANVAS",(_p={})[_p.COLOR=16384]="COLOR",_p[_p.DEPTH=256]="DEPTH",_p[_p.STENCIL=1024]="STENCIL",(_p={})[_p.NORMAL=0]="NORMAL",_p[_p.ADD=1]="ADD",_p[_p.MULTIPLY=2]="MULTIPLY",_p[_p.SCREEN=3]="SCREEN",_p[_p.OVERLAY=4]="OVERLAY",_p[_p.DARKEN=5]="DARKEN",_p[_p.LIGHTEN=6]="LIGHTEN",_p[_p.COLOR_DODGE=7]="COLOR_DODGE",_p[_p.COLOR_BURN=8]="COLOR_BURN",_p[_p.HARD_LIGHT=9]="HARD_LIGHT",_p[_p.SOFT_LIGHT=10]="SOFT_LIGHT",_p[_p.DIFFERENCE=11]="DIFFERENCE",_p[_p.EXCLUSION=12]="EXCLUSION",_p[_p.HUE=13]="HUE",_p[_p.SATURATION=14]="SATURATION",_p[_p.COLOR=15]="COLOR",_p[_p.LUMINOSITY=16]="LUMINOSITY",_p[_p.NORMAL_NPM=17]="NORMAL_NPM",_p[_p.ADD_NPM=18]="ADD_NPM",_p[_p.SCREEN_NPM=19]="SCREEN_NPM",_p[_p.NONE=20]="NONE",_p[_p.SRC_OVER=0]="SRC_OVER",_p[_p.SRC_IN=21]="SRC_IN",_p[_p.SRC_OUT=22]="SRC_OUT",_p[_p.SRC_ATOP=23]="SRC_ATOP",_p[_p.DST_OVER=24]="DST_OVER",_p[_p.DST_IN=25]="DST_IN",_p[_p.DST_OUT=26]="DST_OUT",_p[_p.DST_ATOP=27]="DST_ATOP",_p[_p.ERASE=26]="ERASE",_p[_p.SUBTRACT=28]="SUBTRACT",_p[_p.XOR=29]="XOR",(_p={})[_p.POINTS=0]="POINTS",_p[_p.LINES=1]="LINES",_p[_p.LINE_LOOP=2]="LINE_LOOP",_p[_p.LINE_STRIP=3]="LINE_STRIP",_p[_p.TRIANGLES=4]="TRIANGLES",_p[_p.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",_p[_p.TRIANGLE_FAN=6]="TRIANGLE_FAN",(_p={})[_p.RGBA=6408]="RGBA",_p[_p.RGB=6407]="RGB",_p[_p.ALPHA=6406]="ALPHA",_p[_p.LUMINANCE=6409]="LUMINANCE",_p[_p.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",_p[_p.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",_p[_p.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(_p={})[_p.TEXTURE_2D=3553]="TEXTURE_2D",_p[_p.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",_p[_p.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",_p[_p.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",_p[_p.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",_p[_p.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",_p[_p.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",_p[_p.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",_p[_p.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(_p={})[_p.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",_p[_p.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",_p[_p.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",_p[_p.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",_p[_p.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",_p[_p.FLOAT=5126]="FLOAT",_p[_p.HALF_FLOAT=36193]="HALF_FLOAT",(_p={})[_p.FLOAT=0]="FLOAT",_p[_p.INT=1]="INT",_p[_p.UINT=2]="UINT",(_p=qm=qm||{})[_p.NEAREST=0]="NEAREST",_p[_p.LINEAR=1]="LINEAR",(_p=u_=u_||{})[_p.CLAMP=33071]="CLAMP",_p[_p.REPEAT=10497]="REPEAT",_p[_p.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(_p=pp=pp||{})[_p.OFF=0]="OFF",_p[_p.POW2=1]="POW2",_p[_p.ON=2]="ON",_p[_p.ON_MANUAL=3]="ON_MANUAL",(_p={})[_p.NPM=0]="NPM",_p[_p.UNPACK=1]="UNPACK",_p[_p.PMA=2]="PMA",_p[_p.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",_p[_p.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",_p[_p.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(_p={})[_p.NO=0]="NO",_p[_p.YES=1]="YES",_p[_p.AUTO=2]="AUTO",_p[_p.BLEND=0]="BLEND",_p[_p.CLEAR=1]="CLEAR",_p[_p.BLIT=2]="BLIT",(_p=a_=a_||{})[_p.AUTO=0]="AUTO",_p[_p.MANUAL=1]="MANUAL",(_p=t_=t_||{}).LOW="lowp",_p.MEDIUM="mediump",_p.HIGH="highp",(_p={})[_p.NONE=0]="NONE",_p[_p.SCISSOR=1]="SCISSOR",_p[_p.STENCIL=2]="STENCIL",_p[_p.SPRITE=3]="SPRITE",(_p={})[_p.NONE=0]="NONE",_p[_p.LOW=2]="LOW",_p[_p.MEDIUM=4]="MEDIUM",_p[_p.HIGH=8]="HIGH";var mp,vp,xp,gp,Ep={MIPMAP_TEXTURES:pp.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(mp=32,xp=!0,(yp.tablet||yp.phone)&&(yp.apple.device&&(vp=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(vp[1],10)<11&&(xp=!1),yp.android.device&&(vp=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(vp[1],10)<7&&(xp=!1)),xp?mp:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:a_.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:u_.CLAMP,SCALE_MODE:qm.LINEAR,PRECISION_VERTEX:t_.HIGH,PRECISION_FRAGMENT:yp.apple.device?t_.HIGH:t_.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!yp.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Tp=2*Math.PI,bp=180/Math.PI,Ap=Math.PI/180;(a_=gp=gp||{})[a_.POLY=0]="POLY",a_[a_.RECT=1]="RECT",a_[a_.CIRC=2]="CIRC",a_[a_.ELIP=3]="ELIP",a_[a_.RREC=4]="RREC";var Sp=(Object.defineProperty(Ip.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(Ip.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(Ip.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(Ip.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(Ip,"EMPTY",{get:function(){return new Ip(0,0,0,0)},enumerable:!1,configurable:!0}),Ip.prototype.clone=function(){return new Ip(this.x,this.y,this.width,this.height)},Ip.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},Ip.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},Ip.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},Ip.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},Ip.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},Ip.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},Ip.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},Ip.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},Ip);function Ip(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=gp.RECT}Rp.prototype.clone=function(){return new Rp(this.x,this.y,this.radius)},Rp.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},Rp.prototype.getBounds=function(){return new Sp(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Rp.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function Rp(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=gp.CIRC}Op.prototype.clone=function(){return new Op(this.x,this.y,this.width,this.height)},Op.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},Op.prototype.getBounds=function(){return new Sp(this.x-this.width,this.y-this.height,this.width,this.height)},Op.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function Op(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=gp.ELIP}wp.prototype.clone=function(){var t=new wp(this.points.slice());return t.closeStroke=this.closeStroke,t},wp.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},wp.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function wp(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=gp.POLY,this.closeStroke=!0}Cp.prototype.clone=function(){return new Cp(this.x,this.y,this.width,this.height,this.radius)},Cp.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},Cp.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function Cp(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=gp.RREC}var Pp=(Np.prototype.clone=function(){return new Np(this.x,this.y)},Np.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},Np.prototype.copyTo=function(t){return t.set(this.x,this.y),t},Np.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},Np.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},Np.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},Np);function Np(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var Mp=(Lp.prototype.clone=function(t,e){return new Lp(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},Lp.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},Lp.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},Lp.prototype.copyTo=function(t){return t.set(this._x,this._y),t},Lp.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Lp.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(Lp.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(Lp.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Lp);function Lp(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var Dp=(Up.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Up.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},Up.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},Up.prototype.apply=function(t,e){e=e||new Pp;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},Up.prototype.applyInverse=function(t,e){e=e||new Pp;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},Up.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},Up.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},Up.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},Up.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},Up.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},Up.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},Up.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(Tp-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},Up.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},Up.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Up.prototype.clone=function(){var t=new Up;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Up.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Up.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Up.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(Up,"IDENTITY",{get:function(){return new Up},enumerable:!1,configurable:!0}),Object.defineProperty(Up,"TEMP_MATRIX",{get:function(){return new Up},enumerable:!1,configurable:!0}),Up);function Up(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var Fp=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Bp=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],kp=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Gp=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Xp=[],Hp=[],Vp=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];Xp.push(e);for(var r=0;r<16;r++)for(var i=Vp(Fp[t]*Fp[r]+kp[t]*Bp[r]),n=Vp(Bp[t]*Fp[r]+Gp[t]*Bp[r]),s=Vp(Fp[t]*kp[r]+kp[t]*Gp[r]),o=Vp(Bp[t]*kp[r]+Gp[t]*Gp[r]),a=0;a<16;a++)if(Fp[a]===i&&Bp[a]===n&&kp[a]===s&&Gp[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new Dp;h.set(Fp[t],Bp[t],kp[t],Gp[t],0,0),Hp.push(h)}}();var jp=(Yp.prototype.onChange=function(){this._localID++},Yp.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},Yp.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},Yp.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},Yp.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},Yp.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(Yp.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),Yp.IDENTITY=new Yp,Yp);function Yp(){this.worldTransform=new Dp,this.localTransform=new Dp,this.position=new Mp(this.onChange,this,0,0),this.scale=new Mp(this.onChange,this,1,1),this.pivot=new Mp(this.onChange,this,0,0),this.skew=new Mp(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}var zp;r(8);(u_={})[u_.WEBGL_LEGACY=0]="WEBGL_LEGACY",u_[u_.WEBGL=1]="WEBGL",u_[u_.WEBGL2=2]="WEBGL2",(qm={})[qm.UNKNOWN=0]="UNKNOWN",qm[qm.WEBGL=1]="WEBGL",qm[qm.CANVAS=2]="CANVAS",(t_={})[t_.COLOR=16384]="COLOR",t_[t_.DEPTH=256]="DEPTH",t_[t_.STENCIL=1024]="STENCIL",(a_=zp=zp||{})[a_.NORMAL=0]="NORMAL",a_[a_.ADD=1]="ADD",a_[a_.MULTIPLY=2]="MULTIPLY",a_[a_.SCREEN=3]="SCREEN",a_[a_.OVERLAY=4]="OVERLAY",a_[a_.DARKEN=5]="DARKEN",a_[a_.LIGHTEN=6]="LIGHTEN",a_[a_.COLOR_DODGE=7]="COLOR_DODGE",a_[a_.COLOR_BURN=8]="COLOR_BURN",a_[a_.HARD_LIGHT=9]="HARD_LIGHT",a_[a_.SOFT_LIGHT=10]="SOFT_LIGHT",a_[a_.DIFFERENCE=11]="DIFFERENCE",a_[a_.EXCLUSION=12]="EXCLUSION",a_[a_.HUE=13]="HUE",a_[a_.SATURATION=14]="SATURATION",a_[a_.COLOR=15]="COLOR",a_[a_.LUMINOSITY=16]="LUMINOSITY",a_[a_.NORMAL_NPM=17]="NORMAL_NPM",a_[a_.ADD_NPM=18]="ADD_NPM",a_[a_.SCREEN_NPM=19]="SCREEN_NPM",a_[a_.NONE=20]="NONE",a_[a_.SRC_OVER=0]="SRC_OVER",a_[a_.SRC_IN=21]="SRC_IN",a_[a_.SRC_OUT=22]="SRC_OUT",a_[a_.SRC_ATOP=23]="SRC_ATOP",a_[a_.DST_OVER=24]="DST_OVER",a_[a_.DST_IN=25]="DST_IN",a_[a_.DST_OUT=26]="DST_OUT",a_[a_.DST_ATOP=27]="DST_ATOP",a_[a_.ERASE=26]="ERASE",a_[a_.SUBTRACT=28]="SUBTRACT",a_[a_.XOR=29]="XOR",(u_={})[u_.POINTS=0]="POINTS",u_[u_.LINES=1]="LINES",u_[u_.LINE_LOOP=2]="LINE_LOOP",u_[u_.LINE_STRIP=3]="LINE_STRIP",u_[u_.TRIANGLES=4]="TRIANGLES",u_[u_.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",u_[u_.TRIANGLE_FAN=6]="TRIANGLE_FAN",(qm={})[qm.RGBA=6408]="RGBA",qm[qm.RGB=6407]="RGB",qm[qm.ALPHA=6406]="ALPHA",qm[qm.LUMINANCE=6409]="LUMINANCE",qm[qm.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",qm[qm.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",qm[qm.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(t_={})[t_.TEXTURE_2D=3553]="TEXTURE_2D",t_[t_.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t_[t_.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t_[t_.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t_[t_.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t_[t_.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t_[t_.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t_[t_.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t_[t_.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(a_={})[a_.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a_[a_.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a_[a_.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a_[a_.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a_[a_.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a_[a_.FLOAT=5126]="FLOAT",a_[a_.HALF_FLOAT=36193]="HALF_FLOAT",(u_={})[u_.FLOAT=0]="FLOAT",u_[u_.INT=1]="INT",u_[u_.UINT=2]="UINT",(qm={})[qm.NEAREST=0]="NEAREST",qm[qm.LINEAR=1]="LINEAR",(t_={})[t_.CLAMP=33071]="CLAMP",t_[t_.REPEAT=10497]="REPEAT",t_[t_.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(a_={})[a_.OFF=0]="OFF",a_[a_.POW2=1]="POW2",a_[a_.ON=2]="ON",a_[a_.ON_MANUAL=3]="ON_MANUAL",(u_={})[u_.NPM=0]="NPM",u_[u_.UNPACK=1]="UNPACK",u_[u_.PMA=2]="PMA",u_[u_.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",u_[u_.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",u_[u_.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(qm={})[qm.NO=0]="NO",qm[qm.YES=1]="YES",qm[qm.AUTO=2]="AUTO",qm[qm.BLEND=0]="BLEND",qm[qm.CLEAR=1]="CLEAR",qm[qm.BLIT=2]="BLIT",(t_={})[t_.AUTO=0]="AUTO",t_[t_.MANUAL=1]="MANUAL",(a_={}).LOW="lowp",a_.MEDIUM="mediump",a_.HIGH="highp",(u_={})[u_.NONE=0]="NONE",u_[u_.SCISSOR=1]="SCISSOR",u_[u_.STENCIL=2]="STENCIL",u_[u_.SPRITE=3]="SPRITE",(qm={})[qm.NONE=0]="NONE",qm[qm.LOW=2]="LOW",qm[qm.MEDIUM=4]="MEDIUM",qm[qm.HIGH=8]="HIGH";_t.parse,_t.format,_t.resolve;Ep.RETINA_PREFIX=/@([0-9\.]+)x/;Ep.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;!function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[zp.NORMAL_NPM]=zp.NORMAL,t[zp.ADD_NPM]=zp.ADD,t[zp.SCREEN_NPM]=zp.SCREEN,e[zp.NORMAL]=zp.NORMAL_NPM,e[zp.ADD]=zp.ADD_NPM,e[zp.SCREEN]=zp.SCREEN_NPM;var i=[];i.push(e),i.push(t)}();Float32Array,Uint32Array,Int32Array,Uint8Array;function Wp(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}Object.create(null),Object.create(null);Zp.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},Zp.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},Zp.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(Zp.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Zp.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function Zp(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||Ep.RESOLUTION,this.resize(t,e)}Ep.SORTABLE_CHILDREN=!1;var Kp=(qp.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},qp.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},qp.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Sp.EMPTY:((t=t||new Sp(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},qp.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},qp.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,t=t.ty,o=r*e.x+n*e.y+o,t=i*e.x+s*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},qp.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},qp.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},qp.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},qp.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},qp.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},qp.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},qp.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},qp.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},qp.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},qp.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},qp.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},qp.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},qp);function qp(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var Jp=function(t,e){return(Jp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Qp(t,e){function r(){this.constructor=t}Jp(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var $p,t_=(Qp(e_,$p=pt.a),e_.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(e_.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},e_.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e_.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e_.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Sp),e=this._boundsRect),this._bounds.getRectangle(e)},e_.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Sp),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Kp);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},e_.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e_.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e_.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e_.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},e_.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e_.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new i_),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e_.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e_.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e_.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e_.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e_.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e_.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e_.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e_.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e_.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e_.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e_.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e_.prototype,"angle",{get:function(){return this.transform.rotation*bp},set:function(t){this.transform.rotation=t*Ap},enumerable:!1,configurable:!0}),Object.defineProperty(e_.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e_.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e_.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),e_);function e_(){var t=$p.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new jp,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Kp,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var r_,i_=(Qp(n_,r_=t_),n_);function n_(){var t=null!==r_&&r_.apply(this,arguments)||this;return t.sortDirty=null,t}function s_(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}t_.prototype.displayObjectUpdateTransform=t_.prototype.updateTransform;var o_,a_=(Qp(h_,o_=t_),h_.prototype.onChildrenChange=function(t){},h_.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},h_.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},h_.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},h_.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},h_.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);Wp(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},h_.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},h_.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,Wp(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},h_.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Wp(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},h_.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},h_.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(s_),this.sortDirty=!1},h_.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},h_.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},h_.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=o_.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},h_.prototype._calculateBounds=function(){},h_.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},h_.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},h_.prototype._render=function(t){},h_.prototype.destroy=function(t){o_.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(h_.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(h_.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),h_);function h_(){var t=o_.call(this)||this;return t.children=[],t.sortableChildren=Ep.SORTABLE_CHILDREN,t.sortDirty=!1,t}a_.prototype.containerUpdateTransform=a_.prototype.updateTransform;t_.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var u_=(Object.defineProperty(l_.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(l_.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),l_.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},l_.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},l_.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null!==(t=this.renderer.view.parentNode)&&void 0!==t&&t.appendChild(this.div))},l_.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null!==(t=this.div.parentNode)&&void 0!==t&&t.removeChild(this.div))},l_.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}},l_.prototype.update=function(){var t=performance.now();if(!(yp.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),r=e.left,i=e.top,n=e.width,s=e.height,o=this.renderer,t=o.width,e=o.height,o=o.resolution,a=n/t*o,h=s/e*o;(l=this.div).style.left=r+"px",l.style.top=i+"px",l.style.width=t+"px",l.style.height=e+"px";for(var u=0;u<this.children.length;u++){var l,c,d,f=this.children[u];f.renderId!==this.renderId?(f._accessibleActive=!1,Wp(this.children,u,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,u--):(l=f._accessibleDiv,c=f.hitArea,d=f.worldTransform,f.hitArea?(l.style.left=(d.tx+c.x*d.a)*a+"px",l.style.top=(d.ty+c.y*d.d)*h+"px",l.style.width=c.width*d.a*a+"px",l.style.height=c.height*d.d*h+"px"):(c=f.getBounds(),this.capHitArea(c),l.style.left=c.x*a+"px",l.style.top=c.y*h+"px",l.style.width=c.width*a+"px",l.style.height=c.height*h+"px",l.title!==f.accessibleTitle&&null!==f.accessibleTitle&&(l.title=f.accessibleTitle),l.getAttribute("aria-label")!==f.accessibleHint&&null!==f.accessibleHint&&l.setAttribute("aria-label",f.accessibleHint)),f.accessibleTitle===l.title&&f.tabIndex===l.tabIndex||(l.title=f.accessibleTitle,l.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(l)))}this.renderId++}},l_.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},l_.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,r=e.width,e=e.height;t.x+t.width>r&&(t.width=r-t.x),t.y+t.height>e&&(t.height=e-t.y)},l_.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",-1<navigator.userAgent.toLowerCase().indexOf("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,(t._accessibleDiv=e).displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},l_.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,r=t.target.displayObject,t=e.eventData;e.dispatchEvent(r,"click",t),e.dispatchEvent(r,"pointertap",t),e.dispatchEvent(r,"tap",t)},l_.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,r=t.target.displayObject,t=e.eventData;e.dispatchEvent(r,"mouseover",t)},l_.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,r=t.target.displayObject,t=e.eventData;e.dispatchEvent(r,"mouseout",t)},l_.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},l_.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},l_.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},l_);function l_(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(yp.tablet||yp.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener("keydown",this._onKeyDown,!1)}var c_,d_=2*Math.PI,f_=180/Math.PI,p_=Math.PI/180;(qm=c_=c_||{})[qm.POLY=0]="POLY",qm[qm.RECT=1]="RECT",qm[qm.CIRC=2]="CIRC",qm[qm.ELIP=3]="ELIP",qm[qm.RREC=4]="RREC";var __=(Object.defineProperty(y_.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(y_.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(y_.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(y_.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(y_,"EMPTY",{get:function(){return new y_(0,0,0,0)},enumerable:!1,configurable:!0}),y_.prototype.clone=function(){return new y_(this.x,this.y,this.width,this.height)},y_.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},y_.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},y_.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},y_.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},y_.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},y_.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},y_.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},y_.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},y_);function y_(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=c_.RECT}m_.prototype.clone=function(){return new m_(this.x,this.y,this.radius)},m_.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},m_.prototype.getBounds=function(){return new __(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},m_.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function m_(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=c_.CIRC}v_.prototype.clone=function(){return new v_(this.x,this.y,this.width,this.height)},v_.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},v_.prototype.getBounds=function(){return new __(this.x-this.width,this.y-this.height,this.width,this.height)},v_.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function v_(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=c_.ELIP}x_.prototype.clone=function(){var t=new x_(this.points.slice());return t.closeStroke=this.closeStroke,t},x_.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},x_.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function x_(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=c_.POLY,this.closeStroke=!0}g_.prototype.clone=function(){return new g_(this.x,this.y,this.width,this.height,this.radius)},g_.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},g_.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function g_(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=c_.RREC}var E_=(T_.prototype.clone=function(){return new T_(this.x,this.y)},T_.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},T_.prototype.copyTo=function(t){return t.set(this.x,this.y),t},T_.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},T_.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},T_.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},T_);function T_(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var b_=(A_.prototype.clone=function(t,e){return new A_(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},A_.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},A_.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},A_.prototype.copyTo=function(t){return t.set(this._x,this._y),t},A_.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},A_.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(A_.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(A_.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),A_);function A_(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var S_=(I_.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},I_.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},I_.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},I_.prototype.apply=function(t,e){e=e||new E_;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},I_.prototype.applyInverse=function(t,e){e=e||new E_;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},I_.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},I_.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},I_.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},I_.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},I_.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},I_.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},I_.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(d_-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},I_.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},I_.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},I_.prototype.clone=function(){var t=new I_;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},I_.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},I_.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},I_.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(I_,"IDENTITY",{get:function(){return new I_},enumerable:!1,configurable:!0}),Object.defineProperty(I_,"TEMP_MATRIX",{get:function(){return new I_},enumerable:!1,configurable:!0}),I_);function I_(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var R_=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],O_=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],w_=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],C_=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],P_=[],N_=[],M_=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];P_.push(e);for(var r=0;r<16;r++)for(var i=M_(R_[t]*R_[r]+w_[t]*O_[r]),n=M_(O_[t]*R_[r]+C_[t]*O_[r]),s=M_(R_[t]*w_[r]+w_[t]*C_[r]),o=M_(O_[t]*w_[r]+C_[t]*C_[r]),a=0;a<16;a++)if(R_[a]===i&&O_[a]===n&&w_[a]===s&&C_[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new S_;h.set(R_[t],O_[t],w_[t],C_[t],0,0),N_.push(h)}}();var L_=(D_.prototype.onChange=function(){this._localID++},D_.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},D_.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},D_.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},D_.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},D_.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(D_.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),D_.IDENTITY=new D_,D_);function D_(){this.worldTransform=new S_,this.localTransform=new S_,this.position=new b_(this.onChange,this,0,0),this.scale=new b_(this.onChange,this,1,1),this.pivot=new b_(this.onChange,this,0,0),this.skew=new b_(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}function U_(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var F_=/iPhone/i,B_=/iPod/i,k_=/iPad/i,G_=/\biOS-universal(?:.+)Mac\b/i,X_=/\bAndroid(?:.+)Mobile\b/i,H_=/Android/i,V_=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,j_=/Silk/i,Y_=/Windows Phone/i,z_=/\bWindows(?:.+)ARM\b/i,W_=/BlackBerry/i,Z_=/BB10/i,K_=/Opera Mini/i,q_=/\b(CriOS|Chrome)(?:.+)Mobile/i,J_=/Mobile(?:.+)Firefox\b/i;var Q_=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(F_)&&!i(Y_),ipod:i(B_),tablet:!i(F_)&&(i(k_)||U_(e))&&!i(Y_),universal:i(G_),device:(i(F_)||i(B_)||i(k_)||i(G_)||U_(e))&&!i(Y_)},amazon:{phone:i(V_),tablet:!i(V_)&&i(j_),device:i(V_)||i(j_)},android:{phone:!i(Y_)&&i(V_)||!i(Y_)&&i(X_),tablet:!i(Y_)&&!i(V_)&&!i(X_)&&(i(j_)||i(H_)),device:!i(Y_)&&(i(V_)||i(j_)||i(X_)||i(H_))||i(/\bokhttp\b/i)},windows:{phone:i(Y_),tablet:i(z_),device:i(Y_)||i(z_)},other:{blackberry:i(W_),blackberry10:i(Z_),opera:i(K_),firefox:i(J_),chrome:i(q_),device:i(W_)||i(Z_)||i(K_)||i(J_)||i(q_)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(a_={})[a_.WEBGL_LEGACY=0]="WEBGL_LEGACY",a_[a_.WEBGL=1]="WEBGL",a_[a_.WEBGL2=2]="WEBGL2",(t_={})[t_.UNKNOWN=0]="UNKNOWN",t_[t_.WEBGL=1]="WEBGL",t_[t_.CANVAS=2]="CANVAS",(qm={})[qm.COLOR=16384]="COLOR",qm[qm.DEPTH=256]="DEPTH",qm[qm.STENCIL=1024]="STENCIL",(a_={})[a_.NORMAL=0]="NORMAL",a_[a_.ADD=1]="ADD",a_[a_.MULTIPLY=2]="MULTIPLY",a_[a_.SCREEN=3]="SCREEN",a_[a_.OVERLAY=4]="OVERLAY",a_[a_.DARKEN=5]="DARKEN",a_[a_.LIGHTEN=6]="LIGHTEN",a_[a_.COLOR_DODGE=7]="COLOR_DODGE",a_[a_.COLOR_BURN=8]="COLOR_BURN",a_[a_.HARD_LIGHT=9]="HARD_LIGHT",a_[a_.SOFT_LIGHT=10]="SOFT_LIGHT",a_[a_.DIFFERENCE=11]="DIFFERENCE",a_[a_.EXCLUSION=12]="EXCLUSION",a_[a_.HUE=13]="HUE",a_[a_.SATURATION=14]="SATURATION",a_[a_.COLOR=15]="COLOR",a_[a_.LUMINOSITY=16]="LUMINOSITY",a_[a_.NORMAL_NPM=17]="NORMAL_NPM",a_[a_.ADD_NPM=18]="ADD_NPM",a_[a_.SCREEN_NPM=19]="SCREEN_NPM",a_[a_.NONE=20]="NONE",a_[a_.SRC_OVER=0]="SRC_OVER",a_[a_.SRC_IN=21]="SRC_IN",a_[a_.SRC_OUT=22]="SRC_OUT",a_[a_.SRC_ATOP=23]="SRC_ATOP",a_[a_.DST_OVER=24]="DST_OVER",a_[a_.DST_IN=25]="DST_IN",a_[a_.DST_OUT=26]="DST_OUT",a_[a_.DST_ATOP=27]="DST_ATOP",a_[a_.ERASE=26]="ERASE",a_[a_.SUBTRACT=28]="SUBTRACT",a_[a_.XOR=29]="XOR",(t_={})[t_.POINTS=0]="POINTS",t_[t_.LINES=1]="LINES",t_[t_.LINE_LOOP=2]="LINE_LOOP",t_[t_.LINE_STRIP=3]="LINE_STRIP",t_[t_.TRIANGLES=4]="TRIANGLES",t_[t_.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t_[t_.TRIANGLE_FAN=6]="TRIANGLE_FAN",(qm={})[qm.RGBA=6408]="RGBA",qm[qm.RGB=6407]="RGB",qm[qm.ALPHA=6406]="ALPHA",qm[qm.LUMINANCE=6409]="LUMINANCE",qm[qm.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",qm[qm.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",qm[qm.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(a_={})[a_.TEXTURE_2D=3553]="TEXTURE_2D",a_[a_.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a_[a_.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",a_[a_.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a_[a_.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a_[a_.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a_[a_.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a_[a_.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a_[a_.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(t_={})[t_.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t_[t_.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t_[t_.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t_[t_.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t_[t_.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t_[t_.FLOAT=5126]="FLOAT",t_[t_.HALF_FLOAT=36193]="HALF_FLOAT",(qm={})[qm.FLOAT=0]="FLOAT",qm[qm.INT=1]="INT",qm[qm.UINT=2]="UINT",(a_=dv=dv||{})[a_.NEAREST=0]="NEAREST",a_[a_.LINEAR=1]="LINEAR",(t_=ky=ky||{})[t_.CLAMP=33071]="CLAMP",t_[t_.REPEAT=10497]="REPEAT",t_[t_.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(qm=my=my||{})[qm.OFF=0]="OFF",qm[qm.POW2=1]="POW2",qm[qm.ON=2]="ON",qm[qm.ON_MANUAL=3]="ON_MANUAL",(a_={})[a_.NPM=0]="NPM",a_[a_.UNPACK=1]="UNPACK",a_[a_.PMA=2]="PMA",a_[a_.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",a_[a_.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",a_[a_.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(t_={})[t_.NO=0]="NO",t_[t_.YES=1]="YES",t_[t_.AUTO=2]="AUTO",t_[t_.BLEND=0]="BLEND",t_[t_.CLEAR=1]="CLEAR",t_[t_.BLIT=2]="BLIT",(qm=Ay=Ay||{})[qm.AUTO=0]="AUTO",qm[qm.MANUAL=1]="MANUAL",(a_=xm=xm||{}).LOW="lowp",a_.MEDIUM="mediump",a_.HIGH="highp",(t_={})[t_.NONE=0]="NONE",t_[t_.SCISSOR=1]="SCISSOR",t_[t_.STENCIL=2]="STENCIL",t_[t_.SPRITE=3]="SPRITE",(qm={})[qm.NONE=0]="NONE",qm[qm.LOW=2]="LOW",qm[qm.MEDIUM=4]="MEDIUM",qm[qm.HIGH=8]="HIGH";var $_,ty,ey,ry,iy={MIPMAP_TEXTURES:my.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:($_=32,ey=!0,(Q_.tablet||Q_.phone)&&(Q_.apple.device&&(ty=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(ty[1],10)<11&&(ey=!1),Q_.android.device&&(ty=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(ty[1],10)<7&&(ey=!1)),ey?$_:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Ay.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:ky.CLAMP,SCALE_MODE:dv.LINEAR,PRECISION_VERTEX:xm.HIGH,PRECISION_FRAGMENT:Q_.apple.device?xm.HIGH:xm.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!Q_.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1,TARGET_FPMS:.06};(a_=ry=ry||{})[a_.INTERACTION=50]="INTERACTION",a_[a_.HIGH=25]="HIGH",a_[a_.NORMAL=0]="NORMAL",a_[a_.LOW=-25]="LOW",a_[a_.UTILITY=-50]="UTILITY";var ny=(sy.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},sy.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},sy.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},sy.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},sy);function sy(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var oy=(ay.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},ay.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},ay.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},ay.prototype.add=function(t,e,r){return void 0===r&&(r=ry.NORMAL),this._addListener(new ny(t,e,r))},ay.prototype.addOnce=function(t,e,r){return void 0===r&&(r=ry.NORMAL),this._addListener(new ny(t,e,r,!0))},ay.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},ay.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(ay.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),ay.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},ay.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},ay.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},ay.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*iy.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(ay.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(ay.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,iy.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(ay.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(ay,"shared",{get:function(){var t;return ay._shared||((t=ay._shared=new ay).autoStart=!0,t._protected=!0),ay._shared},enumerable:!1,configurable:!0}),Object.defineProperty(ay,"system",{get:function(){var t;return ay._system||((t=ay._system=new ay).autoStart=!0,t._protected=!0),ay._system},enumerable:!1,configurable:!0}),ay);function ay(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ny(null,null,1/0),this.deltaMS=1/iy.TARGET_FPMS,this.elapsedMS=1/iy.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}hy.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,ry.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?oy.shared:new oy,t.autoStart&&this.start()},hy.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function hy(){}var uy;r(9);(t_={})[t_.WEBGL_LEGACY=0]="WEBGL_LEGACY",t_[t_.WEBGL=1]="WEBGL",t_[t_.WEBGL2=2]="WEBGL2",(qm={})[qm.UNKNOWN=0]="UNKNOWN",qm[qm.WEBGL=1]="WEBGL",qm[qm.CANVAS=2]="CANVAS",(my={})[my.COLOR=16384]="COLOR",my[my.DEPTH=256]="DEPTH",my[my.STENCIL=1024]="STENCIL",(Ay=uy=uy||{})[Ay.NORMAL=0]="NORMAL",Ay[Ay.ADD=1]="ADD",Ay[Ay.MULTIPLY=2]="MULTIPLY",Ay[Ay.SCREEN=3]="SCREEN",Ay[Ay.OVERLAY=4]="OVERLAY",Ay[Ay.DARKEN=5]="DARKEN",Ay[Ay.LIGHTEN=6]="LIGHTEN",Ay[Ay.COLOR_DODGE=7]="COLOR_DODGE",Ay[Ay.COLOR_BURN=8]="COLOR_BURN",Ay[Ay.HARD_LIGHT=9]="HARD_LIGHT",Ay[Ay.SOFT_LIGHT=10]="SOFT_LIGHT",Ay[Ay.DIFFERENCE=11]="DIFFERENCE",Ay[Ay.EXCLUSION=12]="EXCLUSION",Ay[Ay.HUE=13]="HUE",Ay[Ay.SATURATION=14]="SATURATION",Ay[Ay.COLOR=15]="COLOR",Ay[Ay.LUMINOSITY=16]="LUMINOSITY",Ay[Ay.NORMAL_NPM=17]="NORMAL_NPM",Ay[Ay.ADD_NPM=18]="ADD_NPM",Ay[Ay.SCREEN_NPM=19]="SCREEN_NPM",Ay[Ay.NONE=20]="NONE",Ay[Ay.SRC_OVER=0]="SRC_OVER",Ay[Ay.SRC_IN=21]="SRC_IN",Ay[Ay.SRC_OUT=22]="SRC_OUT",Ay[Ay.SRC_ATOP=23]="SRC_ATOP",Ay[Ay.DST_OVER=24]="DST_OVER",Ay[Ay.DST_IN=25]="DST_IN",Ay[Ay.DST_OUT=26]="DST_OUT",Ay[Ay.DST_ATOP=27]="DST_ATOP",Ay[Ay.ERASE=26]="ERASE",Ay[Ay.SUBTRACT=28]="SUBTRACT",Ay[Ay.XOR=29]="XOR",(ky={})[ky.POINTS=0]="POINTS",ky[ky.LINES=1]="LINES",ky[ky.LINE_LOOP=2]="LINE_LOOP",ky[ky.LINE_STRIP=3]="LINE_STRIP",ky[ky.TRIANGLES=4]="TRIANGLES",ky[ky.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",ky[ky.TRIANGLE_FAN=6]="TRIANGLE_FAN",(dv={})[dv.RGBA=6408]="RGBA",dv[dv.RGB=6407]="RGB",dv[dv.ALPHA=6406]="ALPHA",dv[dv.LUMINANCE=6409]="LUMINANCE",dv[dv.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",dv[dv.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",dv[dv.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(xm={})[xm.TEXTURE_2D=3553]="TEXTURE_2D",xm[xm.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",xm[xm.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(a_={})[a_.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a_[a_.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a_[a_.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a_[a_.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a_[a_.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a_[a_.FLOAT=5126]="FLOAT",a_[a_.HALF_FLOAT=36193]="HALF_FLOAT",(t_={})[t_.FLOAT=0]="FLOAT",t_[t_.INT=1]="INT",t_[t_.UINT=2]="UINT",(qm={})[qm.NEAREST=0]="NEAREST",qm[qm.LINEAR=1]="LINEAR",(my={})[my.CLAMP=33071]="CLAMP",my[my.REPEAT=10497]="REPEAT",my[my.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(Ay={})[Ay.OFF=0]="OFF",Ay[Ay.POW2=1]="POW2",Ay[Ay.ON=2]="ON",Ay[Ay.ON_MANUAL=3]="ON_MANUAL",(ky={})[ky.NPM=0]="NPM",ky[ky.UNPACK=1]="UNPACK",ky[ky.PMA=2]="PMA",ky[ky.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",ky[ky.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",ky[ky.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(dv={})[dv.NO=0]="NO",dv[dv.YES=1]="YES",dv[dv.AUTO=2]="AUTO",dv[dv.BLEND=0]="BLEND",dv[dv.CLEAR=1]="CLEAR",dv[dv.BLIT=2]="BLIT",(xm={})[xm.AUTO=0]="AUTO",xm[xm.MANUAL=1]="MANUAL",(a_={}).LOW="lowp",a_.MEDIUM="mediump",a_.HIGH="highp",(t_={})[t_.NONE=0]="NONE",t_[t_.SCISSOR=1]="SCISSOR",t_[t_.STENCIL=2]="STENCIL",t_[t_.SPRITE=3]="SPRITE",(qm={})[qm.NONE=0]="NONE",qm[qm.LOW=2]="LOW",qm[qm.MEDIUM=4]="MEDIUM",qm[qm.HIGH=8]="HIGH";_t.parse,_t.format,_t.resolve;iy.RETINA_PREFIX=/@([0-9\.]+)x/;iy.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;!function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[uy.NORMAL_NPM]=uy.NORMAL,t[uy.ADD_NPM]=uy.ADD,t[uy.SCREEN_NPM]=uy.SCREEN,e[uy.NORMAL]=uy.NORMAL_NPM,e[uy.ADD]=uy.ADD_NPM,e[uy.SCREEN]=uy.SCREEN_NPM;var i=[];i.push(e),i.push(t)}();Float32Array,Uint32Array,Int32Array,Uint8Array;function ly(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}Object.create(null),Object.create(null);cy.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},cy.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},cy.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(cy.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(cy.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function cy(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||iy.RESOLUTION,this.resize(t,e)}iy.SORTABLE_CHILDREN=!1;var dy=(fy.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},fy.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},fy.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?__.EMPTY:((t=t||new __(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},fy.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},fy.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,t=t.ty,o=r*e.x+n*e.y+o,t=i*e.x+s*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},fy.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},fy.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},fy.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},fy.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},fy.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},fy.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},fy.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},fy.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},fy.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},fy.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},fy.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},fy.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},fy);function fy(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var py=function(t,e){return(py=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function _y(t,e){function r(){this.constructor=t}py(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var yy,my=(_y(vy,yy=pt.a),vy.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(vy.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},vy.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},vy.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},vy.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new __),e=this._boundsRect),this._bounds.getRectangle(e)},vy.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new __),t=this._localBoundsRect),this._localBounds||(this._localBounds=new dy);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},vy.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},vy.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},vy.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},vy.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},vy.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(vy.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new gy),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),vy.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},vy.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(vy.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(vy.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(vy.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(vy.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(vy.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(vy.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(vy.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(vy.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(vy.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(vy.prototype,"angle",{get:function(){return this.transform.rotation*f_},set:function(t){this.transform.rotation=t*p_},enumerable:!1,configurable:!0}),Object.defineProperty(vy.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(vy.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(vy.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),vy);function vy(){var t=yy.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new L_,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new dy,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var xy,gy=(_y(Ey,xy=my),Ey);function Ey(){var t=null!==xy&&xy.apply(this,arguments)||this;return t.sortDirty=null,t}function Ty(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}my.prototype.displayObjectUpdateTransform=my.prototype.updateTransform;var by,Ay=(_y(Sy,by=my),Sy.prototype.onChildrenChange=function(t){},Sy.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},Sy.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},Sy.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},Sy.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},Sy.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);ly(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},Sy.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},Sy.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,ly(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},Sy.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,ly(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},Sy.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Sy.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(Ty),this.sortDirty=!1},Sy.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},Sy.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},Sy.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=by.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},Sy.prototype._calculateBounds=function(){},Sy.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},Sy.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},Sy.prototype._render=function(t){},Sy.prototype.destroy=function(t){by.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(Sy.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Sy.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),Sy);function Sy(){var t=by.call(this)||this;return t.children=[],t.sortableChildren=iy.SORTABLE_CHILDREN,t.sortDirty=!1,t}Ay.prototype.containerUpdateTransform=Ay.prototype.updateTransform;var Iy=(Object.defineProperty(Ry.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),Ry.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},Ry.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},Ry.prototype.reset=function(){this.isPrimary=!1},Ry);function Ry(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new E_,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}var Oy=function(t,e){return(Oy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var wy=(Cy.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},Cy.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},Cy);function Cy(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}var Py=(Ny.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(Ny.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(Ny.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ny.prototype,"none",{get:function(){return this._flags===Ny.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(Ny.prototype,"over",{get:function(){return 0!=(this._flags&Ny.FLAGS.OVER)},set:function(t){this._doSet(Ny.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(Ny.prototype,"rightDown",{get:function(){return 0!=(this._flags&Ny.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(Ny.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(Ny.prototype,"leftDown",{get:function(){return 0!=(this._flags&Ny.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(Ny.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),Ny.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),Ny);function Ny(t){this._pointerId=t,this._flags=Ny.FLAGS.NONE}var My=(Ly.prototype.recursiveFindHit=function(t,e,r,i,n){if(!e||!e.visible)return!1;var s=t.data.global,o=!1,a=n=e.interactive||n,h=!0;if(e.hitArea?(i&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:h=i=!1),a=!1):e._mask&&i&&(e._mask.containsPoint&&e._mask.containsPoint(s)||(i=!1)),h&&e.interactiveChildren&&e.children)for(var u=e.children,l=u.length-1;0<=l;l--){var c=u[l],d=this.recursiveFindHit(t,c,r,i,a);d&&c.parent&&(a=!1,d&&(t.target&&(i=!1),o=!0))}return n&&(i&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),r&&r(t,e,!!o))),o},Ly.prototype.findHit=function(t,e,r,i){this.recursiveFindHit(t,e,r,i,!1)},Ly);function Ly(){this._tempPoint=new E_}my.mixin({interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0});var Dy,Uy,Fy,By={target:null,data:{global:null}},ky=(Dy=pt.a,Oy(Uy=Xy,Fy=Dy),Uy.prototype=null===Fy?Object.create(Fy):(Gy.prototype=Fy.prototype,new Gy),Object.defineProperty(Xy.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){(this._useSystemTicker=t)?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(Xy.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),Xy.prototype.hitTest=function(t,e){return By.target=null,By.data.global=t,e=e||this.lastObjectRendered,this.processInteractive(By,e,null,!0),By.target},Xy.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},Xy.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(oy.system.add(this.tickerUpdate,this,ry.INTERACTION),this.tickerAdded=!0)},Xy.prototype.removeTickerListener=function(){this.tickerAdded&&(oy.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},Xy.prototype.addEvents=function(){var t;!this.eventsAdded&&this.interactionDOMElement&&(t=this.interactionDOMElement.style,self.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),self.addEventListener("pointercancel",this.onPointerCancel,!0),self.addEventListener("pointerup",this.onPointerUp,!0)):(self.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),self.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},Xy.prototype.removeEvents=function(){var t;this.eventsAdded&&this.interactionDOMElement&&(t=this.interactionDOMElement.style,self.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),self.removeEventListener("pointercancel",this.onPointerCancel,!0),self.removeEventListener("pointerup",this.onPointerUp,!0)):(self.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),self.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},Xy.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},Xy.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)!this.activeInteractionData.hasOwnProperty(t)||(t=this.activeInteractionData[t]).originalEvent&&"touch"!==t.pointerType&&(t=this.configureInteractionEventForDOMEvent(this.eventData,t.originalEvent,t),this.processInteractive(t,this.lastObjectRendered,this.processPointerOverOut,!0));this.setCursorMode(this.cursor)}},Xy.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var r=this.cursorStyles[t];if(r)switch(typeof r){case"string":e&&(this.interactionDOMElement.style.cursor=r);break;case"function":r(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,r)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},Xy.prototype.dispatchEvent=function(t,e,r){r.stopPropagationHint&&t!==r.stopsPropagatingAt||(r.currentTarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},Xy.prototype.delayDispatchEvent=function(t,e,r){this.delayedEvents.push({displayObject:t,eventString:e,eventData:r})},Xy.prototype.mapPositionToPoint=function(t,e,r){var i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0},n=1/this.resolution;t.x=(e-i.left)*(this.interactionDOMElement.width/i.width)*n,t.y=(r-i.top)*(this.interactionDOMElement.height/i.height)*n},Xy.prototype.processInteractive=function(t,e,r,i){var i=this.search.findHit(t,e,r,i),n=this.delayedEvents;if(!n.length)return i;t.stopPropagationHint=!1;var s=n.length;this.delayedEvents=[];for(var o=0;o<s;o++){var a=n[o],h=a.displayObject,u=a.eventString,a=a.eventData;a.stopsPropagatingAt===h&&(a.stopPropagationHint=!0),this.dispatchEvent(h,u,a)}return i},Xy.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);!this.autoPreventDefault||!e[0].isNormalized||!t.cancelable&&"cancelable"in t||t.preventDefault();for(var r=e.length,i=0;i<r;i++){var n=e[i],s=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,s);s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===n.pointerType?this.emit("touchstart",s):"mouse"!==n.pointerType&&"pen"!==n.pointerType||(n=2===n.button,this.emit(n?"rightdown":"mousedown",this.eventData))}}},Xy.prototype.processPointerDown=function(t,e,r){var i=t.data,n=t.data.identifier;r&&(e.trackedPointers[n]||(e.trackedPointers[n]=new Py(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===i.pointerType?this.dispatchEvent(e,"touchstart",t):"mouse"!==i.pointerType&&"pen"!==i.pointerType||((i=2===i.button)?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,i?"rightdown":"mousedown",t)))},Xy.prototype.onPointerComplete=function(t,e,r){for(var i=this.normalizeToPointerData(t),n=i.length,s=t.target!==this.interactionDOMElement?"outside":"",o=0;o<n;o++){var a=i[o],h=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,h);u.data.originalEvent=t,this.processInteractive(u,this.lastObjectRendered,r,e||!s),this.emit(e?"pointercancel":"pointerup"+s,u),"mouse"===a.pointerType||"pen"===a.pointerType?(h=2===a.button,this.emit(h?"rightup"+s:"mouseup"+s,u)):"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,u),this.releaseInteractionDataForPointerId(a.pointerId))}},Xy.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},Xy.prototype.processPointerCancel=function(t,e){var r=t.data,i=t.data.identifier;void 0!==e.trackedPointers[i]&&(delete e.trackedPointers[i],this.dispatchEvent(e,"pointercancel",t),"touch"===r.pointerType&&this.dispatchEvent(e,"touchcancel",t))},Xy.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},Xy.prototype.processPointerUp=function(t,e,r){var i,n=t.data,s=t.data.identifier,o=e.trackedPointers[s],a="touch"===n.pointerType,h="mouse"===n.pointerType||"pen"===n.pointerType,u=!1;h&&(i=2===n.button,n=Py.FLAGS,n=i?n.RIGHT_DOWN:n.LEFT_DOWN,n=void 0!==o&&o.flags&n,r?(this.dispatchEvent(e,i?"rightup":"mouseup",t),n&&(this.dispatchEvent(e,i?"rightclick":"click",t),u=!0)):n&&this.dispatchEvent(e,i?"rightupoutside":"mouseupoutside",t),o&&(i?o.rightDown=!1:o.leftDown=!1)),r?(this.dispatchEvent(e,"pointerup",t),a&&this.dispatchEvent(e,"touchend",t),o&&(h&&!u||this.dispatchEvent(e,"pointertap",t),a&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),a&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[s]},Xy.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var r=e.length,i=0;i<r;i++){var n=e[i],s=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,s);s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===n.pointerType&&this.emit("touchmove",s),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},Xy.prototype.processPointerMove=function(t,e,r){var i=t.data,n="touch"===i.pointerType,i="mouse"===i.pointerType||"pen"===i.pointerType;i&&this.processPointerOverOut(t,e,r),this.moveWhenInside&&!r||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),i&&this.dispatchEvent(e,"mousemove",t))},Xy.prototype.onPointerOut=function(t){var e,r;this.supportsTouchEvents&&"touch"===t.pointerType||("mouse"===(e=this.normalizeToPointerData(t)[0]).pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null)),r=this.getInteractionDataForPointerId(e),(t=this.configureInteractionEventForDOMEvent(this.eventData,e,r)).data.originalEvent=e,this.processInteractive(t,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",t),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",t):this.releaseInteractionDataForPointerId(r.identifier))},Xy.prototype.processPointerOverOut=function(t,e,r){var i=t.data,n=t.data.identifier,s="mouse"===i.pointerType||"pen"===i.pointerType,i=e.trackedPointers[n];void 0!==(i=r&&!i?e.trackedPointers[n]=new Py(n):i)&&(r&&this.mouseOverRenderer?(i.over||(i.over=!0,this.delayDispatchEvent(e,"pointerover",t),s&&this.delayDispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):i.over&&(i.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),i.none&&delete e.trackedPointers[n]))},Xy.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],t=this.getInteractionDataForPointerId(e),t=this.configureInteractionEventForDOMEvent(this.eventData,e,t);"mouse"===(t.data.originalEvent=e).pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",t),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",t)},Xy.prototype.getInteractionDataForPointerId=function(t){var e,r=t.pointerId;return 1===r||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[r]?e=this.activeInteractionData[r]:((e=this.interactionDataPool.pop()||new Iy).identifier=r,this.activeInteractionData[r]=e),e.copyEvent(t),e},Xy.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},Xy.prototype.configureInteractionEventForDOMEvent=function(t,e,r){return t.data=r,this.mapPositionToPoint(r.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=r.global.x,e.globalY=r.global.y),r.originalEvent=e,t.reset(),t},Xy.prototype.normalizeToPointerData=function(t){var e,r=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var s=t.changedTouches[i];void 0===s.button&&(s.button=t.touches.length?1:0),void 0===s.buttons&&(s.buttons=t.touches.length?1:0),void 0===s.isPrimary&&(s.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===s.width&&(s.width=s.radiusX||1),void 0===s.height&&(s.height=s.radiusY||1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="touch"),void 0===s.pointerId&&(s.pointerId=s.identifier||0),void 0===s.pressure&&(s.pressure=s.force||.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),void 0===s.layerX&&(s.layerX=s.offsetX=s.clientX),void 0===s.layerY&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,r.push(s)}else!self.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof self.PointerEvent)?(void 0===(e=t).isPrimary&&(e.isPrimary=!0),void 0===e.width&&(e.width=1),void 0===e.height&&(e.height=1),void 0===e.tiltX&&(e.tiltX=0),void 0===e.tiltY&&(e.tiltY=0),void 0===e.pointerType&&(e.pointerType="mouse"),void 0===e.pointerId&&(e.pointerId=1),void 0===e.pressure&&(e.pressure=.5),void 0===e.twist&&(e.twist=0),void 0===e.tangentialPressure&&(e.tangentialPressure=0),e.isNormalized=!0,r.push(e)):r.push(t);return r},Xy.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},Xy);function Gy(){this.constructor=Uy}function Xy(t,e){var r=Dy.call(this)||this;return e=e||{},r.renderer=t,r.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,r.interactionFrequency=e.interactionFrequency||10,r.mouse=new Iy,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new wy,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in self),r.supportsTouchEvents="ontouchstart"in self,r.supportsPointerEvents=!!self.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new My,r._tempDisplayObject=new gy,r._useSystemTicker=void 0===e.useSystemTicker||e.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}var Hy,Vy=2*Math.PI,jy=180/Math.PI,Yy=Math.PI/180;(dv=Hy=Hy||{})[dv.POLY=0]="POLY",dv[dv.RECT=1]="RECT",dv[dv.CIRC=2]="CIRC",dv[dv.ELIP=3]="ELIP",dv[dv.RREC=4]="RREC";var zy=(Object.defineProperty(Wy.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(Wy.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(Wy.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(Wy.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(Wy,"EMPTY",{get:function(){return new Wy(0,0,0,0)},enumerable:!1,configurable:!0}),Wy.prototype.clone=function(){return new Wy(this.x,this.y,this.width,this.height)},Wy.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},Wy.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},Wy.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},Wy.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},Wy.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},Wy.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},Wy.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},Wy.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},Wy);function Wy(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=Hy.RECT}Zy.prototype.clone=function(){return new Zy(this.x,this.y,this.radius)},Zy.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},Zy.prototype.getBounds=function(){return new zy(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Zy.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function Zy(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=Hy.CIRC}Ky.prototype.clone=function(){return new Ky(this.x,this.y,this.width,this.height)},Ky.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},Ky.prototype.getBounds=function(){return new zy(this.x-this.width,this.y-this.height,this.width,this.height)},Ky.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function Ky(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=Hy.ELIP}qy.prototype.clone=function(){var t=new qy(this.points.slice());return t.closeStroke=this.closeStroke,t},qy.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},qy.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function qy(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=Hy.POLY,this.closeStroke=!0}Jy.prototype.clone=function(){return new Jy(this.x,this.y,this.width,this.height,this.radius)},Jy.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},Jy.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function Jy(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=Hy.RREC}var Qy=($y.prototype.clone=function(){return new $y(this.x,this.y)},$y.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},$y.prototype.copyTo=function(t){return t.set(this.x,this.y),t},$y.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},$y.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},$y.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},$y);function $y(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var tm=(em.prototype.clone=function(t,e){return new em(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},em.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},em.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},em.prototype.copyTo=function(t){return t.set(this._x,this._y),t},em.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},em.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(em.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(em.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),em);function em(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var rm=(im.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},im.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},im.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},im.prototype.apply=function(t,e){e=e||new Qy;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},im.prototype.applyInverse=function(t,e){e=e||new Qy;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},im.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},im.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},im.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},im.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},im.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},im.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},im.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(Vy-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},im.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},im.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},im.prototype.clone=function(){var t=new im;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},im.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},im.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},im.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(im,"IDENTITY",{get:function(){return new im},enumerable:!1,configurable:!0}),Object.defineProperty(im,"TEMP_MATRIX",{get:function(){return new im},enumerable:!1,configurable:!0}),im);function im(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var nm=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],sm=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],om=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],am=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],hm=[],um=[],lm=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];hm.push(e);for(var r=0;r<16;r++)for(var i=lm(nm[t]*nm[r]+om[t]*sm[r]),n=lm(sm[t]*nm[r]+am[t]*sm[r]),s=lm(nm[t]*om[r]+om[t]*am[r]),o=lm(sm[t]*om[r]+am[t]*am[r]),a=0;a<16;a++)if(nm[a]===i&&sm[a]===n&&om[a]===s&&am[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new rm;h.set(nm[t],sm[t],om[t],am[t],0,0),um.push(h)}}();var cm={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return nm[t]},uY:function(t){return sm[t]},vX:function(t){return om[t]},vY:function(t){return am[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return hm[t][e]},sub:function(t,e){return hm[t][cm.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?cm.S:cm.N:2*Math.abs(e)<=Math.abs(t)?0<t?cm.E:cm.W:0<e?0<t?cm.SE:cm.SW:0<t?cm.NE:cm.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=um[cm.inv(e)];e.tx=r,e.ty=i,t.append(e)}},dm=(fm.prototype.onChange=function(){this._localID++},fm.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},fm.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},fm.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},fm.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},fm.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(fm.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),fm.IDENTITY=new fm,fm);function fm(){this.worldTransform=new rm,this.localTransform=new rm,this.position=new tm(this.onChange,this,0,0),this.scale=new tm(this.onChange,this,1,1),this.pivot=new tm(this.onChange,this,0,0),this.skew=new tm(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}Nf.SORTABLE_CHILDREN=!1;var pm=(_m.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},_m.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},_m.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?zy.EMPTY:((t=t||new zy(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},_m.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},_m.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,t=t.ty,o=r*e.x+n*e.y+o,t=i*e.x+s*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},_m.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},_m.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},_m.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},_m.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},_m.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},_m.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},_m.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},_m.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},_m.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},_m.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},_m.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},_m.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},_m);function _m(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var ym=function(t,e){return(ym=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function mm(t,e){function r(){this.constructor=t}ym(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var vm,xm=(mm(gm,vm=pt.a),gm.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(gm.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},gm.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},gm.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},gm.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new zy),e=this._boundsRect),this._bounds.getRectangle(e)},gm.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new zy),t=this._localBoundsRect),this._localBounds||(this._localBounds=new pm);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},gm.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},gm.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},gm.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},gm.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},gm.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(gm.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Tm),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),gm.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},gm.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(gm.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(gm.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(gm.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(gm.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(gm.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(gm.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(gm.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(gm.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(gm.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(gm.prototype,"angle",{get:function(){return this.transform.rotation*jy},set:function(t){this.transform.rotation=t*Yy},enumerable:!1,configurable:!0}),Object.defineProperty(gm.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(gm.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(gm.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),gm);function gm(){var t=vm.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new dm,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new pm,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var Em,Tm=(mm(bm,Em=xm),bm);function bm(){var t=null!==Em&&Em.apply(this,arguments)||this;return t.sortDirty=null,t}function Am(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}xm.prototype.displayObjectUpdateTransform=xm.prototype.updateTransform;var Sm,Im=(mm(Rm,Sm=xm),Rm.prototype.onChildrenChange=function(t){},Rm.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},Rm.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},Rm.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},Rm.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},Rm.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);Xf(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},Rm.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},Rm.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,Xf(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},Rm.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Xf(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},Rm.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Rm.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(Am),this.sortDirty=!1},Rm.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},Rm.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},Rm.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=Sm.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},Rm.prototype._calculateBounds=function(){},Rm.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},Rm.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},Rm.prototype._render=function(t){},Rm.prototype.destroy=function(t){Sm.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(Rm.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Rm.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),Rm);function Rm(){var t=Sm.call(this)||this;return t.children=[],t.sortableChildren=Nf.SORTABLE_CHILDREN,t.sortDirty=!1,t}Im.prototype.containerUpdateTransform=Im.prototype.updateTransform;var Om,wm=(Cm.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},Cm.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},Cm.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},Cm.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},Cm.prototype.contains=function(t){return-1!==this.items.indexOf(t)},Cm.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Cm.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(Cm.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(Cm.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Cm);function Cm(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(wm.prototype,{dispatch:{value:wm.prototype.emit},run:{value:wm.prototype.emit}}),Nf.TARGET_FPMS=.06,(a_=Om=Om||{})[a_.INTERACTION=50]="INTERACTION",a_[a_.HIGH=25]="HIGH",a_[a_.NORMAL=0]="NORMAL",a_[a_.LOW=-25]="LOW",a_[a_.UTILITY=-50]="UTILITY";var Pm=(Nm.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},Nm.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},Nm.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},Nm.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},Nm);function Nm(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var Mm=(Lm.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Lm.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Lm.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Lm.prototype.add=function(t,e,r){return void 0===r&&(r=Om.NORMAL),this._addListener(new Pm(t,e,r))},Lm.prototype.addOnce=function(t,e,r){return void 0===r&&(r=Om.NORMAL),this._addListener(new Pm(t,e,r,!0))},Lm.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},Lm.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Lm.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),Lm.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Lm.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Lm.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},Lm.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*Nf.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(Lm.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(Lm.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,Nf.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(Lm.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(Lm,"shared",{get:function(){var t;return Lm._shared||((t=Lm._shared=new Lm).autoStart=!0,t._protected=!0),Lm._shared},enumerable:!1,configurable:!0}),Object.defineProperty(Lm,"system",{get:function(){var t;return Lm._system||((t=Lm._system=new Lm).autoStart=!0,t._protected=!0),Lm._system},enumerable:!1,configurable:!0}),Lm);function Lm(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Pm(null,null,1/0),this.deltaMS=1/Nf.TARGET_FPMS,this.elapsedMS=1/Nf.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}Dm.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,Om.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Mm.shared:new Mm,t.autoStart&&this.start()},Dm.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())},t_=Dm;function Dm(){}Nf.PREFER_ENV=lf.any?pf.WEBGL:pf.WEBGL2,Nf.STRICT_TEXTURE_CACHE=!1;var Um=[];function Fm(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=Um.length-1;0<=n;--n){var s=Um[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var Bm=function(t,e){return(Bm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function km(t,e){function r(){this.constructor=t}Bm(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Gm=(Xm.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},Xm.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},Xm.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(Xm.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),Xm.prototype.update=function(){this.destroyed||this.onUpdate.emit()},Xm.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(Xm.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(Xm.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Xm.prototype.style=function(t,e,r){return!1},Xm.prototype.dispose=function(){},Xm.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Xm.test=function(t,e){return!1},Xm);function Xm(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new wm("setRealSize"),this.onUpdate=new wm("update"),this.onError=new wm("onError")}var Hm,Vm=(km(jm,Hm=Gm),jm.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===If.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},jm.prototype.dispose=function(){this.data=null},jm.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},jm);function jm(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=Hm.call(this,e,i)||this).data=t,r}var Ym,zm={scaleMode:bf.NEAREST,format:xf.RGBA,alphaMode:If.NPM},Wm=(km(Zm,Ym=pt.a),Object.defineProperty(Zm.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(Zm.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Zm.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},Zm.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},Zm.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},Zm.prototype._refreshPOT=function(){this.isPowerOfTwo=kf(this.realWidth)&&kf(this.realHeight)},Zm.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},Zm.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},Zm.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},Zm.prototype.onError=function(t){this.emit("error",this,t)},Zm.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Zf[this.cacheId],delete Wf[this.cacheId],this.cacheId=null),this.dispose(),Zm.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},Zm.prototype.dispose=function(){this.emit("dispose",this)},Zm.prototype.castToBaseTexture=function(){return this},Zm.from=function(t,e,r){void 0===r&&(r=Nf.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++Vf),t._pixiId),s=Zf[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new Zm(t,e)).cacheId=n,Zm.addToCache(s,n)),s},Zm.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new Vm(t,{width:e,height:r}),t=t instanceof Float32Array?Ef.FLOAT:Ef.UNSIGNED_BYTE;return new Zm(n,Object.assign(zm,i||{width:e,height:r,type:t}))},Zm.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Zf[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),Zf[e]=t)},Zm.removeFromCache=function(t){if("string"==typeof t){var e=Zf[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete Zf[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete Zf[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Zm._globalBatch=0,Zm);function Zm(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=Ym.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof Gm||((t=Fm(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||Nf.RESOLUTION,r.mipmap=void 0!==n?n:Nf.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:Nf.ANISOTROPIC_LEVEL,r.wrapMode=u||Nf.WRAP_MODE,r.scaleMode=void 0!==o?o:Nf.SCALE_MODE,r.format=l||xf.RGBA,r.type=c||Ef.UNSIGNED_BYTE,r.target=d||gf.TEXTURE_2D,r.alphaMode=void 0!==i?i:If.UNPACK,r.uid=++Vf,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var Km,qm=(km(Jm,Km=Gm),Jm.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof Gm?this.addResourceAt(t[r],r):this.addResourceAt(Fm(t[r],e),r))},Jm.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},Jm.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},Jm.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");Km.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},Jm.prototype.unbind=function(t){Km.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},Jm.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},Jm);function Jm(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=Km.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new Wm;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var Qm,Ay=(km($m,Qm=qm),$m.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},$m.prototype.bind=function(t){Qm.prototype.bind.call(this,t),t.target=gf.TEXTURE_2D_ARRAY},$m.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},$m);function $m(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=Qm.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var tv,ev=(km(rv,tv=Gm),rv.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(qf=qf||document.createElement("a")).href=t;var r=Mf.parse(qf.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},rv.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===If.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},rv.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),tv.prototype.update.call(this))},rv.prototype.dispose=function(){this.source=null},rv);function rv(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=tv.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var iv,nv=(km(sv,iv=ev),sv.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},sv);function sv(t){return iv.call(this,t)||this}var ov,my=(km(av,ov=qm),av.prototype.bind=function(t){ov.prototype.bind.call(this,t),t.target=gf.TEXTURE_CUBE_MAP},av.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=gf.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},av.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<av.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},av.test=function(t){return Array.isArray(t)&&t.length===av.SIDES},av.SIDES=6,av);function av(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==av.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=ov.call(this,6,{width:n,height:s})||this,a=0;a<av.SIDES;a++)r.items[a].target=gf.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var hv,uv=(km(lv,hv=ev),lv.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},lv.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===If.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},lv.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return hv.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(hv.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},lv.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,hv.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},lv.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},lv);function lv(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,ev.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=hv.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:Nf.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var cv,dv=(km(fv,cv=ev),fv.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},fv.prototype._loadSvg=function(){var s=this,o=new Image;ev.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++Vf,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},fv.getSize=function(t){var e=fv.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},fv.prototype.dispose=function(){cv.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},fv.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},fv.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,fv);function fv(t,e){var r=this;return e=e||{},(r=cv.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var pv,xm=(km(_v,pv=ev),_v.prototype.update=function(t){var e;this.destroyed||(e=Mm.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(pv.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},_v.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},_v.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},_v.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},_v.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},_v.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Mm.shared.add(this.update,this),this._isConnectedToTicker=!0)},_v.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Mm.shared.remove(this.update,this),this._isConnectedToTicker=!1)},_v.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},_v.prototype.dispose=function(){this._isConnectedToTicker&&Mm.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),pv.prototype.dispose.call(this)},Object.defineProperty(_v.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Mm.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Mm.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(_v.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),_v.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<_v.TYPES.indexOf(e)},_v.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],_v.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},_v);function _v(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];ev.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||_v.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=pv.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var yv,a_=(km(mv,yv=ev),mv.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},mv);function mv(t){return yv.call(this,t)||this}Um.push(uv,a_,nv,xm,dv,Vm,my,Ay);var vv={__proto__:null,Resource:Gm,BaseImageResource:ev,INSTALLED:Um,autoDetectResource:Fm,AbstractMultiResource:qm,ArrayResource:Ay,BufferResource:Vm,CanvasResource:nv,CubeResource:my,ImageResource:uv,SVGResource:dv,VideoResource:xm,ImageBitmapResource:a_},dv=(xv.prototype.destroy=function(){this.renderer=null},xv);function xv(t){this.renderer=t}var gv,Ev=(km(Tv,gv=Vm),Tv.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===If.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},Tv);function Tv(){return null!==gv&&gv.apply(this,arguments)||this}var bv=(Object.defineProperty(Av.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),Av.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new Wm(null,{scaleMode:bf.NEAREST,resolution:1,mipmap:Sf.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Av.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Wm(new Ev(null,{width:this.width,height:this.height}),{scaleMode:bf.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Sf.OFF,format:xf.DEPTH_COMPONENT,type:Ef.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Av.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Av.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Av.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},Av.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Av.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},Av);function Av(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new wm("disposeFramebuffer"),this.multisample=Pf.NONE}var Sv,Iv=(km(Rv,Sv=Wm),Rv.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},Rv.prototype.dispose=function(){this.framebuffer.dispose(),Sv.prototype.dispose.call(this)},Rv.prototype.destroy=function(){Sv.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},Rv);function Rv(t){var e=this,e=Sv.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=Sf.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new bv(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var Ov=(wv.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=cm.add(r,cm.NW),this.x0=s+i*cm.uX(r),this.y0=e+n*cm.uY(r),r=cm.add(r,2),this.x1=s+i*cm.uX(r),this.y1=e+n*cm.uY(r),r=cm.add(r,2),this.x2=s+i*cm.uX(r),this.y2=e+n*cm.uY(r),r=cm.add(r,2),this.x3=s+i*cm.uX(r),this.y3=e+n*cm.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},wv.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},wv);function wv(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var Cv,Pv=new Ov,Nv=(km(Mv,Cv=pt.a),Mv.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},Mv.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},Mv.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&Wf[t.url]&&Mv.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Mv.removeFromCache(this),this.textureCacheIds=null},Mv.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new Mv(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},Mv.prototype.updateUvs=function(){this._uvs===Pv&&(this._uvs=new Ov),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},Mv.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=Nf.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++Vf),t._pixiId),s=Wf[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=Jf(t)),(s=new Mv(new Wm(t,e))).baseTexture.cacheId=n,Wm.addToCache(s.baseTexture,n),Mv.addToCache(s,n)),s},Mv.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=Mv.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},Mv.fromBuffer=function(t,e,r,i){return new Mv(Wm.fromBuffer(t,e,r,i))},Mv.fromLoader=function(t,e,r,i){t=new Wm(t,Object.assign({scaleMode:Nf.SCALE_MODE,resolution:Jf(e)},i)),i=t.resource;i instanceof uv&&(i.url=e);var n=new Mv(t);return Wm.addToCache(n.baseTexture,r=r||e),Mv.addToCache(n,r),r!==e&&(Wm.addToCache(n.baseTexture,e),Mv.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},Mv.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Wf[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),Wf[e]=t)},Mv.removeFromCache=function(t){if("string"==typeof t){var e=Wf[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete Wf[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)Wf[t.textureCacheIds[i]]===t&&delete Wf[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(Mv.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(Mv.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Mv.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Mv.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(Mv.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),Mv.prototype.castToBaseTexture=function(){return this.baseTexture},Mv);function Mv(t,e,r,i,n,s){var o=Cv.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new zy(0,0,1,1)),t instanceof Mv&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=Pv,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new Qy(s.x,s.y):new Qy(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function Lv(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}Nv.EMPTY=new Nv(new Wm),Lv(Nv.EMPTY),Lv(Nv.EMPTY.baseTexture),Nv.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new Nv(new Wm(new nv(t)))}(),Lv(Nv.WHITE),Lv(Nv.WHITE.baseTexture);var Dv,Uv=(km(Fv,Dv=Nv),Object.defineProperty(Fv.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Fv.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},Fv.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},Fv.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(Yf("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new Fv(new Iv(t))},Fv);function Fv(t,e){e=Dv.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var Bv=(kv.prototype.createTexture=function(t,e){e=new Iv(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Uv(e)},kv.prototype.getOptimalTexture=function(t,e,r){var i=kv.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=Bf(t)))<<16|65535&(e=Bf(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},kv.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},kv.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},kv.prototype.returnFilterTexture=function(t){this.returnTexture(t)},kv.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},kv.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=kv.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},kv.SCREEN_KEY="screen",kv);function kv(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var Gv=(Xv.prototype.destroy=function(){this.buffer=null},Xv.from=function(t,e,r,i,n){return new Xv(t,e,r,i,n)},Xv);function Xv(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=Ef.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var Hv=0,Vv=(jv.prototype.update=function(t){this.data=t||this.data,this._updateID++},jv.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},jv.prototype.destroy=function(){this.dispose(),this.data=null},jv.from=function(t){return new jv(t=t instanceof Array?new Float32Array(t):t)},jv);function jv(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=Hv++,this.disposeRunner=new wm("disposeBuffer")}function Yv(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var zv={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Wv={5126:4,5123:2,5121:1},Zv=0,Kv={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},xm=(qv.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Vv||(e instanceof Array&&(e=new Float32Array(e)),e=new Vv(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new Gv(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},qv.prototype.getAttribute=function(t){return this.attributes[t]},qv.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},qv.prototype.addIndex=function(t){return t instanceof Vv||(t instanceof Array&&(t=new Uint16Array(t)),t=new Vv(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},qv.prototype.getIndex=function(){return this.indexBuffer},qv.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new Vv;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*Wv[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=Yv(l);n[c]||(n[c]=new zv[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},qv.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},qv.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},qv.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},qv.prototype.clone=function(){for(var t=new qv,e=0;e<this.buffers.length;e++)t.buffers[e]=new Vv(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new Gv(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},qv.merge=function(t){for(var e=new qv,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new Kv[Yv(o.buffers[s].data)](i[s]),e.buffers[s]=new Vv(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*Wv[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},qv);function qv(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Zv++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new wm("disposeGeometry"),this.refCount=0}var Jv,Qv=(km($v,Jv=xm),$v);function $v(){var t=Jv.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var tx,ex=(km(rx,tx=xm),rx.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},rx.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},rx);function rx(){var t=tx.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Vv(t.vertices),t.uvBuffer=new Vv(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var ix=0,nx=(sx.prototype.update=function(){this.dirtyId++},sx.prototype.add=function(t,e,r){this.uniforms[t]=new sx(e,r)},sx.from=function(t,e){return new sx(t,e)},sx);function sx(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ix++,this.static=!!e}var ox=(ax.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},ax);function ax(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new zy,this.destinationFrame=new zy,this.bindingSourceFrame=new zy,this.bindingDestinationFrame=new zy,this.filters=[],this.transform=null}var hx,ux=[new Qy,new Qy,new Qy,new Qy],lx=new rm,cx=(km(dx,hx=dv),dx.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new ox,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(lx.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},dx.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,Rf.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,Rf.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,Rf.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},dx.prototype.bindAndClear=function(t,e){void 0===e&&(e=Rf.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===Rf.CLEAR||e===Rf.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},dx.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(vf.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(vf.TRIANGLE_STRIP))},dx.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(rm.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},dx.prototype.destroy=function(){this.texturePool.clear(!1)},dx.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},dx.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},dx.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},dx.prototype.emptyPool=function(){this.texturePool.clear(!0)},dx.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},dx.prototype.transformAABB=function(t,e){var r=ux[0],i=ux[1],n=ux[2],s=ux[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},dx.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?lx.copyFrom(n):lx.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},dx);function dx(t){var e=hx.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new Bv,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new Qv,e.quadUv=new ex,e.tempRect=new zy,e.activeState={},e.globalUniforms=new nx({outputFrame:new zy,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var fx=(px.prototype.flush=function(){},px.prototype.destroy=function(){this.renderer=null},px.prototype.start=function(){},px.prototype.stop=function(){this.flush()},px.prototype.render=function(t){},px);function px(t){this.renderer=t}var _x,yx=(km(mx,_x=dv),mx.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},mx.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},mx.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},mx.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},mx.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},mx);function mx(t){var e=_x.call(this,t)||this;return e.emptyRenderer=new fx(t),e.currentRenderer=e.emptyRenderer,e}var vx,xx=0,gx=(km(Ex,vx=dv),Object.defineProperty(Ex.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),Ex.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=xx++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},Ex.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=xx++,this.renderer.runners.contextChange.emit(t)},Ex.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},Ex.prototype.createContext=function(t,e){var r;if(r=Nf.PREFER_ENV>=pf.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},Ex.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},Ex.prototype.handleContextLost=function(t){t.preventDefault()},Ex.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},Ex.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},Ex.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},Ex.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},Ex);function Ex(t){var e=vx.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var Tx,bx=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=Pf.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},Ax=new zy,Sx=(km(Ix,Tx=dv),Ix.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new zy,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,Nf.PREFER_ENV===pf.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},Ix.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},Ix.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(Ix.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),Ix.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=yf.COLOR|yf.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},Ix.prototype.initFramebuffer=function(t){var e=this.gl,e=new bx(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},Ix.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},Ix.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},Ix.prototype.detectSamples=function(t){var e=this.msaaSamples,r=Pf.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?Pf.NONE:r},Ix.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new bv(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=Ax).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},Ix.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},Ix.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},Ix.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},Ix.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new zy},Ix);function Ix(t){t=Tx.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new bv(10,10),t.msaaSamples=null,t}var Rx,Ox=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},wx={5126:4,5123:2,5121:1},Cx=(km(Px,Rx=dv),Px.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=Nf.PREFER_ENV===pf.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},Px.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},Px.prototype.reset=function(){this.unbind()},Px.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},Px.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},Px.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},Px.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*wx[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*wx[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*wx[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new Ox(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},Px.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},Px.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},Px.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},Px.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},Px.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},Px.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},Px);function Px(t){t=Rx.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var Nx=(Mx.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Cf.NONE,this.autoDetect=!0),this._target=null},Mx.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},Mx);function Mx(t){void 0===t&&(t=null),this.type=Cf.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function Lx(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function Dx(t,e,r,i){var n=Lx(t,t.VERTEX_SHADER,e),s=Lx(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function Ux(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function Fx(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Ux(2*e);case"bvec3":return Ux(3*e);case"bvec4":return Ux(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Bx,kx={},Gx=kx;function Xx(){var t,e;return(Gx===kx||Gx&&Gx.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=Nf.PREFER_ENV>=pf.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Gx=e),Gx}function Hx(t,e,r){if("precision"===t.substring(0,9))return r!==wf.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===wf.HIGH&&r!==wf.HIGH?wf.MEDIUM:e)+" float;\n"+t}var Vx={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var jx=null,Yx={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function zx(t,e){if(!jx){var r=Object.keys(Yx);jx={};for(var i=0;i<r.length;++i){var n=r[i];jx[t[n]]=Yx[n]}}return jx[e]}var Wx=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Zx={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Kx={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var qx,Jx=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Qx(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=Jx.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var $x=0,tg={},eg=(rg.prototype.extractData=function(t,e){var r=Xx();r?(e=Dx(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},rg.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=zx(e,o.type),a={type:a,name:o.name,size:Vx[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},rg.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=zx(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:Fx(h,s.size)}}return r},Object.defineProperty(rg,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(rg,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),rg.from=function(t,e,r){var i=t+e,n=zf[i];return n||(zf[i]=n=new rg(t,e,r)),n},rg);function rg(t,e,r){void 0===r&&(r="pixi-shader"),this.id=$x++,this.vertexSrc=t||rg.defaultVertexSrc,this.fragmentSrc=e||rg.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),tg[r]?(tg[r]++,r+="-"+tg[r]):tg[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=Hx(this.vertexSrc,Nf.PRECISION_VERTEX,wf.HIGH),this.fragmentSrc=Hx(this.fragmentSrc,Nf.PRECISION_FRAGMENT,(Bx||(Bx=wf.MEDIUM,(r=Xx())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),Bx=r.precision?wf.HIGH:wf.MEDIUM)),Bx))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var ig=(ng.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},ng.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(ng.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),ng.from=function(t,e,r){return new ng(eg.from(t,e),r)},ng);function ng(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof nx?e:new nx(e):new nx({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var sg=(Object.defineProperty(og.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(og.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(og.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(og.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(og.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(og.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(og.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==mf.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(og.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),og.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},og.for2d=function(){var t=new og;return t.depthTest=!1,t.blend=!0,t},og);function og(){this.data=0,this.blendMode=mf.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var ag,a_=(km(hg,ag=ig),hg.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(hg.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(hg,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(hg,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),hg);function hg(t,e,r){var i=this,e=eg.from(t||hg.defaultVertexSrc,e||hg.defaultFragmentSrc);return(i=ag.call(this,e,r)||this).padding=0,i.resolution=Nf.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new sg,i}var ug=new rm,lg=(Object.defineProperty(cg.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),cg.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},cg.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(ug.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(ug));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},cg);function cg(t,e){this._texture=t,this.mapCoord=new rm,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var dg,fg=(km(pg,dg=a_),pg.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new lg(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},pg);function pg(t){var e=this,r=new rm,e=dg.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var _g,yg=(km(mg,_g=dv),mg.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},mg.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new Nx).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case Cf.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case Cf.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case Cf.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},mg.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case Cf.SCISSOR:this.renderer.scissor.pop();break;case Cf.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Cf.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},mg.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=Cf.SPRITE:(t.type=Cf.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=Cf.SCISSOR)))},mg.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new fg(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},mg.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},mg);function mg(t){t=_g.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var vg,a_=(km(xg,vg=dv),xg.prototype.getStackLength=function(){return this.maskStack.length},xg.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},xg.prototype._useCurrent=function(){},xg.prototype.destroy=function(){vg.prototype.destroy.call(this),this.maskStack=null},xg);function xg(t){t=vg.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var gg,Eg=(km(Tg,gg=a_),Tg.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},Tg.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},Tg.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},Tg.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},Tg);function Tg(t){t=gg.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var bg,Ag=(km(Sg,bg=a_),Sg.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},Sg.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},Sg.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},Sg.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},Sg.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},Sg);function Sg(t){t=bg.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var Ig,Rg=(km(Og,Ig=dv),Og.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},Og.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},Og.prototype.setTransform=function(t){},Og);function Og(t){t=Ig.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new rm,t.transform=null,t}var wg,Cg=new zy,Pg=new zy,Ng=(km(Mg,wg=dv),Mg.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(Cg.width=t.frame.width,Cg.height=t.frame.height,e=Cg),r||(Pg.x=t.frame.x,Pg.y=t.frame.y,Pg.width=e.width,Pg.height=e.height,r=Pg),n=i.framebuffer):(s=o.resolution,e||(Cg.width=o.screen.width,Cg.height=o.screen.height,e=Cg),r||((r=Cg).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},Mg.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},Mg.prototype.resize=function(){this.bind(null)},Mg.prototype.reset=function(){this.bind(null)},Mg);function Mg(t){var e=wg.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new zy,e.destinationFrame=new zy,e.viewportFrame=new zy,e}var Lg=(Dg.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},Dg);function Dg(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var Ug,Fg=0,Bg={textureCount:0},kg=(km(Gg,Ug=dv),Gg.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof qx)return qx;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");qx=!0===t({a:"b"},"a","b")}catch(t){qx=!1}return qx}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},Gg.prototype.contextChange=function(t){this.gl=t,this.reset()},Gg.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(Bg.textureCount=0,this.syncUniformGroup(t.uniformGroup,Bg)),i},Gg.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},Gg.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},Gg.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},Gg.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<Wx.length;h++)if(Wx[h].test(n,o)){i.push(Wx[h].code(r,o)),a=!0;break}a||(s=(1===n.size?Zx:Kx)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},Gg.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},Gg.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},Gg.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=Dx(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:Fx(a.type,a.size)}}t=new Lg(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},Gg.prototype.reset=function(){this.program=null,this.shader=null},Gg.prototype.destroy=function(){this.destroyed=!0},Gg);function Gg(t){t=Ug.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=Fg++,t}var Xg,Hg=(km(Vg,Xg=dv),Vg.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[mf.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.ADD]=[t.ONE,t.ONE],e[mf.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.NONE]=[0,0],e[mf.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[mf.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mf.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[mf.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[mf.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[mf.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[mf.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[mf.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[mf.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[mf.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[mf.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},Vg.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},Vg.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},Vg.prototype.setBlend=function(t){this.updateCheck(Vg.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},Vg.prototype.setOffset=function(t){this.updateCheck(Vg.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},Vg.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},Vg.prototype.setDepthMask=function(t){this.gl.depthMask(t)},Vg.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},Vg.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},Vg.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},Vg.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},Vg.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},Vg.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},Vg.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},Vg.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},Vg);function Vg(t){t=Xg.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=mf.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new sg,t.defaultState.blend=!0,t}var jg,Yg=(km(zg,jg=dv),zg.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Of.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},zg.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},zg.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},zg);function zg(t){t=jg.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=Nf.GC_MAX_IDLE,t.checkCountMax=Nf.GC_MAX_CHECK_COUNT,t.mode=Nf.GC_MODE,t}var Wg,Zg=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},Kg=(km(qg,Wg=dv),qg.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new Zg(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Zg(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},qg.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},qg.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},qg.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},qg.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==Tf.FLOAT&&this.renderer.texture.unbind(s)}},qg.prototype.initTexture=function(t){var e=new Zg(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},qg.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===Ef.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},qg.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==Tf.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},qg.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&Xf(this.managedTextures,t,1))},qg.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==Sf.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=Af.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},qg.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==Sf.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===bf.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===bf.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===bf.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===bf.LINEAR?i.LINEAR:i.NEAREST)},qg);function qg(t){t=Wg.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new Wm,t.hasIntegerTextures=!1,t}var Jg,Qg={__proto__:null,FilterSystem:cx,BatchSystem:yx,ContextSystem:gx,FramebufferSystem:Sx,GeometrySystem:Cx,MaskSystem:yg,ScissorSystem:Eg,StencilSystem:Ag,ProjectionSystem:Rg,RenderTextureSystem:Ng,ShaderSystem:kg,StateSystem:Hg,TextureGCSystem:Yg,TextureSystem:Kg},$g=new rm,a_=(km(tE,Jg=pt.a),tE.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(tE.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(tE.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),tE.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},tE.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=Uv.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return $g.tx=-i.x,$g.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:$g,skipUpdateTransform:!!t.parent}),r},tE.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=_f.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(tE.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(tE.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),tE);function tE(t,e){void 0===t&&(t=_f.UNKNOWN);var r=Jg.call(this)||this;return e=Object.assign({},Nf.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new zy(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||Nf.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(Yf("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var eE,rE=(km(iE,eE=a_),iE.create=function(t){if(Lf=void 0===Lf?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:Nf.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():Lf)return new iE(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},iE.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},iE.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof Uv?(Yf("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},iE.prototype.resize=function(t,e){eE.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},iE.prototype.reset=function(){return this.runners.reset.emit(),this},iE.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},iE.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();eE.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(iE.prototype,"extract",{get:function(){return Yf("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),iE.registerPlugin=function(t,e){(iE.__plugins=iE.__plugins||{})[t]=e},iE);function iE(t){var e,r=eE.call(this,_f.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new wm("destroy"),contextChange:new wm("contextChange"),reset:new wm("reset"),update:new wm("update"),postrender:new wm("postrender"),prerender:new wm("prerender"),resize:new wm("resize")},r.globalUniforms=new nx({projectionMatrix:new rm},!0),r.addSystem(yg,"mask").addSystem(gx,"context").addSystem(Hg,"state").addSystem(kg,"shader").addSystem(Kg,"texture").addSystem(Cx,"geometry").addSystem(Sx,"framebuffer").addSystem(Eg,"scissor").addSystem(Ag,"stencil").addSystem(Rg,"projection").addSystem(Yg,"textureGC").addSystem(cx,"filter").addSystem(Ng,"renderTexture").addSystem(yx,"batch"),r.initPlugins(iE.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",Df||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+Uf+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+Uf+" - "+e+" - http://www.pixijs.com/"),Df=!0),r.resize(r.options.width,r.options.height),r}var nE=function(){this.texArray=null,this.blend=0,this.type=vf.TRIANGLES,this.start=0,this.size=0,this.data=null},sE=(oE.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},oE);function oE(){this.elements=[],this.ids=[],this.count=0}var aE=(Object.defineProperty(hE.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(hE.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(hE.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(hE.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(hE.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),hE.prototype.view=function(t){return this[t+"View"]},hE.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},hE.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},hE);function hE(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var uE,lE=(km(cE,uE=fx),cE.prototype.contextChange=function(){var t=this.renderer.gl;Nf.PREFER_ENV===pf.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Nf.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Qx(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},cE.prototype.initFlushBuffers=function(){for(var t=cE._drawCallPool,e=cE._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new nE);for(;e.length<i;)e.push(new sE);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},cE.prototype.onPrerender=function(){this._flushId=0},cE.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},cE.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=cE._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++Wm._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;Wm._globalBatch=o},cE.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=cE._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=Ff[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},cE.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},cE.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;Nf.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},cE.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=cE._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},cE.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},cE.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Nf.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},cE.prototype.stop=function(){this.flush()},cE.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),uE.prototype.destroy.call(this)},cE.prototype.getAttributeBuffer=function(t){var e=Bf(Math.ceil(t/8)),t=Gf(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new aE(e*this.vertexSize*4)),t},cE.prototype.getIndexBuffer=function(t){var e=Bf(Math.ceil(t/12)),r=Gf(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},cE.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},cE._drawCallPool=[],cE._textureArrayPool=[],cE);function cE(t){var e=uE.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=sg.for2d(),e.size=4*Nf.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var dE=(fE.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=nx.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new eg(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new rm,default:this.defaultGroupCache[t]};return new ig(this.programCache[t],i)},fE.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},fE);function fE(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var pE,_E=(km(yE,pE=xm),yE);function yE(t){void 0===t&&(t=!1);var e=pE.call(this)||this;return e._buffer=new Vv(null,t,!1),e._indexBuffer=new Vv(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,Ef.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,Ef.FLOAT).addAttribute("aColor",e._buffer,4,!0,Ef.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,Ef.FLOAT).addIndex(e._indexBuffer),e}var mE="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",vE="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function xE(){}var dv=(xE.create=function(t){var e,t=Object.assign({vertex:mE,fragment:vE,geometryClass:_E,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return km(o,e=lE),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new dE(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(xE,"defaultVertexSrc",{get:function(){return mE},enumerable:!1,configurable:!0}),Object.defineProperty(xE,"defaultFragmentTemplate",{get:function(){return vE},enumerable:!1,configurable:!0}),xE).create(),gE={};for(EE in vv)!function(t){Object.defineProperty(gE,t,{get:function(){return Yf("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),vv[t]}})}(EE);var EE,TE={};for(EE in Qg)!function(t){Object.defineProperty(TE,t,{get:function(){return Yf("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),Qg[t]}})}(EE);bE.registerPlugin=function(t){bE._plugins.push(t)},bE.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(bE.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(bE.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),bE.prototype.destroy=function(t,e){var r=this,i=bE._plugins.slice(0);i.reverse(),i.forEach(function(t){t.destroy.call(r)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null},bE._plugins=[],a_=bE;function bE(e){var r=this;this.stage=new Im,e=Object.assign({forceCanvas:!1},e),this.renderer=rE.create(e),bE._plugins.forEach(function(t){t.init.call(r,e)})}AE.init=function(t){var r=this;Object.defineProperty(this,"resizeTo",{set:function(t){self.removeEventListener("resize",this.queueResize),(this._resizeTo=t)&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){r._resizeTo&&(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){var t,e;r._resizeTo&&(r.cancelResize(),e=r._resizeTo===self?(t=self.innerWidth,self.innerHeight):(t=(e=r._resizeTo).clientWidth,e.clientHeight),r.renderer.resize(t,e))},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},AE.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},xm=AE;function AE(){}a_.registerPlugin(xm);function SE(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var IE=/iPhone/i,RE=/iPod/i,OE=/iPad/i,wE=/\biOS-universal(?:.+)Mac\b/i,CE=/\bAndroid(?:.+)Mobile\b/i,PE=/Android/i,NE=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ME=/Silk/i,LE=/Windows Phone/i,DE=/\bWindows(?:.+)ARM\b/i,UE=/BlackBerry/i,FE=/BB10/i,BE=/Opera Mini/i,kE=/\b(CriOS|Chrome)(?:.+)Mobile/i,GE=/Mobile(?:.+)Firefox\b/i;var XE=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(IE)&&!i(LE),ipod:i(RE),tablet:!i(IE)&&(i(OE)||SE(e))&&!i(LE),universal:i(wE),device:(i(IE)||i(RE)||i(OE)||i(wE)||SE(e))&&!i(LE)},amazon:{phone:i(NE),tablet:!i(NE)&&i(ME),device:i(NE)||i(ME)},android:{phone:!i(LE)&&i(NE)||!i(LE)&&i(CE),tablet:!i(LE)&&!i(NE)&&!i(CE)&&(i(ME)||i(PE)),device:!i(LE)&&(i(NE)||i(ME)||i(CE)||i(PE))||i(/\bokhttp\b/i)},windows:{phone:i(LE),tablet:i(DE),device:i(LE)||i(DE)},other:{blackberry:i(UE),blackberry10:i(FE),opera:i(BE),firefox:i(GE),chrome:i(kE),device:i(UE)||i(FE)||i(BE)||i(GE)||i(kE)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(xm={})[xm.WEBGL_LEGACY=0]="WEBGL_LEGACY",xm[xm.WEBGL=1]="WEBGL",xm[xm.WEBGL2=2]="WEBGL2",(xm={})[xm.UNKNOWN=0]="UNKNOWN",xm[xm.WEBGL=1]="WEBGL",xm[xm.CANVAS=2]="CANVAS",(xm={})[xm.COLOR=16384]="COLOR",xm[xm.DEPTH=256]="DEPTH",xm[xm.STENCIL=1024]="STENCIL",(xm={})[xm.NORMAL=0]="NORMAL",xm[xm.ADD=1]="ADD",xm[xm.MULTIPLY=2]="MULTIPLY",xm[xm.SCREEN=3]="SCREEN",xm[xm.OVERLAY=4]="OVERLAY",xm[xm.DARKEN=5]="DARKEN",xm[xm.LIGHTEN=6]="LIGHTEN",xm[xm.COLOR_DODGE=7]="COLOR_DODGE",xm[xm.COLOR_BURN=8]="COLOR_BURN",xm[xm.HARD_LIGHT=9]="HARD_LIGHT",xm[xm.SOFT_LIGHT=10]="SOFT_LIGHT",xm[xm.DIFFERENCE=11]="DIFFERENCE",xm[xm.EXCLUSION=12]="EXCLUSION",xm[xm.HUE=13]="HUE",xm[xm.SATURATION=14]="SATURATION",xm[xm.COLOR=15]="COLOR",xm[xm.LUMINOSITY=16]="LUMINOSITY",xm[xm.NORMAL_NPM=17]="NORMAL_NPM",xm[xm.ADD_NPM=18]="ADD_NPM",xm[xm.SCREEN_NPM=19]="SCREEN_NPM",xm[xm.NONE=20]="NONE",xm[xm.SRC_OVER=0]="SRC_OVER",xm[xm.SRC_IN=21]="SRC_IN",xm[xm.SRC_OUT=22]="SRC_OUT",xm[xm.SRC_ATOP=23]="SRC_ATOP",xm[xm.DST_OVER=24]="DST_OVER",xm[xm.DST_IN=25]="DST_IN",xm[xm.DST_OUT=26]="DST_OUT",xm[xm.DST_ATOP=27]="DST_ATOP",xm[xm.ERASE=26]="ERASE",xm[xm.SUBTRACT=28]="SUBTRACT",xm[xm.XOR=29]="XOR",(xm={})[xm.POINTS=0]="POINTS",xm[xm.LINES=1]="LINES",xm[xm.LINE_LOOP=2]="LINE_LOOP",xm[xm.LINE_STRIP=3]="LINE_STRIP",xm[xm.TRIANGLES=4]="TRIANGLES",xm[xm.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",xm[xm.TRIANGLE_FAN=6]="TRIANGLE_FAN",(xm={})[xm.RGBA=6408]="RGBA",xm[xm.RGB=6407]="RGB",xm[xm.ALPHA=6406]="ALPHA",xm[xm.LUMINANCE=6409]="LUMINANCE",xm[xm.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",xm[xm.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",xm[xm.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(xm={})[xm.TEXTURE_2D=3553]="TEXTURE_2D",xm[xm.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",xm[xm.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(xm={})[xm.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",xm[xm.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",xm[xm.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",xm[xm.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",xm[xm.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",xm[xm.FLOAT=5126]="FLOAT",xm[xm.HALF_FLOAT=36193]="HALF_FLOAT",(xm={})[xm.FLOAT=0]="FLOAT",xm[xm.INT=1]="INT",xm[xm.UINT=2]="UINT",(xm=PT=PT||{})[xm.NEAREST=0]="NEAREST",xm[xm.LINEAR=1]="LINEAR",(xm=TT=TT||{})[xm.CLAMP=33071]="CLAMP",xm[xm.REPEAT=10497]="REPEAT",xm[xm.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(xm=HT=HT||{})[xm.OFF=0]="OFF",xm[xm.POW2=1]="POW2",xm[xm.ON=2]="ON",xm[xm.ON_MANUAL=3]="ON_MANUAL",(xm={})[xm.NPM=0]="NPM",xm[xm.UNPACK=1]="UNPACK",xm[xm.PMA=2]="PMA",xm[xm.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",xm[xm.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",xm[xm.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(xm={})[xm.NO=0]="NO",xm[xm.YES=1]="YES",xm[xm.AUTO=2]="AUTO",xm[xm.BLEND=0]="BLEND",xm[xm.CLEAR=1]="CLEAR",xm[xm.BLIT=2]="BLIT",(xm=xT=xT||{})[xm.AUTO=0]="AUTO",xm[xm.MANUAL=1]="MANUAL",(xm=FT=FT||{}).LOW="lowp",xm.MEDIUM="mediump",xm.HIGH="highp",(xm={})[xm.NONE=0]="NONE",xm[xm.SCISSOR=1]="SCISSOR",xm[xm.STENCIL=2]="STENCIL",xm[xm.SPRITE=3]="SPRITE",(xm={})[xm.NONE=0]="NONE",xm[xm.LOW=2]="LOW",xm[xm.MEDIUM=4]="MEDIUM",xm[xm.HIGH=8]="HIGH";var HE,VE,jE,YE,zE,WE,ZE,KE,qE,JE,QE,$E,t0,e0,r0,i0,n0,s0,o0,a0,h0,u0={MIPMAP_TEXTURES:HT.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(HE=32,jE=!0,(XE.tablet||XE.phone)&&(XE.apple.device&&(VE=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(VE[1],10)<11&&(jE=!1),XE.android.device&&(VE=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(VE[1],10)<7&&(jE=!1)),jE?HE:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:xT.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:TT.CLAMP,SCALE_MODE:PT.LINEAR,PRECISION_VERTEX:FT.HIGH,PRECISION_FRAGMENT:XE.apple.device?FT.HIGH:FT.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!XE.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};r(10);(xm=YE=YE||{})[xm.WEBGL_LEGACY=0]="WEBGL_LEGACY",xm[xm.WEBGL=1]="WEBGL",xm[xm.WEBGL2=2]="WEBGL2",(HT=zE=zE||{})[HT.UNKNOWN=0]="UNKNOWN",HT[HT.WEBGL=1]="WEBGL",HT[HT.CANVAS=2]="CANVAS",(xT=WE=WE||{})[xT.COLOR=16384]="COLOR",xT[xT.DEPTH=256]="DEPTH",xT[xT.STENCIL=1024]="STENCIL",(TT=ZE=ZE||{})[TT.NORMAL=0]="NORMAL",TT[TT.ADD=1]="ADD",TT[TT.MULTIPLY=2]="MULTIPLY",TT[TT.SCREEN=3]="SCREEN",TT[TT.OVERLAY=4]="OVERLAY",TT[TT.DARKEN=5]="DARKEN",TT[TT.LIGHTEN=6]="LIGHTEN",TT[TT.COLOR_DODGE=7]="COLOR_DODGE",TT[TT.COLOR_BURN=8]="COLOR_BURN",TT[TT.HARD_LIGHT=9]="HARD_LIGHT",TT[TT.SOFT_LIGHT=10]="SOFT_LIGHT",TT[TT.DIFFERENCE=11]="DIFFERENCE",TT[TT.EXCLUSION=12]="EXCLUSION",TT[TT.HUE=13]="HUE",TT[TT.SATURATION=14]="SATURATION",TT[TT.COLOR=15]="COLOR",TT[TT.LUMINOSITY=16]="LUMINOSITY",TT[TT.NORMAL_NPM=17]="NORMAL_NPM",TT[TT.ADD_NPM=18]="ADD_NPM",TT[TT.SCREEN_NPM=19]="SCREEN_NPM",TT[TT.NONE=20]="NONE",TT[TT.SRC_OVER=0]="SRC_OVER",TT[TT.SRC_IN=21]="SRC_IN",TT[TT.SRC_OUT=22]="SRC_OUT",TT[TT.SRC_ATOP=23]="SRC_ATOP",TT[TT.DST_OVER=24]="DST_OVER",TT[TT.DST_IN=25]="DST_IN",TT[TT.DST_OUT=26]="DST_OUT",TT[TT.DST_ATOP=27]="DST_ATOP",TT[TT.ERASE=26]="ERASE",TT[TT.SUBTRACT=28]="SUBTRACT",TT[TT.XOR=29]="XOR",(PT=KE=KE||{})[PT.POINTS=0]="POINTS",PT[PT.LINES=1]="LINES",PT[PT.LINE_LOOP=2]="LINE_LOOP",PT[PT.LINE_STRIP=3]="LINE_STRIP",PT[PT.TRIANGLES=4]="TRIANGLES",PT[PT.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",PT[PT.TRIANGLE_FAN=6]="TRIANGLE_FAN",(FT=qE=qE||{})[FT.RGBA=6408]="RGBA",FT[FT.RGB=6407]="RGB",FT[FT.ALPHA=6406]="ALPHA",FT[FT.LUMINANCE=6409]="LUMINANCE",FT[FT.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",FT[FT.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",FT[FT.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(xm=JE=JE||{})[xm.TEXTURE_2D=3553]="TEXTURE_2D",xm[xm.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",xm[xm.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(HT=QE=QE||{})[HT.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",HT[HT.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",HT[HT.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",HT[HT.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",HT[HT.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",HT[HT.FLOAT=5126]="FLOAT",HT[HT.HALF_FLOAT=36193]="HALF_FLOAT",(xT=$E=$E||{})[xT.FLOAT=0]="FLOAT",xT[xT.INT=1]="INT",xT[xT.UINT=2]="UINT",(TT=t0=t0||{})[TT.NEAREST=0]="NEAREST",TT[TT.LINEAR=1]="LINEAR",(PT=e0=e0||{})[PT.CLAMP=33071]="CLAMP",PT[PT.REPEAT=10497]="REPEAT",PT[PT.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(FT=r0=r0||{})[FT.OFF=0]="OFF",FT[FT.POW2=1]="POW2",FT[FT.ON=2]="ON",FT[FT.ON_MANUAL=3]="ON_MANUAL",(xm=i0=i0||{})[xm.NPM=0]="NPM",xm[xm.UNPACK=1]="UNPACK",xm[xm.PMA=2]="PMA",xm[xm.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",xm[xm.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",xm[xm.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(HT=n0=n0||{})[HT.NO=0]="NO",HT[HT.YES=1]="YES",HT[HT.AUTO=2]="AUTO",HT[HT.BLEND=0]="BLEND",HT[HT.CLEAR=1]="CLEAR",HT[HT.BLIT=2]="BLIT",(xT=s0=s0||{})[xT.AUTO=0]="AUTO",xT[xT.MANUAL=1]="MANUAL",(TT=o0=o0||{}).LOW="lowp",TT.MEDIUM="mediump",TT.HIGH="highp",(PT=a0=a0||{})[PT.NONE=0]="NONE",PT[PT.SCISSOR=1]="SCISSOR",PT[PT.STENCIL=2]="STENCIL",PT[PT.SPRITE=3]="SPRITE",(FT=h0=h0||{})[FT.NONE=0]="NONE",FT[FT.LOW=2]="LOW",FT[FT.MEDIUM=4]="MEDIUM",FT[FT.HIGH=8]="HIGH";var l0={parse:_t.parse,format:_t.format,resolve:_t.resolve};u0.RETINA_PREFIX=/@([0-9\.]+)x/;var c0,d0=u0.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,f0="6.0.4";var p0=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[ZE.NORMAL_NPM]=ZE.NORMAL,t[ZE.ADD_NPM]=ZE.ADD,t[ZE.SCREEN_NPM]=ZE.SCREEN,e[ZE.NORMAL]=ZE.NORMAL_NPM,e[ZE.ADD]=ZE.ADD_NPM,e[ZE.SCREEN]=ZE.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function _0(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function y0(t){return!(t&t-1||!t)}function m0(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}var v0=0;var x0={};function g0(t,e,r){var i;void 0===r&&(r=3),x0[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),x0[e]=!0)}var E0={},T0=Object.create(null),b0=Object.create(null);var A0=(S0.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},S0.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},S0.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(S0.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(S0.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),S0);function S0(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||u0.RESOLUTION,this.resize(t,e)}var I0;function R0(t,e){t=u0.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var O0,w0=2*Math.PI;Math.PI,Math.PI;(xm=O0=O0||{})[xm.POLY=0]="POLY",xm[xm.RECT=1]="RECT",xm[xm.CIRC=2]="CIRC",xm[xm.ELIP=3]="ELIP",xm[xm.RREC=4]="RREC";var C0=(Object.defineProperty(P0.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(P0.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(P0.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(P0.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(P0,"EMPTY",{get:function(){return new P0(0,0,0,0)},enumerable:!1,configurable:!0}),P0.prototype.clone=function(){return new P0(this.x,this.y,this.width,this.height)},P0.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},P0.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},P0.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},P0.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},P0.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},P0.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},P0.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},P0.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},P0);function P0(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=O0.RECT}N0.prototype.clone=function(){return new N0(this.x,this.y,this.radius)},N0.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},N0.prototype.getBounds=function(){return new C0(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},N0.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function N0(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=O0.CIRC}M0.prototype.clone=function(){return new M0(this.x,this.y,this.width,this.height)},M0.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},M0.prototype.getBounds=function(){return new C0(this.x-this.width,this.y-this.height,this.width,this.height)},M0.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function M0(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=O0.ELIP}L0.prototype.clone=function(){var t=new L0(this.points.slice());return t.closeStroke=this.closeStroke,t},L0.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},L0.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function L0(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=O0.POLY,this.closeStroke=!0}D0.prototype.clone=function(){return new D0(this.x,this.y,this.width,this.height,this.radius)},D0.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},D0.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function D0(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=O0.RREC}var U0=(F0.prototype.clone=function(){return new F0(this.x,this.y)},F0.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},F0.prototype.copyTo=function(t){return t.set(this.x,this.y),t},F0.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},F0.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},F0.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},F0);function F0(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var B0=(k0.prototype.clone=function(t,e){return new k0(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},k0.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},k0.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},k0.prototype.copyTo=function(t){return t.set(this._x,this._y),t},k0.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},k0.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(k0.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(k0.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),k0);function k0(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var G0=(X0.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},X0.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},X0.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},X0.prototype.apply=function(t,e){e=e||new U0;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},X0.prototype.applyInverse=function(t,e){e=e||new U0;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},X0.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},X0.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},X0.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},X0.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},X0.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},X0.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},X0.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(w0-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},X0.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},X0.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},X0.prototype.clone=function(){var t=new X0;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},X0.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},X0.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},X0.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(X0,"IDENTITY",{get:function(){return new X0},enumerable:!1,configurable:!0}),Object.defineProperty(X0,"TEMP_MATRIX",{get:function(){return new X0},enumerable:!1,configurable:!0}),X0);function X0(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var H0=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],V0=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],j0=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Y0=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],z0=[],W0=[],Z0=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];z0.push(e);for(var r=0;r<16;r++)for(var i=Z0(H0[t]*H0[r]+j0[t]*V0[r]),n=Z0(V0[t]*H0[r]+Y0[t]*V0[r]),s=Z0(H0[t]*j0[r]+j0[t]*Y0[r]),o=Z0(V0[t]*j0[r]+Y0[t]*Y0[r]),a=0;a<16;a++)if(H0[a]===i&&V0[a]===n&&j0[a]===s&&Y0[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new G0;h.set(H0[t],V0[t],j0[t],Y0[t],0,0),W0.push(h)}}();var K0={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return H0[t]},uY:function(t){return V0[t]},vX:function(t){return j0[t]},vY:function(t){return Y0[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return z0[t][e]},sub:function(t,e){return z0[t][K0.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?K0.S:K0.N:2*Math.abs(e)<=Math.abs(t)?0<t?K0.E:K0.W:0<e?0<t?K0.SE:K0.SW:0<t?K0.NE:K0.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=W0[K0.inv(e)];e.tx=r,e.ty=i,t.append(e)}};q0.prototype.onChange=function(){this._localID++},q0.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},q0.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},q0.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},q0.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},q0.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(q0.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),q0.IDENTITY=new q0;function q0(){this.worldTransform=new G0,this.localTransform=new G0,this.position=new B0(this.onChange,this,0,0),this.scale=new B0(this.onChange,this,1,1),this.pivot=new B0(this.onChange,this,0,0),this.skew=new B0(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}var J0,Q0=($0.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},$0.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},$0.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},$0.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},$0.prototype.contains=function(t){return-1!==this.items.indexOf(t)},$0.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},$0.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty($0.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty($0.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),$0);function $0(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(Q0.prototype,{dispatch:{value:Q0.prototype.emit},run:{value:Q0.prototype.emit}}),u0.TARGET_FPMS=.06,(HT=J0=J0||{})[HT.INTERACTION=50]="INTERACTION",HT[HT.HIGH=25]="HIGH",HT[HT.NORMAL=0]="NORMAL",HT[HT.LOW=-25]="LOW",HT[HT.UTILITY=-50]="UTILITY";var tT=(eT.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},eT.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},eT.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},eT.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},eT);function eT(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var rT=(iT.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},iT.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},iT.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},iT.prototype.add=function(t,e,r){return void 0===r&&(r=J0.NORMAL),this._addListener(new tT(t,e,r))},iT.prototype.addOnce=function(t,e,r){return void 0===r&&(r=J0.NORMAL),this._addListener(new tT(t,e,r,!0))},iT.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},iT.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(iT.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),iT.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},iT.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},iT.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},iT.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*u0.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(iT.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(iT.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,u0.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(iT.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(iT,"shared",{get:function(){var t;return iT._shared||((t=iT._shared=new iT).autoStart=!0,t._protected=!0),iT._shared},enumerable:!1,configurable:!0}),Object.defineProperty(iT,"system",{get:function(){var t;return iT._system||((t=iT._system=new iT).autoStart=!0,t._protected=!0),iT._system},enumerable:!1,configurable:!0}),iT);function iT(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new tT(null,null,1/0),this.deltaMS=1/u0.TARGET_FPMS,this.elapsedMS=1/u0.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}nT.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,J0.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?rT.shared:new rT,t.autoStart&&this.start()},nT.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function nT(){}u0.PREFER_ENV=XE.any?YE.WEBGL:YE.WEBGL2,u0.STRICT_TEXTURE_CACHE=!1;var sT=[];function oT(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=sT.length-1;0<=n;--n){var s=sT[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var aT=function(t,e){return(aT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function hT(t,e){function r(){this.constructor=t}aT(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var uT=(lT.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},lT.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},lT.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(lT.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),lT.prototype.update=function(){this.destroyed||this.onUpdate.emit()},lT.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(lT.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(lT.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),lT.prototype.style=function(t,e,r){return!1},lT.prototype.dispose=function(){},lT.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},lT.test=function(t,e){return!1},lT);function lT(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Q0("setRealSize"),this.onUpdate=new Q0("update"),this.onError=new Q0("onError")}var cT,dT=(hT(fT,cT=uT),fT.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i0.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},fT.prototype.dispose=function(){this.data=null},fT.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},fT);function fT(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=cT.call(this,e,i)||this).data=t,r}var pT,_T={scaleMode:t0.NEAREST,format:qE.RGBA,alphaMode:i0.NPM},yT=(hT(mT,pT=pt.a),Object.defineProperty(mT.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(mT.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),mT.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},mT.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},mT.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},mT.prototype._refreshPOT=function(){this.isPowerOfTwo=y0(this.realWidth)&&y0(this.realHeight)},mT.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},mT.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},mT.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},mT.prototype.onError=function(t){this.emit("error",this,t)},mT.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete b0[this.cacheId],delete T0[this.cacheId],this.cacheId=null),this.dispose(),mT.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},mT.prototype.dispose=function(){this.emit("dispose",this)},mT.prototype.castToBaseTexture=function(){return this},mT.from=function(t,e,r){void 0===r&&(r=u0.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++v0),t._pixiId),s=b0[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new mT(t,e)).cacheId=n,mT.addToCache(s,n)),s},mT.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new dT(t,{width:e,height:r}),t=t instanceof Float32Array?QE.FLOAT:QE.UNSIGNED_BYTE;return new mT(n,Object.assign(_T,i||{width:e,height:r,type:t}))},mT.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),b0[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),b0[e]=t)},mT.removeFromCache=function(t){if("string"==typeof t){var e=b0[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete b0[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete b0[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},mT._globalBatch=0,mT);function mT(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=pT.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof uT||((t=oT(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||u0.RESOLUTION,r.mipmap=void 0!==n?n:u0.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:u0.ANISOTROPIC_LEVEL,r.wrapMode=u||u0.WRAP_MODE,r.scaleMode=void 0!==o?o:u0.SCALE_MODE,r.format=l||qE.RGBA,r.type=c||QE.UNSIGNED_BYTE,r.target=d||JE.TEXTURE_2D,r.alphaMode=void 0!==i?i:i0.UNPACK,r.uid=++v0,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var vT,xT=(hT(gT,vT=uT),gT.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof uT?this.addResourceAt(t[r],r):this.addResourceAt(oT(t[r],e),r))},gT.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},gT.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},gT.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");vT.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},gT.prototype.unbind=function(t){vT.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},gT.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},gT);function gT(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=vT.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new yT;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var ET,TT=(hT(bT,ET=xT),bT.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},bT.prototype.bind=function(t){ET.prototype.bind.call(this,t),t.target=JE.TEXTURE_2D_ARRAY},bT.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},bT);function bT(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=ET.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var AT,ST=(hT(IT,AT=uT),IT.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(I0=I0||document.createElement("a")).href=t;var r=l0.parse(I0.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},IT.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i0.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},IT.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),AT.prototype.update.call(this))},IT.prototype.dispose=function(){this.source=null},IT);function IT(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=AT.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var RT,OT=(hT(wT,RT=ST),wT.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},wT);function wT(t){return RT.call(this,t)||this}var CT,PT=(hT(NT,CT=xT),NT.prototype.bind=function(t){CT.prototype.bind.call(this,t),t.target=JE.TEXTURE_CUBE_MAP},NT.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=JE.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},NT.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<NT.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},NT.test=function(t){return Array.isArray(t)&&t.length===NT.SIDES},NT.SIDES=6,NT);function NT(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==NT.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=CT.call(this,6,{width:n,height:s})||this,a=0;a<NT.SIDES;a++)r.items[a].target=JE.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var MT,LT=(hT(DT,MT=ST),DT.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},DT.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===i0.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},DT.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return MT.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(MT.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},DT.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,MT.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},DT.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},DT);function DT(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,ST.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=MT.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:u0.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var UT,FT=(hT(BT,UT=ST),BT.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},BT.prototype._loadSvg=function(){var s=this,o=new Image;ST.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++v0,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},BT.getSize=function(t){var e=BT.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},BT.prototype.dispose=function(){UT.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},BT.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},BT.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,BT);function BT(t,e){var r=this;return e=e||{},(r=UT.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var kT,xm=(hT(GT,kT=ST),GT.prototype.update=function(t){var e;this.destroyed||(e=rT.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(kT.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},GT.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},GT.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},GT.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},GT.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},GT.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(rT.shared.add(this.update,this),this._isConnectedToTicker=!0)},GT.prototype._onPlayStop=function(){this._isConnectedToTicker&&(rT.shared.remove(this.update,this),this._isConnectedToTicker=!1)},GT.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},GT.prototype.dispose=function(){this._isConnectedToTicker&&rT.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),kT.prototype.dispose.call(this)},Object.defineProperty(GT.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(rT.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(rT.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(GT.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),GT.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<GT.TYPES.indexOf(e)},GT.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],GT.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},GT);function GT(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];ST.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||GT.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=kT.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var XT,HT=(hT(VT,XT=ST),VT.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},VT);function VT(t){return XT.call(this,t)||this}sT.push(LT,HT,OT,xm,FT,dT,PT,TT);var jT={__proto__:null,Resource:uT,BaseImageResource:ST,INSTALLED:sT,autoDetectResource:oT,AbstractMultiResource:xT,ArrayResource:TT,BufferResource:dT,CanvasResource:OT,CubeResource:PT,ImageResource:LT,SVGResource:FT,VideoResource:xm,ImageBitmapResource:HT},FT=(YT.prototype.destroy=function(){this.renderer=null},YT);function YT(t){this.renderer=t}var zT,WT=(hT(ZT,zT=dT),ZT.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i0.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},ZT);function ZT(){return null!==zT&&zT.apply(this,arguments)||this}var KT=(Object.defineProperty(qT.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),qT.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new yT(null,{scaleMode:t0.NEAREST,resolution:1,mipmap:r0.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},qT.prototype.addDepthTexture=function(t){return this.depthTexture=t||new yT(new WT(null,{width:this.width,height:this.height}),{scaleMode:t0.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:r0.OFF,format:qE.DEPTH_COMPONENT,type:QE.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},qT.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},qT.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},qT.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},qT.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},qT.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},qT);function qT(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Q0("disposeFramebuffer"),this.multisample=h0.NONE}var JT,QT=(hT($T,JT=yT),$T.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},$T.prototype.dispose=function(){this.framebuffer.dispose(),JT.prototype.dispose.call(this)},$T.prototype.destroy=function(){JT.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},$T);function $T(t){var e=this,e=JT.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=r0.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new KT(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var tb=(eb.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=K0.add(r,K0.NW),this.x0=s+i*K0.uX(r),this.y0=e+n*K0.uY(r),r=K0.add(r,2),this.x1=s+i*K0.uX(r),this.y1=e+n*K0.uY(r),r=K0.add(r,2),this.x2=s+i*K0.uX(r),this.y2=e+n*K0.uY(r),r=K0.add(r,2),this.x3=s+i*K0.uX(r),this.y3=e+n*K0.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},eb.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},eb);function eb(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var rb,ib=new tb,nb=(hT(sb,rb=pt.a),sb.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},sb.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},sb.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&T0[t.url]&&sb.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,sb.removeFromCache(this),this.textureCacheIds=null},sb.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new sb(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},sb.prototype.updateUvs=function(){this._uvs===ib&&(this._uvs=new tb),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},sb.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=u0.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++v0),t._pixiId),s=T0[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=R0(t)),(s=new sb(new yT(t,e))).baseTexture.cacheId=n,yT.addToCache(s.baseTexture,n),sb.addToCache(s,n)),s},sb.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=sb.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},sb.fromBuffer=function(t,e,r,i){return new sb(yT.fromBuffer(t,e,r,i))},sb.fromLoader=function(t,e,r,i){t=new yT(t,Object.assign({scaleMode:u0.SCALE_MODE,resolution:R0(e)},i)),i=t.resource;i instanceof LT&&(i.url=e);var n=new sb(t);return yT.addToCache(n.baseTexture,r=r||e),sb.addToCache(n,r),r!==e&&(yT.addToCache(n.baseTexture,e),sb.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},sb.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),T0[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),T0[e]=t)},sb.removeFromCache=function(t){if("string"==typeof t){var e=T0[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete T0[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)T0[t.textureCacheIds[i]]===t&&delete T0[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(sb.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(sb.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(sb.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(sb.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(sb.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),sb.prototype.castToBaseTexture=function(){return this.baseTexture},sb);function sb(t,e,r,i,n,s){var o=rb.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new C0(0,0,1,1)),t instanceof sb&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=ib,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new U0(s.x,s.y):new U0(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function ob(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}nb.EMPTY=new nb(new yT),ob(nb.EMPTY),ob(nb.EMPTY.baseTexture),nb.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new nb(new yT(new OT(t)))}(),ob(nb.WHITE),ob(nb.WHITE.baseTexture);var ab,hb=(hT(ub,ab=nb),Object.defineProperty(ub.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),ub.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},ub.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},ub.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(g0("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new ub(new QT(t))},ub);function ub(t,e){e=ab.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var lb=(cb.prototype.createTexture=function(t,e){e=new QT(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new hb(e)},cb.prototype.getOptimalTexture=function(t,e,r){var i=cb.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=_0(t)))<<16|65535&(e=_0(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},cb.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},cb.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},cb.prototype.returnFilterTexture=function(t){this.returnTexture(t)},cb.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},cb.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=cb.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},cb.SCREEN_KEY="screen",cb);function cb(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var db=(fb.prototype.destroy=function(){this.buffer=null},fb.from=function(t,e,r,i,n){return new fb(t,e,r,i,n)},fb);function fb(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=QE.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var pb=0,_b=(yb.prototype.update=function(t){this.data=t||this.data,this._updateID++},yb.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},yb.prototype.destroy=function(){this.dispose(),this.data=null},yb.from=function(t){return new yb(t=t instanceof Array?new Float32Array(t):t)},yb);function yb(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=pb++,this.disposeRunner=new Q0("disposeBuffer")}function mb(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var vb={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var xb={5126:4,5123:2,5121:1},gb=0,Eb={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},xm=(Tb.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof _b||(e instanceof Array&&(e=new Float32Array(e)),e=new _b(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new db(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},Tb.prototype.getAttribute=function(t){return this.attributes[t]},Tb.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},Tb.prototype.addIndex=function(t){return t instanceof _b||(t instanceof Array&&(t=new Uint16Array(t)),t=new _b(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},Tb.prototype.getIndex=function(){return this.indexBuffer},Tb.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new _b;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*xb[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=mb(l);n[c]||(n[c]=new vb[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Tb.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},Tb.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Tb.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},Tb.prototype.clone=function(){for(var t=new Tb,e=0;e<this.buffers.length;e++)t.buffers[e]=new _b(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new db(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},Tb.merge=function(t){for(var e=new Tb,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new Eb[mb(o.buffers[s].data)](i[s]),e.buffers[s]=new _b(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*xb[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},Tb);function Tb(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=gb++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Q0("disposeGeometry"),this.refCount=0}var bb,Ab=(hT(Sb,bb=xm),Sb);function Sb(){var t=bb.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var Ib,Rb=(hT(Ob,Ib=xm),Ob.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},Ob.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},Ob);function Ob(){var t=Ib.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new _b(t.vertices),t.uvBuffer=new _b(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var wb=0,Cb=(Pb.prototype.update=function(){this.dirtyId++},Pb.prototype.add=function(t,e,r){this.uniforms[t]=new Pb(e,r)},Pb.from=function(t,e){return new Pb(t,e)},Pb);function Pb(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=wb++,this.static=!!e}var Nb=(Mb.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},Mb);function Mb(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new C0,this.destinationFrame=new C0,this.bindingSourceFrame=new C0,this.bindingDestinationFrame=new C0,this.filters=[],this.transform=null}var Lb,Db=[new U0,new U0,new U0,new U0],Ub=new G0,Fb=(hT(Bb,Lb=FT),Bb.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new Nb,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(Ub.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},Bb.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,n0.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,n0.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,n0.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},Bb.prototype.bindAndClear=function(t,e){void 0===e&&(e=n0.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===n0.CLEAR||e===n0.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},Bb.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(KE.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(KE.TRIANGLE_STRIP))},Bb.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(G0.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},Bb.prototype.destroy=function(){this.texturePool.clear(!1)},Bb.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},Bb.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},Bb.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},Bb.prototype.emptyPool=function(){this.texturePool.clear(!0)},Bb.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},Bb.prototype.transformAABB=function(t,e){var r=Db[0],i=Db[1],n=Db[2],s=Db[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},Bb.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?Ub.copyFrom(n):Ub.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},Bb);function Bb(t){var e=Lb.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new lb,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new Ab,e.quadUv=new Rb,e.tempRect=new C0,e.activeState={},e.globalUniforms=new Cb({outputFrame:new C0,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var kb=(Gb.prototype.flush=function(){},Gb.prototype.destroy=function(){this.renderer=null},Gb.prototype.start=function(){},Gb.prototype.stop=function(){this.flush()},Gb.prototype.render=function(t){},Gb);function Gb(t){this.renderer=t}var Xb,Hb=(hT(Vb,Xb=FT),Vb.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},Vb.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},Vb.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},Vb.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},Vb.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},Vb);function Vb(t){var e=Xb.call(this,t)||this;return e.emptyRenderer=new kb(t),e.currentRenderer=e.emptyRenderer,e}var jb,Yb=0,zb=(hT(Wb,jb=FT),Object.defineProperty(Wb.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),Wb.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Yb++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},Wb.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Yb++,this.renderer.runners.contextChange.emit(t)},Wb.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},Wb.prototype.createContext=function(t,e){var r;if(r=u0.PREFER_ENV>=YE.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},Wb.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},Wb.prototype.handleContextLost=function(t){t.preventDefault()},Wb.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},Wb.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},Wb.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},Wb.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},Wb);function Wb(t){var e=jb.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var Zb,Kb=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=h0.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},qb=new C0,Jb=(hT(Qb,Zb=FT),Qb.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new C0,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,u0.PREFER_ENV===YE.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},Qb.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},Qb.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(Qb.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),Qb.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=WE.COLOR|WE.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},Qb.prototype.initFramebuffer=function(t){var e=this.gl,e=new Kb(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},Qb.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},Qb.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},Qb.prototype.detectSamples=function(t){var e=this.msaaSamples,r=h0.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?h0.NONE:r},Qb.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new KT(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=qb).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},Qb.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},Qb.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},Qb.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},Qb.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new C0},Qb);function Qb(t){t=Zb.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new KT(10,10),t.msaaSamples=null,t}var $b,tA=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},eA={5126:4,5123:2,5121:1},rA=(hT(iA,$b=FT),iA.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=u0.PREFER_ENV===YE.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},iA.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},iA.prototype.reset=function(){this.unbind()},iA.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},iA.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},iA.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},iA.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*eA[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*eA[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*eA[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new tA(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},iA.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},iA.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},iA.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},iA.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},iA.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},iA.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},iA);function iA(t){t=$b.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var nA=(sA.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=a0.NONE,this.autoDetect=!0),this._target=null},sA.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},sA);function sA(t){void 0===t&&(t=null),this.type=a0.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function oA(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function aA(t,e,r,i){var n=oA(t,t.VERTEX_SHADER,e),s=oA(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function hA(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function uA(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return hA(2*e);case"bvec3":return hA(3*e);case"bvec4":return hA(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var lA,cA={},dA=cA;function fA(){var t,e;return(dA===cA||dA&&dA.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=u0.PREFER_ENV>=YE.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),dA=e),dA}function pA(t,e,r){if("precision"===t.substring(0,9))return r!==o0.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===o0.HIGH&&r!==o0.HIGH?o0.MEDIUM:e)+" float;\n"+t}var _A={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var yA=null,mA={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function vA(t,e){if(!yA){var r=Object.keys(mA);yA={};for(var i=0;i<r.length;++i){var n=r[i];yA[t[n]]=mA[n]}}return yA[e]}var xA=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],gA={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},EA={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var TA,bA=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function AA(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=bA.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var SA=0,IA={},RA=(OA.prototype.extractData=function(t,e){var r=fA();r?(e=aA(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},OA.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=vA(e,o.type),a={type:a,name:o.name,size:_A[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},OA.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=vA(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:uA(h,s.size)}}return r},Object.defineProperty(OA,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(OA,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),OA.from=function(t,e,r){var i=t+e,n=E0[i];return n||(E0[i]=n=new OA(t,e,r)),n},OA);function OA(t,e,r){void 0===r&&(r="pixi-shader"),this.id=SA++,this.vertexSrc=t||OA.defaultVertexSrc,this.fragmentSrc=e||OA.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),IA[r]?(IA[r]++,r+="-"+IA[r]):IA[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=pA(this.vertexSrc,u0.PRECISION_VERTEX,o0.HIGH),this.fragmentSrc=pA(this.fragmentSrc,u0.PRECISION_FRAGMENT,(lA||(lA=o0.MEDIUM,(r=fA())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),lA=r.precision?o0.HIGH:o0.MEDIUM)),lA))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var wA=(CA.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},CA.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(CA.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),CA.from=function(t,e,r){return new CA(RA.from(t,e),r)},CA);function CA(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof Cb?e:new Cb(e):new Cb({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var PA=(Object.defineProperty(NA.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(NA.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(NA.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(NA.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(NA.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(NA.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(NA.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==ZE.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(NA.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),NA.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},NA.for2d=function(){var t=new NA;return t.depthTest=!1,t.blend=!0,t},NA);function NA(){this.data=0,this.blendMode=ZE.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var MA,HT=(hT(LA,MA=wA),LA.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(LA.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(LA,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(LA,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),LA);function LA(t,e,r){var i=this,e=RA.from(t||LA.defaultVertexSrc,e||LA.defaultFragmentSrc);return(i=MA.call(this,e,r)||this).padding=0,i.resolution=u0.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new PA,i}var DA=new G0,UA=(Object.defineProperty(FA.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),FA.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},FA.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(DA.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(DA));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},FA);function FA(t,e){this._texture=t,this.mapCoord=new G0,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var BA,kA=(hT(GA,BA=HT),GA.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new UA(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},GA);function GA(t){var e=this,r=new G0,e=BA.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var XA,HA=(hT(VA,XA=FT),VA.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},VA.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new nA).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case a0.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case a0.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case a0.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},VA.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case a0.SCISSOR:this.renderer.scissor.pop();break;case a0.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case a0.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},VA.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=a0.SPRITE:(t.type=a0.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=a0.SCISSOR)))},VA.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new kA(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},VA.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},VA);function VA(t){t=XA.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var jA,HT=(hT(YA,jA=FT),YA.prototype.getStackLength=function(){return this.maskStack.length},YA.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},YA.prototype._useCurrent=function(){},YA.prototype.destroy=function(){jA.prototype.destroy.call(this),this.maskStack=null},YA);function YA(t){t=jA.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var zA,WA=(hT(ZA,zA=HT),ZA.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},ZA.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},ZA.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},ZA.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},ZA);function ZA(t){t=zA.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var KA,qA=(hT(JA,KA=HT),JA.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},JA.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},JA.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},JA.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},JA.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},JA);function JA(t){t=KA.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var QA,$A=(hT(t1,QA=FT),t1.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},t1.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},t1.prototype.setTransform=function(t){},t1);function t1(t){t=QA.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new G0,t.transform=null,t}var e1,r1=new C0,i1=new C0,n1=(hT(s1,e1=FT),s1.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(r1.width=t.frame.width,r1.height=t.frame.height,e=r1),r||(i1.x=t.frame.x,i1.y=t.frame.y,i1.width=e.width,i1.height=e.height,r=i1),n=i.framebuffer):(s=o.resolution,e||(r1.width=o.screen.width,r1.height=o.screen.height,e=r1),r||((r=r1).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},s1.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},s1.prototype.resize=function(){this.bind(null)},s1.prototype.reset=function(){this.bind(null)},s1);function s1(t){var e=e1.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new C0,e.destinationFrame=new C0,e.viewportFrame=new C0,e}var o1=(a1.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},a1);function a1(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var h1,u1=0,l1={textureCount:0},c1=(hT(d1,h1=FT),d1.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof TA)return TA;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");TA=!0===t({a:"b"},"a","b")}catch(t){TA=!1}return TA}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},d1.prototype.contextChange=function(t){this.gl=t,this.reset()},d1.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(l1.textureCount=0,this.syncUniformGroup(t.uniformGroup,l1)),i},d1.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},d1.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},d1.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},d1.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<xA.length;h++)if(xA[h].test(n,o)){i.push(xA[h].code(r,o)),a=!0;break}a||(s=(1===n.size?gA:EA)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},d1.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},d1.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},d1.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=aA(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:uA(a.type,a.size)}}t=new o1(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},d1.prototype.reset=function(){this.program=null,this.shader=null},d1.prototype.destroy=function(){this.destroyed=!0},d1);function d1(t){t=h1.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=u1++,t}var f1,p1=(hT(_1,f1=FT),_1.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[ZE.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.ADD]=[t.ONE,t.ONE],e[ZE.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.NONE]=[0,0],e[ZE.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[ZE.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ZE.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[ZE.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[ZE.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[ZE.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[ZE.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[ZE.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[ZE.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[ZE.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[ZE.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},_1.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},_1.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},_1.prototype.setBlend=function(t){this.updateCheck(_1.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},_1.prototype.setOffset=function(t){this.updateCheck(_1.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},_1.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},_1.prototype.setDepthMask=function(t){this.gl.depthMask(t)},_1.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},_1.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},_1.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},_1.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},_1.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},_1.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},_1.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},_1.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},_1);function _1(t){t=f1.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=ZE.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new PA,t.defaultState.blend=!0,t}var y1,m1=(hT(v1,y1=FT),v1.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==s0.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},v1.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},v1.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},v1);function v1(t){t=y1.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=u0.GC_MAX_IDLE,t.checkCountMax=u0.GC_MAX_CHECK_COUNT,t.mode=u0.GC_MODE,t}var x1,g1=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},E1=(hT(T1,x1=FT),T1.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new g1(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new g1(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},T1.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},T1.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},T1.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},T1.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==$E.FLOAT&&this.renderer.texture.unbind(s)}},T1.prototype.initTexture=function(t){var e=new g1(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},T1.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===QE.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},T1.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==$E.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},T1.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&function(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}(this.managedTextures,t,1))},T1.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==r0.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=e0.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},T1.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==r0.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===t0.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===t0.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===t0.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===t0.LINEAR?i.LINEAR:i.NEAREST)},T1);function T1(t){t=x1.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new yT,t.hasIntegerTextures=!1,t}var b1,A1={__proto__:null,FilterSystem:Fb,BatchSystem:Hb,ContextSystem:zb,FramebufferSystem:Jb,GeometrySystem:rA,MaskSystem:HA,ScissorSystem:WA,StencilSystem:qA,ProjectionSystem:$A,RenderTextureSystem:n1,ShaderSystem:c1,StateSystem:p1,TextureGCSystem:m1,TextureSystem:E1},S1=new G0,HT=(hT(I1,b1=pt.a),I1.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(I1.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(I1.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),I1.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},I1.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=hb.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return S1.tx=-i.x,S1.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:S1,skipUpdateTransform:!!t.parent}),r},I1.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=zE.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(I1.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(I1.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),I1);function I1(t,e){void 0===t&&(t=zE.UNKNOWN);var r=b1.call(this)||this;return e=Object.assign({},u0.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new C0(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||u0.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(g0("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var R1;hT(O1,R1=HT),O1.create=function(t){if(c0=void 0===c0?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:u0.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():c0)return new O1(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},O1.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},O1.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof hb?(g0("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},O1.prototype.resize=function(t,e){R1.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},O1.prototype.reset=function(){return this.runners.reset.emit(),this},O1.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},O1.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();R1.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(O1.prototype,"extract",{get:function(){return g0("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),O1.registerPlugin=function(t,e){(O1.__plugins=O1.__plugins||{})[t]=e};function O1(t){var e,r=R1.call(this,zE.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Q0("destroy"),contextChange:new Q0("contextChange"),reset:new Q0("reset"),update:new Q0("update"),postrender:new Q0("postrender"),prerender:new Q0("prerender"),resize:new Q0("resize")},r.globalUniforms=new Cb({projectionMatrix:new G0},!0),r.addSystem(HA,"mask").addSystem(zb,"context").addSystem(p1,"state").addSystem(c1,"shader").addSystem(E1,"texture").addSystem(rA,"geometry").addSystem(Jb,"framebuffer").addSystem(WA,"scissor").addSystem(qA,"stencil").addSystem($A,"projection").addSystem(m1,"textureGC").addSystem(Fb,"filter").addSystem(n1,"renderTexture").addSystem(Hb,"batch"),r.initPlugins(O1.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",d0||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+f0+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+f0+" - "+e+" - http://www.pixijs.com/"),d0=!0),r.resize(r.options.width,r.options.height),r}var w1=function(){this.texArray=null,this.blend=0,this.type=KE.TRIANGLES,this.start=0,this.size=0,this.data=null},C1=(P1.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},P1);function P1(){this.elements=[],this.ids=[],this.count=0}var N1=(Object.defineProperty(M1.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(M1.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(M1.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(M1.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(M1.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),M1.prototype.view=function(t){return this[t+"View"]},M1.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},M1.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},M1);function M1(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var L1,D1=(hT(U1,L1=kb),U1.prototype.contextChange=function(){var t=this.renderer.gl;u0.PREFER_ENV===YE.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),u0.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=AA(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},U1.prototype.initFlushBuffers=function(){for(var t=U1._drawCallPool,e=U1._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new w1);for(;e.length<i;)e.push(new C1);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},U1.prototype.onPrerender=function(){this._flushId=0},U1.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},U1.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=U1._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++yT._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;yT._globalBatch=o},U1.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=U1._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=p0[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},U1.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},U1.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;u0.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},U1.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=U1._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},U1.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},U1.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),u0.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},U1.prototype.stop=function(){this.flush()},U1.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),L1.prototype.destroy.call(this)},U1.prototype.getAttributeBuffer=function(t){var e=_0(Math.ceil(t/8)),t=m0(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new N1(e*this.vertexSize*4)),t},U1.prototype.getIndexBuffer=function(t){var e=_0(Math.ceil(t/12)),r=m0(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},U1.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},U1._drawCallPool=[],U1._textureArrayPool=[],U1);function U1(t){var e=L1.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=PA.for2d(),e.size=4*u0.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var F1=(B1.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=Cb.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new RA(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new G0,default:this.defaultGroupCache[t]};return new wA(this.programCache[t],i)},B1.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},B1);function B1(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var k1,G1=(hT(X1,k1=xm),X1);function X1(t){void 0===t&&(t=!1);var e=k1.call(this)||this;return e._buffer=new _b(null,t,!1),e._indexBuffer=new _b(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,QE.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,QE.FLOAT).addAttribute("aColor",e._buffer,4,!0,QE.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,QE.FLOAT).addIndex(e._indexBuffer),e}var H1="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",V1="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function j1(){}(j1.create=function(t){var e,t=Object.assign({vertex:H1,fragment:V1,geometryClass:G1,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return hT(o,e=D1),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new F1(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(j1,"defaultVertexSrc",{get:function(){return H1},enumerable:!1,configurable:!0}),Object.defineProperty(j1,"defaultFragmentTemplate",{get:function(){return V1},enumerable:!1,configurable:!0}),j1).create();var Y1={};for(z1 in jT)!function(t){Object.defineProperty(Y1,t,{get:function(){return g0("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),jT[t]}})}(z1);var z1,W1={};for(z1 in A1)!function(t){Object.defineProperty(W1,t,{get:function(){return g0("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),A1[t]}})}(z1);var Z1=new C0,FT=(K1.prototype.image=function(t,e,r){var i=new Image;return i.src=this.base64(t,e,r),i},K1.prototype.base64=function(t,e,r){return this.canvas(t).toDataURL(e,r)},K1.prototype.canvas=function(t){var e,r,i,n=this.renderer,s=!1,o=!1;t&&(t instanceof hb?i=t:(i=this.renderer.generateTexture(t),o=!0)),i?(e=i.baseTexture.resolution,r=i.frame,s=!1,n.renderTexture.bind(i)):(e=this.renderer.resolution,s=!0,(r=Z1).width=this.renderer.width,r.height=this.renderer.height,n.renderTexture.bind(null));var a=Math.floor(r.width*e+1e-4),h=Math.floor(r.height*e+1e-4),u=new A0(a,h,1),t=new Uint8Array(4*a*h),n=n.gl;n.readPixels(r.x*e,r.y*e,a,h,n.RGBA,n.UNSIGNED_BYTE,t);a=u.context.getImageData(0,0,a,h);return K1.arrayPostDivide(t,a.data),u.context.putImageData(a,0,0),s&&((s=new A0(u.width,u.height,1)).context.scale(1,-1),s.context.drawImage(u.canvas,0,-h),u.destroy(),u=s),o&&i.destroy(!0),u.canvas},K1.prototype.pixels=function(t){var e,r,i,n=this.renderer,s=!1;t&&(t instanceof hb?i=t:(i=this.renderer.generateTexture(t),s=!0)),i?(e=i.baseTexture.resolution,r=i.frame,n.renderTexture.bind(i)):(e=n.resolution,(r=Z1).width=n.width,r.height=n.height,n.renderTexture.bind(null));var o=r.width*e,a=r.height*e,t=new Uint8Array(4*o*a),n=n.gl;return n.readPixels(r.x*e,r.y*e,o,a,n.RGBA,n.UNSIGNED_BYTE,t),s&&i.destroy(!0),K1.arrayPostDivide(t,t),t},K1.prototype.destroy=function(){this.renderer=null},K1.arrayPostDivide=function(t,e){for(var r=0;r<t.length;r+=4){var i=e[r+3]=t[r+3];0!==i?(e[r]=Math.round(Math.min(255*t[r]/i,255)),e[r+1]=Math.round(Math.min(255*t[r+1]/i,255)),e[r+2]=Math.round(Math.min(255*t[r+2]/i,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}},K1);function K1(t){this.renderer=t}function q1(){}function J1(r,i,n,s){var o=0,a=r.length;!function t(e){e||o===a?n&&n(e):s?setTimeout(function(){i(r[o++],t)},1):i(r[o++],t)}()}function Q1(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var r=0,i={_tasks:[],concurrency:t,saturated:q1,unsaturated:q1,buffer:t/4,empty:q1,drain:q1,error:q1,started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){r=0,i.drain=q1,i.started=!1,i._tasks=[]},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!i.paused&&r<i.concurrency&&i._tasks.length;){var t=i._tasks.shift();0===i._tasks.length&&i.empty(),(r+=1)===i.concurrency&&i.saturated(),e(t.data,function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}(function(t){return function(){--r,t.callback.apply(t,arguments),null!=arguments[0]&&i.error(arguments[0],t.data),r<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}(t)))}},length:function(){return i._tasks.length},running:function(){return r},idle:function(){return i._tasks.length+r===0},pause:function(){!0!==i.paused&&(i.paused=!0)},resume:function(){if(!1!==i.paused){i.paused=!1;for(var t=1;t<=i.concurrency;t++)i.process()}}};function n(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");i.started=!0,null==t&&i.idle()?setTimeout(function(){return i.drain()},1):(r={data:t,callback:"function"==typeof r?r:q1},e?i._tasks.unshift(r):i._tasks.push(r),setTimeout(function(){return i.process()},1))}return i}var $1={};function tS(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function eS(t,e,r){return e&&tS(t.prototype,e),r&&tS(t,r),t}var rS=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),iS=null;function nS(){}var sS=function(){function s(t,e,r){if("string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(s.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=s.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=nS,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new us.a,this.onProgress=new us.a,this.onComplete=new us.a,this.onAfterMiddleware=new us.a}s.setExtensionLoadType=function(t,e){oS(s._loadTypeMap,t,e)},s.setExtensionXhrType=function(t,e){oS(s._xhrTypeMap,t,e)};var t=s.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=s.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(t){var e=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(e)},1);else switch(t&&this.onComplete.once(t),this._setFlag(s.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case s.LOAD_TYPE.IMAGE:this.type=s.TYPE.IMAGE,this._loadElement("image");break;case s.LOAD_TYPE.AUDIO:this.type=s.TYPE.AUDIO,this._loadSourceElement("audio");break;case s.LOAD_TYPE.VIDEO:this.type=s.TYPE.VIDEO,this._loadSourceElement("video");break;case s.LOAD_TYPE.XHR:default:rS&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t._hasFlag=function(t){return 0!=(this._flags&t)},t._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(s.STATUS_FLAGS.COMPLETE,!0),this._setFlag(s.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var i=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=s.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},t._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t._createSource=function(t,e,r){r=r||t+"/"+this._getExtension(e);t=document.createElement("source");return t.src=e,t.type=r,t},t._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var t=this.xhr;this.abort(aS(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t._xhrOnTimeout=function(){var t=this.xhr;this.abort(aS(t)+" Request timed out.")},t._xhrOnAbort=function(){var t=this.xhr;this.abort(aS(t)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var t,e,r=this.xhr,i="",n=void 0===r.status?200:r.status;if(""!==r.responseType&&"text"!==r.responseType&&void 0!==r.responseType||(i=r.responseText),0===n&&(0<i.length||r.responseType===s.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2==(n/100|0)){if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=s.TYPE.TEXT;else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=s.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT)try{window.DOMParser?(t=new DOMParser,this.data=t.parseFromString(i,"text/xml")):((e=document.createElement("div")).innerHTML=i,this.data=e),this.type=s.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=r.response||i;this.complete()}else this.abort("["+r.status+"] "+r.statusText+": "+r.responseURL)},t._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,(iS=iS||document.createElement("a")).href=t;var r=!(t=hs()(iS.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},t._determineXhrType=function(){return s._xhrTypeMap[this.extension]||s.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return s._loadTypeMap[this.extension]||s.LOAD_TYPE.XHR},t._getExtension=function(){var t,e,r=this.url;return(this.isDataUrl?(e=r.indexOf("/"),r.substring(e+1,r.indexOf(";",e))):(t=r.indexOf("?"),e=r.indexOf("#"),e=Math.min(-1<t?t:r.length,-1<e?e:r.length),(r=r.substring(0,e)).substring(r.lastIndexOf(".")+1))).toLowerCase()},t._getMimeFromXhrType=function(t){switch(t){case s.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case s.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case s.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case s.XHR_RESPONSE_TYPE.JSON:return"application/json";case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},eS(s,[{key:"isDataUrl",get:function(){return this._hasFlag(s.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(s.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(s.STATUS_FLAGS.LOADING)}}]),s}();function oS(t,e,r){(e=e&&0===e.indexOf(".")?e.substring(1):e)&&(t[e]=r)}function aS(t){return t.toString().replace("object ","")}sS.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},sS.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},sS.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},sS.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},sS._loadTypeMap={gif:sS.LOAD_TYPE.IMAGE,png:sS.LOAD_TYPE.IMAGE,bmp:sS.LOAD_TYPE.IMAGE,jpg:sS.LOAD_TYPE.IMAGE,jpeg:sS.LOAD_TYPE.IMAGE,tif:sS.LOAD_TYPE.IMAGE,tiff:sS.LOAD_TYPE.IMAGE,webp:sS.LOAD_TYPE.IMAGE,tga:sS.LOAD_TYPE.IMAGE,svg:sS.LOAD_TYPE.IMAGE,"svg+xml":sS.LOAD_TYPE.IMAGE,mp3:sS.LOAD_TYPE.AUDIO,ogg:sS.LOAD_TYPE.AUDIO,wav:sS.LOAD_TYPE.AUDIO,mp4:sS.LOAD_TYPE.VIDEO,webm:sS.LOAD_TYPE.VIDEO},sS._xhrTypeMap={xhtml:sS.XHR_RESPONSE_TYPE.DOCUMENT,html:sS.XHR_RESPONSE_TYPE.DOCUMENT,htm:sS.XHR_RESPONSE_TYPE.DOCUMENT,xml:sS.XHR_RESPONSE_TYPE.DOCUMENT,tmx:sS.XHR_RESPONSE_TYPE.DOCUMENT,svg:sS.XHR_RESPONSE_TYPE.DOCUMENT,tsx:sS.XHR_RESPONSE_TYPE.DOCUMENT,gif:sS.XHR_RESPONSE_TYPE.BLOB,png:sS.XHR_RESPONSE_TYPE.BLOB,bmp:sS.XHR_RESPONSE_TYPE.BLOB,jpg:sS.XHR_RESPONSE_TYPE.BLOB,jpeg:sS.XHR_RESPONSE_TYPE.BLOB,tif:sS.XHR_RESPONSE_TYPE.BLOB,tiff:sS.XHR_RESPONSE_TYPE.BLOB,webp:sS.XHR_RESPONSE_TYPE.BLOB,tga:sS.XHR_RESPONSE_TYPE.BLOB,json:sS.XHR_RESPONSE_TYPE.JSON,text:sS.XHR_RESPONSE_TYPE.TEXT,txt:sS.XHR_RESPONSE_TYPE.TEXT,ttf:sS.XHR_RESPONSE_TYPE.BUFFER,otf:sS.XHR_RESPONSE_TYPE.BUFFER},sS.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var hS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var uS=window.URL||window.webkitURL;var HT={caching:function(t,e){var r=this;$1[t.url]?(t.data=$1[t.url],t.complete()):t.onComplete.once(function(){return $1[r.url]=r.data}),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===sS.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=uS.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=sS.TYPE.IMAGE,void(t.data.onload=function(){uS.revokeObjectURL(r),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],n=[0,0,0,0],s=0;s<i.length;++s)r<t.length?i[s]=255&t.charCodeAt(r++):i[s]=0;switch(n[0]=i[0]>>2,n[1]=(3&i[0])<<4|i[1]>>4,n[2]=(15&i[1])<<2|i[2]>>6,n[3]=63&i[2],r-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var o=0;o<n.length;++o)e+=hS.charAt(n[o])}return e}(t.xhr.responseText),t.type=sS.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},lS=/(#[\w-]+)?$/,cS=function(){function s(t,e){var r=this;void 0===e&&(e=10),this.baseUrl=t=void 0===t?"":t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=Q1(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new us.a,this.onError=new us.a,this.onLoad=new us.a,this.onStart=new us.a,this.onComplete=new us.a;for(var i=0;i<s._defaultBeforeMiddleware.length;++i)this.pre(s._defaultBeforeMiddleware[i]);for(var n=0;n<s._defaultAfterMiddleware.length;++n)this.use(s._defaultAfterMiddleware[n])}var t=s.prototype;return t.add=function(t,e,r,i){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(i=e||t.callback||t.onComplete,e=(r=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(i=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new sS(t,e,r),"function"==typeof i&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var s=r.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var h=s.progressChunk*(o.length+1)/(o.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var u=0;u<o.length;++u)o[u].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},t.pre=function(t){return this._beforeMiddleware.push(t),this},t.use=function(t){return this._afterMiddleware.push(t),this},t.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){t=this.resources[t];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},t.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(t){var e=hs()(t,{strictMode:!0});return e=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString&&(t=lS.exec(e)[0],-1!==(e=e.substr(0,e.length-t.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=t),e},t._loadResource=function(r,t){var i=this;r._dequeue=t,J1(this._beforeMiddleware,function(t,e){t.call(i,r,function(){e(r.isComplete?{}:null)})},function(){r.isComplete?i._onLoad(r):(r._onLoadBinding=r.onComplete.once(i._onLoad,i),r.load())},!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(r){var i=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),J1(this._afterMiddleware,function(t,e){t.call(i,r,e)},function(){r.onAfterMiddleware.dispatch(r),i.progress=Math.min(100,i.progress+r.progressChunk),i.onProgress.dispatch(i,r),r.error?i.onError.dispatch(r.error,i,r):i.onLoad.dispatch(i,r),i._resourcesParsing.splice(i._resourcesParsing.indexOf(r),1),i._queue.idle()&&0===i._resourcesParsing.length&&i._onComplete()},!0)},eS(s,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),s}();cS._defaultBeforeMiddleware=[],cS._defaultAfterMiddleware=[],cS.pre=function(t){return cS._defaultBeforeMiddleware.push(t),cS},cS.use=function(t){return cS._defaultAfterMiddleware.push(t),cS};var dS=function(t,e){return(dS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};fS.add=function(){sS.setExtensionLoadType("svg",sS.LOAD_TYPE.XHR),sS.setExtensionXhrType("svg",sS.XHR_RESPONSE_TYPE.TEXT)},fS.use=function(e,r){var t,i,n,s;!e.data||e.type!==sS.TYPE.IMAGE&&"svg"!==e.extension?r():(t=e.data,i=e.url,n=e.name,s=e.metadata,Nv.fromLoader(t,i,n,s).then(function(t){e.texture=t,r()}).catch(r))},xm=fS;function fS(){}var pS,_S,yS,mS=(dS(_S=xS,yS=pS=cS),_S.prototype=null===yS?Object.create(yS):(vS.prototype=yS.prototype,new vS),xS.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(xS,"shared",{get:function(){var t=xS._shared;return t||((t=new xS)._protected=!0,xS._shared=t),t},enumerable:!1,configurable:!0}),xS.registerPlugin=function(t){return xS._plugins.push(t),t.add&&t.add(),xS},xS._plugins=[],xS);function vS(){this.constructor=_S}function xS(t,e){for(var r=pS.call(this,t,e)||this,i=0;i<xS._plugins.length;++i){var n=xS._plugins[i],s=n.pre,n=n.use;s&&r.pre(s),n&&r.use(n)}return r._protected=!1,r}mS.registerPlugin({use:HT.parsing}),mS.registerPlugin(xm);gS.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?mS.shared:new mS},gS.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},HT=gS;function gS(){}function ES(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var TS=/iPhone/i,bS=/iPod/i,AS=/iPad/i,SS=/\biOS-universal(?:.+)Mac\b/i,IS=/\bAndroid(?:.+)Mobile\b/i,RS=/Android/i,OS=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,wS=/Silk/i,CS=/Windows Phone/i,PS=/\bWindows(?:.+)ARM\b/i,NS=/BlackBerry/i,MS=/BB10/i,LS=/Opera Mini/i,DS=/\b(CriOS|Chrome)(?:.+)Mobile/i,US=/Mobile(?:.+)Firefox\b/i;var FS=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(TS)&&!i(CS),ipod:i(bS),tablet:!i(TS)&&(i(AS)||ES(e))&&!i(CS),universal:i(SS),device:(i(TS)||i(bS)||i(AS)||i(SS)||ES(e))&&!i(CS)},amazon:{phone:i(OS),tablet:!i(OS)&&i(wS),device:i(OS)||i(wS)},android:{phone:!i(CS)&&i(OS)||!i(CS)&&i(IS),tablet:!i(CS)&&!i(OS)&&!i(IS)&&(i(wS)||i(RS)),device:!i(CS)&&(i(OS)||i(wS)||i(IS)||i(RS))||i(/\bokhttp\b/i)},windows:{phone:i(CS),tablet:i(PS),device:i(CS)||i(PS)},other:{blackberry:i(NS),blackberry10:i(MS),opera:i(LS),firefox:i(US),chrome:i(DS),device:i(NS)||i(MS)||i(LS)||i(US)||i(DS)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(xm={})[xm.WEBGL_LEGACY=0]="WEBGL_LEGACY",xm[xm.WEBGL=1]="WEBGL",xm[xm.WEBGL2=2]="WEBGL2",(xm={})[xm.UNKNOWN=0]="UNKNOWN",xm[xm.WEBGL=1]="WEBGL",xm[xm.CANVAS=2]="CANVAS",(xm={})[xm.COLOR=16384]="COLOR",xm[xm.DEPTH=256]="DEPTH",xm[xm.STENCIL=1024]="STENCIL",(xm={})[xm.NORMAL=0]="NORMAL",xm[xm.ADD=1]="ADD",xm[xm.MULTIPLY=2]="MULTIPLY",xm[xm.SCREEN=3]="SCREEN",xm[xm.OVERLAY=4]="OVERLAY",xm[xm.DARKEN=5]="DARKEN",xm[xm.LIGHTEN=6]="LIGHTEN",xm[xm.COLOR_DODGE=7]="COLOR_DODGE",xm[xm.COLOR_BURN=8]="COLOR_BURN",xm[xm.HARD_LIGHT=9]="HARD_LIGHT",xm[xm.SOFT_LIGHT=10]="SOFT_LIGHT",xm[xm.DIFFERENCE=11]="DIFFERENCE",xm[xm.EXCLUSION=12]="EXCLUSION",xm[xm.HUE=13]="HUE",xm[xm.SATURATION=14]="SATURATION",xm[xm.COLOR=15]="COLOR",xm[xm.LUMINOSITY=16]="LUMINOSITY",xm[xm.NORMAL_NPM=17]="NORMAL_NPM",xm[xm.ADD_NPM=18]="ADD_NPM",xm[xm.SCREEN_NPM=19]="SCREEN_NPM",xm[xm.NONE=20]="NONE",xm[xm.SRC_OVER=0]="SRC_OVER",xm[xm.SRC_IN=21]="SRC_IN",xm[xm.SRC_OUT=22]="SRC_OUT",xm[xm.SRC_ATOP=23]="SRC_ATOP",xm[xm.DST_OVER=24]="DST_OVER",xm[xm.DST_IN=25]="DST_IN",xm[xm.DST_OUT=26]="DST_OUT",xm[xm.DST_ATOP=27]="DST_ATOP",xm[xm.ERASE=26]="ERASE",xm[xm.SUBTRACT=28]="SUBTRACT",xm[xm.XOR=29]="XOR",(xm={})[xm.POINTS=0]="POINTS",xm[xm.LINES=1]="LINES",xm[xm.LINE_LOOP=2]="LINE_LOOP",xm[xm.LINE_STRIP=3]="LINE_STRIP",xm[xm.TRIANGLES=4]="TRIANGLES",xm[xm.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",xm[xm.TRIANGLE_FAN=6]="TRIANGLE_FAN",(xm={})[xm.RGBA=6408]="RGBA",xm[xm.RGB=6407]="RGB",xm[xm.ALPHA=6406]="ALPHA",xm[xm.LUMINANCE=6409]="LUMINANCE",xm[xm.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",xm[xm.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",xm[xm.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(xm={})[xm.TEXTURE_2D=3553]="TEXTURE_2D",xm[xm.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",xm[xm.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(xm={})[xm.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",xm[xm.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",xm[xm.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",xm[xm.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",xm[xm.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",xm[xm.FLOAT=5126]="FLOAT",xm[xm.HALF_FLOAT=36193]="HALF_FLOAT",(xm={})[xm.FLOAT=0]="FLOAT",xm[xm.INT=1]="INT",xm[xm.UINT=2]="UINT",(xm=IR=IR||{})[xm.NEAREST=0]="NEAREST",xm[xm.LINEAR=1]="LINEAR",(xm=mR=mR||{})[xm.CLAMP=33071]="CLAMP",xm[xm.REPEAT=10497]="REPEAT",xm[xm.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(xm=FR=FR||{})[xm.OFF=0]="OFF",xm[xm.POW2=1]="POW2",xm[xm.ON=2]="ON",xm[xm.ON_MANUAL=3]="ON_MANUAL",(xm={})[xm.NPM=0]="NPM",xm[xm.UNPACK=1]="UNPACK",xm[xm.PMA=2]="PMA",xm[xm.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",xm[xm.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",xm[xm.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(xm={})[xm.NO=0]="NO",xm[xm.YES=1]="YES",xm[xm.AUTO=2]="AUTO",xm[xm.BLEND=0]="BLEND",xm[xm.CLEAR=1]="CLEAR",xm[xm.BLIT=2]="BLIT",(xm=pR=pR||{})[xm.AUTO=0]="AUTO",xm[xm.MANUAL=1]="MANUAL",(xm=NR=NR||{}).LOW="lowp",xm.MEDIUM="mediump",xm.HIGH="highp",(xm={})[xm.NONE=0]="NONE",xm[xm.SCISSOR=1]="SCISSOR",xm[xm.STENCIL=2]="STENCIL",xm[xm.SPRITE=3]="SPRITE",(xm={})[xm.NONE=0]="NONE",xm[xm.LOW=2]="LOW",xm[xm.MEDIUM=4]="MEDIUM",xm[xm.HIGH=8]="HIGH";var BS,kS,GS,XS,HS,VS,jS,YS,zS,WS,ZS,KS,qS,JS,QS,$S,tI,eI,rI,iI,nI,sI={MIPMAP_TEXTURES:FR.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(BS=32,GS=!0,(FS.tablet||FS.phone)&&(FS.apple.device&&(kS=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(kS[1],10)<11&&(GS=!1),FS.android.device&&(kS=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(kS[1],10)<7&&(GS=!1)),GS?BS:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:pR.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:mR.CLAMP,SCALE_MODE:IR.LINEAR,PRECISION_VERTEX:NR.HIGH,PRECISION_FRAGMENT:FS.apple.device?NR.HIGH:NR.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!FS.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};(xm=XS=XS||{})[xm.WEBGL_LEGACY=0]="WEBGL_LEGACY",xm[xm.WEBGL=1]="WEBGL",xm[xm.WEBGL2=2]="WEBGL2",(FR=HS=HS||{})[FR.UNKNOWN=0]="UNKNOWN",FR[FR.WEBGL=1]="WEBGL",FR[FR.CANVAS=2]="CANVAS",(pR=VS=VS||{})[pR.COLOR=16384]="COLOR",pR[pR.DEPTH=256]="DEPTH",pR[pR.STENCIL=1024]="STENCIL",(mR=jS=jS||{})[mR.NORMAL=0]="NORMAL",mR[mR.ADD=1]="ADD",mR[mR.MULTIPLY=2]="MULTIPLY",mR[mR.SCREEN=3]="SCREEN",mR[mR.OVERLAY=4]="OVERLAY",mR[mR.DARKEN=5]="DARKEN",mR[mR.LIGHTEN=6]="LIGHTEN",mR[mR.COLOR_DODGE=7]="COLOR_DODGE",mR[mR.COLOR_BURN=8]="COLOR_BURN",mR[mR.HARD_LIGHT=9]="HARD_LIGHT",mR[mR.SOFT_LIGHT=10]="SOFT_LIGHT",mR[mR.DIFFERENCE=11]="DIFFERENCE",mR[mR.EXCLUSION=12]="EXCLUSION",mR[mR.HUE=13]="HUE",mR[mR.SATURATION=14]="SATURATION",mR[mR.COLOR=15]="COLOR",mR[mR.LUMINOSITY=16]="LUMINOSITY",mR[mR.NORMAL_NPM=17]="NORMAL_NPM",mR[mR.ADD_NPM=18]="ADD_NPM",mR[mR.SCREEN_NPM=19]="SCREEN_NPM",mR[mR.NONE=20]="NONE",mR[mR.SRC_OVER=0]="SRC_OVER",mR[mR.SRC_IN=21]="SRC_IN",mR[mR.SRC_OUT=22]="SRC_OUT",mR[mR.SRC_ATOP=23]="SRC_ATOP",mR[mR.DST_OVER=24]="DST_OVER",mR[mR.DST_IN=25]="DST_IN",mR[mR.DST_OUT=26]="DST_OUT",mR[mR.DST_ATOP=27]="DST_ATOP",mR[mR.ERASE=26]="ERASE",mR[mR.SUBTRACT=28]="SUBTRACT",mR[mR.XOR=29]="XOR",(IR=YS=YS||{})[IR.POINTS=0]="POINTS",IR[IR.LINES=1]="LINES",IR[IR.LINE_LOOP=2]="LINE_LOOP",IR[IR.LINE_STRIP=3]="LINE_STRIP",IR[IR.TRIANGLES=4]="TRIANGLES",IR[IR.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",IR[IR.TRIANGLE_FAN=6]="TRIANGLE_FAN",(NR=zS=zS||{})[NR.RGBA=6408]="RGBA",NR[NR.RGB=6407]="RGB",NR[NR.ALPHA=6406]="ALPHA",NR[NR.LUMINANCE=6409]="LUMINANCE",NR[NR.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",NR[NR.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",NR[NR.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(xm=WS=WS||{})[xm.TEXTURE_2D=3553]="TEXTURE_2D",xm[xm.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",xm[xm.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",xm[xm.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",xm[xm.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(FR=ZS=ZS||{})[FR.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",FR[FR.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",FR[FR.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",FR[FR.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",FR[FR.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",FR[FR.FLOAT=5126]="FLOAT",FR[FR.HALF_FLOAT=36193]="HALF_FLOAT",(pR=KS=KS||{})[pR.FLOAT=0]="FLOAT",pR[pR.INT=1]="INT",pR[pR.UINT=2]="UINT",(mR=qS=qS||{})[mR.NEAREST=0]="NEAREST",mR[mR.LINEAR=1]="LINEAR",(IR=JS=JS||{})[IR.CLAMP=33071]="CLAMP",IR[IR.REPEAT=10497]="REPEAT",IR[IR.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(NR=QS=QS||{})[NR.OFF=0]="OFF",NR[NR.POW2=1]="POW2",NR[NR.ON=2]="ON",NR[NR.ON_MANUAL=3]="ON_MANUAL",(xm=$S=$S||{})[xm.NPM=0]="NPM",xm[xm.UNPACK=1]="UNPACK",xm[xm.PMA=2]="PMA",xm[xm.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",xm[xm.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",xm[xm.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(FR=tI=tI||{})[FR.NO=0]="NO",FR[FR.YES=1]="YES",FR[FR.AUTO=2]="AUTO",FR[FR.BLEND=0]="BLEND",FR[FR.CLEAR=1]="CLEAR",FR[FR.BLIT=2]="BLIT",(pR=eI=eI||{})[pR.AUTO=0]="AUTO",pR[pR.MANUAL=1]="MANUAL",(mR=rI=rI||{}).LOW="lowp",mR.MEDIUM="mediump",mR.HIGH="highp",(IR=iI=iI||{})[IR.NONE=0]="NONE",IR[IR.SCISSOR=1]="SCISSOR",IR[IR.STENCIL=2]="STENCIL",IR[IR.SPRITE=3]="SPRITE",(NR=nI=nI||{})[NR.NONE=0]="NONE",NR[NR.LOW=2]="LOW",NR[NR.MEDIUM=4]="MEDIUM",NR[NR.HIGH=8]="HIGH";r(11);var oI={parse:_t.parse,format:_t.format,resolve:_t.resolve};sI.RETINA_PREFIX=/@([0-9\.]+)x/;var aI,hI=sI.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,uI="6.0.4";var lI=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[jS.NORMAL_NPM]=jS.NORMAL,t[jS.ADD_NPM]=jS.ADD,t[jS.SCREEN_NPM]=jS.SCREEN,e[jS.NORMAL]=jS.NORMAL_NPM,e[jS.ADD]=jS.ADD_NPM,e[jS.SCREEN]=jS.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function cI(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function dI(t){return!(t&t-1||!t)}function fI(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}var pI=0;var _I={};function yI(t,e,r){var i;void 0===r&&(r=3),_I[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),_I[e]=!0)}var mI={},vI=Object.create(null),xI=Object.create(null);gI.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},gI.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},gI.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(gI.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(gI.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function gI(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||sI.RESOLUTION,this.resize(t,e)}var EI;function TI(t,e){t=sI.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var bI,AI=(SI.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},SI.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},SI.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},SI.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},SI.prototype.contains=function(t){return-1!==this.items.indexOf(t)},SI.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},SI.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(SI.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(SI.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),SI);function SI(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(AI.prototype,{dispatch:{value:AI.prototype.emit},run:{value:AI.prototype.emit}}),sI.TARGET_FPMS=.06,(xm=bI=bI||{})[xm.INTERACTION=50]="INTERACTION",xm[xm.HIGH=25]="HIGH",xm[xm.NORMAL=0]="NORMAL",xm[xm.LOW=-25]="LOW",xm[xm.UTILITY=-50]="UTILITY";var II=(RI.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},RI.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},RI.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},RI.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},RI);function RI(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var OI=(wI.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},wI.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},wI.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},wI.prototype.add=function(t,e,r){return void 0===r&&(r=bI.NORMAL),this._addListener(new II(t,e,r))},wI.prototype.addOnce=function(t,e,r){return void 0===r&&(r=bI.NORMAL),this._addListener(new II(t,e,r,!0))},wI.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},wI.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(wI.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),wI.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},wI.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},wI.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},wI.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*sI.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(wI.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(wI.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,sI.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(wI.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(wI,"shared",{get:function(){var t;return wI._shared||((t=wI._shared=new wI).autoStart=!0,t._protected=!0),wI._shared},enumerable:!1,configurable:!0}),Object.defineProperty(wI,"system",{get:function(){var t;return wI._system||((t=wI._system=new wI).autoStart=!0,t._protected=!0),wI._system},enumerable:!1,configurable:!0}),wI);function wI(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new II(null,null,1/0),this.deltaMS=1/sI.TARGET_FPMS,this.elapsedMS=1/sI.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}CI.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,bI.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?OI.shared:new OI,t.autoStart&&this.start()},CI.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function CI(){}var PI,NI=2*Math.PI;Math.PI,Math.PI;(FR=PI=PI||{})[FR.POLY=0]="POLY",FR[FR.RECT=1]="RECT",FR[FR.CIRC=2]="CIRC",FR[FR.ELIP=3]="ELIP",FR[FR.RREC=4]="RREC";var MI=(Object.defineProperty(LI.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(LI.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(LI.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(LI.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(LI,"EMPTY",{get:function(){return new LI(0,0,0,0)},enumerable:!1,configurable:!0}),LI.prototype.clone=function(){return new LI(this.x,this.y,this.width,this.height)},LI.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},LI.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},LI.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},LI.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},LI.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},LI.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},LI.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},LI.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},LI);function LI(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=PI.RECT}DI.prototype.clone=function(){return new DI(this.x,this.y,this.radius)},DI.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},DI.prototype.getBounds=function(){return new MI(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},DI.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function DI(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=PI.CIRC}UI.prototype.clone=function(){return new UI(this.x,this.y,this.width,this.height)},UI.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},UI.prototype.getBounds=function(){return new MI(this.x-this.width,this.y-this.height,this.width,this.height)},UI.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function UI(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=PI.ELIP}FI.prototype.clone=function(){var t=new FI(this.points.slice());return t.closeStroke=this.closeStroke,t},FI.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},FI.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function FI(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=PI.POLY,this.closeStroke=!0}BI.prototype.clone=function(){return new BI(this.x,this.y,this.width,this.height,this.radius)},BI.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},BI.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function BI(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=PI.RREC}var kI=(GI.prototype.clone=function(){return new GI(this.x,this.y)},GI.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},GI.prototype.copyTo=function(t){return t.set(this.x,this.y),t},GI.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},GI.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},GI.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},GI);function GI(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var XI=(HI.prototype.clone=function(t,e){return new HI(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},HI.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},HI.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},HI.prototype.copyTo=function(t){return t.set(this._x,this._y),t},HI.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},HI.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(HI.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(HI.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),HI);function HI(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var VI=(jI.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},jI.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},jI.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},jI.prototype.apply=function(t,e){e=e||new kI;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},jI.prototype.applyInverse=function(t,e){e=e||new kI;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},jI.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},jI.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},jI.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},jI.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},jI.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},jI.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},jI.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(NI-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},jI.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},jI.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},jI.prototype.clone=function(){var t=new jI;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},jI.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},jI.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},jI.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(jI,"IDENTITY",{get:function(){return new jI},enumerable:!1,configurable:!0}),Object.defineProperty(jI,"TEMP_MATRIX",{get:function(){return new jI},enumerable:!1,configurable:!0}),jI);function jI(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var YI=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],zI=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],WI=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ZI=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],KI=[],qI=[],JI=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];KI.push(e);for(var r=0;r<16;r++)for(var i=JI(YI[t]*YI[r]+WI[t]*zI[r]),n=JI(zI[t]*YI[r]+ZI[t]*zI[r]),s=JI(YI[t]*WI[r]+WI[t]*ZI[r]),o=JI(zI[t]*WI[r]+ZI[t]*ZI[r]),a=0;a<16;a++)if(YI[a]===i&&zI[a]===n&&WI[a]===s&&ZI[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new VI;h.set(YI[t],zI[t],WI[t],ZI[t],0,0),qI.push(h)}}();var QI={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return YI[t]},uY:function(t){return zI[t]},vX:function(t){return WI[t]},vY:function(t){return ZI[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return KI[t][e]},sub:function(t,e){return KI[t][QI.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?QI.S:QI.N:2*Math.abs(e)<=Math.abs(t)?0<t?QI.E:QI.W:0<e?0<t?QI.SE:QI.SW:0<t?QI.NE:QI.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=qI[QI.inv(e)];e.tx=r,e.ty=i,t.append(e)}};$I.prototype.onChange=function(){this._localID++},$I.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},$I.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},$I.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},$I.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},$I.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty($I.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),$I.IDENTITY=new $I;function $I(){this.worldTransform=new VI,this.localTransform=new VI,this.position=new XI(this.onChange,this,0,0),this.scale=new XI(this.onChange,this,1,1),this.pivot=new XI(this.onChange,this,0,0),this.skew=new XI(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}sI.PREFER_ENV=FS.any?XS.WEBGL:XS.WEBGL2,sI.STRICT_TEXTURE_CACHE=!1;var tR=[];function eR(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=tR.length-1;0<=n;--n){var s=tR[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var rR=function(t,e){return(rR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function iR(t,e){function r(){this.constructor=t}rR(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var nR=(sR.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},sR.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},sR.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(sR.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),sR.prototype.update=function(){this.destroyed||this.onUpdate.emit()},sR.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(sR.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(sR.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),sR.prototype.style=function(t,e,r){return!1},sR.prototype.dispose=function(){},sR.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},sR.test=function(t,e){return!1},sR);function sR(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new AI("setRealSize"),this.onUpdate=new AI("update"),this.onError=new AI("onError")}var oR,aR=(iR(hR,oR=nR),hR.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===$S.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},hR.prototype.dispose=function(){this.data=null},hR.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},hR);function hR(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=oR.call(this,e,i)||this).data=t,r}var uR,lR={scaleMode:qS.NEAREST,format:zS.RGBA,alphaMode:$S.NPM},cR=(iR(dR,uR=pt.a),Object.defineProperty(dR.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(dR.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),dR.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},dR.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},dR.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},dR.prototype._refreshPOT=function(){this.isPowerOfTwo=dI(this.realWidth)&&dI(this.realHeight)},dR.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},dR.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},dR.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},dR.prototype.onError=function(t){this.emit("error",this,t)},dR.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xI[this.cacheId],delete vI[this.cacheId],this.cacheId=null),this.dispose(),dR.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},dR.prototype.dispose=function(){this.emit("dispose",this)},dR.prototype.castToBaseTexture=function(){return this},dR.from=function(t,e,r){void 0===r&&(r=sI.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++pI),t._pixiId),s=xI[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new dR(t,e)).cacheId=n,dR.addToCache(s,n)),s},dR.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new aR(t,{width:e,height:r}),t=t instanceof Float32Array?ZS.FLOAT:ZS.UNSIGNED_BYTE;return new dR(n,Object.assign(lR,i||{width:e,height:r,type:t}))},dR.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),xI[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),xI[e]=t)},dR.removeFromCache=function(t){if("string"==typeof t){var e=xI[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete xI[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete xI[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},dR._globalBatch=0,dR);function dR(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=uR.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof nR||((t=eR(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||sI.RESOLUTION,r.mipmap=void 0!==n?n:sI.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:sI.ANISOTROPIC_LEVEL,r.wrapMode=u||sI.WRAP_MODE,r.scaleMode=void 0!==o?o:sI.SCALE_MODE,r.format=l||zS.RGBA,r.type=c||ZS.UNSIGNED_BYTE,r.target=d||WS.TEXTURE_2D,r.alphaMode=void 0!==i?i:$S.UNPACK,r.uid=++pI,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var fR,pR=(iR(_R,fR=nR),_R.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof nR?this.addResourceAt(t[r],r):this.addResourceAt(eR(t[r],e),r))},_R.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},_R.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},_R.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");fR.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},_R.prototype.unbind=function(t){fR.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},_R.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},_R);function _R(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=fR.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new cR;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var yR,mR=(iR(vR,yR=pR),vR.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},vR.prototype.bind=function(t){yR.prototype.bind.call(this,t),t.target=WS.TEXTURE_2D_ARRAY},vR.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},vR);function vR(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=yR.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var xR,gR=(iR(ER,xR=nR),ER.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(EI=EI||document.createElement("a")).href=t;var r=oI.parse(EI.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},ER.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===$S.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},ER.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),xR.prototype.update.call(this))},ER.prototype.dispose=function(){this.source=null},ER);function ER(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=xR.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var TR,bR=(iR(AR,TR=gR),AR.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},AR);function AR(t){return TR.call(this,t)||this}var SR,IR=(iR(RR,SR=pR),RR.prototype.bind=function(t){SR.prototype.bind.call(this,t),t.target=WS.TEXTURE_CUBE_MAP},RR.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=WS.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},RR.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<RR.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},RR.test=function(t){return Array.isArray(t)&&t.length===RR.SIDES},RR.SIDES=6,RR);function RR(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==RR.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=SR.call(this,6,{width:n,height:s})||this,a=0;a<RR.SIDES;a++)r.items[a].target=WS.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var OR,wR=(iR(CR,OR=gR),CR.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},CR.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===$S.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},CR.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return OR.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(OR.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},CR.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,OR.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},CR.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},CR);function CR(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,gR.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=OR.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:sI.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var PR,NR=(iR(MR,PR=gR),MR.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},MR.prototype._loadSvg=function(){var s=this,o=new Image;gR.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++pI,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},MR.getSize=function(t){var e=MR.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},MR.prototype.dispose=function(){PR.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},MR.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},MR.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,MR);function MR(t,e){var r=this;return e=e||{},(r=PR.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var LR,xm=(iR(DR,LR=gR),DR.prototype.update=function(t){var e;this.destroyed||(e=OI.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(LR.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},DR.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},DR.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},DR.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},DR.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},DR.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(OI.shared.add(this.update,this),this._isConnectedToTicker=!0)},DR.prototype._onPlayStop=function(){this._isConnectedToTicker&&(OI.shared.remove(this.update,this),this._isConnectedToTicker=!1)},DR.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},DR.prototype.dispose=function(){this._isConnectedToTicker&&OI.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),LR.prototype.dispose.call(this)},Object.defineProperty(DR.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(OI.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(OI.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(DR.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),DR.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<DR.TYPES.indexOf(e)},DR.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],DR.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},DR);function DR(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];gR.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||DR.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=LR.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var UR,FR=(iR(BR,UR=gR),BR.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},BR);function BR(t){return UR.call(this,t)||this}tR.push(wR,FR,bR,xm,NR,aR,IR,mR);var kR={__proto__:null,Resource:nR,BaseImageResource:gR,INSTALLED:tR,autoDetectResource:eR,AbstractMultiResource:pR,ArrayResource:mR,BufferResource:aR,CanvasResource:bR,CubeResource:IR,ImageResource:wR,SVGResource:NR,VideoResource:xm,ImageBitmapResource:FR},NR=(GR.prototype.destroy=function(){this.renderer=null},GR);function GR(t){this.renderer=t}var XR,HR=(iR(VR,XR=aR),VR.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===$S.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},VR);function VR(){return null!==XR&&XR.apply(this,arguments)||this}var jR=(Object.defineProperty(YR.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),YR.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new cR(null,{scaleMode:qS.NEAREST,resolution:1,mipmap:QS.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},YR.prototype.addDepthTexture=function(t){return this.depthTexture=t||new cR(new HR(null,{width:this.width,height:this.height}),{scaleMode:qS.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:QS.OFF,format:zS.DEPTH_COMPONENT,type:ZS.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},YR.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},YR.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},YR.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},YR.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},YR.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},YR);function YR(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new AI("disposeFramebuffer"),this.multisample=nI.NONE}var zR,WR=(iR(ZR,zR=cR),ZR.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},ZR.prototype.dispose=function(){this.framebuffer.dispose(),zR.prototype.dispose.call(this)},ZR.prototype.destroy=function(){zR.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},ZR);function ZR(t){var e=this,e=zR.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=QS.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new jR(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var KR=(qR.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=QI.add(r,QI.NW),this.x0=s+i*QI.uX(r),this.y0=e+n*QI.uY(r),r=QI.add(r,2),this.x1=s+i*QI.uX(r),this.y1=e+n*QI.uY(r),r=QI.add(r,2),this.x2=s+i*QI.uX(r),this.y2=e+n*QI.uY(r),r=QI.add(r,2),this.x3=s+i*QI.uX(r),this.y3=e+n*QI.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},qR.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},qR);function qR(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var JR,QR=new KR,$R=(iR(tO,JR=pt.a),tO.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},tO.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},tO.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&vI[t.url]&&tO.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,tO.removeFromCache(this),this.textureCacheIds=null},tO.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new tO(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},tO.prototype.updateUvs=function(){this._uvs===QR&&(this._uvs=new KR),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},tO.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=sI.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++pI),t._pixiId),s=vI[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=TI(t)),(s=new tO(new cR(t,e))).baseTexture.cacheId=n,cR.addToCache(s.baseTexture,n),tO.addToCache(s,n)),s},tO.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=tO.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},tO.fromBuffer=function(t,e,r,i){return new tO(cR.fromBuffer(t,e,r,i))},tO.fromLoader=function(t,e,r,i){t=new cR(t,Object.assign({scaleMode:sI.SCALE_MODE,resolution:TI(e)},i)),i=t.resource;i instanceof wR&&(i.url=e);var n=new tO(t);return cR.addToCache(n.baseTexture,r=r||e),tO.addToCache(n,r),r!==e&&(cR.addToCache(n.baseTexture,e),tO.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},tO.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),vI[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),vI[e]=t)},tO.removeFromCache=function(t){if("string"==typeof t){var e=vI[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete vI[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)vI[t.textureCacheIds[i]]===t&&delete vI[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(tO.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(tO.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(tO.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(tO.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(tO.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),tO.prototype.castToBaseTexture=function(){return this.baseTexture},tO);function tO(t,e,r,i,n,s){var o=JR.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new MI(0,0,1,1)),t instanceof tO&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=QR,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new kI(s.x,s.y):new kI(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function eO(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}$R.EMPTY=new $R(new cR),eO($R.EMPTY),eO($R.EMPTY.baseTexture),$R.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new $R(new cR(new bR(t)))}(),eO($R.WHITE),eO($R.WHITE.baseTexture);var rO,iO=(iR(nO,rO=$R),Object.defineProperty(nO.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),nO.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},nO.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},nO.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(yI("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new nO(new WR(t))},nO);function nO(t,e){e=rO.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var sO=(oO.prototype.createTexture=function(t,e){e=new WR(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new iO(e)},oO.prototype.getOptimalTexture=function(t,e,r){var i=oO.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=cI(t)))<<16|65535&(e=cI(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},oO.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},oO.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},oO.prototype.returnFilterTexture=function(t){this.returnTexture(t)},oO.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},oO.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=oO.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},oO.SCREEN_KEY="screen",oO);function oO(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var aO=(hO.prototype.destroy=function(){this.buffer=null},hO.from=function(t,e,r,i,n){return new hO(t,e,r,i,n)},hO);function hO(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=ZS.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var uO=0,lO=(cO.prototype.update=function(t){this.data=t||this.data,this._updateID++},cO.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},cO.prototype.destroy=function(){this.dispose(),this.data=null},cO.from=function(t){return new cO(t=t instanceof Array?new Float32Array(t):t)},cO);function cO(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=uO++,this.disposeRunner=new AI("disposeBuffer")}function dO(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var fO={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var pO={5126:4,5123:2,5121:1},_O=0,yO={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},xm=(mO.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof lO||(e instanceof Array&&(e=new Float32Array(e)),e=new lO(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new aO(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},mO.prototype.getAttribute=function(t){return this.attributes[t]},mO.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},mO.prototype.addIndex=function(t){return t instanceof lO||(t instanceof Array&&(t=new Uint16Array(t)),t=new lO(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},mO.prototype.getIndex=function(){return this.indexBuffer},mO.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new lO;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*pO[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=dO(l);n[c]||(n[c]=new fO[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},mO.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},mO.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},mO.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},mO.prototype.clone=function(){for(var t=new mO,e=0;e<this.buffers.length;e++)t.buffers[e]=new lO(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new aO(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},mO.merge=function(t){for(var e=new mO,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new yO[dO(o.buffers[s].data)](i[s]),e.buffers[s]=new lO(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*pO[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},mO);function mO(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=_O++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new AI("disposeGeometry"),this.refCount=0}var vO,xO=(iR(gO,vO=xm),gO);function gO(){var t=vO.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var EO,TO=(iR(bO,EO=xm),bO.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},bO.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},bO);function bO(){var t=EO.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new lO(t.vertices),t.uvBuffer=new lO(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var AO=0,SO=(IO.prototype.update=function(){this.dirtyId++},IO.prototype.add=function(t,e,r){this.uniforms[t]=new IO(e,r)},IO.from=function(t,e){return new IO(t,e)},IO);function IO(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=AO++,this.static=!!e}var RO=(OO.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},OO);function OO(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new MI,this.destinationFrame=new MI,this.bindingSourceFrame=new MI,this.bindingDestinationFrame=new MI,this.filters=[],this.transform=null}var wO,CO=[new kI,new kI,new kI,new kI],PO=new VI,NO=(iR(MO,wO=NR),MO.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new RO,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(PO.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},MO.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,tI.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,tI.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,tI.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},MO.prototype.bindAndClear=function(t,e){void 0===e&&(e=tI.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===tI.CLEAR||e===tI.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},MO.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(YS.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(YS.TRIANGLE_STRIP))},MO.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(VI.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},MO.prototype.destroy=function(){this.texturePool.clear(!1)},MO.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},MO.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},MO.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},MO.prototype.emptyPool=function(){this.texturePool.clear(!0)},MO.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},MO.prototype.transformAABB=function(t,e){var r=CO[0],i=CO[1],n=CO[2],s=CO[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},MO.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?PO.copyFrom(n):PO.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},MO);function MO(t){var e=wO.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new sO,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new xO,e.quadUv=new TO,e.tempRect=new MI,e.activeState={},e.globalUniforms=new SO({outputFrame:new MI,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var LO=(DO.prototype.flush=function(){},DO.prototype.destroy=function(){this.renderer=null},DO.prototype.start=function(){},DO.prototype.stop=function(){this.flush()},DO.prototype.render=function(t){},DO);function DO(t){this.renderer=t}var UO,FO=(iR(BO,UO=NR),BO.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},BO.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},BO.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},BO.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},BO.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},BO);function BO(t){var e=UO.call(this,t)||this;return e.emptyRenderer=new LO(t),e.currentRenderer=e.emptyRenderer,e}var kO,GO=0,XO=(iR(HO,kO=NR),Object.defineProperty(HO.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),HO.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=GO++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},HO.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=GO++,this.renderer.runners.contextChange.emit(t)},HO.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},HO.prototype.createContext=function(t,e){var r;if(r=sI.PREFER_ENV>=XS.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},HO.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},HO.prototype.handleContextLost=function(t){t.preventDefault()},HO.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},HO.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},HO.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},HO.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},HO);function HO(t){var e=kO.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var VO,jO=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=nI.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},YO=new MI,zO=(iR(WO,VO=NR),WO.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new MI,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,sI.PREFER_ENV===XS.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},WO.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},WO.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(WO.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),WO.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=VS.COLOR|VS.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},WO.prototype.initFramebuffer=function(t){var e=this.gl,e=new jO(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},WO.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},WO.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},WO.prototype.detectSamples=function(t){var e=this.msaaSamples,r=nI.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?nI.NONE:r},WO.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new jR(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=YO).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},WO.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},WO.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},WO.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},WO.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new MI},WO);function WO(t){t=VO.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new jR(10,10),t.msaaSamples=null,t}var ZO,KO=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},qO={5126:4,5123:2,5121:1},JO=(iR(QO,ZO=NR),QO.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=sI.PREFER_ENV===XS.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},QO.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},QO.prototype.reset=function(){this.unbind()},QO.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},QO.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},QO.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},QO.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*qO[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*qO[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*qO[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new KO(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},QO.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},QO.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},QO.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},QO.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},QO.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},QO.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},QO);function QO(t){t=ZO.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var $O=(tw.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=iI.NONE,this.autoDetect=!0),this._target=null},tw.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},tw);function tw(t){void 0===t&&(t=null),this.type=iI.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function ew(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function rw(t,e,r,i){var n=ew(t,t.VERTEX_SHADER,e),s=ew(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function iw(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function nw(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return iw(2*e);case"bvec3":return iw(3*e);case"bvec4":return iw(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var sw,ow={},aw=ow;function hw(){var t,e;return(aw===ow||aw&&aw.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=sI.PREFER_ENV>=XS.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),aw=e),aw}function uw(t,e,r){if("precision"===t.substring(0,9))return r!==rI.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===rI.HIGH&&r!==rI.HIGH?rI.MEDIUM:e)+" float;\n"+t}var lw={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var cw=null,dw={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function fw(t,e){if(!cw){var r=Object.keys(dw);cw={};for(var i=0;i<r.length;++i){var n=r[i];cw[t[n]]=dw[n]}}return cw[e]}var pw=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],_w={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},yw={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var mw,vw=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function xw(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=vw.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var gw=0,Ew={},Tw=(bw.prototype.extractData=function(t,e){var r=hw();r?(e=rw(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},bw.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=fw(e,o.type),a={type:a,name:o.name,size:lw[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},bw.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=fw(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:nw(h,s.size)}}return r},Object.defineProperty(bw,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(bw,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),bw.from=function(t,e,r){var i=t+e,n=mI[i];return n||(mI[i]=n=new bw(t,e,r)),n},bw);function bw(t,e,r){void 0===r&&(r="pixi-shader"),this.id=gw++,this.vertexSrc=t||bw.defaultVertexSrc,this.fragmentSrc=e||bw.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),Ew[r]?(Ew[r]++,r+="-"+Ew[r]):Ew[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=uw(this.vertexSrc,sI.PRECISION_VERTEX,rI.HIGH),this.fragmentSrc=uw(this.fragmentSrc,sI.PRECISION_FRAGMENT,(sw||(sw=rI.MEDIUM,(r=hw())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),sw=r.precision?rI.HIGH:rI.MEDIUM)),sw))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var Aw=(Sw.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},Sw.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(Sw.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),Sw.from=function(t,e,r){return new Sw(Tw.from(t,e),r)},Sw);function Sw(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof SO?e:new SO(e):new SO({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var Iw=(Object.defineProperty(Rw.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(Rw.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(Rw.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(Rw.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(Rw.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(Rw.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(Rw.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==jS.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Rw.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),Rw.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},Rw.for2d=function(){var t=new Rw;return t.depthTest=!1,t.blend=!0,t},Rw);function Rw(){this.data=0,this.blendMode=jS.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var Ow,FR=(iR(ww,Ow=Aw),ww.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(ww.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(ww,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(ww,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),ww);function ww(t,e,r){var i=this,e=Tw.from(t||ww.defaultVertexSrc,e||ww.defaultFragmentSrc);return(i=Ow.call(this,e,r)||this).padding=0,i.resolution=sI.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new Iw,i}var Cw=new VI,Pw=(Object.defineProperty(Nw.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),Nw.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},Nw.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(Cw.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Cw));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},Nw);function Nw(t,e){this._texture=t,this.mapCoord=new VI,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var Mw,Lw=(iR(Dw,Mw=FR),Dw.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Pw(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},Dw);function Dw(t){var e=this,r=new VI,e=Mw.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var Uw,Fw=(iR(Bw,Uw=NR),Bw.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},Bw.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new $O).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case iI.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case iI.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case iI.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},Bw.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case iI.SCISSOR:this.renderer.scissor.pop();break;case iI.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case iI.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},Bw.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=iI.SPRITE:(t.type=iI.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=iI.SCISSOR)))},Bw.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new Lw(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},Bw.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},Bw);function Bw(t){t=Uw.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var kw,FR=(iR(Gw,kw=NR),Gw.prototype.getStackLength=function(){return this.maskStack.length},Gw.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},Gw.prototype._useCurrent=function(){},Gw.prototype.destroy=function(){kw.prototype.destroy.call(this),this.maskStack=null},Gw);function Gw(t){t=kw.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var Xw,Hw=(iR(Vw,Xw=FR),Vw.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},Vw.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},Vw.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},Vw.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},Vw);function Vw(t){t=Xw.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var jw,Yw=(iR(zw,jw=FR),zw.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},zw.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},zw.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},zw.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},zw.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},zw);function zw(t){t=jw.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var Ww,Zw=(iR(Kw,Ww=NR),Kw.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},Kw.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},Kw.prototype.setTransform=function(t){},Kw);function Kw(t){t=Ww.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new VI,t.transform=null,t}var qw,Jw=new MI,Qw=new MI,$w=(iR(tC,qw=NR),tC.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(Jw.width=t.frame.width,Jw.height=t.frame.height,e=Jw),r||(Qw.x=t.frame.x,Qw.y=t.frame.y,Qw.width=e.width,Qw.height=e.height,r=Qw),n=i.framebuffer):(s=o.resolution,e||(Jw.width=o.screen.width,Jw.height=o.screen.height,e=Jw),r||((r=Jw).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},tC.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},tC.prototype.resize=function(){this.bind(null)},tC.prototype.reset=function(){this.bind(null)},tC);function tC(t){var e=qw.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new MI,e.destinationFrame=new MI,e.viewportFrame=new MI,e}var eC=(rC.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},rC);function rC(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var iC,nC=0,sC={textureCount:0},oC=(iR(aC,iC=NR),aC.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof mw)return mw;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");mw=!0===t({a:"b"},"a","b")}catch(t){mw=!1}return mw}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},aC.prototype.contextChange=function(t){this.gl=t,this.reset()},aC.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(sC.textureCount=0,this.syncUniformGroup(t.uniformGroup,sC)),i},aC.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},aC.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},aC.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},aC.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<pw.length;h++)if(pw[h].test(n,o)){i.push(pw[h].code(r,o)),a=!0;break}a||(s=(1===n.size?_w:yw)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},aC.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},aC.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},aC.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=rw(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:nw(a.type,a.size)}}t=new eC(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},aC.prototype.reset=function(){this.program=null,this.shader=null},aC.prototype.destroy=function(){this.destroyed=!0},aC);function aC(t){t=iC.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=nC++,t}var hC,uC=(iR(lC,hC=NR),lC.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[jS.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.ADD]=[t.ONE,t.ONE],e[jS.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.NONE]=[0,0],e[jS.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[jS.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[jS.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[jS.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[jS.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[jS.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[jS.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[jS.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[jS.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[jS.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[jS.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},lC.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},lC.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},lC.prototype.setBlend=function(t){this.updateCheck(lC.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},lC.prototype.setOffset=function(t){this.updateCheck(lC.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},lC.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},lC.prototype.setDepthMask=function(t){this.gl.depthMask(t)},lC.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},lC.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},lC.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},lC.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},lC.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},lC.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},lC.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},lC.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},lC);function lC(t){t=hC.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=jS.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new Iw,t.defaultState.blend=!0,t}var cC,dC=(iR(fC,cC=NR),fC.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==eI.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},fC.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},fC.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},fC);function fC(t){t=cC.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=sI.GC_MAX_IDLE,t.checkCountMax=sI.GC_MAX_CHECK_COUNT,t.mode=sI.GC_MODE,t}var pC,_C=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},yC=(iR(mC,pC=NR),mC.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new _C(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new _C(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},mC.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},mC.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},mC.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},mC.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==KS.FLOAT&&this.renderer.texture.unbind(s)}},mC.prototype.initTexture=function(t){var e=new _C(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},mC.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===ZS.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},mC.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==KS.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},mC.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&function(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}(this.managedTextures,t,1))},mC.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==QS.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=JS.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},mC.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==QS.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===qS.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===qS.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===qS.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===qS.LINEAR?i.LINEAR:i.NEAREST)},mC);function mC(t){t=pC.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new cR,t.hasIntegerTextures=!1,t}var vC,xC={__proto__:null,FilterSystem:NO,BatchSystem:FO,ContextSystem:XO,FramebufferSystem:zO,GeometrySystem:JO,MaskSystem:Fw,ScissorSystem:Hw,StencilSystem:Yw,ProjectionSystem:Zw,RenderTextureSystem:$w,ShaderSystem:oC,StateSystem:uC,TextureGCSystem:dC,TextureSystem:yC},gC=new VI,FR=(iR(EC,vC=pt.a),EC.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(EC.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(EC.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),EC.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},EC.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=iO.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return gC.tx=-i.x,gC.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:gC,skipUpdateTransform:!!t.parent}),r},EC.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=HS.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(EC.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(EC.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),EC);function EC(t,e){void 0===t&&(t=HS.UNKNOWN);var r=vC.call(this)||this;return e=Object.assign({},sI.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new MI(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||sI.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(yI("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var TC;iR(bC,TC=FR),bC.create=function(t){if(aI=void 0===aI?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:sI.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():aI)return new bC(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},bC.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},bC.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof iO?(yI("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},bC.prototype.resize=function(t,e){TC.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},bC.prototype.reset=function(){return this.runners.reset.emit(),this},bC.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},bC.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();TC.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(bC.prototype,"extract",{get:function(){return yI("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),bC.registerPlugin=function(t,e){(bC.__plugins=bC.__plugins||{})[t]=e};function bC(t){var e,r=TC.call(this,HS.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new AI("destroy"),contextChange:new AI("contextChange"),reset:new AI("reset"),update:new AI("update"),postrender:new AI("postrender"),prerender:new AI("prerender"),resize:new AI("resize")},r.globalUniforms=new SO({projectionMatrix:new VI},!0),r.addSystem(Fw,"mask").addSystem(XO,"context").addSystem(uC,"state").addSystem(oC,"shader").addSystem(yC,"texture").addSystem(JO,"geometry").addSystem(zO,"framebuffer").addSystem(Hw,"scissor").addSystem(Yw,"stencil").addSystem(Zw,"projection").addSystem(dC,"textureGC").addSystem(NO,"filter").addSystem($w,"renderTexture").addSystem(FO,"batch"),r.initPlugins(bC.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",hI||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+uI+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+uI+" - "+e+" - http://www.pixijs.com/"),hI=!0),r.resize(r.options.width,r.options.height),r}var AC=function(){this.texArray=null,this.blend=0,this.type=YS.TRIANGLES,this.start=0,this.size=0,this.data=null},SC=(IC.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},IC);function IC(){this.elements=[],this.ids=[],this.count=0}var RC=(Object.defineProperty(OC.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(OC.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(OC.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(OC.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(OC.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),OC.prototype.view=function(t){return this[t+"View"]},OC.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},OC.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},OC);function OC(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var wC,CC=(iR(PC,wC=LO),PC.prototype.contextChange=function(){var t=this.renderer.gl;sI.PREFER_ENV===XS.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),sI.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=xw(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},PC.prototype.initFlushBuffers=function(){for(var t=PC._drawCallPool,e=PC._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new AC);for(;e.length<i;)e.push(new SC);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},PC.prototype.onPrerender=function(){this._flushId=0},PC.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},PC.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=PC._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++cR._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;cR._globalBatch=o},PC.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=PC._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=lI[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},PC.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},PC.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;sI.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},PC.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=PC._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},PC.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},PC.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),sI.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},PC.prototype.stop=function(){this.flush()},PC.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),wC.prototype.destroy.call(this)},PC.prototype.getAttributeBuffer=function(t){var e=cI(Math.ceil(t/8)),t=fI(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new RC(e*this.vertexSize*4)),t},PC.prototype.getIndexBuffer=function(t){var e=cI(Math.ceil(t/12)),r=fI(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},PC.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},PC._drawCallPool=[],PC._textureArrayPool=[],PC);function PC(t){var e=wC.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=Iw.for2d(),e.size=4*sI.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var NC=(MC.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=SO.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Tw(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new VI,default:this.defaultGroupCache[t]};return new Aw(this.programCache[t],i)},MC.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},MC);function MC(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var LC,DC=(iR(UC,LC=xm),UC);function UC(t){void 0===t&&(t=!1);var e=LC.call(this)||this;return e._buffer=new lO(null,t,!1),e._indexBuffer=new lO(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,ZS.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,ZS.FLOAT).addAttribute("aColor",e._buffer,4,!0,ZS.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,ZS.FLOAT).addIndex(e._indexBuffer),e}var FC="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",BC="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function kC(){}(kC.create=function(t){var e,t=Object.assign({vertex:FC,fragment:BC,geometryClass:DC,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return iR(o,e=CC),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new NC(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(kC,"defaultVertexSrc",{get:function(){return FC},enumerable:!1,configurable:!0}),Object.defineProperty(kC,"defaultFragmentTemplate",{get:function(){return BC},enumerable:!1,configurable:!0}),kC).create();var GC={};for(XC in kR)!function(t){Object.defineProperty(GC,t,{get:function(){return yI("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),kR[t]}})}(XC);var XC,HC={};for(XC in xC)!function(t){Object.defineProperty(HC,t,{get:function(){return yI("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),xC[t]}})}(XC);function VC(){}function jC(r,i,n,s){var o=0,a=r.length;!function t(e){e||o===a?n&&n(e):s?setTimeout(function(){i(r[o++],t)},1):i(r[o++],t)}()}function YC(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var r=0,i={_tasks:[],concurrency:t,saturated:VC,unsaturated:VC,buffer:t/4,empty:VC,drain:VC,error:VC,started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){r=0,i.drain=VC,i.started=!1,i._tasks=[]},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!i.paused&&r<i.concurrency&&i._tasks.length;){var t=i._tasks.shift();0===i._tasks.length&&i.empty(),(r+=1)===i.concurrency&&i.saturated(),e(t.data,function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}(function(t){return function(){--r,t.callback.apply(t,arguments),null!=arguments[0]&&i.error(arguments[0],t.data),r<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}(t)))}},length:function(){return i._tasks.length},running:function(){return r},idle:function(){return i._tasks.length+r===0},pause:function(){!0!==i.paused&&(i.paused=!0)},resume:function(){if(!1!==i.paused){i.paused=!1;for(var t=1;t<=i.concurrency;t++)i.process()}}};function n(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");i.started=!0,null==t&&i.idle()?setTimeout(function(){return i.drain()},1):(r={data:t,callback:"function"==typeof r?r:VC},e?i._tasks.unshift(r):i._tasks.push(r),setTimeout(function(){return i.process()},1))}return i}var zC={};function WC(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ZC(t,e,r){return e&&WC(t.prototype,e),r&&WC(t,r),t}var KC=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),qC=null;function JC(){}var QC=function(){function s(t,e,r){if("string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(s.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=s.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=JC,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new us.a,this.onProgress=new us.a,this.onComplete=new us.a,this.onAfterMiddleware=new us.a}s.setExtensionLoadType=function(t,e){$C(s._loadTypeMap,t,e)},s.setExtensionXhrType=function(t,e){$C(s._xhrTypeMap,t,e)};var t=s.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=s.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(t){var e=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(e)},1);else switch(t&&this.onComplete.once(t),this._setFlag(s.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case s.LOAD_TYPE.IMAGE:this.type=s.TYPE.IMAGE,this._loadElement("image");break;case s.LOAD_TYPE.AUDIO:this.type=s.TYPE.AUDIO,this._loadSourceElement("audio");break;case s.LOAD_TYPE.VIDEO:this.type=s.TYPE.VIDEO,this._loadSourceElement("video");break;case s.LOAD_TYPE.XHR:default:KC&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t._hasFlag=function(t){return 0!=(this._flags&t)},t._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(s.STATUS_FLAGS.COMPLETE,!0),this._setFlag(s.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var i=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=s.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},t._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t._createSource=function(t,e,r){r=r||t+"/"+this._getExtension(e);t=document.createElement("source");return t.src=e,t.type=r,t},t._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var t=this.xhr;this.abort(tP(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t._xhrOnTimeout=function(){var t=this.xhr;this.abort(tP(t)+" Request timed out.")},t._xhrOnAbort=function(){var t=this.xhr;this.abort(tP(t)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var t,e,r=this.xhr,i="",n=void 0===r.status?200:r.status;if(""!==r.responseType&&"text"!==r.responseType&&void 0!==r.responseType||(i=r.responseText),0===n&&(0<i.length||r.responseType===s.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2==(n/100|0)){if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=s.TYPE.TEXT;else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=s.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT)try{window.DOMParser?(t=new DOMParser,this.data=t.parseFromString(i,"text/xml")):((e=document.createElement("div")).innerHTML=i,this.data=e),this.type=s.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=r.response||i;this.complete()}else this.abort("["+r.status+"] "+r.statusText+": "+r.responseURL)},t._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,(qC=qC||document.createElement("a")).href=t;var r=!(t=hs()(qC.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},t._determineXhrType=function(){return s._xhrTypeMap[this.extension]||s.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return s._loadTypeMap[this.extension]||s.LOAD_TYPE.XHR},t._getExtension=function(){var t,e,r=this.url;return(this.isDataUrl?(e=r.indexOf("/"),r.substring(e+1,r.indexOf(";",e))):(t=r.indexOf("?"),e=r.indexOf("#"),e=Math.min(-1<t?t:r.length,-1<e?e:r.length),(r=r.substring(0,e)).substring(r.lastIndexOf(".")+1))).toLowerCase()},t._getMimeFromXhrType=function(t){switch(t){case s.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case s.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case s.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case s.XHR_RESPONSE_TYPE.JSON:return"application/json";case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},ZC(s,[{key:"isDataUrl",get:function(){return this._hasFlag(s.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(s.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(s.STATUS_FLAGS.LOADING)}}]),s}();function $C(t,e,r){(e=e&&0===e.indexOf(".")?e.substring(1):e)&&(t[e]=r)}function tP(t){return t.toString().replace("object ","")}QC.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},QC.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},QC.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},QC.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},QC._loadTypeMap={gif:QC.LOAD_TYPE.IMAGE,png:QC.LOAD_TYPE.IMAGE,bmp:QC.LOAD_TYPE.IMAGE,jpg:QC.LOAD_TYPE.IMAGE,jpeg:QC.LOAD_TYPE.IMAGE,tif:QC.LOAD_TYPE.IMAGE,tiff:QC.LOAD_TYPE.IMAGE,webp:QC.LOAD_TYPE.IMAGE,tga:QC.LOAD_TYPE.IMAGE,svg:QC.LOAD_TYPE.IMAGE,"svg+xml":QC.LOAD_TYPE.IMAGE,mp3:QC.LOAD_TYPE.AUDIO,ogg:QC.LOAD_TYPE.AUDIO,wav:QC.LOAD_TYPE.AUDIO,mp4:QC.LOAD_TYPE.VIDEO,webm:QC.LOAD_TYPE.VIDEO},QC._xhrTypeMap={xhtml:QC.XHR_RESPONSE_TYPE.DOCUMENT,html:QC.XHR_RESPONSE_TYPE.DOCUMENT,htm:QC.XHR_RESPONSE_TYPE.DOCUMENT,xml:QC.XHR_RESPONSE_TYPE.DOCUMENT,tmx:QC.XHR_RESPONSE_TYPE.DOCUMENT,svg:QC.XHR_RESPONSE_TYPE.DOCUMENT,tsx:QC.XHR_RESPONSE_TYPE.DOCUMENT,gif:QC.XHR_RESPONSE_TYPE.BLOB,png:QC.XHR_RESPONSE_TYPE.BLOB,bmp:QC.XHR_RESPONSE_TYPE.BLOB,jpg:QC.XHR_RESPONSE_TYPE.BLOB,jpeg:QC.XHR_RESPONSE_TYPE.BLOB,tif:QC.XHR_RESPONSE_TYPE.BLOB,tiff:QC.XHR_RESPONSE_TYPE.BLOB,webp:QC.XHR_RESPONSE_TYPE.BLOB,tga:QC.XHR_RESPONSE_TYPE.BLOB,json:QC.XHR_RESPONSE_TYPE.JSON,text:QC.XHR_RESPONSE_TYPE.TEXT,txt:QC.XHR_RESPONSE_TYPE.TEXT,ttf:QC.XHR_RESPONSE_TYPE.BUFFER,otf:QC.XHR_RESPONSE_TYPE.BUFFER},QC.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var eP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var rP=window.URL||window.webkitURL;var NR={caching:function(t,e){var r=this;zC[t.url]?(t.data=zC[t.url],t.complete()):t.onComplete.once(function(){return zC[r.url]=r.data}),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===QC.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=rP.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=QC.TYPE.IMAGE,void(t.data.onload=function(){rP.revokeObjectURL(r),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],n=[0,0,0,0],s=0;s<i.length;++s)r<t.length?i[s]=255&t.charCodeAt(r++):i[s]=0;switch(n[0]=i[0]>>2,n[1]=(3&i[0])<<4|i[1]>>4,n[2]=(15&i[1])<<2|i[2]>>6,n[3]=63&i[2],r-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var o=0;o<n.length;++o)e+=eP.charAt(n[o])}return e}(t.xhr.responseText),t.type=QC.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},iP=/(#[\w-]+)?$/,nP=function(){function s(t,e){var r=this;void 0===e&&(e=10),this.baseUrl=t=void 0===t?"":t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=YC(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new us.a,this.onError=new us.a,this.onLoad=new us.a,this.onStart=new us.a,this.onComplete=new us.a;for(var i=0;i<s._defaultBeforeMiddleware.length;++i)this.pre(s._defaultBeforeMiddleware[i]);for(var n=0;n<s._defaultAfterMiddleware.length;++n)this.use(s._defaultAfterMiddleware[n])}var t=s.prototype;return t.add=function(t,e,r,i){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(i=e||t.callback||t.onComplete,e=(r=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(i=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new QC(t,e,r),"function"==typeof i&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var s=r.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var h=s.progressChunk*(o.length+1)/(o.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var u=0;u<o.length;++u)o[u].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},t.pre=function(t){return this._beforeMiddleware.push(t),this},t.use=function(t){return this._afterMiddleware.push(t),this},t.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){t=this.resources[t];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},t.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(t){var e=hs()(t,{strictMode:!0});return e=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString&&(t=iP.exec(e)[0],-1!==(e=e.substr(0,e.length-t.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=t),e},t._loadResource=function(r,t){var i=this;r._dequeue=t,jC(this._beforeMiddleware,function(t,e){t.call(i,r,function(){e(r.isComplete?{}:null)})},function(){r.isComplete?i._onLoad(r):(r._onLoadBinding=r.onComplete.once(i._onLoad,i),r.load())},!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(r){var i=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),jC(this._afterMiddleware,function(t,e){t.call(i,r,e)},function(){r.onAfterMiddleware.dispatch(r),i.progress=Math.min(100,i.progress+r.progressChunk),i.onProgress.dispatch(i,r),r.error?i.onError.dispatch(r.error,i,r):i.onLoad.dispatch(i,r),i._resourcesParsing.splice(i._resourcesParsing.indexOf(r),1),i._queue.idle()&&0===i._resourcesParsing.length&&i._onComplete()},!0)},ZC(s,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),s}();nP._defaultBeforeMiddleware=[],nP._defaultAfterMiddleware=[],nP.pre=function(t){return nP._defaultBeforeMiddleware.push(t),nP},nP.use=function(t){return nP._defaultAfterMiddleware.push(t),nP};var sP=function(t,e){return(sP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};oP.add=function(){QC.setExtensionLoadType("svg",QC.LOAD_TYPE.XHR),QC.setExtensionXhrType("svg",QC.XHR_RESPONSE_TYPE.TEXT)},oP.use=function(e,r){var t,i,n,s;!e.data||e.type!==QC.TYPE.IMAGE&&"svg"!==e.extension?r():(t=e.data,i=e.url,n=e.name,s=e.metadata,$R.fromLoader(t,i,n,s).then(function(t){e.texture=t,r()}).catch(r))},FR=oP;function oP(){}var aP,hP,uP,lP=(sP(hP=dP,uP=aP=nP),hP.prototype=null===uP?Object.create(uP):(cP.prototype=uP.prototype,new cP),dP.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(dP,"shared",{get:function(){var t=dP._shared;return t||((t=new dP)._protected=!0,dP._shared=t),t},enumerable:!1,configurable:!0}),dP.registerPlugin=function(t){return dP._plugins.push(t),t.add&&t.add(),dP},dP._plugins=[],dP);function cP(){this.constructor=hP}function dP(t,e){for(var r=aP.call(this,t,e)||this,i=0;i<dP._plugins.length;++i){var n=dP._plugins[i],s=n.pre,n=n.use;s&&r.pre(s),n&&r.use(n)}return r._protected=!1,r}lP.registerPlugin({use:NR.parsing}),lP.registerPlugin(FR);fP.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?lP.shared:new lP},fP.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)};function fP(){}var pP=QC;(xm=NL=NL||{})[xm.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",xm[xm.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",xm[xm.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",xm[xm.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",xm[xm.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",xm[xm.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",xm[xm.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",xm[xm.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",xm[xm.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",xm[xm.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",xm[xm.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",xm[xm.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",xm[xm.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",xm[xm.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",xm[xm.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",xm[xm.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",xm[xm.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",xm[xm.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",xm[xm.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",xm[xm.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",xm[xm.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",xm[xm.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",xm[xm.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",xm[xm.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",xm[xm.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",xm[xm.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL";var _P=((NR={})[NL.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,NR[NL.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,NR[NL.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,NR[NL.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,NR[NL.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,NR[NL.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,NR[NL.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,NR[NL.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,NR[NL.COMPRESSED_R11_EAC]=.5,NR[NL.COMPRESSED_SIGNED_R11_EAC]=.5,NR[NL.COMPRESSED_RG11_EAC]=1,NR[NL.COMPRESSED_SIGNED_RG11_EAC]=1,NR[NL.COMPRESSED_RGB8_ETC2]=.5,NR[NL.COMPRESSED_RGBA8_ETC2_EAC]=1,NR[NL.COMPRESSED_SRGB8_ETC2]=.5,NR[NL.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,NR[NL.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,NR[NL.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,NR[NL.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,NR[NL.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,NR[NL.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,NR[NL.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,NR[NL.COMPRESSED_RGB_ETC1_WEBGL]=.5,NR[NL.COMPRESSED_RGB_ATC_WEBGL]=.5,NR[NL.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,NR[NL.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,NR),yP=function(t,e){return(yP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function mP(t,e){function r(){this.constructor=t}yP(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function vP(r,i){var n,s,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,(e=o?[2&e[0],o.value]:e)[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(r,a)}catch(t){e=[6,t],s=0}finally{n=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var xP,FR=(mP(gP,xP=aR),gP.prototype.onBlobLoaded=function(t){},gP.prototype.load=function(){return s=this,o=void 0,a=Promise,h=function(){var e;return vP(this,function(t){switch(t.label){case 0:return[4,fetch(this.origin)];case 1:return[4,t.sent().blob()];case 2:return[4,t.sent().arrayBuffer()];case 3:return e=t.sent(),this.data=new Uint32Array(e),this.buffer=new RC(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),[2,this]}})},new(a=a||Promise)(function(t,e){function r(t){try{n(h.next(t))}catch(t){e(t)}}function i(t){try{n(h.throw(t))}catch(t){e(t)}}function n(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(r,i)}n((h=h.apply(s,o||[])).next())});var s,o,a,h},gP);function gP(t,e){void 0===e&&(e={width:1,height:1,autoLoad:!0});var r,i=this,t="string"==typeof t?(r=t,new Uint8Array):(r=null,t);return(i=xP.call(this,t,e)||this).origin=r,i.buffer=t?new RC(t):null,i.origin&&!1!==e.autoLoad&&i.load(),t&&t.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}var EP,TP=(mP(bP,EP=FR),bP.prototype.upload=function(t,e,r){var i=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var n=0,s=this.levels;n<s;n++){var o=this._levelBuffers[n],a=o.levelID,h=o.levelWidth,u=o.levelHeight,o=o.levelBuffer;i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,h,u,0,o)}return!0},bP.prototype.onBlobLoaded=function(){this._levelBuffers=bP._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},bP._formatToExtension=function(t){if(33776<=t&&t<=33779)return"s3tc";if(37488<=t&&t<=37497)return"etc";if(35840<=t&&t<=35843)return"pvrtc";if(36196<=t)return"etc1";if(35986<=t&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},bP._createLevelBuffers=function(t,e,r,i,n,s,o){for(var a=new Array(r),h=t.byteOffset,u=s,l=o,c=u+i-1&~(i-1),d=l+n-1&~(n-1),f=c*d*_P[e],p=0;p<r;p++)a[p]={levelID:p,levelWidth:1<r?u:c,levelHeight:1<r?l:d,levelBuffer:new Uint8Array(t.buffer,h,f)},h+=f,f=(c=(u=u>>1||1)+i-1&~(i-1))*(d=(l=l>>1||1)+n-1&~(n-1))*_P[e];return a},bP);function bP(t,e){var r=EP.call(this,t,e)||this;return r.format=e.format,r.levels=e.levels||1,r._width=e.width,r._height=e.height,r._extension=bP._formatToExtension(r.format),(e.levelBuffers||r.buffer)&&(r._levelBuffers=e.levelBuffers||bP._createLevelBuffers(t instanceof Uint8Array?t:r.buffer.uint8View,r.format,r.levels,4,4,r.width,r.height)),r}AP.use=function(r,i){var t=r.data;if(r.type===pP.TYPE.JSON&&t&&t.cacheID&&t.textures){for(var e,n,s=t.textures,o=void 0,a=void 0,h=0,u=s.length;h<u;h++){var l=s[h],c=l.src,l=l.format;if(l||(a=c),AP.textureFormats[l]){o=c;break}}(o=o||a)?o!==r.url?(e={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},n=oI.resolve(r.url.replace(this.baseUrl,""),o),t=t.cacheID,this.add(t,n,e,function(t){var e;t.error?i(t.error):(e=t.texture,t=t.textures,Object.assign(r,{texture:void 0===e?null:e,textures:void 0===t?{}:t}),i())})):i(new Error("URL of compressed texture cannot be the same as the manifest's URL")):i(new Error("Cannot load compressed-textures in "+r.url+", make sure you provide a fallback"))}else i()},AP.add=function(){var t=document.createElement("canvas").getContext("webgl");if(t){var e,r={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};for(e in AP.textureExtensions=r,AP.textureFormats={},r){var i=r[e];i&&Object.assign(AP.textureFormats,Object.getPrototypeOf(i))}}else console.error("WebGL not available for compressed textures. Silently failing.")},xm=AP;function AP(){}function SP(n,t,e){var s={textures:{},texture:null};return t&&t.map(function(t){return new $R(new cR(t,Object.assign({mipmap:QS.OFF,alphaMode:$S.NO_PREMULTIPLIED_ALPHA},e)))}).forEach(function(t,e){var r=t.baseTexture,i=n+"-"+(e+1);cR.addToCache(r,i),$R.addToCache(t,i),0===e&&(cR.addToCache(r,n),$R.addToCache(t,n),s.texture=t),s.textures[i]=t}),s}pP.setExtensionXhrType("dds",pP.XHR_RESPONSE_TYPE.BUFFER);var IP,RP=3,OP=4,wP=7,CP=19,PP=2,NP=0,MP=1,LP=2,DP=3;(NR=vN=vN||{})[NR.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",NR[NR.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",NR[NR.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",NR[NR.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",NR[NR.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",NR[NR.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",NR[NR.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",NR[NR.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",NR[NR.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",NR[NR.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",NR[NR.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",NR[NR.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",NR[NR.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",NR[NR.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",NR[NR.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",NR[NR.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",NR[NR.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",NR[NR.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",NR[NR.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",NR[NR.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",NR[NR.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",NR[NR.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",NR[NR.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",NR[NR.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",NR[NR.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",NR[NR.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",NR[NR.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",NR[NR.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",NR[NR.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",NR[NR.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",NR[NR.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",NR[NR.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",NR[NR.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",NR[NR.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",NR[NR.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",NR[NR.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",NR[NR.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",NR[NR.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",NR[NR.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",NR[NR.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",NR[NR.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",NR[NR.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",NR[NR.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",NR[NR.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",NR[NR.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",NR[NR.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",NR[NR.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",NR[NR.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",NR[NR.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",NR[NR.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",NR[NR.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",NR[NR.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",NR[NR.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",NR[NR.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",NR[NR.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",NR[NR.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",NR[NR.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",NR[NR.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",NR[NR.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",NR[NR.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",NR[NR.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",NR[NR.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",NR[NR.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",NR[NR.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",NR[NR.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",NR[NR.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",NR[NR.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",NR[NR.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",NR[NR.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",NR[NR.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",NR[NR.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",NR[NR.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",NR[NR.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",NR[NR.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",NR[NR.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",NR[NR.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",NR[NR.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",NR[NR.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",NR[NR.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",NR[NR.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",NR[NR.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",NR[NR.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",NR[NR.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",NR[NR.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",NR[NR.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",NR[NR.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",NR[NR.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",NR[NR.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",NR[NR.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",NR[NR.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",NR[NR.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",NR[NR.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",NR[NR.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",NR[NR.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",NR[NR.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",NR[NR.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",NR[NR.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",NR[NR.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",NR[NR.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",NR[NR.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",NR[NR.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",NR[NR.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",NR[NR.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",NR[NR.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",NR[NR.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",NR[NR.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",NR[NR.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",NR[NR.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",NR[NR.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",NR[NR.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",NR[NR.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",NR[NR.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",NR[NR.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",NR[NR.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",NR[NR.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",NR[NR.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",NR[NR.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",NR[NR.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",NR[NR.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",NR[NR.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",NR[NR.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",NR[NR.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",(FR=IP=IP||{})[FR.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",FR[FR.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",FR[FR.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D";var UP=((NR={})[827611204]=NL.COMPRESSED_RGBA_S3TC_DXT1_EXT,NR[861165636]=NL.COMPRESSED_RGBA_S3TC_DXT3_EXT,NR[894720068]=NL.COMPRESSED_RGBA_S3TC_DXT5_EXT,NR),FP=((FR={})[vN.DXGI_FORMAT_BC1_TYPELESS]=NL.COMPRESSED_RGBA_S3TC_DXT1_EXT,FR[vN.DXGI_FORMAT_BC1_UNORM]=NL.COMPRESSED_RGBA_S3TC_DXT1_EXT,FR[vN.DXGI_FORMAT_BC2_TYPELESS]=NL.COMPRESSED_RGBA_S3TC_DXT3_EXT,FR[vN.DXGI_FORMAT_BC2_UNORM]=NL.COMPRESSED_RGBA_S3TC_DXT3_EXT,FR[vN.DXGI_FORMAT_BC3_TYPELESS]=NL.COMPRESSED_RGBA_S3TC_DXT5_EXT,FR[vN.DXGI_FORMAT_BC3_UNORM]=NL.COMPRESSED_RGBA_S3TC_DXT5_EXT,FR[vN.DXGI_FORMAT_BC1_UNORM_SRGB]=NL.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,FR[vN.DXGI_FORMAT_BC2_UNORM_SRGB]=NL.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,FR[vN.DXGI_FORMAT_BC3_UNORM_SRGB]=NL.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,FR),NR=(BP.use=function(t,e){if("dds"===t.extension&&t.data)try{Object.assign(t,SP(t.name||t.url,BP.parse(t.data),t.metadata))}catch(t){return void e(t)}e()},BP.parse=function(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var r=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),i=r[RP],n=r[OP],s=r[wP],o=new Uint32Array(t,CP*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),r=o[1];if(4&r){o=o[PP];if(808540228!==o){var a=UP[o],h=new Uint8Array(t,128);return[new TP(h,{format:a,width:n,height:i,levels:s})]}var o=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),h=o[NP],a=o[MP],e=o[LP],u=o[DP],l=FP[h];if(void 0===l)throw new Error("DDSLoader cannot parse texture data with DXGI format "+h);if(4===e)throw new Error("DDSLoader does not support cubemap textures");if(a===IP.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var c=new Array;if(1===u)c.push(new Uint8Array(t,148));else{for(var d=_P[l],f=0,p=n,_=i,y=0;y<s;y++)f+=Math.max(1,p+3&-4)*Math.max(1,_+3&-4)*d,p>>>=1,_>>>=1;for(var m=148,y=0;y<u;y++)c.push(new Uint8Array(t,m,f)),m+=f}return c.map(function(t){return new TP(t,{format:l,width:n,height:i,levels:s})})}if(64&r)throw new Error("DDSLoader does not support uncompressed texture data.");if(512&r)throw new Error("DDSLoader does not supported YUV uncompressed texture data.");if(131072&r)throw new Error("DDSLoader does not support single-channel (lumninance) texture data!");if(2&r)throw new Error("DDSLoader does not support single-channel (alpha) texture data!");throw new Error("DDSLoader failed to load a texture file due to an unknown reason!")},BP);function BP(){}pP.setExtensionXhrType("ktx",pP.XHR_RESPONSE_TYPE.BUFFER);var kP,GP,XP,HP,VP,jP,YP,zP,WP,ZP,KP,qP,JP,QP,$P,tN,eN,rN,iN=[171,75,84,88,32,49,49,187,13,10,26,10],nN=12,sN=16,oN=24,aN=28,hN=36,uN=40,lN=44,cN=48,dN=52,fN=56,pN=60,_N=((vN={})[ZS.UNSIGNED_BYTE]=1,vN[ZS.UNSIGNED_SHORT]=2,vN[ZS.FLOAT]=4,vN[ZS.HALF_FLOAT]=8,vN),yN=((NL={})[zS.RGBA]=4,NL[zS.RGB]=3,NL[zS.LUMINANCE]=1,NL[zS.LUMINANCE_ALPHA]=2,NL[zS.ALPHA]=1,NL),mN=((FR={})[ZS.UNSIGNED_SHORT_4_4_4_4]=2,FR[ZS.UNSIGNED_SHORT_5_5_5_1]=2,FR[ZS.UNSIGNED_SHORT_5_6_5]=2,FR),vN=(xN.use=function(t,e){if("ktx"===t.extension&&t.data)try{var r=t.name||t.url;Object.assign(t,SP(r,xN.parse(r,t.data),t.metadata))}catch(t){return void e(t)}e()},xN.parse=function(t,e){var r=new DataView(e);if(!xN.validate(t,r))return null;var i=67305985===r.getUint32(nN,!0),n=r.getUint32(sN,i),s=r.getUint32(oN,i),o=r.getUint32(aN,i),a=r.getUint32(hN,i),h=r.getUint32(uN,i)||1,u=r.getUint32(lN,i)||1,l=r.getUint32(cN,i)||1,c=r.getUint32(dN,i),d=r.getUint32(fN,i),f=r.getUint32(pN,i);if(0===h||1!==u)throw new Error("Only 2D textures are supported");if(1!==c)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==l)throw new Error("WebGL does not support array textures");var t=a+3&-4,u=h+3&-4,p=new Array(l),c=0===n?t*u:a*h,_=0!==n?_N[n]?_N[n]*yN[s]:mN[n]:_P[o];if(void 0===_)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var y=c*_,m=a,v=h,x=t,g=u,E=64+f,T=0;T<d;T++){for(var b=r.getUint32(E,i),A=E+4,S=0;S<l;S++)(p[S]||(p[S]=new Array(d)))[T]={levelID:T,levelWidth:1<d?m:x,levelHeight:1<d?v:g,levelBuffer:new Uint8Array(e,A,y)},A+=y;E=(E+=b+4)%4!=0?E+4-E%4:E,y=(x=(m=m>>1||1)+4-1&-4)*(g=(v=v>>1||1)+4-1&-4)*_}if(0!==n)throw new Error("TODO: Uncompressed");return p.map(function(t){return new TP(null,{format:o,width:a,height:h,levels:d,levelBuffers:t})})},xN.validate=function(t,e){for(var r=0;r<iN.length;r++)if(e.getUint8(r)!==iN[r])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},xN);function xN(){}(NL=kP=kP||{})[NL.WEBGL_LEGACY=0]="WEBGL_LEGACY",NL[NL.WEBGL=1]="WEBGL",NL[NL.WEBGL2=2]="WEBGL2",(FR=GP=GP||{})[FR.UNKNOWN=0]="UNKNOWN",FR[FR.WEBGL=1]="WEBGL",FR[FR.CANVAS=2]="CANVAS",(NL=XP=XP||{})[NL.COLOR=16384]="COLOR",NL[NL.DEPTH=256]="DEPTH",NL[NL.STENCIL=1024]="STENCIL",(FR=HP=HP||{})[FR.NORMAL=0]="NORMAL",FR[FR.ADD=1]="ADD",FR[FR.MULTIPLY=2]="MULTIPLY",FR[FR.SCREEN=3]="SCREEN",FR[FR.OVERLAY=4]="OVERLAY",FR[FR.DARKEN=5]="DARKEN",FR[FR.LIGHTEN=6]="LIGHTEN",FR[FR.COLOR_DODGE=7]="COLOR_DODGE",FR[FR.COLOR_BURN=8]="COLOR_BURN",FR[FR.HARD_LIGHT=9]="HARD_LIGHT",FR[FR.SOFT_LIGHT=10]="SOFT_LIGHT",FR[FR.DIFFERENCE=11]="DIFFERENCE",FR[FR.EXCLUSION=12]="EXCLUSION",FR[FR.HUE=13]="HUE",FR[FR.SATURATION=14]="SATURATION",FR[FR.COLOR=15]="COLOR",FR[FR.LUMINOSITY=16]="LUMINOSITY",FR[FR.NORMAL_NPM=17]="NORMAL_NPM",FR[FR.ADD_NPM=18]="ADD_NPM",FR[FR.SCREEN_NPM=19]="SCREEN_NPM",FR[FR.NONE=20]="NONE",FR[FR.SRC_OVER=0]="SRC_OVER",FR[FR.SRC_IN=21]="SRC_IN",FR[FR.SRC_OUT=22]="SRC_OUT",FR[FR.SRC_ATOP=23]="SRC_ATOP",FR[FR.DST_OVER=24]="DST_OVER",FR[FR.DST_IN=25]="DST_IN",FR[FR.DST_OUT=26]="DST_OUT",FR[FR.DST_ATOP=27]="DST_ATOP",FR[FR.ERASE=26]="ERASE",FR[FR.SUBTRACT=28]="SUBTRACT",FR[FR.XOR=29]="XOR",(NL=VP=VP||{})[NL.POINTS=0]="POINTS",NL[NL.LINES=1]="LINES",NL[NL.LINE_LOOP=2]="LINE_LOOP",NL[NL.LINE_STRIP=3]="LINE_STRIP",NL[NL.TRIANGLES=4]="TRIANGLES",NL[NL.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",NL[NL.TRIANGLE_FAN=6]="TRIANGLE_FAN",(FR=jP=jP||{})[FR.RGBA=6408]="RGBA",FR[FR.RGB=6407]="RGB",FR[FR.ALPHA=6406]="ALPHA",FR[FR.LUMINANCE=6409]="LUMINANCE",FR[FR.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",FR[FR.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",FR[FR.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(NL=YP=YP||{})[NL.TEXTURE_2D=3553]="TEXTURE_2D",NL[NL.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",NL[NL.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",NL[NL.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",NL[NL.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",NL[NL.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",NL[NL.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",NL[NL.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",NL[NL.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(FR=zP=zP||{})[FR.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",FR[FR.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",FR[FR.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",FR[FR.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",FR[FR.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",FR[FR.FLOAT=5126]="FLOAT",FR[FR.HALF_FLOAT=36193]="HALF_FLOAT",(NL=WP=WP||{})[NL.FLOAT=0]="FLOAT",NL[NL.INT=1]="INT",NL[NL.UINT=2]="UINT",(FR=ZP=ZP||{})[FR.NEAREST=0]="NEAREST",FR[FR.LINEAR=1]="LINEAR",(NL=KP=KP||{})[NL.CLAMP=33071]="CLAMP",NL[NL.REPEAT=10497]="REPEAT",NL[NL.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(FR=qP=qP||{})[FR.OFF=0]="OFF",FR[FR.POW2=1]="POW2",FR[FR.ON=2]="ON",FR[FR.ON_MANUAL=3]="ON_MANUAL",(NL=JP=JP||{})[NL.NPM=0]="NPM",NL[NL.UNPACK=1]="UNPACK",NL[NL.PMA=2]="PMA",NL[NL.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",NL[NL.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",NL[NL.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(FR=QP=QP||{})[FR.NO=0]="NO",FR[FR.YES=1]="YES",FR[FR.AUTO=2]="AUTO",FR[FR.BLEND=0]="BLEND",FR[FR.CLEAR=1]="CLEAR",FR[FR.BLIT=2]="BLIT",(NL=$P=$P||{})[NL.AUTO=0]="AUTO",NL[NL.MANUAL=1]="MANUAL",(FR=tN=tN||{}).LOW="lowp",FR.MEDIUM="mediump",FR.HIGH="highp",(NL=eN=eN||{})[NL.NONE=0]="NONE",NL[NL.SCISSOR=1]="SCISSOR",NL[NL.STENCIL=2]="STENCIL",NL[NL.SPRITE=3]="SPRITE",(FR=rN=rN||{})[FR.NONE=0]="NONE",FR[FR.LOW=2]="LOW",FR[FR.MEDIUM=4]="MEDIUM",FR[FR.HIGH=8]="HIGH";function gN(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var EN=/iPhone/i,TN=/iPod/i,bN=/iPad/i,AN=/\biOS-universal(?:.+)Mac\b/i,SN=/\bAndroid(?:.+)Mobile\b/i,IN=/Android/i,RN=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ON=/Silk/i,wN=/Windows Phone/i,CN=/\bWindows(?:.+)ARM\b/i,PN=/BlackBerry/i,NN=/BB10/i,MN=/Opera Mini/i,LN=/\b(CriOS|Chrome)(?:.+)Mobile/i,DN=/Mobile(?:.+)Firefox\b/i;var UN=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(EN)&&!i(wN),ipod:i(TN),tablet:!i(EN)&&(i(bN)||gN(e))&&!i(wN),universal:i(AN),device:(i(EN)||i(TN)||i(bN)||i(AN)||gN(e))&&!i(wN)},amazon:{phone:i(RN),tablet:!i(RN)&&i(ON),device:i(RN)||i(ON)},android:{phone:!i(wN)&&i(RN)||!i(wN)&&i(SN),tablet:!i(wN)&&!i(RN)&&!i(SN)&&(i(ON)||i(IN)),device:!i(wN)&&(i(RN)||i(ON)||i(SN)||i(IN))||i(/\bokhttp\b/i)},windows:{phone:i(wN),tablet:i(CN),device:i(wN)||i(CN)},other:{blackberry:i(PN),blackberry10:i(NN),opera:i(MN),firefox:i(DN),chrome:i(LN),device:i(PN)||i(NN)||i(MN)||i(DN)||i(LN)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(NL={})[NL.WEBGL_LEGACY=0]="WEBGL_LEGACY",NL[NL.WEBGL=1]="WEBGL",NL[NL.WEBGL2=2]="WEBGL2",(FR={})[FR.UNKNOWN=0]="UNKNOWN",FR[FR.WEBGL=1]="WEBGL",FR[FR.CANVAS=2]="CANVAS",(NL={})[NL.COLOR=16384]="COLOR",NL[NL.DEPTH=256]="DEPTH",NL[NL.STENCIL=1024]="STENCIL",(FR={})[FR.NORMAL=0]="NORMAL",FR[FR.ADD=1]="ADD",FR[FR.MULTIPLY=2]="MULTIPLY",FR[FR.SCREEN=3]="SCREEN",FR[FR.OVERLAY=4]="OVERLAY",FR[FR.DARKEN=5]="DARKEN",FR[FR.LIGHTEN=6]="LIGHTEN",FR[FR.COLOR_DODGE=7]="COLOR_DODGE",FR[FR.COLOR_BURN=8]="COLOR_BURN",FR[FR.HARD_LIGHT=9]="HARD_LIGHT",FR[FR.SOFT_LIGHT=10]="SOFT_LIGHT",FR[FR.DIFFERENCE=11]="DIFFERENCE",FR[FR.EXCLUSION=12]="EXCLUSION",FR[FR.HUE=13]="HUE",FR[FR.SATURATION=14]="SATURATION",FR[FR.COLOR=15]="COLOR",FR[FR.LUMINOSITY=16]="LUMINOSITY",FR[FR.NORMAL_NPM=17]="NORMAL_NPM",FR[FR.ADD_NPM=18]="ADD_NPM",FR[FR.SCREEN_NPM=19]="SCREEN_NPM",FR[FR.NONE=20]="NONE",FR[FR.SRC_OVER=0]="SRC_OVER",FR[FR.SRC_IN=21]="SRC_IN",FR[FR.SRC_OUT=22]="SRC_OUT",FR[FR.SRC_ATOP=23]="SRC_ATOP",FR[FR.DST_OVER=24]="DST_OVER",FR[FR.DST_IN=25]="DST_IN",FR[FR.DST_OUT=26]="DST_OUT",FR[FR.DST_ATOP=27]="DST_ATOP",FR[FR.ERASE=26]="ERASE",FR[FR.SUBTRACT=28]="SUBTRACT",FR[FR.XOR=29]="XOR",(NL={})[NL.POINTS=0]="POINTS",NL[NL.LINES=1]="LINES",NL[NL.LINE_LOOP=2]="LINE_LOOP",NL[NL.LINE_STRIP=3]="LINE_STRIP",NL[NL.TRIANGLES=4]="TRIANGLES",NL[NL.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",NL[NL.TRIANGLE_FAN=6]="TRIANGLE_FAN",(FR={})[FR.RGBA=6408]="RGBA",FR[FR.RGB=6407]="RGB",FR[FR.ALPHA=6406]="ALPHA",FR[FR.LUMINANCE=6409]="LUMINANCE",FR[FR.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",FR[FR.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",FR[FR.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(NL={})[NL.TEXTURE_2D=3553]="TEXTURE_2D",NL[NL.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",NL[NL.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",NL[NL.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",NL[NL.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",NL[NL.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",NL[NL.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",NL[NL.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",NL[NL.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(FR={})[FR.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",FR[FR.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",FR[FR.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",FR[FR.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",FR[FR.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",FR[FR.FLOAT=5126]="FLOAT",FR[FR.HALF_FLOAT=36193]="HALF_FLOAT",(NL={})[NL.FLOAT=0]="FLOAT",NL[NL.INT=1]="INT",NL[NL.UINT=2]="UINT",(FR=mL=mL||{})[FR.NEAREST=0]="NEAREST",FR[FR.LINEAR=1]="LINEAR",(NL=pL=pL||{})[NL.CLAMP=33071]="CLAMP",NL[NL.REPEAT=10497]="REPEAT",NL[NL.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(FR=jM=jM||{})[FR.OFF=0]="OFF",FR[FR.POW2=1]="POW2",FR[FR.ON=2]="ON",FR[FR.ON_MANUAL=3]="ON_MANUAL",(NL={})[NL.NPM=0]="NPM",NL[NL.UNPACK=1]="UNPACK",NL[NL.PMA=2]="PMA",NL[NL.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",NL[NL.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",NL[NL.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(FR={})[FR.NO=0]="NO",FR[FR.YES=1]="YES",FR[FR.AUTO=2]="AUTO",FR[FR.BLEND=0]="BLEND",FR[FR.CLEAR=1]="CLEAR",FR[FR.BLIT=2]="BLIT",(NL=FL=FL||{})[NL.AUTO=0]="AUTO",NL[NL.MANUAL=1]="MANUAL",(FR=IL=IL||{}).LOW="lowp",FR.MEDIUM="mediump",FR.HIGH="highp",(NL={})[NL.NONE=0]="NONE",NL[NL.SCISSOR=1]="SCISSOR",NL[NL.STENCIL=2]="STENCIL",NL[NL.SPRITE=3]="SPRITE",(FR={})[FR.NONE=0]="NONE",FR[FR.LOW=2]="LOW",FR[FR.MEDIUM=4]="MEDIUM",FR[FR.HIGH=8]="HIGH";var FN,BN,kN,GN,XN={MIPMAP_TEXTURES:jM.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(FN=32,kN=!0,(UN.tablet||UN.phone)&&(UN.apple.device&&(BN=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(BN[1],10)<11&&(kN=!1),UN.android.device&&(BN=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(BN[1],10)<7&&(kN=!1)),kN?FN:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:FL.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:pL.CLAMP,SCALE_MODE:mL.LINEAR,PRECISION_VERTEX:IL.HIGH,PRECISION_FRAGMENT:UN.apple.device?IL.HIGH:IL.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!UN.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},HN=2*Math.PI,VN=180/Math.PI,jN=Math.PI/180;(NL=GN=GN||{})[NL.POLY=0]="POLY",NL[NL.RECT=1]="RECT",NL[NL.CIRC=2]="CIRC",NL[NL.ELIP=3]="ELIP",NL[NL.RREC=4]="RREC";var YN=(Object.defineProperty(zN.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(zN.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(zN.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(zN.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(zN,"EMPTY",{get:function(){return new zN(0,0,0,0)},enumerable:!1,configurable:!0}),zN.prototype.clone=function(){return new zN(this.x,this.y,this.width,this.height)},zN.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},zN.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},zN.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},zN.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},zN.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},zN.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},zN.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},zN.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},zN);function zN(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=GN.RECT}WN.prototype.clone=function(){return new WN(this.x,this.y,this.radius)},WN.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},WN.prototype.getBounds=function(){return new YN(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},WN.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function WN(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=GN.CIRC}ZN.prototype.clone=function(){return new ZN(this.x,this.y,this.width,this.height)},ZN.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},ZN.prototype.getBounds=function(){return new YN(this.x-this.width,this.y-this.height,this.width,this.height)},ZN.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function ZN(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=GN.ELIP}KN.prototype.clone=function(){var t=new KN(this.points.slice());return t.closeStroke=this.closeStroke,t},KN.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},KN.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function KN(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=GN.POLY,this.closeStroke=!0}qN.prototype.clone=function(){return new qN(this.x,this.y,this.width,this.height,this.radius)},qN.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},qN.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function qN(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=GN.RREC}var JN=(QN.prototype.clone=function(){return new QN(this.x,this.y)},QN.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},QN.prototype.copyTo=function(t){return t.set(this.x,this.y),t},QN.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},QN.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},QN.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},QN);function QN(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var $N=(tM.prototype.clone=function(t,e){return new tM(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},tM.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},tM.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},tM.prototype.copyTo=function(t){return t.set(this._x,this._y),t},tM.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},tM.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(tM.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(tM.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),tM);function tM(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var eM=(rM.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},rM.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},rM.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},rM.prototype.apply=function(t,e){e=e||new JN;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},rM.prototype.applyInverse=function(t,e){e=e||new JN;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},rM.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},rM.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},rM.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},rM.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},rM.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},rM.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},rM.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(HN-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},rM.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},rM.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},rM.prototype.clone=function(){var t=new rM;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},rM.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},rM.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},rM.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(rM,"IDENTITY",{get:function(){return new rM},enumerable:!1,configurable:!0}),Object.defineProperty(rM,"TEMP_MATRIX",{get:function(){return new rM},enumerable:!1,configurable:!0}),rM);function rM(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var iM=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],nM=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],sM=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],oM=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],aM=[],hM=[],uM=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];aM.push(e);for(var r=0;r<16;r++)for(var i=uM(iM[t]*iM[r]+sM[t]*nM[r]),n=uM(nM[t]*iM[r]+oM[t]*nM[r]),s=uM(iM[t]*sM[r]+sM[t]*oM[r]),o=uM(nM[t]*sM[r]+oM[t]*oM[r]),a=0;a<16;a++)if(iM[a]===i&&nM[a]===n&&sM[a]===s&&oM[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new eM;h.set(iM[t],nM[t],sM[t],oM[t],0,0),hM.push(h)}}();var lM={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return iM[t]},uY:function(t){return nM[t]},vX:function(t){return sM[t]},vY:function(t){return oM[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return aM[t][e]},sub:function(t,e){return aM[t][lM.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?lM.S:lM.N:2*Math.abs(e)<=Math.abs(t)?0<t?lM.E:lM.W:0<e?0<t?lM.SE:lM.SW:0<t?lM.NE:lM.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=hM[lM.inv(e)];e.tx=r,e.ty=i,t.append(e)}},cM=(dM.prototype.onChange=function(){this._localID++},dM.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},dM.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},dM.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},dM.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},dM.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(dM.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),dM.IDENTITY=new dM,dM);function dM(){this.worldTransform=new eM,this.localTransform=new eM,this.position=new $N(this.onChange,this,0,0),this.scale=new $N(this.onChange,this,1,1),this.pivot=new $N(this.onChange,this,0,0),this.skew=new $N(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}r(12);var fM={parse:_t.parse,format:_t.format,resolve:_t.resolve};XN.RETINA_PREFIX=/@([0-9\.]+)x/;var pM,_M=XN.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,yM="6.0.4";function mM(t,e){return(e=void 0===e?[]:e)[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}var vM=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[HP.NORMAL_NPM]=HP.NORMAL,t[HP.ADD_NPM]=HP.ADD,t[HP.SCREEN_NPM]=HP.SCREEN,e[HP.NORMAL]=HP.NORMAL_NPM,e[HP.ADD]=HP.ADD_NPM,e[HP.SCREEN]=HP.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();function xM(t,e){return 1===e?(255*e<<24)+t:0===e?0:(255*e<<24)+(((t>>16&255)*e+.5|0)<<16)+(((t>>8&255)*e+.5|0)<<8)+((255&t)*e+.5|0)}Float32Array,Uint32Array,Int32Array,Uint8Array;function gM(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function EM(t){return!(t&t-1||!t)}function TM(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}function bM(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}var AM=0;var SM={};function IM(t,e,r){var i;void 0===r&&(r=3),SM[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),SM[e]=!0)}var RM={},OM=Object.create(null),wM=Object.create(null);CM.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},CM.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},CM.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(CM.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(CM.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function CM(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||XN.RESOLUTION,this.resize(t,e)}var PM;function NM(t,e){t=XN.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}XN.SORTABLE_CHILDREN=!1;var MM=(LM.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},LM.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},LM.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?YN.EMPTY:((t=t||new YN(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},LM.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},LM.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,t=t.ty,o=r*e.x+n*e.y+o,t=i*e.x+s*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},LM.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},LM.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},LM.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},LM.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},LM.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},LM.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},LM.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},LM.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},LM.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},LM.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},LM.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},LM.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},LM);function LM(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var DM=function(t,e){return(DM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function UM(t,e){function r(){this.constructor=t}DM(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var FM,FR=(UM(BM,FM=pt.a),BM.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(BM.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},BM.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},BM.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},BM.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new YN),e=this._boundsRect),this._bounds.getRectangle(e)},BM.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new YN),t=this._localBoundsRect),this._localBounds||(this._localBounds=new MM);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},BM.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},BM.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},BM.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},BM.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},BM.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(BM.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new GM),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),BM.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},BM.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(BM.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(BM.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(BM.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(BM.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(BM.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(BM.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(BM.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(BM.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(BM.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(BM.prototype,"angle",{get:function(){return this.transform.rotation*VN},set:function(t){this.transform.rotation=t*jN},enumerable:!1,configurable:!0}),Object.defineProperty(BM.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BM.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(BM.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),BM);function BM(){var t=FM.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new cM,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new MM,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var kM,GM=(UM(XM,kM=FR),XM);function XM(){var t=null!==kM&&kM.apply(this,arguments)||this;return t.sortDirty=null,t}function HM(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}FR.prototype.displayObjectUpdateTransform=FR.prototype.updateTransform;var VM,jM=(UM(YM,VM=FR),YM.prototype.onChildrenChange=function(t){},YM.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},YM.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},YM.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},YM.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},YM.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);bM(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},YM.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},YM.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,bM(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},YM.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,bM(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},YM.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},YM.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(HM),this.sortDirty=!1},YM.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},YM.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},YM.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=VM.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},YM.prototype._calculateBounds=function(){},YM.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},YM.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},YM.prototype._render=function(t){},YM.prototype.destroy=function(t){VM.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(YM.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(YM.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),YM);function YM(){var t=VM.call(this)||this;return t.children=[],t.sortableChildren=XN.SORTABLE_CHILDREN,t.sortDirty=!1,t}jM.prototype.containerUpdateTransform=jM.prototype.updateTransform;var zM,WM=(ZM.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},ZM.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},ZM.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},ZM.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},ZM.prototype.contains=function(t){return-1!==this.items.indexOf(t)},ZM.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},ZM.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(ZM.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(ZM.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),ZM);function ZM(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(WM.prototype,{dispatch:{value:WM.prototype.emit},run:{value:WM.prototype.emit}}),XN.TARGET_FPMS=.06,(FL=zM=zM||{})[FL.INTERACTION=50]="INTERACTION",FL[FL.HIGH=25]="HIGH",FL[FL.NORMAL=0]="NORMAL",FL[FL.LOW=-25]="LOW",FL[FL.UTILITY=-50]="UTILITY";var KM=(qM.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},qM.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},qM.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},qM.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},qM);function qM(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var JM=(QM.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},QM.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},QM.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},QM.prototype.add=function(t,e,r){return void 0===r&&(r=zM.NORMAL),this._addListener(new KM(t,e,r))},QM.prototype.addOnce=function(t,e,r){return void 0===r&&(r=zM.NORMAL),this._addListener(new KM(t,e,r,!0))},QM.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},QM.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(QM.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),QM.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},QM.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},QM.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},QM.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*XN.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(QM.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(QM.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,XN.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(QM.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(QM,"shared",{get:function(){var t;return QM._shared||((t=QM._shared=new QM).autoStart=!0,t._protected=!0),QM._shared},enumerable:!1,configurable:!0}),Object.defineProperty(QM,"system",{get:function(){var t;return QM._system||((t=QM._system=new QM).autoStart=!0,t._protected=!0),QM._system},enumerable:!1,configurable:!0}),QM);function QM(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new KM(null,null,1/0),this.deltaMS=1/XN.TARGET_FPMS,this.elapsedMS=1/XN.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}$M.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,zM.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?JM.shared:new JM,t.autoStart&&this.start()},$M.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function $M(){}XN.PREFER_ENV=UN.any?kP.WEBGL:kP.WEBGL2,XN.STRICT_TEXTURE_CACHE=!1;var tL=[];function eL(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=tL.length-1;0<=n;--n){var s=tL[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var rL=function(t,e){return(rL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function iL(t,e){function r(){this.constructor=t}rL(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var nL=(sL.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},sL.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},sL.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(sL.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),sL.prototype.update=function(){this.destroyed||this.onUpdate.emit()},sL.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(sL.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(sL.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),sL.prototype.style=function(t,e,r){return!1},sL.prototype.dispose=function(){},sL.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},sL.test=function(t,e){return!1},sL);function sL(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new WM("setRealSize"),this.onUpdate=new WM("update"),this.onError=new WM("onError")}var oL,aL=(iL(hL,oL=nL),hL.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===JP.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},hL.prototype.dispose=function(){this.data=null},hL.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},hL);function hL(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=oL.call(this,e,i)||this).data=t,r}var uL,lL={scaleMode:ZP.NEAREST,format:jP.RGBA,alphaMode:JP.NPM},cL=(iL(dL,uL=pt.a),Object.defineProperty(dL.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(dL.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),dL.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},dL.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},dL.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},dL.prototype._refreshPOT=function(){this.isPowerOfTwo=EM(this.realWidth)&&EM(this.realHeight)},dL.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},dL.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},dL.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},dL.prototype.onError=function(t){this.emit("error",this,t)},dL.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete wM[this.cacheId],delete OM[this.cacheId],this.cacheId=null),this.dispose(),dL.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},dL.prototype.dispose=function(){this.emit("dispose",this)},dL.prototype.castToBaseTexture=function(){return this},dL.from=function(t,e,r){void 0===r&&(r=XN.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++AM),t._pixiId),s=wM[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new dL(t,e)).cacheId=n,dL.addToCache(s,n)),s},dL.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new aL(t,{width:e,height:r}),t=t instanceof Float32Array?zP.FLOAT:zP.UNSIGNED_BYTE;return new dL(n,Object.assign(lL,i||{width:e,height:r,type:t}))},dL.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),wM[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),wM[e]=t)},dL.removeFromCache=function(t){if("string"==typeof t){var e=wM[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete wM[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete wM[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},dL._globalBatch=0,dL);function dL(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=uL.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof nL||((t=eL(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||XN.RESOLUTION,r.mipmap=void 0!==n?n:XN.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:XN.ANISOTROPIC_LEVEL,r.wrapMode=u||XN.WRAP_MODE,r.scaleMode=void 0!==o?o:XN.SCALE_MODE,r.format=l||jP.RGBA,r.type=c||zP.UNSIGNED_BYTE,r.target=d||YP.TEXTURE_2D,r.alphaMode=void 0!==i?i:JP.UNPACK,r.uid=++AM,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var fL,pL=(iL(_L,fL=nL),_L.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof nL?this.addResourceAt(t[r],r):this.addResourceAt(eL(t[r],e),r))},_L.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},_L.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},_L.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");fL.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},_L.prototype.unbind=function(t){fL.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},_L.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},_L);function _L(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=fL.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new cL;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var yL,mL=(iL(vL,yL=pL),vL.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},vL.prototype.bind=function(t){yL.prototype.bind.call(this,t),t.target=YP.TEXTURE_2D_ARRAY},vL.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},vL);function vL(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=yL.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var xL,gL=(iL(EL,xL=nL),EL.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(PM=PM||document.createElement("a")).href=t;var r=fM.parse(PM.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},EL.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===JP.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},EL.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),xL.prototype.update.call(this))},EL.prototype.dispose=function(){this.source=null},EL);function EL(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=xL.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var TL,bL=(iL(AL,TL=gL),AL.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},AL);function AL(t){return TL.call(this,t)||this}var SL,IL=(iL(RL,SL=pL),RL.prototype.bind=function(t){SL.prototype.bind.call(this,t),t.target=YP.TEXTURE_CUBE_MAP},RL.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=YP.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},RL.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<RL.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},RL.test=function(t){return Array.isArray(t)&&t.length===RL.SIDES},RL.SIDES=6,RL);function RL(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==RL.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=SL.call(this,6,{width:n,height:s})||this,a=0;a<RL.SIDES;a++)r.items[a].target=YP.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var OL,wL=(iL(CL,OL=gL),CL.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},CL.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===JP.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},CL.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return OL.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(OL.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},CL.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,OL.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},CL.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},CL);function CL(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,gL.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=OL.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:XN.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var PL,NL=(iL(ML,PL=gL),ML.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},ML.prototype._loadSvg=function(){var s=this,o=new Image;gL.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++AM,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},ML.getSize=function(t){var e=ML.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},ML.prototype.dispose=function(){PL.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},ML.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},ML.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,ML);function ML(t,e){var r=this;return e=e||{},(r=PL.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var LL,FR=(iL(DL,LL=gL),DL.prototype.update=function(t){var e;this.destroyed||(e=JM.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(LL.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},DL.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},DL.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},DL.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},DL.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},DL.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(JM.shared.add(this.update,this),this._isConnectedToTicker=!0)},DL.prototype._onPlayStop=function(){this._isConnectedToTicker&&(JM.shared.remove(this.update,this),this._isConnectedToTicker=!1)},DL.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},DL.prototype.dispose=function(){this._isConnectedToTicker&&JM.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),LL.prototype.dispose.call(this)},Object.defineProperty(DL.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(JM.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(JM.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(DL.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),DL.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<DL.TYPES.indexOf(e)},DL.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],DL.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},DL);function DL(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];gL.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||DL.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=LL.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var UL,FL=(iL(BL,UL=gL),BL.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},BL);function BL(t){return UL.call(this,t)||this}tL.push(wL,FL,bL,FR,NL,aL,IL,mL);var kL={__proto__:null,Resource:nL,BaseImageResource:gL,INSTALLED:tL,autoDetectResource:eL,AbstractMultiResource:pL,ArrayResource:mL,BufferResource:aL,CanvasResource:bL,CubeResource:IL,ImageResource:wL,SVGResource:NL,VideoResource:FR,ImageBitmapResource:FL},FR=(GL.prototype.destroy=function(){this.renderer=null},GL);function GL(t){this.renderer=t}var XL,HL=(iL(VL,XL=aL),VL.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===JP.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},VL);function VL(){return null!==XL&&XL.apply(this,arguments)||this}var jL=(Object.defineProperty(YL.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),YL.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new cL(null,{scaleMode:ZP.NEAREST,resolution:1,mipmap:qP.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},YL.prototype.addDepthTexture=function(t){return this.depthTexture=t||new cL(new HL(null,{width:this.width,height:this.height}),{scaleMode:ZP.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:qP.OFF,format:jP.DEPTH_COMPONENT,type:zP.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},YL.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},YL.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},YL.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},YL.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},YL.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},YL);function YL(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new WM("disposeFramebuffer"),this.multisample=rN.NONE}var zL,WL=(iL(ZL,zL=cL),ZL.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},ZL.prototype.dispose=function(){this.framebuffer.dispose(),zL.prototype.dispose.call(this)},ZL.prototype.destroy=function(){zL.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},ZL);function ZL(t){var e=this,e=zL.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=qP.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new jL(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var KL=(qL.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=lM.add(r,lM.NW),this.x0=s+i*lM.uX(r),this.y0=e+n*lM.uY(r),r=lM.add(r,2),this.x1=s+i*lM.uX(r),this.y1=e+n*lM.uY(r),r=lM.add(r,2),this.x2=s+i*lM.uX(r),this.y2=e+n*lM.uY(r),r=lM.add(r,2),this.x3=s+i*lM.uX(r),this.y3=e+n*lM.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},qL.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},qL);function qL(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var JL,QL=new KL,$L=(iL(tD,JL=pt.a),tD.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},tD.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},tD.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&OM[t.url]&&tD.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,tD.removeFromCache(this),this.textureCacheIds=null},tD.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new tD(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},tD.prototype.updateUvs=function(){this._uvs===QL&&(this._uvs=new KL),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},tD.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=XN.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++AM),t._pixiId),s=OM[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=NM(t)),(s=new tD(new cL(t,e))).baseTexture.cacheId=n,cL.addToCache(s.baseTexture,n),tD.addToCache(s,n)),s},tD.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=tD.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},tD.fromBuffer=function(t,e,r,i){return new tD(cL.fromBuffer(t,e,r,i))},tD.fromLoader=function(t,e,r,i){t=new cL(t,Object.assign({scaleMode:XN.SCALE_MODE,resolution:NM(e)},i)),i=t.resource;i instanceof wL&&(i.url=e);var n=new tD(t);return cL.addToCache(n.baseTexture,r=r||e),tD.addToCache(n,r),r!==e&&(cL.addToCache(n.baseTexture,e),tD.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},tD.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),OM[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),OM[e]=t)},tD.removeFromCache=function(t){if("string"==typeof t){var e=OM[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete OM[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)OM[t.textureCacheIds[i]]===t&&delete OM[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(tD.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(tD.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(tD.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(tD.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(tD.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),tD.prototype.castToBaseTexture=function(){return this.baseTexture},tD);function tD(t,e,r,i,n,s){var o=JL.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new YN(0,0,1,1)),t instanceof tD&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=QL,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new JN(s.x,s.y):new JN(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function eD(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}$L.EMPTY=new $L(new cL),eD($L.EMPTY),eD($L.EMPTY.baseTexture),$L.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new $L(new cL(new bL(t)))}(),eD($L.WHITE),eD($L.WHITE.baseTexture);var rD,iD=(iL(nD,rD=$L),Object.defineProperty(nD.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),nD.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},nD.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},nD.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(IM("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new nD(new WL(t))},nD);function nD(t,e){e=rD.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var sD=(oD.prototype.createTexture=function(t,e){e=new WL(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new iD(e)},oD.prototype.getOptimalTexture=function(t,e,r){var i=oD.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=gM(t)))<<16|65535&(e=gM(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},oD.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},oD.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},oD.prototype.returnFilterTexture=function(t){this.returnTexture(t)},oD.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},oD.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=oD.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},oD.SCREEN_KEY="screen",oD);function oD(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var aD=(hD.prototype.destroy=function(){this.buffer=null},hD.from=function(t,e,r,i,n){return new hD(t,e,r,i,n)},hD);function hD(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=zP.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var uD=0,lD=(cD.prototype.update=function(t){this.data=t||this.data,this._updateID++},cD.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},cD.prototype.destroy=function(){this.dispose(),this.data=null},cD.from=function(t){return new cD(t=t instanceof Array?new Float32Array(t):t)},cD);function cD(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=uD++,this.disposeRunner=new WM("disposeBuffer")}function dD(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var fD={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var pD={5126:4,5123:2,5121:1},_D=0,yD={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},mD=(vD.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof lD||(e instanceof Array&&(e=new Float32Array(e)),e=new lD(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new aD(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},vD.prototype.getAttribute=function(t){return this.attributes[t]},vD.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},vD.prototype.addIndex=function(t){return t instanceof lD||(t instanceof Array&&(t=new Uint16Array(t)),t=new lD(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},vD.prototype.getIndex=function(){return this.indexBuffer},vD.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new lD;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*pD[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=dD(l);n[c]||(n[c]=new fD[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},vD.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},vD.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},vD.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},vD.prototype.clone=function(){for(var t=new vD,e=0;e<this.buffers.length;e++)t.buffers[e]=new lD(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new aD(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},vD.merge=function(t){for(var e=new vD,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new yD[dD(o.buffers[s].data)](i[s]),e.buffers[s]=new lD(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*pD[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},vD);function vD(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=_D++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new WM("disposeGeometry"),this.refCount=0}var xD,gD=(iL(ED,xD=mD),ED);function ED(){var t=xD.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var TD,bD=(iL(AD,TD=mD),AD.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},AD.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},AD);function AD(){var t=TD.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new lD(t.vertices),t.uvBuffer=new lD(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var SD=0,ID=(RD.prototype.update=function(){this.dirtyId++},RD.prototype.add=function(t,e,r){this.uniforms[t]=new RD(e,r)},RD.from=function(t,e){return new RD(t,e)},RD);function RD(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=SD++,this.static=!!e}var OD=(wD.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},wD);function wD(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new YN,this.destinationFrame=new YN,this.bindingSourceFrame=new YN,this.bindingDestinationFrame=new YN,this.filters=[],this.transform=null}var CD,PD=[new JN,new JN,new JN,new JN],ND=new eM,MD=(iL(LD,CD=FR),LD.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new OD,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(ND.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},LD.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,QP.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,QP.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,QP.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},LD.prototype.bindAndClear=function(t,e){void 0===e&&(e=QP.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===QP.CLEAR||e===QP.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},LD.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(VP.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(VP.TRIANGLE_STRIP))},LD.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(eM.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},LD.prototype.destroy=function(){this.texturePool.clear(!1)},LD.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},LD.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},LD.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},LD.prototype.emptyPool=function(){this.texturePool.clear(!0)},LD.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},LD.prototype.transformAABB=function(t,e){var r=PD[0],i=PD[1],n=PD[2],s=PD[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},LD.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?ND.copyFrom(n):ND.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},LD);function LD(t){var e=CD.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new sD,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new gD,e.quadUv=new bD,e.tempRect=new YN,e.activeState={},e.globalUniforms=new ID({outputFrame:new YN,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var DD=(UD.prototype.flush=function(){},UD.prototype.destroy=function(){this.renderer=null},UD.prototype.start=function(){},UD.prototype.stop=function(){this.flush()},UD.prototype.render=function(t){},UD);function UD(t){this.renderer=t}var FD,BD=(iL(kD,FD=FR),kD.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},kD.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},kD.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},kD.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},kD.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},kD);function kD(t){var e=FD.call(this,t)||this;return e.emptyRenderer=new DD(t),e.currentRenderer=e.emptyRenderer,e}var GD,XD=0,HD=(iL(VD,GD=FR),Object.defineProperty(VD.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),VD.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=XD++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},VD.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=XD++,this.renderer.runners.contextChange.emit(t)},VD.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},VD.prototype.createContext=function(t,e){var r;if(r=XN.PREFER_ENV>=kP.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},VD.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},VD.prototype.handleContextLost=function(t){t.preventDefault()},VD.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},VD.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},VD.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},VD.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},VD);function VD(t){var e=GD.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var jD,YD=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=rN.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},zD=new YN,WD=(iL(ZD,jD=FR),ZD.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new YN,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,XN.PREFER_ENV===kP.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},ZD.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},ZD.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(ZD.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),ZD.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=XP.COLOR|XP.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},ZD.prototype.initFramebuffer=function(t){var e=this.gl,e=new YD(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},ZD.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},ZD.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},ZD.prototype.detectSamples=function(t){var e=this.msaaSamples,r=rN.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?rN.NONE:r},ZD.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new jL(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=zD).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},ZD.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},ZD.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},ZD.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},ZD.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new YN},ZD);function ZD(t){t=jD.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new jL(10,10),t.msaaSamples=null,t}var KD,qD=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},JD={5126:4,5123:2,5121:1},QD=(iL($D,KD=FR),$D.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=XN.PREFER_ENV===kP.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},$D.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},$D.prototype.reset=function(){this.unbind()},$D.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},$D.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},$D.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},$D.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*JD[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*JD[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*JD[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new qD(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},$D.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},$D.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},$D.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},$D.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},$D.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},$D.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},$D);function $D(t){t=KD.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var tU=(eU.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=eN.NONE,this.autoDetect=!0),this._target=null},eU.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},eU);function eU(t){void 0===t&&(t=null),this.type=eN.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function rU(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function iU(t,e,r,i){var n=rU(t,t.VERTEX_SHADER,e),s=rU(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function nU(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function sU(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return nU(2*e);case"bvec3":return nU(3*e);case"bvec4":return nU(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var oU,aU={},hU=aU;function uU(){var t,e;return(hU===aU||hU&&hU.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=XN.PREFER_ENV>=kP.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),hU=e),hU}function lU(t,e,r){if("precision"===t.substring(0,9))return r!==tN.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===tN.HIGH&&r!==tN.HIGH?tN.MEDIUM:e)+" float;\n"+t}var cU={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var dU=null,fU={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function pU(t,e){if(!dU){var r=Object.keys(fU);dU={};for(var i=0;i<r.length;++i){var n=r[i];dU[t[n]]=fU[n]}}return dU[e]}var _U=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],yU={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},mU={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var vU,xU=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function gU(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=xU.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var EU=0,TU={},bU=(AU.prototype.extractData=function(t,e){var r=uU();r?(e=iU(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},AU.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=pU(e,o.type),a={type:a,name:o.name,size:cU[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},AU.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=pU(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:sU(h,s.size)}}return r},Object.defineProperty(AU,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(AU,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),AU.from=function(t,e,r){var i=t+e,n=RM[i];return n||(RM[i]=n=new AU(t,e,r)),n},AU);function AU(t,e,r){void 0===r&&(r="pixi-shader"),this.id=EU++,this.vertexSrc=t||AU.defaultVertexSrc,this.fragmentSrc=e||AU.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),TU[r]?(TU[r]++,r+="-"+TU[r]):TU[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=lU(this.vertexSrc,XN.PRECISION_VERTEX,tN.HIGH),this.fragmentSrc=lU(this.fragmentSrc,XN.PRECISION_FRAGMENT,(oU||(oU=tN.MEDIUM,(r=uU())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),oU=r.precision?tN.HIGH:tN.MEDIUM)),oU))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var SU=(IU.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},IU.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(IU.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),IU.from=function(t,e,r){return new IU(bU.from(t,e),r)},IU);function IU(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof ID?e:new ID(e):new ID({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var RU=(Object.defineProperty(OU.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(OU.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(OU.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(OU.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(OU.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(OU.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(OU.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==HP.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(OU.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),OU.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},OU.for2d=function(){var t=new OU;return t.depthTest=!1,t.blend=!0,t},OU);function OU(){this.data=0,this.blendMode=HP.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var wU,FL=(iL(CU,wU=SU),CU.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(CU.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(CU,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(CU,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),CU);function CU(t,e,r){var i=this,e=bU.from(t||CU.defaultVertexSrc,e||CU.defaultFragmentSrc);return(i=wU.call(this,e,r)||this).padding=0,i.resolution=XN.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new RU,i}var PU=new eM,NU=(Object.defineProperty(MU.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),MU.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},MU.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(PU.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(PU));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},MU);function MU(t,e){this._texture=t,this.mapCoord=new eM,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var LU,DU=(iL(UU,LU=FL),UU.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new NU(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},UU);function UU(t){var e=this,r=new eM,e=LU.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var FU,BU=(iL(kU,FU=FR),kU.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},kU.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new tU).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case eN.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case eN.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case eN.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},kU.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case eN.SCISSOR:this.renderer.scissor.pop();break;case eN.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case eN.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},kU.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=eN.SPRITE:(t.type=eN.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=eN.SCISSOR)))},kU.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new DU(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},kU.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},kU);function kU(t){t=FU.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var GU,FL=(iL(XU,GU=FR),XU.prototype.getStackLength=function(){return this.maskStack.length},XU.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},XU.prototype._useCurrent=function(){},XU.prototype.destroy=function(){GU.prototype.destroy.call(this),this.maskStack=null},XU);function XU(t){t=GU.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var HU,VU=(iL(jU,HU=FL),jU.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},jU.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},jU.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},jU.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},jU);function jU(t){t=HU.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var YU,zU=(iL(WU,YU=FL),WU.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},WU.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},WU.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},WU.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},WU.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},WU);function WU(t){t=YU.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var ZU,KU=(iL(qU,ZU=FR),qU.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},qU.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},qU.prototype.setTransform=function(t){},qU);function qU(t){t=ZU.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new eM,t.transform=null,t}var JU,QU=new YN,$U=new YN,t2=(iL(e2,JU=FR),e2.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(QU.width=t.frame.width,QU.height=t.frame.height,e=QU),r||($U.x=t.frame.x,$U.y=t.frame.y,$U.width=e.width,$U.height=e.height,r=$U),n=i.framebuffer):(s=o.resolution,e||(QU.width=o.screen.width,QU.height=o.screen.height,e=QU),r||((r=QU).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},e2.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},e2.prototype.resize=function(){this.bind(null)},e2.prototype.reset=function(){this.bind(null)},e2);function e2(t){var e=JU.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new YN,e.destinationFrame=new YN,e.viewportFrame=new YN,e}var r2=(i2.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},i2);function i2(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var n2,s2=0,o2={textureCount:0},a2=(iL(h2,n2=FR),h2.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof vU)return vU;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");vU=!0===t({a:"b"},"a","b")}catch(t){vU=!1}return vU}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},h2.prototype.contextChange=function(t){this.gl=t,this.reset()},h2.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(o2.textureCount=0,this.syncUniformGroup(t.uniformGroup,o2)),i},h2.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},h2.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},h2.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},h2.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<_U.length;h++)if(_U[h].test(n,o)){i.push(_U[h].code(r,o)),a=!0;break}a||(s=(1===n.size?yU:mU)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},h2.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},h2.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},h2.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=iU(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:sU(a.type,a.size)}}t=new r2(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},h2.prototype.reset=function(){this.program=null,this.shader=null},h2.prototype.destroy=function(){this.destroyed=!0},h2);function h2(t){t=n2.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=s2++,t}var u2,l2=(iL(c2,u2=FR),c2.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[HP.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.ADD]=[t.ONE,t.ONE],e[HP.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.NONE]=[0,0],e[HP.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[HP.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HP.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[HP.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[HP.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[HP.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[HP.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[HP.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[HP.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[HP.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[HP.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},c2.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},c2.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},c2.prototype.setBlend=function(t){this.updateCheck(c2.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},c2.prototype.setOffset=function(t){this.updateCheck(c2.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},c2.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},c2.prototype.setDepthMask=function(t){this.gl.depthMask(t)},c2.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},c2.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},c2.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},c2.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},c2.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},c2.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},c2.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},c2.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},c2);function c2(t){t=u2.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=HP.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new RU,t.defaultState.blend=!0,t}var d2,f2=(iL(p2,d2=FR),p2.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==$P.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},p2.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},p2.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},p2);function p2(t){t=d2.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=XN.GC_MAX_IDLE,t.checkCountMax=XN.GC_MAX_CHECK_COUNT,t.mode=XN.GC_MODE,t}var _2,y2=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},m2=(iL(v2,_2=FR),v2.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new y2(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new y2(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},v2.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},v2.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},v2.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},v2.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==WP.FLOAT&&this.renderer.texture.unbind(s)}},v2.prototype.initTexture=function(t){var e=new y2(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},v2.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===zP.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},v2.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==WP.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},v2.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&bM(this.managedTextures,t,1))},v2.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==qP.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=KP.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},v2.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==qP.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===ZP.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===ZP.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===ZP.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===ZP.LINEAR?i.LINEAR:i.NEAREST)},v2);function v2(t){t=_2.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new cL,t.hasIntegerTextures=!1,t}var x2,g2={__proto__:null,FilterSystem:MD,BatchSystem:BD,ContextSystem:HD,FramebufferSystem:WD,GeometrySystem:QD,MaskSystem:BU,ScissorSystem:VU,StencilSystem:zU,ProjectionSystem:KU,RenderTextureSystem:t2,ShaderSystem:a2,StateSystem:l2,TextureGCSystem:f2,TextureSystem:m2},E2=new eM,FR=(iL(T2,x2=pt.a),T2.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(T2.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(T2.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),T2.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},T2.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=iD.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return E2.tx=-i.x,E2.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:E2,skipUpdateTransform:!!t.parent}),r},T2.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=GP.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(T2.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),mM(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(T2.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),T2);function T2(t,e){void 0===t&&(t=GP.UNKNOWN);var r=x2.call(this)||this;return e=Object.assign({},XN.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new YN(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||XN.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(IM("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var b2;iL(A2,b2=FR),A2.create=function(t){if(pM=void 0===pM?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:XN.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():pM)return new A2(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},A2.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},A2.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof iD?(IM("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},A2.prototype.resize=function(t,e){b2.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},A2.prototype.reset=function(){return this.runners.reset.emit(),this},A2.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},A2.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();b2.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(A2.prototype,"extract",{get:function(){return IM("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),A2.registerPlugin=function(t,e){(A2.__plugins=A2.__plugins||{})[t]=e};function A2(t){var e,r=b2.call(this,GP.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new WM("destroy"),contextChange:new WM("contextChange"),reset:new WM("reset"),update:new WM("update"),postrender:new WM("postrender"),prerender:new WM("prerender"),resize:new WM("resize")},r.globalUniforms=new ID({projectionMatrix:new eM},!0),r.addSystem(BU,"mask").addSystem(HD,"context").addSystem(l2,"state").addSystem(a2,"shader").addSystem(m2,"texture").addSystem(QD,"geometry").addSystem(WD,"framebuffer").addSystem(VU,"scissor").addSystem(zU,"stencil").addSystem(KU,"projection").addSystem(f2,"textureGC").addSystem(MD,"filter").addSystem(t2,"renderTexture").addSystem(BD,"batch"),r.initPlugins(A2.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",_M||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+yM+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+yM+" - "+e+" - http://www.pixijs.com/"),_M=!0),r.resize(r.options.width,r.options.height),r}var S2=function(){this.texArray=null,this.blend=0,this.type=VP.TRIANGLES,this.start=0,this.size=0,this.data=null},I2=(R2.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},R2);function R2(){this.elements=[],this.ids=[],this.count=0}var O2=(Object.defineProperty(w2.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(w2.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(w2.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(w2.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(w2.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),w2.prototype.view=function(t){return this[t+"View"]},w2.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},w2.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},w2);function w2(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var C2,P2=(iL(N2,C2=DD),N2.prototype.contextChange=function(){var t=this.renderer.gl;XN.PREFER_ENV===kP.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),XN.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=gU(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},N2.prototype.initFlushBuffers=function(){for(var t=N2._drawCallPool,e=N2._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new S2);for(;e.length<i;)e.push(new I2);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},N2.prototype.onPrerender=function(){this._flushId=0},N2.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},N2.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=N2._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++cL._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;cL._globalBatch=o},N2.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=N2._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=vM[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},N2.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},N2.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;XN.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},N2.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=N2._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},N2.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},N2.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),XN.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},N2.prototype.stop=function(){this.flush()},N2.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),C2.prototype.destroy.call(this)},N2.prototype.getAttributeBuffer=function(t){var e=gM(Math.ceil(t/8)),t=TM(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new O2(e*this.vertexSize*4)),t},N2.prototype.getIndexBuffer=function(t){var e=gM(Math.ceil(t/12)),r=TM(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},N2.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s=e.uint32View,o=e.float32View,a=i/this.vertexSize,h=t.uvs,u=t.indices,l=t.vertexData,c=t._texture.baseTexture._batchLocation,e=Math.min(t.worldAlpha,1),d=e<1&&t._texture.baseTexture.alphaMode?xM(t._tintRGB,e):t._tintRGB+(255*e<<24),f=0;f<l.length;f+=2)o[i++]=l[f],o[i++]=l[f+1],o[i++]=h[f],o[i++]=h[f+1],s[i++]=d,o[i++]=c;for(f=0;f<u.length;f++)r[n++]=a+u[f]},N2._drawCallPool=[],N2._textureArrayPool=[],N2);function N2(t){var e=C2.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=RU.for2d(),e.size=4*XN.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var M2=(L2.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=ID.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new bU(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new eM,default:this.defaultGroupCache[t]};return new SU(this.programCache[t],i)},L2.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},L2);function L2(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var D2,U2=(iL(F2,D2=mD),F2);function F2(t){void 0===t&&(t=!1);var e=D2.call(this)||this;return e._buffer=new lD(null,t,!1),e._indexBuffer=new lD(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,zP.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,zP.FLOAT).addAttribute("aColor",e._buffer,4,!0,zP.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,zP.FLOAT).addIndex(e._indexBuffer),e}var B2="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",k2="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function G2(){}(G2.create=function(t){var e,t=Object.assign({vertex:B2,fragment:k2,geometryClass:U2,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return iL(o,e=P2),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new M2(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(G2,"defaultVertexSrc",{get:function(){return B2},enumerable:!1,configurable:!0}),Object.defineProperty(G2,"defaultFragmentTemplate",{get:function(){return k2},enumerable:!1,configurable:!0}),G2).create();var X2={};for(H2 in kL)!function(t){Object.defineProperty(X2,t,{get:function(){return IM("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),kL[t]}})}(H2);var H2,V2={};for(H2 in g2)!function(t){Object.defineProperty(V2,t,{get:function(){return IM("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),g2[t]}})}(H2);var j2=function(t,e){return(j2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Y2(t,e){function r(){this.constructor=t}j2(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var z2;Y2(W2,z2=jM),W2.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},W2.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(W2.prototype,"tint",{get:function(){return this._tint},set:function(t){mM(this._tint=t,this.tintRgb)},enumerable:!1,configurable:!0}),W2.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},W2.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},W2.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},W2.prototype.destroy=function(t){z2.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null};function W2(t,e,r,i){void 0===t&&(t=1500),void 0===r&&(r=16384),void 0===i&&(i=!1);var n=z2.call(this)||this;return 16384<r&&(r=16384),n._properties=[!1,!0,!1,!1,!1],n._maxSize=t,n._batchSize=r,n._buffers=null,n._bufferUpdateIDs=[],n._updateID=0,n.interactiveChildren=!1,n.blendMode=HP.NORMAL,n.autoResize=i,n.roundPixels=!0,n.baseTexture=null,n.setProperties(e),n._tint=0,n.tintRgb=new Float32Array(4),n.tint=16777215,n}var Z2=(K2.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new lD(function(t,e){var r=6*t;if((e=(e=void 0===e?null:e)||new Uint16Array(r)).length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var i=0,n=0;i<r;i+=6,n+=4)e[i+0]=n+0,e[i+1]=n+1,e[i+2]=n+2,e[i+3]=n+0,e[i+4]=n+2,e[i+5]=n+3;return e}(this.size),!0,!0),t.addIndex(this.indexBuffer);for(var r=this.dynamicStride=0;r<this.dynamicProperties.length;++r)(s=this.dynamicProperties[r]).offset=e,e+=s.size,this.dynamicStride+=s.size;var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new lD(this.dynamicData,!1,!1);for(var n=0,r=this.staticStride=0;r<this.staticProperties.length;++r)(s=this.staticProperties[r]).offset=n,n+=s.size,this.staticStride+=s.size;i=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(i),this.staticDataUint32=new Uint32Array(i),this.staticBuffer=new lD(this.staticData,!0,!1);for(r=0;r<this.dynamicProperties.length;++r){var s=this.dynamicProperties[r];t.addAttribute(s.attributeName,this.dynamicBuffer,0,s.type===zP.UNSIGNED_BYTE,s.type,4*this.dynamicStride,4*s.offset)}for(r=0;r<this.staticProperties.length;++r){s=this.staticProperties[r];t.addAttribute(s.attributeName,this.staticBuffer,0,s.type===zP.UNSIGNED_BYTE,s.type,4*this.staticStride,4*s.offset)}},K2.prototype.uploadDynamic=function(t,e,r){for(var i=0;i<this.dynamicProperties.length;i++){var n=this.dynamicProperties[i];n.uploadFunction(t,e,r,n.type===zP.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++},K2.prototype.uploadStatic=function(t,e,r){for(var i=0;i<this.staticProperties.length;i++){var n=this.staticProperties[i];n.uploadFunction(t,e,r,n.type===zP.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++},K2.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},K2);function K2(t,e,r){this.geometry=new mD,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var n={attributeName:(n=t[i]).attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||zP.FLOAT,offset:n.offset};(e[i]?this.dynamicProperties:this.staticProperties).push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}var q2,FR=(Y2(J2,q2=DD),J2.prototype.render=function(t){var e=t.children,r=t._maxSize,i=t._batchSize,n=this.renderer,s=e.length;if(0!==s){r<s&&!t.autoResize&&(s=r);var o=(o=t._buffers)||(t._buffers=this.generateBuffers(t)),a=e[0]._texture.baseTexture;this.state.blendMode=(u=t.blendMode,h=a.alphaMode,vM[h?1:0][u]),n.state.set(this.state);var h,u,l=n.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=(r=t.tintRgb,h=t.worldAlpha,u=this.shader.uniforms.uColor,c=a.alphaMode,u=u||new Float32Array(4),c||void 0===c?(u[0]=r[0]*h,u[1]=r[1]*h,u[2]=r[2]*h):(u[0]=r[0],u[1]=r[1],u[2]=r[2]),u[3]=h,u),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var d=!1,f=0,p=0;f<s;f+=i,p+=1){var _=s-f;i<_&&(_=i),p>=o.length&&o.push(this._generateOneMoreBuffer(t));var y=o[p];y.uploadDynamic(e,f,_);var m=t._bufferUpdateIDs[p]||0;(d=d||y._updateID<m)&&(y._updateID=t._updateID,y.uploadStatic(e,f,_)),n.geometry.bind(y.geometry),l.drawElements(l.TRIANGLES,6*_,l.UNSIGNED_SHORT,0)}}},J2.prototype.generateBuffers=function(t){for(var e=[],r=t._maxSize,i=t._batchSize,n=t._properties,s=0;s<r;s+=i)e.push(new Z2(this.properties,n,i));return e},J2.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,t=t._properties;return new Z2(this.properties,t,e)},J2.prototype.uploadVertices=function(t,e,r,i,n,s){for(var o=0,a=0,h=0,u=0,l=0;l<r;++l){var c=t[e+l],d=c._texture,f=c.scale.x,p=c.scale.y,_=d.trim,d=d.orig;_?(o=(a=_.x-c.anchor.x*d.width)+_.width,h=(u=_.y-c.anchor.y*d.height)+_.height):(o=d.width*(1-c.anchor.x),a=d.width*-c.anchor.x,h=d.height*(1-c.anchor.y),u=d.height*-c.anchor.y),i[s]=a*f,i[s+1]=u*p,i[s+n]=o*f,i[s+n+1]=u*p,i[s+2*n]=o*f,i[s+2*n+1]=h*p,i[s+3*n]=a*f,i[s+3*n+1]=h*p,s+=4*n}},J2.prototype.uploadPosition=function(t,e,r,i,n,s){for(var o=0;o<r;o++){var a=t[e+o].position;i[s]=a.x,i[s+1]=a.y,i[s+n]=a.x,i[s+n+1]=a.y,i[s+2*n]=a.x,i[s+2*n+1]=a.y,i[s+3*n]=a.x,i[s+3*n+1]=a.y,s+=4*n}},J2.prototype.uploadRotation=function(t,e,r,i,n,s){for(var o=0;o<r;o++){var a=t[e+o].rotation;i[s]=a,i[s+n]=a,i[s+2*n]=a,i[s+3*n]=a,s+=4*n}},J2.prototype.uploadUvs=function(t,e,r,i,n,s){for(var o=0;o<r;++o){var a=t[e+o]._texture._uvs;a?(i[s]=a.x0,i[s+1]=a.y0,i[s+n]=a.x1,i[s+n+1]=a.y1,i[s+2*n]=a.x2,i[s+2*n+1]=a.y2,i[s+3*n]=a.x3,i[s+3*n+1]=a.y3):(i[s]=0,i[s+1]=0,i[s+n]=0,i[s+n+1]=0,i[s+2*n]=0,i[s+2*n+1]=0,i[s+3*n]=0,i[s+3*n+1]=0),s+=4*n}},J2.prototype.uploadTint=function(t,e,r,i,n,s){for(var o=0;o<r;++o){var a=t[e+o],h=0<a._texture.baseTexture.alphaMode,u=a.alpha,u=u<1&&h?xM(a._tintRGB,u):a._tintRGB+(255*u<<24);i[s]=u,i[s+n]=u,i[s+2*n]=u,i[s+3*n]=u,s+=4*n}},J2.prototype.destroy=function(){q2.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},J2);function J2(t){t=q2.call(this,t)||this;return t.shader=null,t.properties=null,t.tempMatrix=new eM,t.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:t.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:t.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:t.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:t.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:zP.UNSIGNED_BYTE,uploadFunction:t.uploadTint,offset:0}],t.shader=SU.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),t.state=RU.for2d(),t}function Q2(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var $2=/iPhone/i,tF=/iPod/i,eF=/iPad/i,rF=/\biOS-universal(?:.+)Mac\b/i,iF=/\bAndroid(?:.+)Mobile\b/i,nF=/Android/i,sF=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,oF=/Silk/i,aF=/Windows Phone/i,hF=/\bWindows(?:.+)ARM\b/i,uF=/BlackBerry/i,lF=/BB10/i,cF=/Opera Mini/i,dF=/\b(CriOS|Chrome)(?:.+)Mobile/i,fF=/Mobile(?:.+)Firefox\b/i;var pF=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))($2)&&!i(aF),ipod:i(tF),tablet:!i($2)&&(i(eF)||Q2(e))&&!i(aF),universal:i(rF),device:(i($2)||i(tF)||i(eF)||i(rF)||Q2(e))&&!i(aF)},amazon:{phone:i(sF),tablet:!i(sF)&&i(oF),device:i(sF)||i(oF)},android:{phone:!i(aF)&&i(sF)||!i(aF)&&i(iF),tablet:!i(aF)&&!i(sF)&&!i(iF)&&(i(oF)||i(nF)),device:!i(aF)&&(i(sF)||i(oF)||i(iF)||i(nF))||i(/\bokhttp\b/i)},windows:{phone:i(aF),tablet:i(hF),device:i(aF)||i(hF)},other:{blackberry:i(uF),blackberry10:i(lF),opera:i(cF),firefox:i(fF),chrome:i(dF),device:i(uF)||i(lF)||i(cF)||i(fF)||i(dF)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(jM={})[jM.WEBGL_LEGACY=0]="WEBGL_LEGACY",jM[jM.WEBGL=1]="WEBGL",jM[jM.WEBGL2=2]="WEBGL2",(jM={})[jM.UNKNOWN=0]="UNKNOWN",jM[jM.WEBGL=1]="WEBGL",jM[jM.CANVAS=2]="CANVAS",(jM={})[jM.COLOR=16384]="COLOR",jM[jM.DEPTH=256]="DEPTH",jM[jM.STENCIL=1024]="STENCIL",(jM={})[jM.NORMAL=0]="NORMAL",jM[jM.ADD=1]="ADD",jM[jM.MULTIPLY=2]="MULTIPLY",jM[jM.SCREEN=3]="SCREEN",jM[jM.OVERLAY=4]="OVERLAY",jM[jM.DARKEN=5]="DARKEN",jM[jM.LIGHTEN=6]="LIGHTEN",jM[jM.COLOR_DODGE=7]="COLOR_DODGE",jM[jM.COLOR_BURN=8]="COLOR_BURN",jM[jM.HARD_LIGHT=9]="HARD_LIGHT",jM[jM.SOFT_LIGHT=10]="SOFT_LIGHT",jM[jM.DIFFERENCE=11]="DIFFERENCE",jM[jM.EXCLUSION=12]="EXCLUSION",jM[jM.HUE=13]="HUE",jM[jM.SATURATION=14]="SATURATION",jM[jM.COLOR=15]="COLOR",jM[jM.LUMINOSITY=16]="LUMINOSITY",jM[jM.NORMAL_NPM=17]="NORMAL_NPM",jM[jM.ADD_NPM=18]="ADD_NPM",jM[jM.SCREEN_NPM=19]="SCREEN_NPM",jM[jM.NONE=20]="NONE",jM[jM.SRC_OVER=0]="SRC_OVER",jM[jM.SRC_IN=21]="SRC_IN",jM[jM.SRC_OUT=22]="SRC_OUT",jM[jM.SRC_ATOP=23]="SRC_ATOP",jM[jM.DST_OVER=24]="DST_OVER",jM[jM.DST_IN=25]="DST_IN",jM[jM.DST_OUT=26]="DST_OUT",jM[jM.DST_ATOP=27]="DST_ATOP",jM[jM.ERASE=26]="ERASE",jM[jM.SUBTRACT=28]="SUBTRACT",jM[jM.XOR=29]="XOR",(jM={})[jM.POINTS=0]="POINTS",jM[jM.LINES=1]="LINES",jM[jM.LINE_LOOP=2]="LINE_LOOP",jM[jM.LINE_STRIP=3]="LINE_STRIP",jM[jM.TRIANGLES=4]="TRIANGLES",jM[jM.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",jM[jM.TRIANGLE_FAN=6]="TRIANGLE_FAN",(jM={})[jM.RGBA=6408]="RGBA",jM[jM.RGB=6407]="RGB",jM[jM.ALPHA=6406]="ALPHA",jM[jM.LUMINANCE=6409]="LUMINANCE",jM[jM.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",jM[jM.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",jM[jM.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(jM={})[jM.TEXTURE_2D=3553]="TEXTURE_2D",jM[jM.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",jM[jM.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",jM[jM.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",jM[jM.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",jM[jM.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",jM[jM.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",jM[jM.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",jM[jM.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(jM={})[jM.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",jM[jM.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",jM[jM.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",jM[jM.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",jM[jM.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",jM[jM.FLOAT=5126]="FLOAT",jM[jM.HALF_FLOAT=36193]="HALF_FLOAT",(jM={})[jM.FLOAT=0]="FLOAT",jM[jM.INT=1]="INT",jM[jM.UINT=2]="UINT",(jM=a3=a3||{})[jM.NEAREST=0]="NEAREST",jM[jM.LINEAR=1]="LINEAR",(jM=QB=QB||{})[jM.CLAMP=33071]="CLAMP",jM[jM.REPEAT=10497]="REPEAT",jM[jM.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(jM=v3=v3||{})[jM.OFF=0]="OFF",jM[jM.POW2=1]="POW2",jM[jM.ON=2]="ON",jM[jM.ON_MANUAL=3]="ON_MANUAL",(jM={})[jM.NPM=0]="NPM",jM[jM.UNPACK=1]="UNPACK",jM[jM.PMA=2]="PMA",jM[jM.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",jM[jM.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",jM[jM.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(jM={})[jM.NO=0]="NO",jM[jM.YES=1]="YES",jM[jM.AUTO=2]="AUTO",jM[jM.BLEND=0]="BLEND",jM[jM.CLEAR=1]="CLEAR",jM[jM.BLIT=2]="BLIT",(jM=KB=KB||{})[jM.AUTO=0]="AUTO",jM[jM.MANUAL=1]="MANUAL",(jM=f3=f3||{}).LOW="lowp",jM.MEDIUM="mediump",jM.HIGH="highp",(jM={})[jM.NONE=0]="NONE",jM[jM.SCISSOR=1]="SCISSOR",jM[jM.STENCIL=2]="STENCIL",jM[jM.SPRITE=3]="SPRITE",(jM={})[jM.NONE=0]="NONE",jM[jM.LOW=2]="LOW",jM[jM.MEDIUM=4]="MEDIUM",jM[jM.HIGH=8]="HIGH";var _F,yF,mF,vF,xF,gF,EF,TF,bF,AF,SF,IF,RF,OF,wF,CF,PF,NF,MF,LF,DF,UF={MIPMAP_TEXTURES:v3.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(_F=32,mF=!0,(pF.tablet||pF.phone)&&(pF.apple.device&&(yF=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(yF[1],10)<11&&(mF=!1),pF.android.device&&(yF=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(yF[1],10)<7&&(mF=!1)),mF?_F:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:KB.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:QB.CLAMP,SCALE_MODE:a3.LINEAR,PRECISION_VERTEX:f3.HIGH,PRECISION_FRAGMENT:pF.apple.device?f3.HIGH:f3.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!pF.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};(jM=vF=vF||{})[jM.WEBGL_LEGACY=0]="WEBGL_LEGACY",jM[jM.WEBGL=1]="WEBGL",jM[jM.WEBGL2=2]="WEBGL2",(v3=xF=xF||{})[v3.UNKNOWN=0]="UNKNOWN",v3[v3.WEBGL=1]="WEBGL",v3[v3.CANVAS=2]="CANVAS",(KB=gF=gF||{})[KB.COLOR=16384]="COLOR",KB[KB.DEPTH=256]="DEPTH",KB[KB.STENCIL=1024]="STENCIL",(QB=EF=EF||{})[QB.NORMAL=0]="NORMAL",QB[QB.ADD=1]="ADD",QB[QB.MULTIPLY=2]="MULTIPLY",QB[QB.SCREEN=3]="SCREEN",QB[QB.OVERLAY=4]="OVERLAY",QB[QB.DARKEN=5]="DARKEN",QB[QB.LIGHTEN=6]="LIGHTEN",QB[QB.COLOR_DODGE=7]="COLOR_DODGE",QB[QB.COLOR_BURN=8]="COLOR_BURN",QB[QB.HARD_LIGHT=9]="HARD_LIGHT",QB[QB.SOFT_LIGHT=10]="SOFT_LIGHT",QB[QB.DIFFERENCE=11]="DIFFERENCE",QB[QB.EXCLUSION=12]="EXCLUSION",QB[QB.HUE=13]="HUE",QB[QB.SATURATION=14]="SATURATION",QB[QB.COLOR=15]="COLOR",QB[QB.LUMINOSITY=16]="LUMINOSITY",QB[QB.NORMAL_NPM=17]="NORMAL_NPM",QB[QB.ADD_NPM=18]="ADD_NPM",QB[QB.SCREEN_NPM=19]="SCREEN_NPM",QB[QB.NONE=20]="NONE",QB[QB.SRC_OVER=0]="SRC_OVER",QB[QB.SRC_IN=21]="SRC_IN",QB[QB.SRC_OUT=22]="SRC_OUT",QB[QB.SRC_ATOP=23]="SRC_ATOP",QB[QB.DST_OVER=24]="DST_OVER",QB[QB.DST_IN=25]="DST_IN",QB[QB.DST_OUT=26]="DST_OUT",QB[QB.DST_ATOP=27]="DST_ATOP",QB[QB.ERASE=26]="ERASE",QB[QB.SUBTRACT=28]="SUBTRACT",QB[QB.XOR=29]="XOR",(a3=TF=TF||{})[a3.POINTS=0]="POINTS",a3[a3.LINES=1]="LINES",a3[a3.LINE_LOOP=2]="LINE_LOOP",a3[a3.LINE_STRIP=3]="LINE_STRIP",a3[a3.TRIANGLES=4]="TRIANGLES",a3[a3.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",a3[a3.TRIANGLE_FAN=6]="TRIANGLE_FAN",(f3=bF=bF||{})[f3.RGBA=6408]="RGBA",f3[f3.RGB=6407]="RGB",f3[f3.ALPHA=6406]="ALPHA",f3[f3.LUMINANCE=6409]="LUMINANCE",f3[f3.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",f3[f3.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",f3[f3.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(jM=AF=AF||{})[jM.TEXTURE_2D=3553]="TEXTURE_2D",jM[jM.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",jM[jM.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",jM[jM.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",jM[jM.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",jM[jM.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",jM[jM.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",jM[jM.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",jM[jM.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(v3=SF=SF||{})[v3.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",v3[v3.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",v3[v3.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",v3[v3.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",v3[v3.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",v3[v3.FLOAT=5126]="FLOAT",v3[v3.HALF_FLOAT=36193]="HALF_FLOAT",(KB=IF=IF||{})[KB.FLOAT=0]="FLOAT",KB[KB.INT=1]="INT",KB[KB.UINT=2]="UINT",(QB=RF=RF||{})[QB.NEAREST=0]="NEAREST",QB[QB.LINEAR=1]="LINEAR",(a3=OF=OF||{})[a3.CLAMP=33071]="CLAMP",a3[a3.REPEAT=10497]="REPEAT",a3[a3.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(f3=wF=wF||{})[f3.OFF=0]="OFF",f3[f3.POW2=1]="POW2",f3[f3.ON=2]="ON",f3[f3.ON_MANUAL=3]="ON_MANUAL",(jM=CF=CF||{})[jM.NPM=0]="NPM",jM[jM.UNPACK=1]="UNPACK",jM[jM.PMA=2]="PMA",jM[jM.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",jM[jM.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",jM[jM.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(v3=PF=PF||{})[v3.NO=0]="NO",v3[v3.YES=1]="YES",v3[v3.AUTO=2]="AUTO",v3[v3.BLEND=0]="BLEND",v3[v3.CLEAR=1]="CLEAR",v3[v3.BLIT=2]="BLIT",(KB=NF=NF||{})[KB.AUTO=0]="AUTO",KB[KB.MANUAL=1]="MANUAL",(QB=MF=MF||{}).LOW="lowp",QB.MEDIUM="mediump",QB.HIGH="highp",(a3=LF=LF||{})[a3.NONE=0]="NONE",a3[a3.SCISSOR=1]="SCISSOR",a3[a3.STENCIL=2]="STENCIL",a3[a3.SPRITE=3]="SPRITE",(f3=DF=DF||{})[f3.NONE=0]="NONE",f3[f3.LOW=2]="LOW",f3[f3.MEDIUM=4]="MEDIUM",f3[f3.HIGH=8]="HIGH";r(13);var FF={parse:_t.parse,format:_t.format,resolve:_t.resolve};UF.RETINA_PREFIX=/@([0-9\.]+)x/;var BF,kF=UF.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,GF="6.0.4";var XF=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[EF.NORMAL_NPM]=EF.NORMAL,t[EF.ADD_NPM]=EF.ADD,t[EF.SCREEN_NPM]=EF.SCREEN,e[EF.NORMAL]=EF.NORMAL_NPM,e[EF.ADD]=EF.ADD_NPM,e[EF.SCREEN]=EF.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function HF(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function VF(t){return!(t&t-1||!t)}function jF(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}function YF(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}var zF=0;var WF={};function ZF(t,e,r){var i;void 0===r&&(r=3),WF[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),WF[e]=!0)}var KF={},qF=Object.create(null),JF=Object.create(null);QF.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},QF.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},QF.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(QF.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(QF.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function QF(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||UF.RESOLUTION,this.resize(t,e)}var $F;function tB(t,e){t=UF.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var eB,rB=(iB.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},iB.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},iB.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},iB.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},iB.prototype.contains=function(t){return-1!==this.items.indexOf(t)},iB.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},iB.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(iB.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(iB.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),iB);function iB(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(rB.prototype,{dispatch:{value:rB.prototype.emit},run:{value:rB.prototype.emit}}),UF.TARGET_FPMS=.06,(jM=eB=eB||{})[jM.INTERACTION=50]="INTERACTION",jM[jM.HIGH=25]="HIGH",jM[jM.NORMAL=0]="NORMAL",jM[jM.LOW=-25]="LOW",jM[jM.UTILITY=-50]="UTILITY";var nB=(sB.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},sB.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},sB.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},sB.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},sB);function sB(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var oB=(aB.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},aB.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},aB.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},aB.prototype.add=function(t,e,r){return void 0===r&&(r=eB.NORMAL),this._addListener(new nB(t,e,r))},aB.prototype.addOnce=function(t,e,r){return void 0===r&&(r=eB.NORMAL),this._addListener(new nB(t,e,r,!0))},aB.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},aB.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(aB.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),aB.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},aB.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},aB.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},aB.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*UF.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(aB.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(aB.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,UF.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(aB.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(aB,"shared",{get:function(){var t;return aB._shared||((t=aB._shared=new aB).autoStart=!0,t._protected=!0),aB._shared},enumerable:!1,configurable:!0}),Object.defineProperty(aB,"system",{get:function(){var t;return aB._system||((t=aB._system=new aB).autoStart=!0,t._protected=!0),aB._system},enumerable:!1,configurable:!0}),aB);function aB(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new nB(null,null,1/0),this.deltaMS=1/UF.TARGET_FPMS,this.elapsedMS=1/UF.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}hB.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,eB.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?oB.shared:new oB,t.autoStart&&this.start()},hB.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function hB(){}var uB,lB=2*Math.PI,cB=180/Math.PI,dB=Math.PI/180;(v3=uB=uB||{})[v3.POLY=0]="POLY",v3[v3.RECT=1]="RECT",v3[v3.CIRC=2]="CIRC",v3[v3.ELIP=3]="ELIP",v3[v3.RREC=4]="RREC";var fB=(Object.defineProperty(pB.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(pB.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(pB.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(pB.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(pB,"EMPTY",{get:function(){return new pB(0,0,0,0)},enumerable:!1,configurable:!0}),pB.prototype.clone=function(){return new pB(this.x,this.y,this.width,this.height)},pB.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},pB.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},pB.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},pB.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},pB.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},pB.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},pB.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},pB.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},pB);function pB(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=uB.RECT}_B.prototype.clone=function(){return new _B(this.x,this.y,this.radius)},_B.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},_B.prototype.getBounds=function(){return new fB(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},_B.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function _B(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=uB.CIRC}yB.prototype.clone=function(){return new yB(this.x,this.y,this.width,this.height)},yB.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},yB.prototype.getBounds=function(){return new fB(this.x-this.width,this.y-this.height,this.width,this.height)},yB.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function yB(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=uB.ELIP}mB.prototype.clone=function(){var t=new mB(this.points.slice());return t.closeStroke=this.closeStroke,t},mB.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},mB.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function mB(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=uB.POLY,this.closeStroke=!0}vB.prototype.clone=function(){return new vB(this.x,this.y,this.width,this.height,this.radius)},vB.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},vB.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function vB(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=uB.RREC}var xB=(gB.prototype.clone=function(){return new gB(this.x,this.y)},gB.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},gB.prototype.copyTo=function(t){return t.set(this.x,this.y),t},gB.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},gB.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},gB.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},gB);function gB(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var EB=(TB.prototype.clone=function(t,e){return new TB(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},TB.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},TB.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},TB.prototype.copyTo=function(t){return t.set(this._x,this._y),t},TB.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},TB.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(TB.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(TB.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),TB);function TB(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var bB=(AB.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},AB.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},AB.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},AB.prototype.apply=function(t,e){e=e||new xB;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},AB.prototype.applyInverse=function(t,e){e=e||new xB;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},AB.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},AB.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},AB.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},AB.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},AB.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},AB.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},AB.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(lB-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},AB.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},AB.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},AB.prototype.clone=function(){var t=new AB;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},AB.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},AB.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},AB.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(AB,"IDENTITY",{get:function(){return new AB},enumerable:!1,configurable:!0}),Object.defineProperty(AB,"TEMP_MATRIX",{get:function(){return new AB},enumerable:!1,configurable:!0}),AB);function AB(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var SB=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],IB=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],RB=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],OB=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],wB=[],CB=[],PB=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];wB.push(e);for(var r=0;r<16;r++)for(var i=PB(SB[t]*SB[r]+RB[t]*IB[r]),n=PB(IB[t]*SB[r]+OB[t]*IB[r]),s=PB(SB[t]*RB[r]+RB[t]*OB[r]),o=PB(IB[t]*RB[r]+OB[t]*OB[r]),a=0;a<16;a++)if(SB[a]===i&&IB[a]===n&&RB[a]===s&&OB[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new bB;h.set(SB[t],IB[t],RB[t],OB[t],0,0),CB.push(h)}}();var NB={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return SB[t]},uY:function(t){return IB[t]},vX:function(t){return RB[t]},vY:function(t){return OB[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return wB[t][e]},sub:function(t,e){return wB[t][NB.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?NB.S:NB.N:2*Math.abs(e)<=Math.abs(t)?0<t?NB.E:NB.W:0<e?0<t?NB.SE:NB.SW:0<t?NB.NE:NB.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=CB[NB.inv(e)];e.tx=r,e.ty=i,t.append(e)}},MB=(LB.prototype.onChange=function(){this._localID++},LB.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},LB.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},LB.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},LB.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},LB.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(LB.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),LB.IDENTITY=new LB,LB);function LB(){this.worldTransform=new bB,this.localTransform=new bB,this.position=new EB(this.onChange,this,0,0),this.scale=new EB(this.onChange,this,1,1),this.pivot=new EB(this.onChange,this,0,0),this.skew=new EB(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}UF.PREFER_ENV=pF.any?vF.WEBGL:vF.WEBGL2,UF.STRICT_TEXTURE_CACHE=!1;var DB=[];function UB(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=DB.length-1;0<=n;--n){var s=DB[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var FB=function(t,e){return(FB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function BB(t,e){function r(){this.constructor=t}FB(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var kB=(GB.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},GB.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},GB.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(GB.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),GB.prototype.update=function(){this.destroyed||this.onUpdate.emit()},GB.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(GB.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(GB.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),GB.prototype.style=function(t,e,r){return!1},GB.prototype.dispose=function(){},GB.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},GB.test=function(t,e){return!1},GB);function GB(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new rB("setRealSize"),this.onUpdate=new rB("update"),this.onError=new rB("onError")}var XB,HB=(BB(VB,XB=kB),VB.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===CF.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},VB.prototype.dispose=function(){this.data=null},VB.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},VB);function VB(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=XB.call(this,e,i)||this).data=t,r}var jB,YB={scaleMode:RF.NEAREST,format:bF.RGBA,alphaMode:CF.NPM},zB=(BB(WB,jB=pt.a),Object.defineProperty(WB.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(WB.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),WB.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},WB.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},WB.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},WB.prototype._refreshPOT=function(){this.isPowerOfTwo=VF(this.realWidth)&&VF(this.realHeight)},WB.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},WB.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},WB.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},WB.prototype.onError=function(t){this.emit("error",this,t)},WB.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete JF[this.cacheId],delete qF[this.cacheId],this.cacheId=null),this.dispose(),WB.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},WB.prototype.dispose=function(){this.emit("dispose",this)},WB.prototype.castToBaseTexture=function(){return this},WB.from=function(t,e,r){void 0===r&&(r=UF.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++zF),t._pixiId),s=JF[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new WB(t,e)).cacheId=n,WB.addToCache(s,n)),s},WB.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new HB(t,{width:e,height:r}),t=t instanceof Float32Array?SF.FLOAT:SF.UNSIGNED_BYTE;return new WB(n,Object.assign(YB,i||{width:e,height:r,type:t}))},WB.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),JF[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),JF[e]=t)},WB.removeFromCache=function(t){if("string"==typeof t){var e=JF[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete JF[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete JF[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},WB._globalBatch=0,WB);function WB(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=jB.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof kB||((t=UB(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||UF.RESOLUTION,r.mipmap=void 0!==n?n:UF.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:UF.ANISOTROPIC_LEVEL,r.wrapMode=u||UF.WRAP_MODE,r.scaleMode=void 0!==o?o:UF.SCALE_MODE,r.format=l||bF.RGBA,r.type=c||SF.UNSIGNED_BYTE,r.target=d||AF.TEXTURE_2D,r.alphaMode=void 0!==i?i:CF.UNPACK,r.uid=++zF,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var ZB,KB=(BB(qB,ZB=kB),qB.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof kB?this.addResourceAt(t[r],r):this.addResourceAt(UB(t[r],e),r))},qB.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},qB.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},qB.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");ZB.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},qB.prototype.unbind=function(t){ZB.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},qB.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},qB);function qB(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=ZB.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new zB;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var JB,QB=(BB($B,JB=KB),$B.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},$B.prototype.bind=function(t){JB.prototype.bind.call(this,t),t.target=AF.TEXTURE_2D_ARRAY},$B.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},$B);function $B(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=JB.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var t3,e3=(BB(r3,t3=kB),r3.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,($F=$F||document.createElement("a")).href=t;var r=FF.parse($F.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},r3.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===CF.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},r3.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),t3.prototype.update.call(this))},r3.prototype.dispose=function(){this.source=null},r3);function r3(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=t3.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var i3,n3=(BB(s3,i3=e3),s3.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},s3);function s3(t){return i3.call(this,t)||this}var o3,a3=(BB(h3,o3=KB),h3.prototype.bind=function(t){o3.prototype.bind.call(this,t),t.target=AF.TEXTURE_CUBE_MAP},h3.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=AF.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},h3.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<h3.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},h3.test=function(t){return Array.isArray(t)&&t.length===h3.SIDES},h3.SIDES=6,h3);function h3(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==h3.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=o3.call(this,6,{width:n,height:s})||this,a=0;a<h3.SIDES;a++)r.items[a].target=AF.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var u3,l3=(BB(c3,u3=e3),c3.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},c3.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===CF.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},c3.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return u3.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(u3.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},c3.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,u3.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},c3.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},c3);function c3(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,e3.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=u3.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:UF.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var d3,f3=(BB(p3,d3=e3),p3.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},p3.prototype._loadSvg=function(){var s=this,o=new Image;e3.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++zF,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},p3.getSize=function(t){var e=p3.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},p3.prototype.dispose=function(){d3.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},p3.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},p3.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,p3);function p3(t,e){var r=this;return e=e||{},(r=d3.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var _3,jM=(BB(y3,_3=e3),y3.prototype.update=function(t){var e;this.destroyed||(e=oB.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(_3.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},y3.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},y3.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},y3.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},y3.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},y3.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(oB.shared.add(this.update,this),this._isConnectedToTicker=!0)},y3.prototype._onPlayStop=function(){this._isConnectedToTicker&&(oB.shared.remove(this.update,this),this._isConnectedToTicker=!1)},y3.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},y3.prototype.dispose=function(){this._isConnectedToTicker&&oB.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),_3.prototype.dispose.call(this)},Object.defineProperty(y3.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(oB.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(oB.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(y3.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),y3.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<y3.TYPES.indexOf(e)},y3.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],y3.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},y3);function y3(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];e3.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||y3.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=_3.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var m3,v3=(BB(x3,m3=e3),x3.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},x3);function x3(t){return m3.call(this,t)||this}DB.push(l3,v3,n3,jM,f3,HB,a3,QB);var g3={__proto__:null,Resource:kB,BaseImageResource:e3,INSTALLED:DB,autoDetectResource:UB,AbstractMultiResource:KB,ArrayResource:QB,BufferResource:HB,CanvasResource:n3,CubeResource:a3,ImageResource:l3,SVGResource:f3,VideoResource:jM,ImageBitmapResource:v3},f3=(E3.prototype.destroy=function(){this.renderer=null},E3);function E3(t){this.renderer=t}var T3,b3=(BB(A3,T3=HB),A3.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===CF.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},A3);function A3(){return null!==T3&&T3.apply(this,arguments)||this}var S3=(Object.defineProperty(I3.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),I3.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new zB(null,{scaleMode:RF.NEAREST,resolution:1,mipmap:wF.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},I3.prototype.addDepthTexture=function(t){return this.depthTexture=t||new zB(new b3(null,{width:this.width,height:this.height}),{scaleMode:RF.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:wF.OFF,format:bF.DEPTH_COMPONENT,type:SF.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},I3.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},I3.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},I3.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},I3.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},I3.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},I3);function I3(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new rB("disposeFramebuffer"),this.multisample=DF.NONE}var R3,O3=(BB(w3,R3=zB),w3.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},w3.prototype.dispose=function(){this.framebuffer.dispose(),R3.prototype.dispose.call(this)},w3.prototype.destroy=function(){R3.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},w3);function w3(t){var e=this,e=R3.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=wF.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new S3(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var C3=(P3.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=NB.add(r,NB.NW),this.x0=s+i*NB.uX(r),this.y0=e+n*NB.uY(r),r=NB.add(r,2),this.x1=s+i*NB.uX(r),this.y1=e+n*NB.uY(r),r=NB.add(r,2),this.x2=s+i*NB.uX(r),this.y2=e+n*NB.uY(r),r=NB.add(r,2),this.x3=s+i*NB.uX(r),this.y3=e+n*NB.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},P3.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},P3);function P3(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var N3,M3=new C3,L3=(BB(D3,N3=pt.a),D3.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},D3.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},D3.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&qF[t.url]&&D3.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,D3.removeFromCache(this),this.textureCacheIds=null},D3.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new D3(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},D3.prototype.updateUvs=function(){this._uvs===M3&&(this._uvs=new C3),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},D3.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=UF.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++zF),t._pixiId),s=qF[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=tB(t)),(s=new D3(new zB(t,e))).baseTexture.cacheId=n,zB.addToCache(s.baseTexture,n),D3.addToCache(s,n)),s},D3.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=D3.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},D3.fromBuffer=function(t,e,r,i){return new D3(zB.fromBuffer(t,e,r,i))},D3.fromLoader=function(t,e,r,i){t=new zB(t,Object.assign({scaleMode:UF.SCALE_MODE,resolution:tB(e)},i)),i=t.resource;i instanceof l3&&(i.url=e);var n=new D3(t);return zB.addToCache(n.baseTexture,r=r||e),D3.addToCache(n,r),r!==e&&(zB.addToCache(n.baseTexture,e),D3.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},D3.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),qF[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),qF[e]=t)},D3.removeFromCache=function(t){if("string"==typeof t){var e=qF[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete qF[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)qF[t.textureCacheIds[i]]===t&&delete qF[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(D3.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(D3.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(D3.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(D3.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(D3.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),D3.prototype.castToBaseTexture=function(){return this.baseTexture},D3);function D3(t,e,r,i,n,s){var o=N3.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new fB(0,0,1,1)),t instanceof D3&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=M3,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new xB(s.x,s.y):new xB(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function U3(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}L3.EMPTY=new L3(new zB),U3(L3.EMPTY),U3(L3.EMPTY.baseTexture),L3.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new L3(new zB(new n3(t)))}(),U3(L3.WHITE),U3(L3.WHITE.baseTexture);var F3,B3=(BB(k3,F3=L3),Object.defineProperty(k3.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),k3.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},k3.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},k3.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(ZF("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new k3(new O3(t))},k3);function k3(t,e){e=F3.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var G3=(X3.prototype.createTexture=function(t,e){e=new O3(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new B3(e)},X3.prototype.getOptimalTexture=function(t,e,r){var i=X3.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=HF(t)))<<16|65535&(e=HF(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},X3.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},X3.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},X3.prototype.returnFilterTexture=function(t){this.returnTexture(t)},X3.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},X3.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=X3.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},X3.SCREEN_KEY="screen",X3);function X3(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var H3=(V3.prototype.destroy=function(){this.buffer=null},V3.from=function(t,e,r,i,n){return new V3(t,e,r,i,n)},V3);function V3(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=SF.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var j3=0,Y3=(z3.prototype.update=function(t){this.data=t||this.data,this._updateID++},z3.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},z3.prototype.destroy=function(){this.dispose(),this.data=null},z3.from=function(t){return new z3(t=t instanceof Array?new Float32Array(t):t)},z3);function z3(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=j3++,this.disposeRunner=new rB("disposeBuffer")}function W3(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var Z3={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var K3={5126:4,5123:2,5121:1},q3=0,J3={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},jM=(Q3.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Y3||(e instanceof Array&&(e=new Float32Array(e)),e=new Y3(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new H3(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},Q3.prototype.getAttribute=function(t){return this.attributes[t]},Q3.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},Q3.prototype.addIndex=function(t){return t instanceof Y3||(t instanceof Array&&(t=new Uint16Array(t)),t=new Y3(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},Q3.prototype.getIndex=function(){return this.indexBuffer},Q3.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new Y3;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*K3[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=W3(l);n[c]||(n[c]=new Z3[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Q3.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},Q3.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Q3.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},Q3.prototype.clone=function(){for(var t=new Q3,e=0;e<this.buffers.length;e++)t.buffers[e]=new Y3(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new H3(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},Q3.merge=function(t){for(var e=new Q3,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new J3[W3(o.buffers[s].data)](i[s]),e.buffers[s]=new Y3(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*K3[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},Q3);function Q3(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=q3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new rB("disposeGeometry"),this.refCount=0}var $3,tk=(BB(ek,$3=jM),ek);function ek(){var t=$3.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var rk,ik=(BB(nk,rk=jM),nk.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},nk.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},nk);function nk(){var t=rk.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Y3(t.vertices),t.uvBuffer=new Y3(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var sk=0,ok=(ak.prototype.update=function(){this.dirtyId++},ak.prototype.add=function(t,e,r){this.uniforms[t]=new ak(e,r)},ak.from=function(t,e){return new ak(t,e)},ak);function ak(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=sk++,this.static=!!e}var hk=(uk.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},uk);function uk(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new fB,this.destinationFrame=new fB,this.bindingSourceFrame=new fB,this.bindingDestinationFrame=new fB,this.filters=[],this.transform=null}var lk,ck=[new xB,new xB,new xB,new xB],dk=new bB,fk=(BB(pk,lk=f3),pk.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new hk,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(dk.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},pk.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,PF.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,PF.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,PF.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},pk.prototype.bindAndClear=function(t,e){void 0===e&&(e=PF.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===PF.CLEAR||e===PF.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},pk.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(TF.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(TF.TRIANGLE_STRIP))},pk.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(bB.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},pk.prototype.destroy=function(){this.texturePool.clear(!1)},pk.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},pk.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},pk.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},pk.prototype.emptyPool=function(){this.texturePool.clear(!0)},pk.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},pk.prototype.transformAABB=function(t,e){var r=ck[0],i=ck[1],n=ck[2],s=ck[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},pk.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?dk.copyFrom(n):dk.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},pk);function pk(t){var e=lk.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new G3,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new tk,e.quadUv=new ik,e.tempRect=new fB,e.activeState={},e.globalUniforms=new ok({outputFrame:new fB,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var _k=(yk.prototype.flush=function(){},yk.prototype.destroy=function(){this.renderer=null},yk.prototype.start=function(){},yk.prototype.stop=function(){this.flush()},yk.prototype.render=function(t){},yk);function yk(t){this.renderer=t}var mk,vk=(BB(xk,mk=f3),xk.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},xk.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},xk.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},xk.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},xk.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},xk);function xk(t){var e=mk.call(this,t)||this;return e.emptyRenderer=new _k(t),e.currentRenderer=e.emptyRenderer,e}var gk,Ek=0,Tk=(BB(bk,gk=f3),Object.defineProperty(bk.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),bk.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Ek++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},bk.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Ek++,this.renderer.runners.contextChange.emit(t)},bk.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},bk.prototype.createContext=function(t,e){var r;if(r=UF.PREFER_ENV>=vF.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},bk.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},bk.prototype.handleContextLost=function(t){t.preventDefault()},bk.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},bk.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},bk.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},bk.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},bk);function bk(t){var e=gk.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var Ak,Sk=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=DF.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},Ik=new fB,Rk=(BB(Ok,Ak=f3),Ok.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new fB,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,UF.PREFER_ENV===vF.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},Ok.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},Ok.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(Ok.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),Ok.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=gF.COLOR|gF.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},Ok.prototype.initFramebuffer=function(t){var e=this.gl,e=new Sk(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},Ok.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},Ok.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},Ok.prototype.detectSamples=function(t){var e=this.msaaSamples,r=DF.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?DF.NONE:r},Ok.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new S3(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=Ik).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},Ok.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},Ok.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},Ok.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},Ok.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new fB},Ok);function Ok(t){t=Ak.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new S3(10,10),t.msaaSamples=null,t}var wk,Ck=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Pk={5126:4,5123:2,5121:1},Nk=(BB(Mk,wk=f3),Mk.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=UF.PREFER_ENV===vF.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},Mk.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},Mk.prototype.reset=function(){this.unbind()},Mk.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},Mk.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},Mk.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},Mk.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*Pk[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*Pk[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*Pk[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new Ck(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},Mk.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},Mk.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},Mk.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},Mk.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},Mk.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},Mk.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},Mk);function Mk(t){t=wk.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var Lk=(Dk.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=LF.NONE,this.autoDetect=!0),this._target=null},Dk.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},Dk);function Dk(t){void 0===t&&(t=null),this.type=LF.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function Uk(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function Fk(t,e,r,i){var n=Uk(t,t.VERTEX_SHADER,e),s=Uk(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function Bk(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function kk(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Bk(2*e);case"bvec3":return Bk(3*e);case"bvec4":return Bk(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Gk,Xk={},Hk=Xk;function Vk(){var t,e;return(Hk===Xk||Hk&&Hk.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=UF.PREFER_ENV>=vF.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Hk=e),Hk}function jk(t,e,r){if("precision"===t.substring(0,9))return r!==MF.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===MF.HIGH&&r!==MF.HIGH?MF.MEDIUM:e)+" float;\n"+t}var Yk={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var zk=null,Wk={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Zk(t,e){if(!zk){var r=Object.keys(Wk);zk={};for(var i=0;i<r.length;++i){var n=r[i];zk[t[n]]=Wk[n]}}return zk[e]}var Kk=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],qk={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Jk={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Qk,$k=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function tG(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=$k.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var eG=0,rG={},iG=(nG.prototype.extractData=function(t,e){var r=Vk();r?(e=Fk(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},nG.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=Zk(e,o.type),a={type:a,name:o.name,size:Yk[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},nG.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=Zk(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:kk(h,s.size)}}return r},Object.defineProperty(nG,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(nG,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),nG.from=function(t,e,r){var i=t+e,n=KF[i];return n||(KF[i]=n=new nG(t,e,r)),n},nG);function nG(t,e,r){void 0===r&&(r="pixi-shader"),this.id=eG++,this.vertexSrc=t||nG.defaultVertexSrc,this.fragmentSrc=e||nG.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),rG[r]?(rG[r]++,r+="-"+rG[r]):rG[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=jk(this.vertexSrc,UF.PRECISION_VERTEX,MF.HIGH),this.fragmentSrc=jk(this.fragmentSrc,UF.PRECISION_FRAGMENT,(Gk||(Gk=MF.MEDIUM,(r=Vk())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),Gk=r.precision?MF.HIGH:MF.MEDIUM)),Gk))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var sG=(oG.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},oG.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(oG.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),oG.from=function(t,e,r){return new oG(iG.from(t,e),r)},oG);function oG(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof ok?e:new ok(e):new ok({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var aG=(Object.defineProperty(hG.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(hG.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(hG.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(hG.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(hG.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(hG.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(hG.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==EF.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(hG.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),hG.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},hG.for2d=function(){var t=new hG;return t.depthTest=!1,t.blend=!0,t},hG);function hG(){this.data=0,this.blendMode=EF.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var uG,v3=(BB(lG,uG=sG),lG.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(lG.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(lG,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(lG,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),lG);function lG(t,e,r){var i=this,e=iG.from(t||lG.defaultVertexSrc,e||lG.defaultFragmentSrc);return(i=uG.call(this,e,r)||this).padding=0,i.resolution=UF.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new aG,i}var cG=new bB,dG=(Object.defineProperty(fG.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),fG.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},fG.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(cG.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(cG));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},fG);function fG(t,e){this._texture=t,this.mapCoord=new bB,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var pG,_G=(BB(yG,pG=v3),yG.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new dG(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},yG);function yG(t){var e=this,r=new bB,e=pG.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var mG,vG=(BB(xG,mG=f3),xG.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},xG.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new Lk).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case LF.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case LF.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case LF.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},xG.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case LF.SCISSOR:this.renderer.scissor.pop();break;case LF.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case LF.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},xG.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=LF.SPRITE:(t.type=LF.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=LF.SCISSOR)))},xG.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new _G(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},xG.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},xG);function xG(t){t=mG.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var gG,v3=(BB(EG,gG=f3),EG.prototype.getStackLength=function(){return this.maskStack.length},EG.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},EG.prototype._useCurrent=function(){},EG.prototype.destroy=function(){gG.prototype.destroy.call(this),this.maskStack=null},EG);function EG(t){t=gG.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var TG,bG=(BB(AG,TG=v3),AG.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},AG.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},AG.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},AG.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},AG);function AG(t){t=TG.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var SG,IG=(BB(RG,SG=v3),RG.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},RG.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},RG.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},RG.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},RG.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},RG);function RG(t){t=SG.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var OG,wG=(BB(CG,OG=f3),CG.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},CG.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},CG.prototype.setTransform=function(t){},CG);function CG(t){t=OG.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new bB,t.transform=null,t}var PG,NG=new fB,MG=new fB,LG=(BB(DG,PG=f3),DG.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(NG.width=t.frame.width,NG.height=t.frame.height,e=NG),r||(MG.x=t.frame.x,MG.y=t.frame.y,MG.width=e.width,MG.height=e.height,r=MG),n=i.framebuffer):(s=o.resolution,e||(NG.width=o.screen.width,NG.height=o.screen.height,e=NG),r||((r=NG).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},DG.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},DG.prototype.resize=function(){this.bind(null)},DG.prototype.reset=function(){this.bind(null)},DG);function DG(t){var e=PG.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new fB,e.destinationFrame=new fB,e.viewportFrame=new fB,e}var UG=(FG.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},FG);function FG(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var BG,kG=0,GG={textureCount:0},XG=(BB(HG,BG=f3),HG.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Qk)return Qk;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Qk=!0===t({a:"b"},"a","b")}catch(t){Qk=!1}return Qk}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},HG.prototype.contextChange=function(t){this.gl=t,this.reset()},HG.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(GG.textureCount=0,this.syncUniformGroup(t.uniformGroup,GG)),i},HG.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},HG.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},HG.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},HG.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<Kk.length;h++)if(Kk[h].test(n,o)){i.push(Kk[h].code(r,o)),a=!0;break}a||(s=(1===n.size?qk:Jk)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},HG.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},HG.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},HG.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=Fk(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:kk(a.type,a.size)}}t=new UG(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},HG.prototype.reset=function(){this.program=null,this.shader=null},HG.prototype.destroy=function(){this.destroyed=!0},HG);function HG(t){t=BG.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=kG++,t}var VG,jG=(BB(YG,VG=f3),YG.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[EF.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.ADD]=[t.ONE,t.ONE],e[EF.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.NONE]=[0,0],e[EF.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[EF.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EF.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[EF.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[EF.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[EF.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[EF.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[EF.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[EF.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[EF.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[EF.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},YG.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},YG.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},YG.prototype.setBlend=function(t){this.updateCheck(YG.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},YG.prototype.setOffset=function(t){this.updateCheck(YG.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},YG.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},YG.prototype.setDepthMask=function(t){this.gl.depthMask(t)},YG.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},YG.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},YG.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},YG.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},YG.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},YG.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},YG.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},YG.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},YG);function YG(t){t=VG.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=EF.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new aG,t.defaultState.blend=!0,t}var zG,WG=(BB(ZG,zG=f3),ZG.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==NF.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},ZG.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},ZG.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},ZG);function ZG(t){t=zG.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=UF.GC_MAX_IDLE,t.checkCountMax=UF.GC_MAX_CHECK_COUNT,t.mode=UF.GC_MODE,t}var KG,qG=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},JG=(BB(QG,KG=f3),QG.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new qG(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new qG(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},QG.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},QG.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},QG.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},QG.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==IF.FLOAT&&this.renderer.texture.unbind(s)}},QG.prototype.initTexture=function(t){var e=new qG(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},QG.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===SF.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},QG.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==IF.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},QG.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&YF(this.managedTextures,t,1))},QG.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==wF.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=OF.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},QG.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==wF.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===RF.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===RF.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===RF.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===RF.LINEAR?i.LINEAR:i.NEAREST)},QG);function QG(t){t=KG.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new zB,t.hasIntegerTextures=!1,t}var $G,tX={__proto__:null,FilterSystem:fk,BatchSystem:vk,ContextSystem:Tk,FramebufferSystem:Rk,GeometrySystem:Nk,MaskSystem:vG,ScissorSystem:bG,StencilSystem:IG,ProjectionSystem:wG,RenderTextureSystem:LG,ShaderSystem:XG,StateSystem:jG,TextureGCSystem:WG,TextureSystem:JG},eX=new bB,f3=(BB(rX,$G=pt.a),rX.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(rX.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(rX.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),rX.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},rX.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=B3.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return eX.tx=-i.x,eX.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:eX,skipUpdateTransform:!!t.parent}),r},rX.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=xF.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(rX.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(rX.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),rX);function rX(t,e){void 0===t&&(t=xF.UNKNOWN);var r=$G.call(this)||this;return e=Object.assign({},UF.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new fB(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||UF.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(ZF("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var iX;BB(nX,iX=f3),nX.create=function(t){if(BF=void 0===BF?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:UF.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():BF)return new nX(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},nX.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},nX.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof B3?(ZF("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},nX.prototype.resize=function(t,e){iX.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},nX.prototype.reset=function(){return this.runners.reset.emit(),this},nX.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},nX.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();iX.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(nX.prototype,"extract",{get:function(){return ZF("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),nX.registerPlugin=function(t,e){(nX.__plugins=nX.__plugins||{})[t]=e};function nX(t){var e,r=iX.call(this,xF.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new rB("destroy"),contextChange:new rB("contextChange"),reset:new rB("reset"),update:new rB("update"),postrender:new rB("postrender"),prerender:new rB("prerender"),resize:new rB("resize")},r.globalUniforms=new ok({projectionMatrix:new bB},!0),r.addSystem(vG,"mask").addSystem(Tk,"context").addSystem(jG,"state").addSystem(XG,"shader").addSystem(JG,"texture").addSystem(Nk,"geometry").addSystem(Rk,"framebuffer").addSystem(bG,"scissor").addSystem(IG,"stencil").addSystem(wG,"projection").addSystem(WG,"textureGC").addSystem(fk,"filter").addSystem(LG,"renderTexture").addSystem(vk,"batch"),r.initPlugins(nX.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",kF||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+GF+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+GF+" - "+e+" - http://www.pixijs.com/"),kF=!0),r.resize(r.options.width,r.options.height),r}var sX=function(){this.texArray=null,this.blend=0,this.type=TF.TRIANGLES,this.start=0,this.size=0,this.data=null},oX=(aX.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},aX);function aX(){this.elements=[],this.ids=[],this.count=0}var hX=(Object.defineProperty(uX.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(uX.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(uX.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(uX.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(uX.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),uX.prototype.view=function(t){return this[t+"View"]},uX.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},uX.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},uX);function uX(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var lX,cX=(BB(dX,lX=_k),dX.prototype.contextChange=function(){var t=this.renderer.gl;UF.PREFER_ENV===vF.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),UF.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=tG(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},dX.prototype.initFlushBuffers=function(){for(var t=dX._drawCallPool,e=dX._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new sX);for(;e.length<i;)e.push(new oX);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},dX.prototype.onPrerender=function(){this._flushId=0},dX.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},dX.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=dX._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++zB._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;zB._globalBatch=o},dX.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=dX._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=XF[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},dX.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},dX.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;UF.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},dX.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=dX._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},dX.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},dX.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),UF.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},dX.prototype.stop=function(){this.flush()},dX.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),lX.prototype.destroy.call(this)},dX.prototype.getAttributeBuffer=function(t){var e=HF(Math.ceil(t/8)),t=jF(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new hX(e*this.vertexSize*4)),t},dX.prototype.getIndexBuffer=function(t){var e=HF(Math.ceil(t/12)),r=jF(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},dX.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},dX._drawCallPool=[],dX._textureArrayPool=[],dX);function dX(t){var e=lX.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=aG.for2d(),e.size=4*UF.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var fX=(pX.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=ok.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new iG(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new bB,default:this.defaultGroupCache[t]};return new sG(this.programCache[t],i)},pX.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},pX);function pX(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var _X,yX=(BB(mX,_X=jM),mX);function mX(t){void 0===t&&(t=!1);var e=_X.call(this)||this;return e._buffer=new Y3(null,t,!1),e._indexBuffer=new Y3(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,SF.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,SF.FLOAT).addAttribute("aColor",e._buffer,4,!0,SF.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,SF.FLOAT).addIndex(e._indexBuffer),e}var vX="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",xX="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function gX(){}(gX.create=function(t){var e,t=Object.assign({vertex:vX,fragment:xX,geometryClass:yX,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return BB(o,e=cX),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new fX(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(gX,"defaultVertexSrc",{get:function(){return vX},enumerable:!1,configurable:!0}),Object.defineProperty(gX,"defaultFragmentTemplate",{get:function(){return xX},enumerable:!1,configurable:!0}),gX).create();var EX={};for(TX in g3)!function(t){Object.defineProperty(EX,t,{get:function(){return ZF("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),g3[t]}})}(TX);var TX,bX={};for(TX in tX)!function(t){Object.defineProperty(bX,t,{get:function(){return ZF("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),tX[t]}})}(TX);function AX(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var SX=/iPhone/i,IX=/iPod/i,RX=/iPad/i,OX=/\biOS-universal(?:.+)Mac\b/i,wX=/\bAndroid(?:.+)Mobile\b/i,CX=/Android/i,PX=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,NX=/Silk/i,MX=/Windows Phone/i,LX=/\bWindows(?:.+)ARM\b/i,DX=/BlackBerry/i,UX=/BB10/i,FX=/Opera Mini/i,BX=/\b(CriOS|Chrome)(?:.+)Mobile/i,kX=/Mobile(?:.+)Firefox\b/i;var GX=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(SX)&&!i(MX),ipod:i(IX),tablet:!i(SX)&&(i(RX)||AX(e))&&!i(MX),universal:i(OX),device:(i(SX)||i(IX)||i(RX)||i(OX)||AX(e))&&!i(MX)},amazon:{phone:i(PX),tablet:!i(PX)&&i(NX),device:i(PX)||i(NX)},android:{phone:!i(MX)&&i(PX)||!i(MX)&&i(wX),tablet:!i(MX)&&!i(PX)&&!i(wX)&&(i(NX)||i(CX)),device:!i(MX)&&(i(PX)||i(NX)||i(wX)||i(CX))||i(/\bokhttp\b/i)},windows:{phone:i(MX),tablet:i(LX),device:i(MX)||i(LX)},other:{blackberry:i(DX),blackberry10:i(UX),opera:i(FX),firefox:i(kX),chrome:i(BX),device:i(DX)||i(UX)||i(FX)||i(kX)||i(BX)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(jM={})[jM.WEBGL_LEGACY=0]="WEBGL_LEGACY",jM[jM.WEBGL=1]="WEBGL",jM[jM.WEBGL2=2]="WEBGL2",(jM={})[jM.UNKNOWN=0]="UNKNOWN",jM[jM.WEBGL=1]="WEBGL",jM[jM.CANVAS=2]="CANVAS",(jM={})[jM.COLOR=16384]="COLOR",jM[jM.DEPTH=256]="DEPTH",jM[jM.STENCIL=1024]="STENCIL",(jM={})[jM.NORMAL=0]="NORMAL",jM[jM.ADD=1]="ADD",jM[jM.MULTIPLY=2]="MULTIPLY",jM[jM.SCREEN=3]="SCREEN",jM[jM.OVERLAY=4]="OVERLAY",jM[jM.DARKEN=5]="DARKEN",jM[jM.LIGHTEN=6]="LIGHTEN",jM[jM.COLOR_DODGE=7]="COLOR_DODGE",jM[jM.COLOR_BURN=8]="COLOR_BURN",jM[jM.HARD_LIGHT=9]="HARD_LIGHT",jM[jM.SOFT_LIGHT=10]="SOFT_LIGHT",jM[jM.DIFFERENCE=11]="DIFFERENCE",jM[jM.EXCLUSION=12]="EXCLUSION",jM[jM.HUE=13]="HUE",jM[jM.SATURATION=14]="SATURATION",jM[jM.COLOR=15]="COLOR",jM[jM.LUMINOSITY=16]="LUMINOSITY",jM[jM.NORMAL_NPM=17]="NORMAL_NPM",jM[jM.ADD_NPM=18]="ADD_NPM",jM[jM.SCREEN_NPM=19]="SCREEN_NPM",jM[jM.NONE=20]="NONE",jM[jM.SRC_OVER=0]="SRC_OVER",jM[jM.SRC_IN=21]="SRC_IN",jM[jM.SRC_OUT=22]="SRC_OUT",jM[jM.SRC_ATOP=23]="SRC_ATOP",jM[jM.DST_OVER=24]="DST_OVER",jM[jM.DST_IN=25]="DST_IN",jM[jM.DST_OUT=26]="DST_OUT",jM[jM.DST_ATOP=27]="DST_ATOP",jM[jM.ERASE=26]="ERASE",jM[jM.SUBTRACT=28]="SUBTRACT",jM[jM.XOR=29]="XOR",(jM={})[jM.POINTS=0]="POINTS",jM[jM.LINES=1]="LINES",jM[jM.LINE_LOOP=2]="LINE_LOOP",jM[jM.LINE_STRIP=3]="LINE_STRIP",jM[jM.TRIANGLES=4]="TRIANGLES",jM[jM.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",jM[jM.TRIANGLE_FAN=6]="TRIANGLE_FAN",(jM={})[jM.RGBA=6408]="RGBA",jM[jM.RGB=6407]="RGB",jM[jM.ALPHA=6406]="ALPHA",jM[jM.LUMINANCE=6409]="LUMINANCE",jM[jM.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",jM[jM.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",jM[jM.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(jM={})[jM.TEXTURE_2D=3553]="TEXTURE_2D",jM[jM.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",jM[jM.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",jM[jM.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",jM[jM.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",jM[jM.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",jM[jM.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",jM[jM.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",jM[jM.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(jM={})[jM.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",jM[jM.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",jM[jM.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",jM[jM.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",jM[jM.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",jM[jM.FLOAT=5126]="FLOAT",jM[jM.HALF_FLOAT=36193]="HALF_FLOAT",(jM={})[jM.FLOAT=0]="FLOAT",jM[jM.INT=1]="INT",jM[jM.UINT=2]="UINT",(jM=P4=P4||{})[jM.NEAREST=0]="NEAREST",jM[jM.LINEAR=1]="LINEAR",(jM=O4=O4||{})[jM.CLAMP=33071]="CLAMP",jM[jM.REPEAT=10497]="REPEAT",jM[jM.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(jM=Z4=Z4||{})[jM.OFF=0]="OFF",jM[jM.POW2=1]="POW2",jM[jM.ON=2]="ON",jM[jM.ON_MANUAL=3]="ON_MANUAL",(jM={})[jM.NPM=0]="NPM",jM[jM.UNPACK=1]="UNPACK",jM[jM.PMA=2]="PMA",jM[jM.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",jM[jM.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",jM[jM.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(jM={})[jM.NO=0]="NO",jM[jM.YES=1]="YES",jM[jM.AUTO=2]="AUTO",jM[jM.BLEND=0]="BLEND",jM[jM.CLEAR=1]="CLEAR",jM[jM.BLIT=2]="BLIT",(jM=J4=J4||{})[jM.AUTO=0]="AUTO",jM[jM.MANUAL=1]="MANUAL",(jM=G4=G4||{}).LOW="lowp",jM.MEDIUM="mediump",jM.HIGH="highp",(jM={})[jM.NONE=0]="NONE",jM[jM.SCISSOR=1]="SCISSOR",jM[jM.STENCIL=2]="STENCIL",jM[jM.SPRITE=3]="SPRITE",(jM={})[jM.NONE=0]="NONE",jM[jM.LOW=2]="LOW",jM[jM.MEDIUM=4]="MEDIUM",jM[jM.HIGH=8]="HIGH";var XX,HX,VX,jX,YX,zX,WX,ZX,KX,qX,JX,QX,$X,tH,eH,rH,iH,nH,sH,oH,aH,hH={MIPMAP_TEXTURES:Z4.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(XX=32,VX=!0,(GX.tablet||GX.phone)&&(GX.apple.device&&(HX=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(HX[1],10)<11&&(VX=!1),GX.android.device&&(HX=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(HX[1],10)<7&&(VX=!1)),VX?XX:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:J4.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:O4.CLAMP,SCALE_MODE:P4.LINEAR,PRECISION_VERTEX:G4.HIGH,PRECISION_FRAGMENT:GX.apple.device?G4.HIGH:G4.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!GX.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};(jM=jX=jX||{})[jM.WEBGL_LEGACY=0]="WEBGL_LEGACY",jM[jM.WEBGL=1]="WEBGL",jM[jM.WEBGL2=2]="WEBGL2",(Z4=YX=YX||{})[Z4.UNKNOWN=0]="UNKNOWN",Z4[Z4.WEBGL=1]="WEBGL",Z4[Z4.CANVAS=2]="CANVAS",(J4=zX=zX||{})[J4.COLOR=16384]="COLOR",J4[J4.DEPTH=256]="DEPTH",J4[J4.STENCIL=1024]="STENCIL",(O4=WX=WX||{})[O4.NORMAL=0]="NORMAL",O4[O4.ADD=1]="ADD",O4[O4.MULTIPLY=2]="MULTIPLY",O4[O4.SCREEN=3]="SCREEN",O4[O4.OVERLAY=4]="OVERLAY",O4[O4.DARKEN=5]="DARKEN",O4[O4.LIGHTEN=6]="LIGHTEN",O4[O4.COLOR_DODGE=7]="COLOR_DODGE",O4[O4.COLOR_BURN=8]="COLOR_BURN",O4[O4.HARD_LIGHT=9]="HARD_LIGHT",O4[O4.SOFT_LIGHT=10]="SOFT_LIGHT",O4[O4.DIFFERENCE=11]="DIFFERENCE",O4[O4.EXCLUSION=12]="EXCLUSION",O4[O4.HUE=13]="HUE",O4[O4.SATURATION=14]="SATURATION",O4[O4.COLOR=15]="COLOR",O4[O4.LUMINOSITY=16]="LUMINOSITY",O4[O4.NORMAL_NPM=17]="NORMAL_NPM",O4[O4.ADD_NPM=18]="ADD_NPM",O4[O4.SCREEN_NPM=19]="SCREEN_NPM",O4[O4.NONE=20]="NONE",O4[O4.SRC_OVER=0]="SRC_OVER",O4[O4.SRC_IN=21]="SRC_IN",O4[O4.SRC_OUT=22]="SRC_OUT",O4[O4.SRC_ATOP=23]="SRC_ATOP",O4[O4.DST_OVER=24]="DST_OVER",O4[O4.DST_IN=25]="DST_IN",O4[O4.DST_OUT=26]="DST_OUT",O4[O4.DST_ATOP=27]="DST_ATOP",O4[O4.ERASE=26]="ERASE",O4[O4.SUBTRACT=28]="SUBTRACT",O4[O4.XOR=29]="XOR",(P4=ZX=ZX||{})[P4.POINTS=0]="POINTS",P4[P4.LINES=1]="LINES",P4[P4.LINE_LOOP=2]="LINE_LOOP",P4[P4.LINE_STRIP=3]="LINE_STRIP",P4[P4.TRIANGLES=4]="TRIANGLES",P4[P4.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",P4[P4.TRIANGLE_FAN=6]="TRIANGLE_FAN",(G4=KX=KX||{})[G4.RGBA=6408]="RGBA",G4[G4.RGB=6407]="RGB",G4[G4.ALPHA=6406]="ALPHA",G4[G4.LUMINANCE=6409]="LUMINANCE",G4[G4.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",G4[G4.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",G4[G4.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(jM=qX=qX||{})[jM.TEXTURE_2D=3553]="TEXTURE_2D",jM[jM.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",jM[jM.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",jM[jM.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",jM[jM.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",jM[jM.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",jM[jM.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",jM[jM.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",jM[jM.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(Z4=JX=JX||{})[Z4.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Z4[Z4.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Z4[Z4.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Z4[Z4.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Z4[Z4.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Z4[Z4.FLOAT=5126]="FLOAT",Z4[Z4.HALF_FLOAT=36193]="HALF_FLOAT",(J4=QX=QX||{})[J4.FLOAT=0]="FLOAT",J4[J4.INT=1]="INT",J4[J4.UINT=2]="UINT",(O4=$X=$X||{})[O4.NEAREST=0]="NEAREST",O4[O4.LINEAR=1]="LINEAR",(P4=tH=tH||{})[P4.CLAMP=33071]="CLAMP",P4[P4.REPEAT=10497]="REPEAT",P4[P4.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(G4=eH=eH||{})[G4.OFF=0]="OFF",G4[G4.POW2=1]="POW2",G4[G4.ON=2]="ON",G4[G4.ON_MANUAL=3]="ON_MANUAL",(jM=rH=rH||{})[jM.NPM=0]="NPM",jM[jM.UNPACK=1]="UNPACK",jM[jM.PMA=2]="PMA",jM[jM.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",jM[jM.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",jM[jM.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Z4=iH=iH||{})[Z4.NO=0]="NO",Z4[Z4.YES=1]="YES",Z4[Z4.AUTO=2]="AUTO",Z4[Z4.BLEND=0]="BLEND",Z4[Z4.CLEAR=1]="CLEAR",Z4[Z4.BLIT=2]="BLIT",(J4=nH=nH||{})[J4.AUTO=0]="AUTO",J4[J4.MANUAL=1]="MANUAL",(O4=sH=sH||{}).LOW="lowp",O4.MEDIUM="mediump",O4.HIGH="highp",(P4=oH=oH||{})[P4.NONE=0]="NONE",P4[P4.SCISSOR=1]="SCISSOR",P4[P4.STENCIL=2]="STENCIL",P4[P4.SPRITE=3]="SPRITE",(G4=aH=aH||{})[G4.NONE=0]="NONE",G4[G4.LOW=2]="LOW",G4[G4.MEDIUM=4]="MEDIUM",G4[G4.HIGH=8]="HIGH";var jM=r(14),uH=r.n(jM),lH={parse:_t.parse,format:_t.format,resolve:_t.resolve};hH.RETINA_PREFIX=/@([0-9\.]+)x/;var cH,dH=hH.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,fH="6.0.4";function pH(t,e){return(e=void 0===e?[]:e)[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}var _H=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[WX.NORMAL_NPM]=WX.NORMAL,t[WX.ADD_NPM]=WX.ADD,t[WX.SCREEN_NPM]=WX.SCREEN,e[WX.NORMAL]=WX.NORMAL_NPM,e[WX.ADD]=WX.ADD_NPM,e[WX.SCREEN]=WX.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();function yH(t,e){return 1===e?(255*e<<24)+t:0===e?0:(255*e<<24)+(((t>>16&255)*e+.5|0)<<16)+(((t>>8&255)*e+.5|0)<<8)+((255&t)*e+.5|0)}Float32Array,Uint32Array,Int32Array,Uint8Array;function mH(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function vH(t){return!(t&t-1||!t)}function xH(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}function gH(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}var EH=0;var TH={};function bH(t,e,r){var i;void 0===r&&(r=3),TH[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),TH[e]=!0)}var AH={},SH=Object.create(null),IH=Object.create(null);RH.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},RH.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},RH.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(RH.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(RH.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function RH(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||hH.RESOLUTION,this.resize(t,e)}var OH;function wH(t,e){t=hH.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var CH,PH=(NH.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},NH.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},NH.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},NH.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},NH.prototype.contains=function(t){return-1!==this.items.indexOf(t)},NH.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},NH.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(NH.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(NH.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),NH);function NH(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(PH.prototype,{dispatch:{value:PH.prototype.emit},run:{value:PH.prototype.emit}}),hH.TARGET_FPMS=.06,(Z4=CH=CH||{})[Z4.INTERACTION=50]="INTERACTION",Z4[Z4.HIGH=25]="HIGH",Z4[Z4.NORMAL=0]="NORMAL",Z4[Z4.LOW=-25]="LOW",Z4[Z4.UTILITY=-50]="UTILITY";var MH=(LH.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},LH.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},LH.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},LH.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},LH);function LH(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var DH=(UH.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},UH.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},UH.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},UH.prototype.add=function(t,e,r){return void 0===r&&(r=CH.NORMAL),this._addListener(new MH(t,e,r))},UH.prototype.addOnce=function(t,e,r){return void 0===r&&(r=CH.NORMAL),this._addListener(new MH(t,e,r,!0))},UH.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},UH.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(UH.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),UH.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},UH.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},UH.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},UH.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*hH.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(UH.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(UH.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,hH.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(UH.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(UH,"shared",{get:function(){var t;return UH._shared||((t=UH._shared=new UH).autoStart=!0,t._protected=!0),UH._shared},enumerable:!1,configurable:!0}),Object.defineProperty(UH,"system",{get:function(){var t;return UH._system||((t=UH._system=new UH).autoStart=!0,t._protected=!0),UH._system},enumerable:!1,configurable:!0}),UH);function UH(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new MH(null,null,1/0),this.deltaMS=1/hH.TARGET_FPMS,this.elapsedMS=1/hH.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}FH.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,CH.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?DH.shared:new DH,t.autoStart&&this.start()},FH.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function FH(){}var BH,kH=2*Math.PI,GH=180/Math.PI,XH=Math.PI/180;(J4=BH=BH||{})[J4.POLY=0]="POLY",J4[J4.RECT=1]="RECT",J4[J4.CIRC=2]="CIRC",J4[J4.ELIP=3]="ELIP",J4[J4.RREC=4]="RREC";var HH=(Object.defineProperty(VH.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(VH.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(VH.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(VH.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(VH,"EMPTY",{get:function(){return new VH(0,0,0,0)},enumerable:!1,configurable:!0}),VH.prototype.clone=function(){return new VH(this.x,this.y,this.width,this.height)},VH.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},VH.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},VH.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},VH.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},VH.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},VH.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},VH.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},VH.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},VH);function VH(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=BH.RECT}var jH=(YH.prototype.clone=function(){return new YH(this.x,this.y,this.radius)},YH.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},YH.prototype.getBounds=function(){return new HH(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},YH.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},YH);function YH(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=BH.CIRC}var zH=(WH.prototype.clone=function(){return new WH(this.x,this.y,this.width,this.height)},WH.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},WH.prototype.getBounds=function(){return new HH(this.x-this.width,this.y-this.height,this.width,this.height)},WH.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},WH);function WH(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=BH.ELIP}var ZH=(KH.prototype.clone=function(){var t=new KH(this.points.slice());return t.closeStroke=this.closeStroke,t},KH.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},KH.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"},KH);function KH(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=BH.POLY,this.closeStroke=!0}var qH=(JH.prototype.clone=function(){return new JH(this.x,this.y,this.width,this.height,this.radius)},JH.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},JH.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},JH);function JH(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=BH.RREC}var QH=($H.prototype.clone=function(){return new $H(this.x,this.y)},$H.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},$H.prototype.copyTo=function(t){return t.set(this.x,this.y),t},$H.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},$H.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},$H.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},$H);function $H(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var t4=(e4.prototype.clone=function(t,e){return new e4(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},e4.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},e4.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},e4.prototype.copyTo=function(t){return t.set(this._x,this._y),t},e4.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},e4.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(e4.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e4.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e4);function e4(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var r4=(i4.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},i4.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},i4.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},i4.prototype.apply=function(t,e){e=e||new QH;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},i4.prototype.applyInverse=function(t,e){e=e||new QH;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},i4.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},i4.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},i4.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},i4.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},i4.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},i4.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},i4.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(kH-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},i4.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},i4.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i4.prototype.clone=function(){var t=new i4;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i4.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i4.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},i4.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(i4,"IDENTITY",{get:function(){return new i4},enumerable:!1,configurable:!0}),Object.defineProperty(i4,"TEMP_MATRIX",{get:function(){return new i4},enumerable:!1,configurable:!0}),i4);function i4(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var n4=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],s4=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],o4=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],a4=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],h4=[],u4=[],l4=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];h4.push(e);for(var r=0;r<16;r++)for(var i=l4(n4[t]*n4[r]+o4[t]*s4[r]),n=l4(s4[t]*n4[r]+a4[t]*s4[r]),s=l4(n4[t]*o4[r]+o4[t]*a4[r]),o=l4(s4[t]*o4[r]+a4[t]*a4[r]),a=0;a<16;a++)if(n4[a]===i&&s4[a]===n&&o4[a]===s&&a4[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new r4;h.set(n4[t],s4[t],o4[t],a4[t],0,0),u4.push(h)}}();var c4={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return n4[t]},uY:function(t){return s4[t]},vX:function(t){return o4[t]},vY:function(t){return a4[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return h4[t][e]},sub:function(t,e){return h4[t][c4.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?c4.S:c4.N:2*Math.abs(e)<=Math.abs(t)?0<t?c4.E:c4.W:0<e?0<t?c4.SE:c4.SW:0<t?c4.NE:c4.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=u4[c4.inv(e)];e.tx=r,e.ty=i,t.append(e)}},d4=(f4.prototype.onChange=function(){this._localID++},f4.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},f4.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},f4.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},f4.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},f4.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(f4.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),f4.IDENTITY=new f4,f4);function f4(){this.worldTransform=new r4,this.localTransform=new r4,this.position=new t4(this.onChange,this,0,0),this.scale=new t4(this.onChange,this,1,1),this.pivot=new t4(this.onChange,this,0,0),this.skew=new t4(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}hH.PREFER_ENV=GX.any?jX.WEBGL:jX.WEBGL2,hH.STRICT_TEXTURE_CACHE=!1;var p4=[];function _4(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=p4.length-1;0<=n;--n){var s=p4[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var y4=function(t,e){return(y4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function m4(t,e){function r(){this.constructor=t}y4(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var v4=(x4.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},x4.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},x4.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(x4.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),x4.prototype.update=function(){this.destroyed||this.onUpdate.emit()},x4.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(x4.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(x4.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),x4.prototype.style=function(t,e,r){return!1},x4.prototype.dispose=function(){},x4.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},x4.test=function(t,e){return!1},x4);function x4(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new PH("setRealSize"),this.onUpdate=new PH("update"),this.onError=new PH("onError")}var g4,E4=(m4(T4,g4=v4),T4.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===rH.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},T4.prototype.dispose=function(){this.data=null},T4.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},T4);function T4(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=g4.call(this,e,i)||this).data=t,r}var b4,A4={scaleMode:$X.NEAREST,format:KX.RGBA,alphaMode:rH.NPM},S4=(m4(I4,b4=pt.a),Object.defineProperty(I4.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(I4.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),I4.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},I4.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},I4.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},I4.prototype._refreshPOT=function(){this.isPowerOfTwo=vH(this.realWidth)&&vH(this.realHeight)},I4.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},I4.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},I4.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},I4.prototype.onError=function(t){this.emit("error",this,t)},I4.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete IH[this.cacheId],delete SH[this.cacheId],this.cacheId=null),this.dispose(),I4.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},I4.prototype.dispose=function(){this.emit("dispose",this)},I4.prototype.castToBaseTexture=function(){return this},I4.from=function(t,e,r){void 0===r&&(r=hH.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++EH),t._pixiId),s=IH[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new I4(t,e)).cacheId=n,I4.addToCache(s,n)),s},I4.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new E4(t,{width:e,height:r}),t=t instanceof Float32Array?JX.FLOAT:JX.UNSIGNED_BYTE;return new I4(n,Object.assign(A4,i||{width:e,height:r,type:t}))},I4.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),IH[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),IH[e]=t)},I4.removeFromCache=function(t){if("string"==typeof t){var e=IH[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete IH[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete IH[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},I4._globalBatch=0,I4);function I4(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=b4.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof v4||((t=_4(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||hH.RESOLUTION,r.mipmap=void 0!==n?n:hH.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:hH.ANISOTROPIC_LEVEL,r.wrapMode=u||hH.WRAP_MODE,r.scaleMode=void 0!==o?o:hH.SCALE_MODE,r.format=l||KX.RGBA,r.type=c||JX.UNSIGNED_BYTE,r.target=d||qX.TEXTURE_2D,r.alphaMode=void 0!==i?i:rH.UNPACK,r.uid=++EH,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var R4,O4=(m4(w4,R4=v4),w4.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof v4?this.addResourceAt(t[r],r):this.addResourceAt(_4(t[r],e),r))},w4.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},w4.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},w4.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");R4.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},w4.prototype.unbind=function(t){R4.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},w4.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},w4);function w4(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=R4.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new S4;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var C4,P4=(m4(N4,C4=O4),N4.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},N4.prototype.bind=function(t){C4.prototype.bind.call(this,t),t.target=qX.TEXTURE_2D_ARRAY},N4.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},N4);function N4(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=C4.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var M4,L4=(m4(D4,M4=v4),D4.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(OH=OH||document.createElement("a")).href=t;var r=lH.parse(OH.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},D4.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===rH.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},D4.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),M4.prototype.update.call(this))},D4.prototype.dispose=function(){this.source=null},D4);function D4(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=M4.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var U4,F4=(m4(B4,U4=L4),B4.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},B4);function B4(t){return U4.call(this,t)||this}var k4,G4=(m4(X4,k4=O4),X4.prototype.bind=function(t){k4.prototype.bind.call(this,t),t.target=qX.TEXTURE_CUBE_MAP},X4.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=qX.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},X4.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<X4.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},X4.test=function(t){return Array.isArray(t)&&t.length===X4.SIDES},X4.SIDES=6,X4);function X4(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==X4.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=k4.call(this,6,{width:n,height:s})||this,a=0;a<X4.SIDES;a++)r.items[a].target=qX.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var H4,V4=(m4(j4,H4=L4),j4.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},j4.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===rH.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},j4.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return H4.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(H4.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},j4.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,H4.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},j4.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},j4);function j4(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,L4.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=H4.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:hH.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var Y4,jM=(m4(z4,Y4=L4),z4.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},z4.prototype._loadSvg=function(){var s=this,o=new Image;L4.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++EH,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},z4.getSize=function(t){var e=z4.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},z4.prototype.dispose=function(){Y4.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},z4.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},z4.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,z4);function z4(t,e){var r=this;return e=e||{},(r=Y4.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var W4,Z4=(m4(K4,W4=L4),K4.prototype.update=function(t){var e;this.destroyed||(e=DH.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(W4.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},K4.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},K4.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},K4.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},K4.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},K4.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(DH.shared.add(this.update,this),this._isConnectedToTicker=!0)},K4.prototype._onPlayStop=function(){this._isConnectedToTicker&&(DH.shared.remove(this.update,this),this._isConnectedToTicker=!1)},K4.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},K4.prototype.dispose=function(){this._isConnectedToTicker&&DH.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),W4.prototype.dispose.call(this)},Object.defineProperty(K4.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(DH.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(DH.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(K4.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),K4.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<K4.TYPES.indexOf(e)},K4.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],K4.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},K4);function K4(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];L4.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||K4.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=W4.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var q4,J4=(m4(Q4,q4=L4),Q4.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},Q4);function Q4(t){return q4.call(this,t)||this}p4.push(V4,J4,F4,Z4,jM,E4,G4,P4);var $4={__proto__:null,Resource:v4,BaseImageResource:L4,INSTALLED:p4,autoDetectResource:_4,AbstractMultiResource:O4,ArrayResource:P4,BufferResource:E4,CanvasResource:F4,CubeResource:G4,ImageResource:V4,SVGResource:jM,VideoResource:Z4,ImageBitmapResource:J4},P4=(tV.prototype.destroy=function(){this.renderer=null},tV);function tV(t){this.renderer=t}var eV,rV=(m4(iV,eV=E4),iV.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===rH.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},iV);function iV(){return null!==eV&&eV.apply(this,arguments)||this}var nV=(Object.defineProperty(sV.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),sV.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new S4(null,{scaleMode:$X.NEAREST,resolution:1,mipmap:eH.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},sV.prototype.addDepthTexture=function(t){return this.depthTexture=t||new S4(new rV(null,{width:this.width,height:this.height}),{scaleMode:$X.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:eH.OFF,format:KX.DEPTH_COMPONENT,type:JX.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},sV.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},sV.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},sV.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},sV.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},sV.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},sV);function sV(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new PH("disposeFramebuffer"),this.multisample=aH.NONE}var oV,aV=(m4(hV,oV=S4),hV.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},hV.prototype.dispose=function(){this.framebuffer.dispose(),oV.prototype.dispose.call(this)},hV.prototype.destroy=function(){oV.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},hV);function hV(t){var e=this,e=oV.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=eH.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new nV(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var uV=(lV.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=c4.add(r,c4.NW),this.x0=s+i*c4.uX(r),this.y0=e+n*c4.uY(r),r=c4.add(r,2),this.x1=s+i*c4.uX(r),this.y1=e+n*c4.uY(r),r=c4.add(r,2),this.x2=s+i*c4.uX(r),this.y2=e+n*c4.uY(r),r=c4.add(r,2),this.x3=s+i*c4.uX(r),this.y3=e+n*c4.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},lV.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},lV);function lV(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var cV,dV=new uV,fV=(m4(pV,cV=pt.a),pV.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},pV.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},pV.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&SH[t.url]&&pV.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,pV.removeFromCache(this),this.textureCacheIds=null},pV.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new pV(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},pV.prototype.updateUvs=function(){this._uvs===dV&&(this._uvs=new uV),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},pV.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=hH.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++EH),t._pixiId),s=SH[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=wH(t)),(s=new pV(new S4(t,e))).baseTexture.cacheId=n,S4.addToCache(s.baseTexture,n),pV.addToCache(s,n)),s},pV.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=pV.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},pV.fromBuffer=function(t,e,r,i){return new pV(S4.fromBuffer(t,e,r,i))},pV.fromLoader=function(t,e,r,i){t=new S4(t,Object.assign({scaleMode:hH.SCALE_MODE,resolution:wH(e)},i)),i=t.resource;i instanceof V4&&(i.url=e);var n=new pV(t);return S4.addToCache(n.baseTexture,r=r||e),pV.addToCache(n,r),r!==e&&(S4.addToCache(n.baseTexture,e),pV.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},pV.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),SH[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),SH[e]=t)},pV.removeFromCache=function(t){if("string"==typeof t){var e=SH[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete SH[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)SH[t.textureCacheIds[i]]===t&&delete SH[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(pV.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(pV.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(pV.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(pV.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(pV.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),pV.prototype.castToBaseTexture=function(){return this.baseTexture},pV);function pV(t,e,r,i,n,s){var o=cV.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new HH(0,0,1,1)),t instanceof pV&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=dV,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new QH(s.x,s.y):new QH(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function _V(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}fV.EMPTY=new fV(new S4),_V(fV.EMPTY),_V(fV.EMPTY.baseTexture),fV.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new fV(new S4(new F4(t)))}(),_V(fV.WHITE),_V(fV.WHITE.baseTexture);var yV,mV=(m4(vV,yV=fV),Object.defineProperty(vV.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),vV.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},vV.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},vV.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(bH("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new vV(new aV(t))},vV);function vV(t,e){e=yV.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var xV=(gV.prototype.createTexture=function(t,e){e=new aV(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new mV(e)},gV.prototype.getOptimalTexture=function(t,e,r){var i=gV.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=mH(t)))<<16|65535&(e=mH(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},gV.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},gV.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},gV.prototype.returnFilterTexture=function(t){this.returnTexture(t)},gV.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},gV.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=gV.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},gV.SCREEN_KEY="screen",gV);function gV(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var EV=(TV.prototype.destroy=function(){this.buffer=null},TV.from=function(t,e,r,i,n){return new TV(t,e,r,i,n)},TV);function TV(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=JX.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var bV=0,AV=(SV.prototype.update=function(t){this.data=t||this.data,this._updateID++},SV.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},SV.prototype.destroy=function(){this.dispose(),this.data=null},SV.from=function(t){return new SV(t=t instanceof Array?new Float32Array(t):t)},SV);function SV(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=bV++,this.disposeRunner=new PH("disposeBuffer")}function IV(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var RV={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var OV={5126:4,5123:2,5121:1},wV=0,CV={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},G4=(PV.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof AV||(e instanceof Array&&(e=new Float32Array(e)),e=new AV(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new EV(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},PV.prototype.getAttribute=function(t){return this.attributes[t]},PV.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},PV.prototype.addIndex=function(t){return t instanceof AV||(t instanceof Array&&(t=new Uint16Array(t)),t=new AV(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},PV.prototype.getIndex=function(){return this.indexBuffer},PV.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new AV;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*OV[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=IV(l);n[c]||(n[c]=new RV[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},PV.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},PV.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},PV.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},PV.prototype.clone=function(){for(var t=new PV,e=0;e<this.buffers.length;e++)t.buffers[e]=new AV(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new EV(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},PV.merge=function(t){for(var e=new PV,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new CV[IV(o.buffers[s].data)](i[s]),e.buffers[s]=new AV(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*OV[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},PV);function PV(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=wV++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new PH("disposeGeometry"),this.refCount=0}var NV,MV=(m4(LV,NV=G4),LV);function LV(){var t=NV.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var DV,UV=(m4(FV,DV=G4),FV.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},FV.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},FV);function FV(){var t=DV.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new AV(t.vertices),t.uvBuffer=new AV(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var BV=0,kV=(GV.prototype.update=function(){this.dirtyId++},GV.prototype.add=function(t,e,r){this.uniforms[t]=new GV(e,r)},GV.from=function(t,e){return new GV(t,e)},GV);function GV(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=BV++,this.static=!!e}var XV=(HV.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},HV);function HV(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new HH,this.destinationFrame=new HH,this.bindingSourceFrame=new HH,this.bindingDestinationFrame=new HH,this.filters=[],this.transform=null}var VV,jV=[new QH,new QH,new QH,new QH],YV=new r4,zV=(m4(WV,VV=P4),WV.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new XV,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(YV.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},WV.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,iH.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,iH.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,iH.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},WV.prototype.bindAndClear=function(t,e){void 0===e&&(e=iH.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===iH.CLEAR||e===iH.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},WV.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(ZX.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(ZX.TRIANGLE_STRIP))},WV.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(r4.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},WV.prototype.destroy=function(){this.texturePool.clear(!1)},WV.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},WV.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},WV.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},WV.prototype.emptyPool=function(){this.texturePool.clear(!0)},WV.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},WV.prototype.transformAABB=function(t,e){var r=jV[0],i=jV[1],n=jV[2],s=jV[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},WV.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?YV.copyFrom(n):YV.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},WV);function WV(t){var e=VV.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new xV,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new MV,e.quadUv=new UV,e.tempRect=new HH,e.activeState={},e.globalUniforms=new kV({outputFrame:new HH,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var ZV=(KV.prototype.flush=function(){},KV.prototype.destroy=function(){this.renderer=null},KV.prototype.start=function(){},KV.prototype.stop=function(){this.flush()},KV.prototype.render=function(t){},KV);function KV(t){this.renderer=t}var qV,JV=(m4(QV,qV=P4),QV.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},QV.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},QV.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},QV.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},QV.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},QV);function QV(t){var e=qV.call(this,t)||this;return e.emptyRenderer=new ZV(t),e.currentRenderer=e.emptyRenderer,e}var $V,tj=0,ej=(m4(rj,$V=P4),Object.defineProperty(rj.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),rj.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=tj++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},rj.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=tj++,this.renderer.runners.contextChange.emit(t)},rj.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},rj.prototype.createContext=function(t,e){var r;if(r=hH.PREFER_ENV>=jX.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},rj.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},rj.prototype.handleContextLost=function(t){t.preventDefault()},rj.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},rj.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},rj.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},rj.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},rj);function rj(t){var e=$V.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var ij,nj=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=aH.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},sj=new HH,oj=(m4(aj,ij=P4),aj.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new HH,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,hH.PREFER_ENV===jX.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},aj.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},aj.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(aj.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),aj.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=zX.COLOR|zX.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},aj.prototype.initFramebuffer=function(t){var e=this.gl,e=new nj(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},aj.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},aj.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},aj.prototype.detectSamples=function(t){var e=this.msaaSamples,r=aH.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?aH.NONE:r},aj.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new nV(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=sj).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},aj.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},aj.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},aj.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},aj.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new HH},aj);function aj(t){t=ij.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new nV(10,10),t.msaaSamples=null,t}var hj,uj=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},lj={5126:4,5123:2,5121:1},cj=(m4(dj,hj=P4),dj.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=hH.PREFER_ENV===jX.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},dj.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},dj.prototype.reset=function(){this.unbind()},dj.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},dj.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},dj.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},dj.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*lj[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*lj[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*lj[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new uj(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},dj.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},dj.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},dj.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},dj.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},dj.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},dj.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},dj);function dj(t){t=hj.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var fj=(pj.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=oH.NONE,this.autoDetect=!0),this._target=null},pj.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},pj);function pj(t){void 0===t&&(t=null),this.type=oH.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function _j(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function yj(t,e,r,i){var n=_j(t,t.VERTEX_SHADER,e),s=_j(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function mj(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function vj(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return mj(2*e);case"bvec3":return mj(3*e);case"bvec4":return mj(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var xj,gj={},Ej=gj;function Tj(){var t,e;return(Ej===gj||Ej&&Ej.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=hH.PREFER_ENV>=jX.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Ej=e),Ej}function bj(t,e,r){if("precision"===t.substring(0,9))return r!==sH.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===sH.HIGH&&r!==sH.HIGH?sH.MEDIUM:e)+" float;\n"+t}var Aj={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var Sj=null,Ij={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Rj(t,e){if(!Sj){var r=Object.keys(Ij);Sj={};for(var i=0;i<r.length;++i){var n=r[i];Sj[t[n]]=Ij[n]}}return Sj[e]}var Oj=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],wj={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Cj={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Pj,Nj=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Mj(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=Nj.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var Lj=0,Dj={},Uj=(Fj.prototype.extractData=function(t,e){var r=Tj();r?(e=yj(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},Fj.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=Rj(e,o.type),a={type:a,name:o.name,size:Aj[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},Fj.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=Rj(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:vj(h,s.size)}}return r},Object.defineProperty(Fj,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Fj,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),Fj.from=function(t,e,r){var i=t+e,n=AH[i];return n||(AH[i]=n=new Fj(t,e,r)),n},Fj);function Fj(t,e,r){void 0===r&&(r="pixi-shader"),this.id=Lj++,this.vertexSrc=t||Fj.defaultVertexSrc,this.fragmentSrc=e||Fj.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),Dj[r]?(Dj[r]++,r+="-"+Dj[r]):Dj[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=bj(this.vertexSrc,hH.PRECISION_VERTEX,sH.HIGH),this.fragmentSrc=bj(this.fragmentSrc,hH.PRECISION_FRAGMENT,(xj||(xj=sH.MEDIUM,(r=Tj())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),xj=r.precision?sH.HIGH:sH.MEDIUM)),xj))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var Bj=(kj.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},kj.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(kj.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),kj.from=function(t,e,r){return new kj(Uj.from(t,e),r)},kj);function kj(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof kV?e:new kV(e):new kV({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var Gj=(Object.defineProperty(Xj.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(Xj.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(Xj.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(Xj.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(Xj.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(Xj.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(Xj.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==WX.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Xj.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),Xj.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},Xj.for2d=function(){var t=new Xj;return t.depthTest=!1,t.blend=!0,t},Xj);function Xj(){this.data=0,this.blendMode=WX.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var Hj,jM=(m4(Vj,Hj=Bj),Vj.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(Vj.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Vj,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Vj,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),Vj);function Vj(t,e,r){var i=this,e=Uj.from(t||Vj.defaultVertexSrc,e||Vj.defaultFragmentSrc);return(i=Hj.call(this,e,r)||this).padding=0,i.resolution=hH.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new Gj,i}var jj=new r4,Yj=(Object.defineProperty(zj.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),zj.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},zj.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(jj.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(jj));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},zj);function zj(t,e){this._texture=t,this.mapCoord=new r4,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var Wj,Zj=(m4(Kj,Wj=jM),Kj.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Yj(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},Kj);function Kj(t){var e=this,r=new r4,e=Wj.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var qj,Jj=(m4(Qj,qj=P4),Qj.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},Qj.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new fj).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case oH.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case oH.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case oH.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},Qj.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case oH.SCISSOR:this.renderer.scissor.pop();break;case oH.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case oH.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},Qj.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=oH.SPRITE:(t.type=oH.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=oH.SCISSOR)))},Qj.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new Zj(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},Qj.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},Qj);function Qj(t){t=qj.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var $j,Z4=(m4(t5,$j=P4),t5.prototype.getStackLength=function(){return this.maskStack.length},t5.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t5.prototype._useCurrent=function(){},t5.prototype.destroy=function(){$j.prototype.destroy.call(this),this.maskStack=null},t5);function t5(t){t=$j.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var e5,r5=(m4(i5,e5=Z4),i5.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},i5.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},i5.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},i5.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},i5);function i5(t){t=e5.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var n5,s5=(m4(o5,n5=Z4),o5.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},o5.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},o5.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},o5.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},o5.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},o5);function o5(t){t=n5.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var a5,h5=(m4(u5,a5=P4),u5.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},u5.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},u5.prototype.setTransform=function(t){},u5);function u5(t){t=a5.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new r4,t.transform=null,t}var l5,c5=new HH,d5=new HH,f5=(m4(p5,l5=P4),p5.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(c5.width=t.frame.width,c5.height=t.frame.height,e=c5),r||(d5.x=t.frame.x,d5.y=t.frame.y,d5.width=e.width,d5.height=e.height,r=d5),n=i.framebuffer):(s=o.resolution,e||(c5.width=o.screen.width,c5.height=o.screen.height,e=c5),r||((r=c5).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},p5.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},p5.prototype.resize=function(){this.bind(null)},p5.prototype.reset=function(){this.bind(null)},p5);function p5(t){var e=l5.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new HH,e.destinationFrame=new HH,e.viewportFrame=new HH,e}var _5=(y5.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},y5);function y5(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var m5,v5=0,x5={textureCount:0},g5=(m4(E5,m5=P4),E5.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Pj)return Pj;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Pj=!0===t({a:"b"},"a","b")}catch(t){Pj=!1}return Pj}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},E5.prototype.contextChange=function(t){this.gl=t,this.reset()},E5.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(x5.textureCount=0,this.syncUniformGroup(t.uniformGroup,x5)),i},E5.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},E5.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},E5.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},E5.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<Oj.length;h++)if(Oj[h].test(n,o)){i.push(Oj[h].code(r,o)),a=!0;break}a||(s=(1===n.size?wj:Cj)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},E5.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},E5.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},E5.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=yj(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:vj(a.type,a.size)}}t=new _5(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},E5.prototype.reset=function(){this.program=null,this.shader=null},E5.prototype.destroy=function(){this.destroyed=!0},E5);function E5(t){t=m5.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=v5++,t}var T5,b5=(m4(A5,T5=P4),A5.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[WX.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.ADD]=[t.ONE,t.ONE],e[WX.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.NONE]=[0,0],e[WX.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[WX.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[WX.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[WX.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[WX.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[WX.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[WX.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[WX.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[WX.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[WX.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[WX.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},A5.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},A5.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},A5.prototype.setBlend=function(t){this.updateCheck(A5.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},A5.prototype.setOffset=function(t){this.updateCheck(A5.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},A5.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},A5.prototype.setDepthMask=function(t){this.gl.depthMask(t)},A5.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},A5.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},A5.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},A5.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},A5.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},A5.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},A5.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},A5.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},A5);function A5(t){t=T5.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=WX.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new Gj,t.defaultState.blend=!0,t}var S5,I5=(m4(R5,S5=P4),R5.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==nH.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},R5.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},R5.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},R5);function R5(t){t=S5.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=hH.GC_MAX_IDLE,t.checkCountMax=hH.GC_MAX_CHECK_COUNT,t.mode=hH.GC_MODE,t}var O5,w5=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},C5=(m4(P5,O5=P4),P5.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new w5(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new w5(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},P5.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},P5.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},P5.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},P5.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==QX.FLOAT&&this.renderer.texture.unbind(s)}},P5.prototype.initTexture=function(t){var e=new w5(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},P5.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===JX.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},P5.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==QX.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},P5.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&gH(this.managedTextures,t,1))},P5.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==eH.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=tH.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},P5.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==eH.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===$X.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===$X.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===$X.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===$X.LINEAR?i.LINEAR:i.NEAREST)},P5);function P5(t){t=O5.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new S4,t.hasIntegerTextures=!1,t}var N5,M5={__proto__:null,FilterSystem:zV,BatchSystem:JV,ContextSystem:ej,FramebufferSystem:oj,GeometrySystem:cj,MaskSystem:Jj,ScissorSystem:r5,StencilSystem:s5,ProjectionSystem:h5,RenderTextureSystem:f5,ShaderSystem:g5,StateSystem:b5,TextureGCSystem:I5,TextureSystem:C5},L5=new r4,J4=(m4(D5,N5=pt.a),D5.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(D5.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(D5.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),D5.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},D5.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=mV.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return L5.tx=-i.x,L5.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:L5,skipUpdateTransform:!!t.parent}),r},D5.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=YX.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(D5.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),pH(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(D5.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),D5);function D5(t,e){void 0===t&&(t=YX.UNKNOWN);var r=N5.call(this)||this;return e=Object.assign({},hH.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new HH(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||hH.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(bH("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var U5;m4(F5,U5=J4),F5.create=function(t){if(cH=void 0===cH?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:hH.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():cH)return new F5(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},F5.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},F5.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof mV?(bH("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},F5.prototype.resize=function(t,e){U5.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},F5.prototype.reset=function(){return this.runners.reset.emit(),this},F5.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},F5.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();U5.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(F5.prototype,"extract",{get:function(){return bH("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),F5.registerPlugin=function(t,e){(F5.__plugins=F5.__plugins||{})[t]=e};function F5(t){var e,r=U5.call(this,YX.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new PH("destroy"),contextChange:new PH("contextChange"),reset:new PH("reset"),update:new PH("update"),postrender:new PH("postrender"),prerender:new PH("prerender"),resize:new PH("resize")},r.globalUniforms=new kV({projectionMatrix:new r4},!0),r.addSystem(Jj,"mask").addSystem(ej,"context").addSystem(b5,"state").addSystem(g5,"shader").addSystem(C5,"texture").addSystem(cj,"geometry").addSystem(oj,"framebuffer").addSystem(r5,"scissor").addSystem(s5,"stencil").addSystem(h5,"projection").addSystem(I5,"textureGC").addSystem(zV,"filter").addSystem(f5,"renderTexture").addSystem(JV,"batch"),r.initPlugins(F5.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",dH||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+fH+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+fH+" - "+e+" - http://www.pixijs.com/"),dH=!0),r.resize(r.options.width,r.options.height),r}var B5=function(){this.texArray=null,this.blend=0,this.type=ZX.TRIANGLES,this.start=0,this.size=0,this.data=null},k5=(G5.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},G5);function G5(){this.elements=[],this.ids=[],this.count=0}var X5=(Object.defineProperty(H5.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(H5.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(H5.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(H5.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(H5.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),H5.prototype.view=function(t){return this[t+"View"]},H5.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},H5.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},H5);function H5(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var V5,j5=(m4(Y5,V5=ZV),Y5.prototype.contextChange=function(){var t=this.renderer.gl;hH.PREFER_ENV===jX.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),hH.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Mj(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},Y5.prototype.initFlushBuffers=function(){for(var t=Y5._drawCallPool,e=Y5._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new B5);for(;e.length<i;)e.push(new k5);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},Y5.prototype.onPrerender=function(){this._flushId=0},Y5.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},Y5.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=Y5._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++S4._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;S4._globalBatch=o},Y5.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=Y5._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=_H[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},Y5.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},Y5.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;hH.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},Y5.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=Y5._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},Y5.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},Y5.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),hH.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},Y5.prototype.stop=function(){this.flush()},Y5.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),V5.prototype.destroy.call(this)},Y5.prototype.getAttributeBuffer=function(t){var e=mH(Math.ceil(t/8)),t=xH(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new X5(e*this.vertexSize*4)),t},Y5.prototype.getIndexBuffer=function(t){var e=mH(Math.ceil(t/12)),r=xH(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},Y5.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s=e.uint32View,o=e.float32View,a=i/this.vertexSize,h=t.uvs,u=t.indices,l=t.vertexData,c=t._texture.baseTexture._batchLocation,e=Math.min(t.worldAlpha,1),d=e<1&&t._texture.baseTexture.alphaMode?yH(t._tintRGB,e):t._tintRGB+(255*e<<24),f=0;f<l.length;f+=2)o[i++]=l[f],o[i++]=l[f+1],o[i++]=h[f],o[i++]=h[f+1],s[i++]=d,o[i++]=c;for(f=0;f<u.length;f++)r[n++]=a+u[f]},Y5._drawCallPool=[],Y5._textureArrayPool=[],Y5);function Y5(t){var e=V5.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=Gj.for2d(),e.size=4*hH.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var z5=(W5.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=kV.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Uj(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new r4,default:this.defaultGroupCache[t]};return new Bj(this.programCache[t],i)},W5.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},W5);function W5(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var Z5,K5=(m4(q5,Z5=G4),q5);function q5(t){void 0===t&&(t=!1);var e=Z5.call(this)||this;return e._buffer=new AV(null,t,!1),e._indexBuffer=new AV(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,JX.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,JX.FLOAT).addAttribute("aColor",e._buffer,4,!0,JX.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,JX.FLOAT).addIndex(e._indexBuffer),e}var J5="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Q5="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function $5(){}($5.create=function(t){var e,t=Object.assign({vertex:J5,fragment:Q5,geometryClass:K5,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return m4(o,e=j5),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new z5(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty($5,"defaultVertexSrc",{get:function(){return J5},enumerable:!1,configurable:!0}),Object.defineProperty($5,"defaultFragmentTemplate",{get:function(){return Q5},enumerable:!1,configurable:!0}),$5).create();var tY={};for(eY in $4)!function(t){Object.defineProperty(tY,t,{get:function(){return bH("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),$4[t]}})}(eY);var eY,rY={};for(eY in M5)!function(t){Object.defineProperty(rY,t,{get:function(){return bH("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),M5[t]}})}(eY);hH.SORTABLE_CHILDREN=!1;var iY=(nY.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},nY.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},nY.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?HH.EMPTY:((t=t||new HH(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},nY.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},nY.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,t=t.ty,o=r*e.x+n*e.y+o,t=i*e.x+s*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},nY.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},nY.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},nY.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},nY.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},nY.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},nY.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},nY.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},nY.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},nY.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},nY.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},nY.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},nY.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},nY);function nY(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var sY=function(t,e){return(sY=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function oY(t,e){function r(){this.constructor=t}sY(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var aY,jM=(oY(hY,aY=pt.a),hY.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(hY.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},hY.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},hY.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},hY.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new HH),e=this._boundsRect),this._bounds.getRectangle(e)},hY.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new HH),t=this._localBoundsRect),this._localBounds||(this._localBounds=new iY);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},hY.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},hY.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},hY.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},hY.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},hY.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(hY.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new lY),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),hY.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},hY.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(hY.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(hY.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(hY.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(hY.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(hY.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(hY.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(hY.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(hY.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(hY.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(hY.prototype,"angle",{get:function(){return this.transform.rotation*GH},set:function(t){this.transform.rotation=t*XH},enumerable:!1,configurable:!0}),Object.defineProperty(hY.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(hY.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(hY.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),hY);function hY(){var t=aY.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new d4,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new iY,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var uY,lY=(oY(cY,uY=jM),cY);function cY(){var t=null!==uY&&uY.apply(this,arguments)||this;return t.sortDirty=null,t}function dY(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}jM.prototype.displayObjectUpdateTransform=jM.prototype.updateTransform;var fY,pY,_Y,Z4=(oY(yY,fY=jM),yY.prototype.onChildrenChange=function(t){},yY.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},yY.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},yY.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},yY.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},yY.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);gH(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},yY.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},yY.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,gH(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},yY.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,gH(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},yY.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},yY.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(dY),this.sortDirty=!1},yY.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},yY.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},yY.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=fY.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},yY.prototype._calculateBounds=function(){},yY.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},yY.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},yY.prototype._render=function(t){},yY.prototype.destroy=function(t){fY.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(yY.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(yY.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),yY);function yY(){var t=fY.call(this)||this;return t.children=[],t.sortableChildren=hH.SORTABLE_CHILDREN,t.sortDirty=!1,t}Z4.prototype.containerUpdateTransform=Z4.prototype.updateTransform,(P4=pY=pY||{}).MITER="miter",P4.BEVEL="bevel",P4.ROUND="round",(J4=_Y=_Y||{}).BUTT="butt",J4.ROUND="round",J4.SQUARE="square";var mY={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;t=Math.ceil(t/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},vY=(xY.prototype.clone=function(){var t=new xY;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},xY.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=fV.WHITE,this.matrix=null,this.visible=!1},xY.prototype.destroy=function(){this.texture=null,this.matrix=null},xY);function xY(){this.color=16777215,this.alpha=1,this.texture=fV.WHITE,this.matrix=null,this.visible=!1,this.reset()}var gY=function(t,e){return(gY=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function EY(t,e){function r(){this.constructor=t}gY(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var TY={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,i=t.holes,n=e.points,s=e.indices;if(6<=r.length){for(var o=[],a=0;a<i.length;a++){var h=i[a];o.push(r.length/2),r=r.concat(h.points)}var u=uH()(r,o,2);if(u){for(var l=n.length/2,a=0;a<u.length;a+=3)s.push(u[a]+l),s.push(u[a+1]+l),s.push(u[a+2]+l);for(a=0;a<r.length;a++)n.push(r[a])}}}},G4={build:function(t){var e,r,i=t.shape,n=t.points,s=i.x,o=i.y;if(n.length=0,r=t.type===BH.CIRC?(e=i.radius,i.radius):(e=(t=t.shape).width,t.height),0!==e&&0!==r){var a=Math.floor(30*Math.sqrt(i.radius))||Math.floor(15*Math.sqrt(e+r));a/=2.3;for(var h=2*Math.PI/a,u=0;u<a-.5;u++)n.push(s+Math.sin(-h*u)*e,o+Math.cos(-h*u)*r);n.push(n[0],n[1])}},triangulate:function(t,e){var r=t.points,i=e.points,n=e.indices,s=i.length/2,o=s,a=t.shape,h=t.matrix,e=a.x,a=a.y;i.push(t.matrix?h.a*e+h.c*a+h.tx:e,t.matrix?h.b*e+h.d*a+h.ty:a);for(var u=0;u<r.length;u+=2)i.push(r[u],r[u+1]),n.push(s++,o,s)}},jM={build:function(t){var e=t.shape,r=e.x,i=e.y,n=e.width,e=e.height,t=t.points;t.length=0,t.push(r,i,r+n,i,r+n,i+e,r,i+e)},triangulate:function(t,e){var r=t.points,i=e.points,t=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(t,1+t,2+t,1+t,2+t,3+t)}};function bY(t,e,r){return t+(e-t)*r}function AY(t,e,r,i,n,s,o){for(var a,h,u,l,c,d,f,p=o=void 0===o?[]:o,_=0;_<=20;++_)a=bY(t,r,f=_/20),h=bY(e,i,f),u=bY(r,n,f),l=bY(i,s,f),c=bY(a,u,f),d=bY(h,l,f),p.push(c,d);return p}P4={build:function(t){var e=t.shape,r=t.points,i=e.x,n=e.y,s=e.width,t=e.height,e=Math.max(0,Math.min(e.radius,Math.min(s,t)/2));r.length=0,e?(AY(i,n+e,i,n,i+e,n,r),AY(i+s-e,n,i+s,n,i+s,n+e,r),AY(i+s,n+t-e,i+s,n+t,i+s-e,n+t,r),AY(i+e,n+t,i,n+t,i,n+t-e,r)):r.push(i,n,i+s,n,i+s,n+t,i,n+t)},triangulate:function(t,e){for(var r=t.points,i=e.points,n=e.indices,s=i.length/2,o=uH()(r,null,2),a=0,h=o.length;a<h;a+=3)n.push(o[a]+s),n.push(o[a+1]+s),n.push(o[a+2]+s);for(a=0,h=r.length;a<h;a++)i.push(r[a],r[++a])}};function SY(t,e,r,i,n,s,o,a){var h,u=o?(h=i,-r):(h=-i,r),o=t+r*s+h,s=e+i*s+u;return a.push(t-r*n+h,e-i*n+u),a.push(o,s),2}function IY(t,e,r,i,n,s,o,a){var h=r-t,u=i-e,l=Math.atan2(h,u),c=Math.atan2(n-t,s-e);a&&l<c?l+=2*Math.PI:!a&&c<l&&(c+=2*Math.PI);var d=l,c=c-l,l=Math.abs(c),f=Math.sqrt(h*h+u*u),p=1+(15*l*Math.sqrt(f)/Math.PI>>0),_=c/p;if(d+=_,a){o.push(t,e),o.push(r,i);for(var y=1,m=d;y<p;y++,m+=_)o.push(t,e),o.push(t+Math.sin(m)*f,e+Math.cos(m)*f);o.push(t,e),o.push(n,s)}else{o.push(r,i),o.push(t,e);for(y=1,m=d;y<p;y++,m+=_)o.push(t+Math.sin(m)*f,e+Math.cos(m)*f),o.push(t,e);o.push(n,s),o.push(t,e)}return 2*p}function RY(t,e){(t.lineStyle.native?function(t,e){var r=0,i=t.shape,n=t.points||i.points,i=i.type!==BH.POLY||i.closeStroke;if(0!==n.length){var s=e.points,o=e.indices,a=n.length/2,e=s.length/2,h=e;for(s.push(n[0],n[1]),r=1;r<a;r++)s.push(n[2*r],n[2*r+1]),o.push(h,h+1),h++;i&&o.push(h,e)}}:function(t,e){var r=t.shape,i=t.points||r.points.slice(),n=e.closePointEps;if(0!==i.length){var s=t.lineStyle,o=new QH(i[0],i[1]),t=new QH(i[i.length-2],i[i.length-1]),r=r.type!==BH.POLY||r.closeStroke,n=Math.abs(o.x-t.x)<n&&Math.abs(o.y-t.y)<n;r&&(i=i.slice(),n&&(i.pop(),i.pop(),t.set(i[i.length-2],i[i.length-1])),n=.5*(o.x+t.x),S=.5*(t.y+o.y),i.unshift(n,S),i.push(n,S));var a,h,u=e.points,l=i.length/2,c=i.length,d=u.length/2,f=s.width/2,p=f*f,_=s.miterLimit*s.miterLimit,y=i[0],m=i[1],v=i[2],x=i[3],g=0,E=0,T=-(m-x),b=y-v,A=Math.sqrt(T*T+b*b);T/=A,b/=A,T*=f,b*=f;var S=s.alignment,I=2*(1-S),R=2*S;r||(s.cap===_Y.ROUND?c+=IY(y-T*(I-R)*.5,m-b*(I-R)*.5,y-T*I,m-b*I,y+T*R,m+b*R,u,!0)+2:s.cap===_Y.SQUARE&&(c+=SY(y,m,T,b,I,R,!0,u))),u.push(y-T*I,m-b*I),u.push(y+T*R,m+b*R);for(var O=1;O<l-1;++O){y=i[2*(O-1)],m=i[2*(O-1)+1],v=i[2*O],x=i[2*O+1],g=i[2*(O+1)],E=i[2*(O+1)+1],T=-(m-x),b=y-v,T/=A=Math.sqrt(T*T+b*b),b/=A,T*=f,b*=f,a=-(x-E),h=v-g,a/=A=Math.sqrt(a*a+h*h),h/=A,a*=f,h*=f;var w,C,P,N,M,L,D=v-y,U=m-x,F=v-g,B=E-x,k=U*F-B*D,G=k<0;Math.abs(k)<.1?(u.push(v-T*I,x-b*I),u.push(v+T*R,x+b*R)):(P=v+((w=(D*(L=(-a+g)*(-h+x)-(-a+v)*(-h+E))-F*(M=(-T+y)*(-b+x)-(-T+v)*(-b+m)))/k)-v)*I,N=x+((C=(B*M-U*L)/k)-x)*I,M=v-(w-v)*R,L=x-(C-x)*R,k=G?I:R,(C=(w-v)*(w-v)+(C-x)*(C-x))<=Math.min(D*D+U*U,F*F+B*B)+k*k*p?s.join===pY.BEVEL||_<C/p?(G?(u.push(P,N),u.push(v+T*R,x+b*R),u.push(P,N),u.push(v+a*R,x+h*R)):(u.push(v-T*I,x-b*I),u.push(M,L),u.push(v-a*I,x-h*I),u.push(M,L)),c+=2):s.join===pY.ROUND?G?(u.push(P,N),u.push(v+T*R,x+b*R),c+=IY(v,x,v+T*R,x+b*R,v+a*R,x+h*R,u,!0)+4,u.push(P,N),u.push(v+a*R,x+h*R)):(u.push(v-T*I,x-b*I),u.push(M,L),c+=IY(v,x,v-T*I,x-b*I,v-a*I,x-h*I,u,!1)+4,u.push(v-a*I,x-h*I),u.push(M,L)):(u.push(P,N),u.push(M,L)):(u.push(v-T*I,x-b*I),u.push(v+T*R,x+b*R),s.join===pY.BEVEL||_<C/p||(s.join===pY.ROUND?c+=G?IY(v,x,v+T*R,x+b*R,v+a*R,x+h*R,u,!0)+2:IY(v,x,v-T*I,x-b*I,v-a*I,x-h*I,u,!1)+2:(G?(u.push(M,L),u.push(M,L)):(u.push(P,N),u.push(P,N)),c+=2)),u.push(v-a*I,x-h*I),u.push(v+a*R,x+h*R),c+=2))}y=i[2*(l-2)],m=i[2*(l-2)+1],v=i[2*(l-1)],T=-(m-(x=i[2*(l-1)+1])),b=y-v,T/=A=Math.sqrt(T*T+b*b),b/=A,u.push(v-(T*=f)*I,x-(b*=f)*I),u.push(v+T*R,x+b*R),r||(s.cap===_Y.ROUND?c+=IY(v-T*(I-R)*.5,x-b*(I-R)*.5,v-T*I,x-b*I,v+T*R,x+b*R,u,!1)+2:s.cap===_Y.SQUARE&&(c+=SY(v,x,T,b,I,R,!1,u)));for(var X=e.indices,H=mY.epsilon*mY.epsilon,O=d;O<c+d-2;++O)y=u[2*O],m=u[2*O+1],v=u[2*(O+1)],x=u[2*(O+1)+1],g=u[2*(O+2)],E=u[2*(O+2)+1],Math.abs(y*(x-E)+v*(E-m)+g*(m-x))<H||X.push(O,O+1,O+2)}})(t,e)}var OY=(wY.curveTo=function(t,e,r,i,n,s){var o=s[s.length-2],a=s[s.length-1]-e,h=o-t,u=i-e,l=r-t,c=Math.abs(a*l-h*u);if(c<1e-8||0===n)return s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e),null;var d=a*a+h*h,f=u*u+l*l,o=a*u+h*l,i=n*Math.sqrt(d)/c,r=n*Math.sqrt(f)/c,s=i*o/d,c=r*o/f,d=i*l+r*h,o=i*u+r*a,f=l*(i+c),c=u*(i+c);return{cx:d+t,cy:o+e,radius:n,startAngle:Math.atan2(a*(r+s)-o,h*(r+s)-d),endAngle:Math.atan2(c-o,f-d),anticlockwise:l*a<h*u}},wY.arc=function(t,e,r,i,n,s,o,a,h){for(var u=o-s,o=mY._segmentsCount(Math.abs(u)*n,40*Math.ceil(Math.abs(u)/kH)),l=u/(2*o),c=2*l,d=Math.cos(l),f=Math.sin(l),p=o-1,_=p%1/p,y=0;y<=p;++y){var m=l+s+c*(y+_*y),v=Math.cos(m),m=-Math.sin(m);h.push((d*v+f*m)*n+r,(d*-m+f*v)*n+i)}},wY);function wY(){}var CY=(PY.curveLength=function(t,e,r,i,n,s,o,a){for(var h,u,l,c,d,f,p,_,y,m,v=0,x=t,g=e,E=1;E<=10;++E)y=x-(p=(f=(d=(c=1-(h=E/10))*c)*c)*t+3*d*h*r+3*c*(u=h*h)*n+(l=u*h)*o),m=g-(_=f*e+3*d*h*i+3*c*u*s+l*a),x=p,g=_,v+=Math.sqrt(y*y+m*m);return v},PY.curveTo=function(t,e,r,i,n,s,o){var a=o[o.length-2],h=o[o.length-1];o.length-=2;var u,l,c,d,f,p=mY._segmentsCount(PY.curveLength(a,h,t,e,r,i,n,s));o.push(a,h);for(var _,y=1;y<=p;++y)o.push((c=(l=(u=1-(_=y/p))*u)*u)*a+3*l*_*t+3*u*(d=_*_)*r+(f=d*_)*n,c*h+3*l*_*e+3*u*d*i+f*s)},PY);function PY(){}var NY=(MY.curveLength=function(t,e,r,i,n,s){var o=t-2*r+n,a=e-2*i+s,n=2*r-2*t,s=2*i-2*e,r=4*(o*o+a*a),t=4*(o*n+a*s),i=n*n+s*s,e=2*Math.sqrt(r+t+i),o=Math.sqrt(r),a=2*r*o,n=2*Math.sqrt(i),s=t/o;return(a*e+o*t*(e-n)+(4*i*r-t*t)*Math.log((2*o+s+e)/(s+n)))/(4*a)},MY.curveTo=function(t,e,r,i,n){for(var s=n[n.length-2],o=n[n.length-1],a=mY._segmentsCount(MY.curveLength(s,o,t,e,r,i)),h=0,u=0,l=1;l<=a;++l){var c=l/a;n.push((h=s+(t-s)*c)+(t+(r-t)*c-h)*c,(u=o+(e-o)*c)+(e+(i-e)*c-u)*c)}},MY);function MY(){}var LY=(DY.prototype.begin=function(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r},DY.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},DY.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},DY);function DY(){this.reset()}var UY=((J4={})[BH.POLY]=TY,J4[BH.CIRC]=G4,J4[BH.ELIP]=G4,J4[BH.RECT]=jM,J4[BH.RREC]=P4,J4),FY=[],BY=[],kY=(GY.prototype.clone=function(){return new GY(this.shape,this.fillStyle,this.lineStyle,this.matrix)},GY.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},GY);function GY(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=null),void 0===i&&(i=null),this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=i,this.type=t.type,this.points=[],this.holes=[]}var XY,HY=new QH,VY=new iY,jY=(EY(YY,XY=K5),Object.defineProperty(YY.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),YY.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0;for(var t=this.textureIds.length=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),BY.push(this.drawCalls[t]);for(t=this.drawCalls.length=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),FY.push(e)}this.batches.length=0},YY.prototype.clear=function(){return 0<this.graphicsData.length&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},YY.prototype.drawShape=function(t,e,r,i){i=new kY(t,e=void 0===e?null:e,r=void 0===r?null:r,i=void 0===i?null:i);return this.graphicsData.push(i),this.dirty++,this},YY.prototype.drawHole=function(t,e){if(!this.graphicsData.length)return null;t=new kY(t,null,null,e=void 0===e?null:e),e=this.graphicsData[this.graphicsData.length-1];return t.lineStyle=e.lineStyle,e.holes.push(t),this.dirty++,this},YY.prototype.destroy=function(){XY.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},YY.prototype.containsPoint=function(t){for(var e=this.graphicsData,r=0;r<e.length;++r){var i=e[r];if(i.fillStyle.visible&&(i.shape&&(i.matrix?i.matrix.applyInverse(t,HY):HY.copyFrom(t),i.shape.contains(HY.x,HY.y)))){var n=!1;if(i.holes)for(var s=0;s<i.holes.length;s++)if(i.holes[s].shape.contains(HY.x,HY.y)){n=!0;break}if(!n)return!0}}return!1},YY.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,r=this.graphicsData,i=null,n=null;0<this.batches.length&&(n=(i=this.batches[this.batches.length-1]).style);for(var s=this.shapeIndex;s<r.length;s++){this.shapeIndex++;var o=r[s],a=o.fillStyle,h=o.lineStyle;UY[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix);for(var u=0;u<2;u++){var l,c,d,f=0===u?a:h;f.visible&&(d=f.texture.baseTexture,l=this.indices.length,c=this.points.length/2,d.wrapMode=tH.REPEAT,0===u?this.processFill(o):this.processLine(o),0!=(d=this.points.length/2-c)&&(i&&!this._compareStyles(n,f)&&(i.end(l,c),i=null),i||((i=FY.pop()||new LY).begin(f,l,c),this.batches.push(i),n=f),this.addUvs(this.points,e,f.texture,c,d,f.matrix)))}}var p=this.indices.length,_=this.points.length/2;i&&i.end(p,_),0!==this.batches.length?(this.indicesUint16&&this.indices.length===this.indicesUint16.length?this.indicesUint16.set(this.indices):this.indicesUint16=new(65535<_&&t?Uint32Array:Uint16Array)(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()):this.batchable=!0}}else this.batchable=!0},YY.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},YY.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var r=this.graphicsData[t],i=r.fillStyle,r=r.lineStyle;if(i&&!i.texture.baseTexture.valid)return!1;if(r&&!r.texture.baseTexture.valid)return!1}return!0},YY.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,r=t.length;e<r;e++)for(var i=t[e],n=0;n<i.size;n++){var s=i.start+n;this.indicesUint16[s]=this.indicesUint16[s]-i.attribStart}},YY.prototype.isBatchable=function(){if(131070<this.points.length)return!1;for(var t=this.batches,e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*YY.BATCHABLE_SIZE},YY.prototype.buildDrawCalls=function(){for(var t=++S4._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),BY.push(this.drawCalls[e]);this.drawCalls.length=0;var r=this.colors,i=this.textureIds,n=BY.pop();n||((n=new B5).texArray=new k5),n.texArray.count=0,n.start=0,n.size=0,n.type=ZX.TRIANGLES;var s,o=0,a=null,h=!1,u=ZX.TRIANGLES,l=0;this.drawCalls.push(n);for(e=0;e<this.batches.length;e++){var c=this.batches[e],d=c.style,f=d.texture.baseTexture;h!==!!d.native&&(u=(h=!!d.native)?ZX.LINES:ZX.TRIANGLES,a=null,o=8,t++),a!==f&&(a=f)._batchEnabled!==t&&(8===o&&(t++,(o=0)<n.size&&((n=BY.pop())||((n=new B5).texArray=new k5),this.drawCalls.push(n)),n.start=l,n.size=0,n.texArray.count=0,n.type=u),f.touched=1,f._batchEnabled=t,f._batchLocation=o,f.wrapMode=tH.REPEAT,n.texArray.elements[n.texArray.count++]=f,o++),n.size+=c.size,l+=c.size,s=f._batchLocation,this.addColors(r,d.color,d.alpha,c.attribSize),this.addTextureIds(i,s,c.attribSize)}S4._globalBatch=t,this.packAttributes()},YY.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,r=this.colors,i=this.textureIds,n=new ArrayBuffer(3*t.length*4),s=new Float32Array(n),o=new Uint32Array(n),a=0,h=0;h<t.length/2;h++)s[a++]=t[2*h],s[a++]=t[2*h+1],s[a++]=e[2*h],s[a++]=e[2*h+1],o[a++]=r[h],s[a++]=i[h];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)},YY.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),TY.triangulate(t,this)):UY[t.type].triangulate(t,this)},YY.prototype.processLine=function(t){RY(t,this);for(var e=0;e<t.holes.length;e++)RY(t.holes[e],this)},YY.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var r=t[e];UY[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}},YY.prototype.calculateBounds=function(){var t=this._bounds,e=VY,r=r4.IDENTITY;this._bounds.clear(),e.clear();for(var i=0;i<this.graphicsData.length;i++){var n=this.graphicsData[i],s=n.shape,o=n.type,a=n.lineStyle,h=n.matrix||r4.IDENTITY,u=0;a&&a.visible&&(n=a.alignment,u=a.width,o===BH.POLY?u*=.5+Math.abs(.5-n):u*=Math.max(0,n)),r!==h&&(e.isEmpty()||(t.addBoundsMatrix(e,r),e.clear()),r=h),o===BH.RECT||o===BH.RREC?e.addFramePad(s.x,s.y,s.x+s.width,s.y+s.height,u,u):o===BH.CIRC?e.addFramePad(s.x,s.y,s.x,s.y,s.radius+u,s.radius+u):o===BH.ELIP?e.addFramePad(s.x,s.y,s.x,s.y,s.width+u,s.height+u):t.addVerticesMatrix(r,s.points,0,s.points.length,u,u)}e.isEmpty()||t.addBoundsMatrix(e,r),t.pad(this.boundsPadding,this.boundsPadding)},YY.prototype.transformPoints=function(t,e){for(var r=0;r<t.length/2;r++){var i=t[2*r],n=t[2*r+1];t[2*r]=e.a*i+e.c*n+e.tx,t[2*r+1]=e.b*i+e.d*n+e.ty}},YY.prototype.addColors=function(t,e,r,i){for(var n=yH((e>>16)+(65280&e)+((255&e)<<16),r);0<i--;)t.push(n)},YY.prototype.addTextureIds=function(t,e,r){for(;0<r--;)t.push(e)},YY.prototype.addUvs=function(t,e,r,i,n,s){void 0===s&&(s=null);for(var o=0,a=e.length,h=r.frame;o<n;){var u,l=t[2*(i+o)],c=t[2*(i+o)+1];s&&(u=s.a*l+s.c*c+s.tx,c=s.b*l+s.d*c+s.ty,l=u),o++,e.push(l/h.width,c/h.height)}var d=r.baseTexture;(h.width<d.width||h.height<d.height)&&this.adjustUvs(e,r,a,n)},YY.prototype.adjustUvs=function(t,e,r,i){for(var n=e.baseTexture,s=r+2*i,e=e.frame,o=e.width/n.width,a=e.height/n.height,h=e.x/e.width,u=e.y/e.height,l=Math.floor(t[r]+1e-6),c=Math.floor(t[r+1]+1e-6),d=r+2;d<s;d+=2)l=Math.min(l,Math.floor(t[d]+1e-6)),c=Math.min(c,Math.floor(t[d+1]+1e-6));h-=l,u-=c;for(d=r;d<s;d+=2)t[d]=(t[d]+h)*o,t[d+1]=(t[d+1]+u)*a},YY.BATCHABLE_SIZE=100,YY);function YY(){var t=XY.call(this)||this;return t.uvsFloat32=null,t.indicesUint16=null,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.dirty=0,t.batchDirty=-1,t.cacheDirty=-1,t.clearDirty=0,t.drawCalls=[],t.batches=[],t.shapeIndex=0,t._bounds=new iY,t.boundsDirty=-1,t.boundsPadding=0,t.batchable=!1,t.indicesUint16=null,t.uvsFloat32=null,t.closePointEps=1e-4,t}var zY,WY=(EY(ZY,zY=vY),ZY.prototype.clone=function(){var t=new ZY;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},ZY.prototype.reset=function(){zY.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},ZY);function ZY(){var t=null!==zY&&zY.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=_Y.BUTT,t.join=pY.MITER,t.miterLimit=10,t}var KY,qY=new Float32Array(3),JY={},QY=(EY($Y,KY=Z4),Object.defineProperty($Y.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),$Y.prototype.clone=function(){return this.finishPoly(),new $Y(this._geometry)},Object.defineProperty($Y.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty($Y.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty($Y.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty($Y.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),$Y.prototype.lineStyle=function(t,e,r,i,n){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=.5),void 0===n&&(n=!1),this.lineTextureStyle(t="number"==typeof(t=void 0===t?null:t)?{width:t,color:e,alpha:r,alignment:i,native:n}:t)},$Y.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:fV.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:_Y.BUTT,join:pY.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=0<t.width&&0<t.alpha;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},$Y.prototype.startPoly=function(){var t,e;this.currentPath?(t=this.currentPath.points,2<(e=this.currentPath.points.length)&&(this.drawShape(this.currentPath),this.currentPath=new ZH,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))):(this.currentPath=new ZH,this.currentPath.closeStroke=!1)},$Y.prototype.finishPoly=function(){this.currentPath&&(2<this.currentPath.points.length?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},$Y.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},$Y.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var r=this.currentPath.points,i=r[r.length-2],n=r[r.length-1];return i===t&&n===e||r.push(t,e),this},$Y.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},$Y.prototype.quadraticCurveTo=function(t,e,r,i){this._initCurve();var n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),NY.curveTo(t,e,r,i,n),this},$Y.prototype.bezierCurveTo=function(t,e,r,i,n,s){return this._initCurve(),CY.curveTo(t,e,r,i,n,s,this.currentPath.points),this},$Y.prototype.arcTo=function(t,e,r,i,n){this._initCurve(t,e);var s=this.currentPath.points,t=OY.curveTo(t,e,r,i,n,s);return t&&(e=t.cx,r=t.cy,i=t.radius,n=t.startAngle,s=t.endAngle,t=t.anticlockwise,this.arc(e,r,i,n,s,t)),this},$Y.prototype.arc=function(t,e,r,i,n,s){if(i===n)return this;if(!(s=void 0===s?!1:s)&&n<=i?n+=kH:s&&i<=n&&(i+=kH),0==n-i)return this;var o,a,h=t+Math.cos(i)*r,u=e+Math.sin(i)*r,l=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;return c?(o=Math.abs(c[c.length-2]-h),a=Math.abs(c[c.length-1]-u),o<l&&a<l||c.push(h,u)):(this.moveTo(h,u),c=this.currentPath.points),OY.arc(h,u,t,e,r,i,n,s,c),this},$Y.prototype.beginFill=function(t,e){return this.beginTextureFill({texture:fV.WHITE,color:t=void 0===t?0:t,alpha:e=void 0===e?1:e})},$Y.prototype.beginTextureFill=function(t){t=Object.assign({texture:fV.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=0<t.alpha;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},$Y.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},$Y.prototype.drawRect=function(t,e,r,i){return this.drawShape(new HH(t,e,r,i))},$Y.prototype.drawRoundedRect=function(t,e,r,i,n){return this.drawShape(new qH(t,e,r,i,n))},$Y.prototype.drawCircle=function(t,e,r){return this.drawShape(new jH(t,e,r))},$Y.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new zH(t,e,r,i))},$Y.prototype.drawPolygon=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=!0,n=e[0],n=n.points?(i=n.closeStroke,n.points):Array.isArray(e[0])?e[0]:e,n=new ZH(n);return n.closeStroke=i,this.drawShape(n),this},$Y.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},$Y.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},$Y.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==BH.RECT||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},$Y.prototype._render=function(t){this.finishPoly();var e=this._geometry,r=t.context.supports.uint32Indices;e.updateBatches(r),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},$Y.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(var i=0;i<r;i++){var n=t.batches[i],s=n.style.color,o=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),n={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*n.start,n.size),uvs:a,_batchRGB:pH(s),_tintRGB:s,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[i]=n}},$Y.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,r=this.batches.length;e<r;e++){var i=this.batches[e];i.worldAlpha=this.worldAlpha*i.alpha,t.plugins[this.pluginName].render(i)}}},$Y.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),r=this._geometry,i=this.tint,n=this.worldAlpha,s=e.uniforms,o=r.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(i>>16&255)/255*n,s.tint[1]=(i>>8&255)/255*n,s.tint[2]=(255&i)/255*n,s.tint[3]=n,t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(var a=0,h=o.length;a<h;a++)this._renderDrawCallDirect(t,r.drawCalls[a])},$Y.prototype._renderDrawCallDirect=function(t,e){for(var r=e.texArray,i=e.type,n=e.size,e=e.start,s=r.count,o=0;o<s;o++)t.texture.bind(r.elements[o],o);t.geometry.draw(i,n,e)},$Y.prototype._resolveDirectShader=function(t){var e=this.shader,r=this.pluginName;if(!e){if(!JY[r]){for(var i=t.plugins.batch.MAX_TEXTURES,n=new Int32Array(i),s=0;s<i;s++)n[s]=s;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new r4,default:kV.from({uSamplers:n},!0)},t=t.plugins[r]._shader.program;JY[r]=new Bj(t,o)}e=JY[r]}return e},$Y.prototype._calculateBounds=function(){this.finishPoly();var t,e,r,i=this._geometry;i.graphicsData.length&&(t=(r=i.bounds).minX,e=r.minY,i=r.maxX,r=r.maxY,this._bounds.addFrame(this.transform,t,e,i,r))},$Y.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,$Y._TEMP_POINT),this._geometry.containsPoint($Y._TEMP_POINT)},$Y.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=pH(this.tint,qY),e=0;e<this.batches.length;e++){var r=this.batches[e],i=r._batchRGB,i=(t[0]*i[0]*255<<16)+(t[1]*i[1]*255<<8)+(0|t[2]*i[2]*255);r._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}},$Y.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var t=this.transform.worldTransform,e=t.a,r=t.b,i=t.c,n=t.d,s=t.tx,o=t.ty,a=this._geometry.points,h=this.vertexData,u=0,l=0;l<a.length;l+=2){var c=a[l],d=a[l+1];h[u++]=e*c+i*d+s,h[u++]=n*d+r*c+o}}},$Y.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},$Y.prototype.setMatrix=function(t){return this._matrix=t,this},$Y.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},$Y.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},$Y.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,KY.prototype.destroy.call(this,t)},$Y._TEMP_POINT=new QH,$Y);function $Y(t){void 0===t&&(t=null);var e=KY.call(this)||this;return e._geometry=t||new jY,e._geometry.refCount++,e.shader=null,e.state=Gj.for2d(),e._fillStyle=new vY,e._lineStyle=new WY,e._matrix=null,e._holeMode=!1,e.currentPath=null,e.batches=[],e.batchTint=-1,e.batchDirty=-1,e.vertexData=null,e.pluginName="batch",e._transformID=-1,e.tint=16777215,e.blendMode=WX.NORMAL,e}UF.SORTABLE_CHILDREN=!1;var t6=(e6.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e6.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e6.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?fB.EMPTY:((t=t||new fB(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},e6.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},e6.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,t=t.ty,o=r*e.x+n*e.y+o,t=i*e.x+s*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},e6.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},e6.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},e6.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},e6.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},e6.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},e6.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},e6.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},e6.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},e6.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},e6.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},e6.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},e6.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},e6);function e6(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var r6=function(t,e){return(r6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function i6(t,e){function r(){this.constructor=t}r6(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var n6,P4=(i6(s6,n6=pt.a),s6.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(s6.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},s6.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},s6.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},s6.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new fB),e=this._boundsRect),this._bounds.getRectangle(e)},s6.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new fB),t=this._localBoundsRect),this._localBounds||(this._localBounds=new t6);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},s6.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},s6.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},s6.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},s6.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},s6.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(s6.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new a6),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),s6.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},s6.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(s6.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(s6.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(s6.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(s6.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(s6.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(s6.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(s6.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(s6.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(s6.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(s6.prototype,"angle",{get:function(){return this.transform.rotation*cB},set:function(t){this.transform.rotation=t*dB},enumerable:!1,configurable:!0}),Object.defineProperty(s6.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(s6.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(s6.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),s6);function s6(){var t=n6.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new MB,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new t6,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var o6,a6=(i6(h6,o6=P4),h6);function h6(){var t=null!==o6&&o6.apply(this,arguments)||this;return t.sortDirty=null,t}function u6(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}P4.prototype.displayObjectUpdateTransform=P4.prototype.updateTransform;var l6,c6,d6,f6,p6,_6,y6,m6,v6,x6,g6,E6,T6,b6,A6,S6,I6,R6,O6,w6=(i6(C6,l6=P4),C6.prototype.onChildrenChange=function(t){},C6.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},C6.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},C6.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},C6.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},C6.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);YF(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},C6.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},C6.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,YF(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},C6.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,YF(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},C6.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},C6.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(u6),this.sortDirty=!1},C6.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},C6.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},C6.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=l6.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},C6.prototype._calculateBounds=function(){},C6.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},C6.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},C6.prototype._render=function(t){},C6.prototype.destroy=function(t){l6.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(C6.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(C6.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),C6);function C6(){var t=l6.call(this)||this;return t.children=[],t.sortableChildren=UF.SORTABLE_CHILDREN,t.sortDirty=!1,t}w6.prototype.containerUpdateTransform=w6.prototype.updateTransform,(P4=c6=c6||{})[P4.WEBGL_LEGACY=0]="WEBGL_LEGACY",P4[P4.WEBGL=1]="WEBGL",P4[P4.WEBGL2=2]="WEBGL2",(P4=d6=d6||{})[P4.UNKNOWN=0]="UNKNOWN",P4[P4.WEBGL=1]="WEBGL",P4[P4.CANVAS=2]="CANVAS",(P4=f6=f6||{})[P4.COLOR=16384]="COLOR",P4[P4.DEPTH=256]="DEPTH",P4[P4.STENCIL=1024]="STENCIL",(P4=p6=p6||{})[P4.NORMAL=0]="NORMAL",P4[P4.ADD=1]="ADD",P4[P4.MULTIPLY=2]="MULTIPLY",P4[P4.SCREEN=3]="SCREEN",P4[P4.OVERLAY=4]="OVERLAY",P4[P4.DARKEN=5]="DARKEN",P4[P4.LIGHTEN=6]="LIGHTEN",P4[P4.COLOR_DODGE=7]="COLOR_DODGE",P4[P4.COLOR_BURN=8]="COLOR_BURN",P4[P4.HARD_LIGHT=9]="HARD_LIGHT",P4[P4.SOFT_LIGHT=10]="SOFT_LIGHT",P4[P4.DIFFERENCE=11]="DIFFERENCE",P4[P4.EXCLUSION=12]="EXCLUSION",P4[P4.HUE=13]="HUE",P4[P4.SATURATION=14]="SATURATION",P4[P4.COLOR=15]="COLOR",P4[P4.LUMINOSITY=16]="LUMINOSITY",P4[P4.NORMAL_NPM=17]="NORMAL_NPM",P4[P4.ADD_NPM=18]="ADD_NPM",P4[P4.SCREEN_NPM=19]="SCREEN_NPM",P4[P4.NONE=20]="NONE",P4[P4.SRC_OVER=0]="SRC_OVER",P4[P4.SRC_IN=21]="SRC_IN",P4[P4.SRC_OUT=22]="SRC_OUT",P4[P4.SRC_ATOP=23]="SRC_ATOP",P4[P4.DST_OVER=24]="DST_OVER",P4[P4.DST_IN=25]="DST_IN",P4[P4.DST_OUT=26]="DST_OUT",P4[P4.DST_ATOP=27]="DST_ATOP",P4[P4.ERASE=26]="ERASE",P4[P4.SUBTRACT=28]="SUBTRACT",P4[P4.XOR=29]="XOR",(P4=_6=_6||{})[P4.POINTS=0]="POINTS",P4[P4.LINES=1]="LINES",P4[P4.LINE_LOOP=2]="LINE_LOOP",P4[P4.LINE_STRIP=3]="LINE_STRIP",P4[P4.TRIANGLES=4]="TRIANGLES",P4[P4.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",P4[P4.TRIANGLE_FAN=6]="TRIANGLE_FAN",(P4=y6=y6||{})[P4.RGBA=6408]="RGBA",P4[P4.RGB=6407]="RGB",P4[P4.ALPHA=6406]="ALPHA",P4[P4.LUMINANCE=6409]="LUMINANCE",P4[P4.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",P4[P4.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",P4[P4.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(P4=m6=m6||{})[P4.TEXTURE_2D=3553]="TEXTURE_2D",P4[P4.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",P4[P4.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",P4[P4.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",P4[P4.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",P4[P4.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",P4[P4.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",P4[P4.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",P4[P4.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(P4=v6=v6||{})[P4.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",P4[P4.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",P4[P4.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",P4[P4.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",P4[P4.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",P4[P4.FLOAT=5126]="FLOAT",P4[P4.HALF_FLOAT=36193]="HALF_FLOAT",(P4=x6=x6||{})[P4.FLOAT=0]="FLOAT",P4[P4.INT=1]="INT",P4[P4.UINT=2]="UINT",(P4=g6=g6||{})[P4.NEAREST=0]="NEAREST",P4[P4.LINEAR=1]="LINEAR",(P4=E6=E6||{})[P4.CLAMP=33071]="CLAMP",P4[P4.REPEAT=10497]="REPEAT",P4[P4.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(P4=T6=T6||{})[P4.OFF=0]="OFF",P4[P4.POW2=1]="POW2",P4[P4.ON=2]="ON",P4[P4.ON_MANUAL=3]="ON_MANUAL",(P4=b6=b6||{})[P4.NPM=0]="NPM",P4[P4.UNPACK=1]="UNPACK",P4[P4.PMA=2]="PMA",P4[P4.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",P4[P4.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",P4[P4.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(P4=A6=A6||{})[P4.NO=0]="NO",P4[P4.YES=1]="YES",P4[P4.AUTO=2]="AUTO",P4[P4.BLEND=0]="BLEND",P4[P4.CLEAR=1]="CLEAR",P4[P4.BLIT=2]="BLIT",(P4=S6=S6||{})[P4.AUTO=0]="AUTO",P4[P4.MANUAL=1]="MANUAL",(P4=I6=I6||{}).LOW="lowp",P4.MEDIUM="mediump",P4.HIGH="highp",(P4=R6=R6||{})[P4.NONE=0]="NONE",P4[P4.SCISSOR=1]="SCISSOR",P4[P4.STENCIL=2]="STENCIL",P4[P4.SPRITE=3]="SPRITE",(P4=O6=O6||{})[P4.NONE=0]="NONE",P4[P4.LOW=2]="LOW",P4[P4.MEDIUM=4]="MEDIUM",P4[P4.HIGH=8]="HIGH";function P6(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var N6=/iPhone/i,M6=/iPod/i,L6=/iPad/i,D6=/\biOS-universal(?:.+)Mac\b/i,U6=/\bAndroid(?:.+)Mobile\b/i,F6=/Android/i,B6=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,k6=/Silk/i,G6=/Windows Phone/i,X6=/\bWindows(?:.+)ARM\b/i,H6=/BlackBerry/i,V6=/BB10/i,j6=/Opera Mini/i,Y6=/\b(CriOS|Chrome)(?:.+)Mobile/i,z6=/Mobile(?:.+)Firefox\b/i;var W6=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(N6)&&!i(G6),ipod:i(M6),tablet:!i(N6)&&(i(L6)||P6(e))&&!i(G6),universal:i(D6),device:(i(N6)||i(M6)||i(L6)||i(D6)||P6(e))&&!i(G6)},amazon:{phone:i(B6),tablet:!i(B6)&&i(k6),device:i(B6)||i(k6)},android:{phone:!i(G6)&&i(B6)||!i(G6)&&i(U6),tablet:!i(G6)&&!i(B6)&&!i(U6)&&(i(k6)||i(F6)),device:!i(G6)&&(i(B6)||i(k6)||i(U6)||i(F6))||i(/\bokhttp\b/i)},windows:{phone:i(G6),tablet:i(X6),device:i(G6)||i(X6)},other:{blackberry:i(H6),blackberry10:i(V6),opera:i(j6),firefox:i(z6),chrome:i(Y6),device:i(H6)||i(V6)||i(j6)||i(z6)||i(Y6)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(P4={})[P4.WEBGL_LEGACY=0]="WEBGL_LEGACY",P4[P4.WEBGL=1]="WEBGL",P4[P4.WEBGL2=2]="WEBGL2",(P4={})[P4.UNKNOWN=0]="UNKNOWN",P4[P4.WEBGL=1]="WEBGL",P4[P4.CANVAS=2]="CANVAS",(P4={})[P4.COLOR=16384]="COLOR",P4[P4.DEPTH=256]="DEPTH",P4[P4.STENCIL=1024]="STENCIL",(P4={})[P4.NORMAL=0]="NORMAL",P4[P4.ADD=1]="ADD",P4[P4.MULTIPLY=2]="MULTIPLY",P4[P4.SCREEN=3]="SCREEN",P4[P4.OVERLAY=4]="OVERLAY",P4[P4.DARKEN=5]="DARKEN",P4[P4.LIGHTEN=6]="LIGHTEN",P4[P4.COLOR_DODGE=7]="COLOR_DODGE",P4[P4.COLOR_BURN=8]="COLOR_BURN",P4[P4.HARD_LIGHT=9]="HARD_LIGHT",P4[P4.SOFT_LIGHT=10]="SOFT_LIGHT",P4[P4.DIFFERENCE=11]="DIFFERENCE",P4[P4.EXCLUSION=12]="EXCLUSION",P4[P4.HUE=13]="HUE",P4[P4.SATURATION=14]="SATURATION",P4[P4.COLOR=15]="COLOR",P4[P4.LUMINOSITY=16]="LUMINOSITY",P4[P4.NORMAL_NPM=17]="NORMAL_NPM",P4[P4.ADD_NPM=18]="ADD_NPM",P4[P4.SCREEN_NPM=19]="SCREEN_NPM",P4[P4.NONE=20]="NONE",P4[P4.SRC_OVER=0]="SRC_OVER",P4[P4.SRC_IN=21]="SRC_IN",P4[P4.SRC_OUT=22]="SRC_OUT",P4[P4.SRC_ATOP=23]="SRC_ATOP",P4[P4.DST_OVER=24]="DST_OVER",P4[P4.DST_IN=25]="DST_IN",P4[P4.DST_OUT=26]="DST_OUT",P4[P4.DST_ATOP=27]="DST_ATOP",P4[P4.ERASE=26]="ERASE",P4[P4.SUBTRACT=28]="SUBTRACT",P4[P4.XOR=29]="XOR",(P4={})[P4.POINTS=0]="POINTS",P4[P4.LINES=1]="LINES",P4[P4.LINE_LOOP=2]="LINE_LOOP",P4[P4.LINE_STRIP=3]="LINE_STRIP",P4[P4.TRIANGLES=4]="TRIANGLES",P4[P4.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",P4[P4.TRIANGLE_FAN=6]="TRIANGLE_FAN",(P4={})[P4.RGBA=6408]="RGBA",P4[P4.RGB=6407]="RGB",P4[P4.ALPHA=6406]="ALPHA",P4[P4.LUMINANCE=6409]="LUMINANCE",P4[P4.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",P4[P4.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",P4[P4.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(P4={})[P4.TEXTURE_2D=3553]="TEXTURE_2D",P4[P4.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",P4[P4.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",P4[P4.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",P4[P4.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",P4[P4.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",P4[P4.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",P4[P4.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",P4[P4.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(P4={})[P4.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",P4[P4.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",P4[P4.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",P4[P4.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",P4[P4.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",P4[P4.FLOAT=5126]="FLOAT",P4[P4.HALF_FLOAT=36193]="HALF_FLOAT",(P4={})[P4.FLOAT=0]="FLOAT",P4[P4.INT=1]="INT",P4[P4.UINT=2]="UINT",(P4=IW=IW||{})[P4.NEAREST=0]="NEAREST",P4[P4.LINEAR=1]="LINEAR",(P4=mW=mW||{})[P4.CLAMP=33071]="CLAMP",P4[P4.REPEAT=10497]="REPEAT",P4[P4.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(P4=FW=FW||{})[P4.OFF=0]="OFF",P4[P4.POW2=1]="POW2",P4[P4.ON=2]="ON",P4[P4.ON_MANUAL=3]="ON_MANUAL",(P4={})[P4.NPM=0]="NPM",P4[P4.UNPACK=1]="UNPACK",P4[P4.PMA=2]="PMA",P4[P4.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",P4[P4.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",P4[P4.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(P4={})[P4.NO=0]="NO",P4[P4.YES=1]="YES",P4[P4.AUTO=2]="AUTO",P4[P4.BLEND=0]="BLEND",P4[P4.CLEAR=1]="CLEAR",P4[P4.BLIT=2]="BLIT",(P4=pW=pW||{})[P4.AUTO=0]="AUTO",P4[P4.MANUAL=1]="MANUAL",(P4=NW=NW||{}).LOW="lowp",P4.MEDIUM="mediump",P4.HIGH="highp",(P4={})[P4.NONE=0]="NONE",P4[P4.SCISSOR=1]="SCISSOR",P4[P4.STENCIL=2]="STENCIL",P4[P4.SPRITE=3]="SPRITE",(P4={})[P4.NONE=0]="NONE",P4[P4.LOW=2]="LOW",P4[P4.MEDIUM=4]="MEDIUM",P4[P4.HIGH=8]="HIGH";var Z6,K6,q6,J6={MIPMAP_TEXTURES:FW.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(Z6=32,q6=!0,(W6.tablet||W6.phone)&&(W6.apple.device&&(K6=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(K6[1],10)<11&&(q6=!1),W6.android.device&&(K6=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(K6[1],10)<7&&(q6=!1)),q6?Z6:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:pW.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:mW.CLAMP,SCALE_MODE:IW.LINEAR,PRECISION_VERTEX:NW.HIGH,PRECISION_FRAGMENT:W6.apple.device?NW.HIGH:NW.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!W6.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Q6=(r(15),{parse:_t.parse,format:_t.format,resolve:_t.resolve});J6.RETINA_PREFIX=/@([0-9\.]+)x/;var $6,tz=J6.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,ez="6.0.4";var rz={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function iz(t,e){return(e=void 0===e?[]:e)[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function nz(t){t=t.toString(16);return"#"+(t="000000".substr(0,6-t.length)+t)}var sz=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[p6.NORMAL_NPM]=p6.NORMAL,t[p6.ADD_NPM]=p6.ADD,t[p6.SCREEN_NPM]=p6.SCREEN,e[p6.NORMAL]=p6.NORMAL_NPM,e[p6.ADD]=p6.ADD_NPM,e[p6.SCREEN]=p6.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function oz(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function az(t){return!(t&t-1||!t)}function hz(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}function uz(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}function lz(t){return 0===t?0:t<0?-1:1}var cz=0;var dz={};function fz(t,e,r){var i;void 0===r&&(r=3),dz[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),dz[e]=!0)}var pz={},_z=Object.create(null),yz=Object.create(null);mz.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},mz.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},mz.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(mz.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(mz.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function mz(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||J6.RESOLUTION,this.resize(t,e)}var vz;function xz(t,e){t=J6.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var gz,Ez=(Tz.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},Tz.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},Tz.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},Tz.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},Tz.prototype.contains=function(t){return-1!==this.items.indexOf(t)},Tz.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Tz.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(Tz.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(Tz.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Tz);function Tz(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(Ez.prototype,{dispatch:{value:Ez.prototype.emit},run:{value:Ez.prototype.emit}}),J6.TARGET_FPMS=.06,(P4=gz=gz||{})[P4.INTERACTION=50]="INTERACTION",P4[P4.HIGH=25]="HIGH",P4[P4.NORMAL=0]="NORMAL",P4[P4.LOW=-25]="LOW",P4[P4.UTILITY=-50]="UTILITY";var bz=(Az.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},Az.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},Az.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},Az.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},Az);function Az(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var Sz=(Iz.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Iz.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Iz.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Iz.prototype.add=function(t,e,r){return void 0===r&&(r=gz.NORMAL),this._addListener(new bz(t,e,r))},Iz.prototype.addOnce=function(t,e,r){return void 0===r&&(r=gz.NORMAL),this._addListener(new bz(t,e,r,!0))},Iz.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},Iz.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Iz.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),Iz.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Iz.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Iz.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},Iz.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*J6.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(Iz.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(Iz.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,J6.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(Iz.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(Iz,"shared",{get:function(){var t;return Iz._shared||((t=Iz._shared=new Iz).autoStart=!0,t._protected=!0),Iz._shared},enumerable:!1,configurable:!0}),Object.defineProperty(Iz,"system",{get:function(){var t;return Iz._system||((t=Iz._system=new Iz).autoStart=!0,t._protected=!0),Iz._system},enumerable:!1,configurable:!0}),Iz);function Iz(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new bz(null,null,1/0),this.deltaMS=1/J6.TARGET_FPMS,this.elapsedMS=1/J6.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}Rz.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,gz.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Sz.shared:new Sz,t.autoStart&&this.start()},Rz.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function Rz(){}var Oz,wz=2*Math.PI,Cz=180/Math.PI,Pz=Math.PI/180;(FW=Oz=Oz||{})[FW.POLY=0]="POLY",FW[FW.RECT=1]="RECT",FW[FW.CIRC=2]="CIRC",FW[FW.ELIP=3]="ELIP",FW[FW.RREC=4]="RREC";var Nz=(Object.defineProperty(Mz.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(Mz.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(Mz.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(Mz.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(Mz,"EMPTY",{get:function(){return new Mz(0,0,0,0)},enumerable:!1,configurable:!0}),Mz.prototype.clone=function(){return new Mz(this.x,this.y,this.width,this.height)},Mz.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},Mz.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},Mz.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},Mz.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},Mz.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},Mz.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},Mz.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},Mz.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},Mz);function Mz(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=Oz.RECT}Lz.prototype.clone=function(){return new Lz(this.x,this.y,this.radius)},Lz.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},Lz.prototype.getBounds=function(){return new Nz(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Lz.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function Lz(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=Oz.CIRC}Dz.prototype.clone=function(){return new Dz(this.x,this.y,this.width,this.height)},Dz.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},Dz.prototype.getBounds=function(){return new Nz(this.x-this.width,this.y-this.height,this.width,this.height)},Dz.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function Dz(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=Oz.ELIP}Uz.prototype.clone=function(){var t=new Uz(this.points.slice());return t.closeStroke=this.closeStroke,t},Uz.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},Uz.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function Uz(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=Oz.POLY,this.closeStroke=!0}Fz.prototype.clone=function(){return new Fz(this.x,this.y,this.width,this.height,this.radius)},Fz.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},Fz.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function Fz(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=Oz.RREC}var Bz=(kz.prototype.clone=function(){return new kz(this.x,this.y)},kz.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},kz.prototype.copyTo=function(t){return t.set(this.x,this.y),t},kz.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},kz.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},kz.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},kz);function kz(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var Gz=(Xz.prototype.clone=function(t,e){return new Xz(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},Xz.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},Xz.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},Xz.prototype.copyTo=function(t){return t.set(this._x,this._y),t},Xz.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Xz.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(Xz.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(Xz.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Xz);function Xz(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var Hz=(Vz.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Vz.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},Vz.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},Vz.prototype.apply=function(t,e){e=e||new Bz;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},Vz.prototype.applyInverse=function(t,e){e=e||new Bz;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},Vz.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},Vz.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},Vz.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},Vz.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},Vz.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},Vz.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},Vz.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(wz-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},Vz.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},Vz.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Vz.prototype.clone=function(){var t=new Vz;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Vz.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Vz.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Vz.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(Vz,"IDENTITY",{get:function(){return new Vz},enumerable:!1,configurable:!0}),Object.defineProperty(Vz,"TEMP_MATRIX",{get:function(){return new Vz},enumerable:!1,configurable:!0}),Vz);function Vz(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var jz=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Yz=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],zz=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Wz=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Zz=[],Kz=[],qz=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];Zz.push(e);for(var r=0;r<16;r++)for(var i=qz(jz[t]*jz[r]+zz[t]*Yz[r]),n=qz(Yz[t]*jz[r]+Wz[t]*Yz[r]),s=qz(jz[t]*zz[r]+zz[t]*Wz[r]),o=qz(Yz[t]*zz[r]+Wz[t]*Wz[r]),a=0;a<16;a++)if(jz[a]===i&&Yz[a]===n&&zz[a]===s&&Wz[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new Hz;h.set(jz[t],Yz[t],zz[t],Wz[t],0,0),Kz.push(h)}}();var Jz={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return jz[t]},uY:function(t){return Yz[t]},vX:function(t){return zz[t]},vY:function(t){return Wz[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return Zz[t][e]},sub:function(t,e){return Zz[t][Jz.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?Jz.S:Jz.N:2*Math.abs(e)<=Math.abs(t)?0<t?Jz.E:Jz.W:0<e?0<t?Jz.SE:Jz.SW:0<t?Jz.NE:Jz.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=Kz[Jz.inv(e)];e.tx=r,e.ty=i,t.append(e)}},Qz=($z.prototype.onChange=function(){this._localID++},$z.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},$z.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},$z.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},$z.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},$z.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty($z.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),$z.IDENTITY=new $z,$z);function $z(){this.worldTransform=new Hz,this.localTransform=new Hz,this.position=new Gz(this.onChange,this,0,0),this.scale=new Gz(this.onChange,this,1,1),this.pivot=new Gz(this.onChange,this,0,0),this.skew=new Gz(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}J6.PREFER_ENV=W6.any?c6.WEBGL:c6.WEBGL2,J6.STRICT_TEXTURE_CACHE=!1;var tW=[];function eW(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=tW.length-1;0<=n;--n){var s=tW[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var rW=function(t,e){return(rW=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function iW(t,e){function r(){this.constructor=t}rW(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var nW=(sW.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},sW.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},sW.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(sW.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),sW.prototype.update=function(){this.destroyed||this.onUpdate.emit()},sW.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(sW.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(sW.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),sW.prototype.style=function(t,e,r){return!1},sW.prototype.dispose=function(){},sW.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},sW.test=function(t,e){return!1},sW);function sW(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Ez("setRealSize"),this.onUpdate=new Ez("update"),this.onError=new Ez("onError")}var oW,aW=(iW(hW,oW=nW),hW.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===b6.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},hW.prototype.dispose=function(){this.data=null},hW.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},hW);function hW(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=oW.call(this,e,i)||this).data=t,r}var uW,lW={scaleMode:g6.NEAREST,format:y6.RGBA,alphaMode:b6.NPM},cW=(iW(dW,uW=pt.a),Object.defineProperty(dW.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(dW.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),dW.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},dW.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},dW.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},dW.prototype._refreshPOT=function(){this.isPowerOfTwo=az(this.realWidth)&&az(this.realHeight)},dW.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},dW.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},dW.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},dW.prototype.onError=function(t){this.emit("error",this,t)},dW.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete yz[this.cacheId],delete _z[this.cacheId],this.cacheId=null),this.dispose(),dW.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},dW.prototype.dispose=function(){this.emit("dispose",this)},dW.prototype.castToBaseTexture=function(){return this},dW.from=function(t,e,r){void 0===r&&(r=J6.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++cz),t._pixiId),s=yz[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new dW(t,e)).cacheId=n,dW.addToCache(s,n)),s},dW.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new aW(t,{width:e,height:r}),t=t instanceof Float32Array?v6.FLOAT:v6.UNSIGNED_BYTE;return new dW(n,Object.assign(lW,i||{width:e,height:r,type:t}))},dW.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),yz[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),yz[e]=t)},dW.removeFromCache=function(t){if("string"==typeof t){var e=yz[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete yz[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete yz[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},dW._globalBatch=0,dW);function dW(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=uW.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof nW||((t=eW(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||J6.RESOLUTION,r.mipmap=void 0!==n?n:J6.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:J6.ANISOTROPIC_LEVEL,r.wrapMode=u||J6.WRAP_MODE,r.scaleMode=void 0!==o?o:J6.SCALE_MODE,r.format=l||y6.RGBA,r.type=c||v6.UNSIGNED_BYTE,r.target=d||m6.TEXTURE_2D,r.alphaMode=void 0!==i?i:b6.UNPACK,r.uid=++cz,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var fW,pW=(iW(_W,fW=nW),_W.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof nW?this.addResourceAt(t[r],r):this.addResourceAt(eW(t[r],e),r))},_W.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},_W.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},_W.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");fW.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},_W.prototype.unbind=function(t){fW.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},_W.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},_W);function _W(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=fW.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new cW;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var yW,mW=(iW(vW,yW=pW),vW.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},vW.prototype.bind=function(t){yW.prototype.bind.call(this,t),t.target=m6.TEXTURE_2D_ARRAY},vW.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},vW);function vW(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=yW.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var xW,gW=(iW(EW,xW=nW),EW.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(vz=vz||document.createElement("a")).href=t;var r=Q6.parse(vz.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},EW.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===b6.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},EW.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),xW.prototype.update.call(this))},EW.prototype.dispose=function(){this.source=null},EW);function EW(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=xW.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var TW,bW=(iW(AW,TW=gW),AW.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},AW);function AW(t){return TW.call(this,t)||this}var SW,IW=(iW(RW,SW=pW),RW.prototype.bind=function(t){SW.prototype.bind.call(this,t),t.target=m6.TEXTURE_CUBE_MAP},RW.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=m6.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},RW.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<RW.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},RW.test=function(t){return Array.isArray(t)&&t.length===RW.SIDES},RW.SIDES=6,RW);function RW(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==RW.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=SW.call(this,6,{width:n,height:s})||this,a=0;a<RW.SIDES;a++)r.items[a].target=m6.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var OW,wW=(iW(CW,OW=gW),CW.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},CW.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===b6.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},CW.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return OW.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(OW.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},CW.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,OW.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},CW.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},CW);function CW(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,gW.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=OW.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:J6.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var PW,NW=(iW(MW,PW=gW),MW.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},MW.prototype._loadSvg=function(){var s=this,o=new Image;gW.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++cz,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},MW.getSize=function(t){var e=MW.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},MW.prototype.dispose=function(){PW.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},MW.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},MW.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,MW);function MW(t,e){var r=this;return e=e||{},(r=PW.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var LW,P4=(iW(DW,LW=gW),DW.prototype.update=function(t){var e;this.destroyed||(e=Sz.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(LW.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},DW.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},DW.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},DW.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},DW.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},DW.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Sz.shared.add(this.update,this),this._isConnectedToTicker=!0)},DW.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Sz.shared.remove(this.update,this),this._isConnectedToTicker=!1)},DW.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},DW.prototype.dispose=function(){this._isConnectedToTicker&&Sz.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),LW.prototype.dispose.call(this)},Object.defineProperty(DW.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Sz.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Sz.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(DW.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),DW.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<DW.TYPES.indexOf(e)},DW.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],DW.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},DW);function DW(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];gW.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||DW.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=LW.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var UW,FW=(iW(BW,UW=gW),BW.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},BW);function BW(t){return UW.call(this,t)||this}tW.push(wW,FW,bW,P4,NW,aW,IW,mW);var kW={__proto__:null,Resource:nW,BaseImageResource:gW,INSTALLED:tW,autoDetectResource:eW,AbstractMultiResource:pW,ArrayResource:mW,BufferResource:aW,CanvasResource:bW,CubeResource:IW,ImageResource:wW,SVGResource:NW,VideoResource:P4,ImageBitmapResource:FW},NW=(GW.prototype.destroy=function(){this.renderer=null},GW);function GW(t){this.renderer=t}var XW,HW=(iW(VW,XW=aW),VW.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===b6.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},VW);function VW(){return null!==XW&&XW.apply(this,arguments)||this}var jW=(Object.defineProperty(YW.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),YW.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new cW(null,{scaleMode:g6.NEAREST,resolution:1,mipmap:T6.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},YW.prototype.addDepthTexture=function(t){return this.depthTexture=t||new cW(new HW(null,{width:this.width,height:this.height}),{scaleMode:g6.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:T6.OFF,format:y6.DEPTH_COMPONENT,type:v6.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},YW.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},YW.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},YW.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},YW.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},YW.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},YW);function YW(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ez("disposeFramebuffer"),this.multisample=O6.NONE}var zW,WW=(iW(ZW,zW=cW),ZW.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},ZW.prototype.dispose=function(){this.framebuffer.dispose(),zW.prototype.dispose.call(this)},ZW.prototype.destroy=function(){zW.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},ZW);function ZW(t){var e=this,e=zW.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=T6.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new jW(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var KW=(qW.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=Jz.add(r,Jz.NW),this.x0=s+i*Jz.uX(r),this.y0=e+n*Jz.uY(r),r=Jz.add(r,2),this.x1=s+i*Jz.uX(r),this.y1=e+n*Jz.uY(r),r=Jz.add(r,2),this.x2=s+i*Jz.uX(r),this.y2=e+n*Jz.uY(r),r=Jz.add(r,2),this.x3=s+i*Jz.uX(r),this.y3=e+n*Jz.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},qW.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},qW);function qW(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var JW,QW=new KW,$W=(iW(t8,JW=pt.a),t8.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t8.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t8.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&_z[t.url]&&t8.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t8.removeFromCache(this),this.textureCacheIds=null},t8.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new t8(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},t8.prototype.updateUvs=function(){this._uvs===QW&&(this._uvs=new KW),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t8.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=J6.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++cz),t._pixiId),s=_z[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=xz(t)),(s=new t8(new cW(t,e))).baseTexture.cacheId=n,cW.addToCache(s.baseTexture,n),t8.addToCache(s,n)),s},t8.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=t8.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},t8.fromBuffer=function(t,e,r,i){return new t8(cW.fromBuffer(t,e,r,i))},t8.fromLoader=function(t,e,r,i){t=new cW(t,Object.assign({scaleMode:J6.SCALE_MODE,resolution:xz(e)},i)),i=t.resource;i instanceof wW&&(i.url=e);var n=new t8(t);return cW.addToCache(n.baseTexture,r=r||e),t8.addToCache(n,r),r!==e&&(cW.addToCache(n.baseTexture,e),t8.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},t8.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),_z[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),_z[e]=t)},t8.removeFromCache=function(t){if("string"==typeof t){var e=_z[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete _z[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)_z[t.textureCacheIds[i]]===t&&delete _z[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(t8.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t8.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t8.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t8.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t8.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t8.prototype.castToBaseTexture=function(){return this.baseTexture},t8);function t8(t,e,r,i,n,s){var o=JW.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new Nz(0,0,1,1)),t instanceof t8&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=QW,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new Bz(s.x,s.y):new Bz(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function e8(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}$W.EMPTY=new $W(new cW),e8($W.EMPTY),e8($W.EMPTY.baseTexture),$W.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new $W(new cW(new bW(t)))}(),e8($W.WHITE),e8($W.WHITE.baseTexture);var r8,i8=(iW(n8,r8=$W),Object.defineProperty(n8.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),n8.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},n8.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},n8.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(fz("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new n8(new WW(t))},n8);function n8(t,e){e=r8.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var s8=(o8.prototype.createTexture=function(t,e){e=new WW(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new i8(e)},o8.prototype.getOptimalTexture=function(t,e,r){var i=o8.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=oz(t)))<<16|65535&(e=oz(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},o8.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},o8.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},o8.prototype.returnFilterTexture=function(t){this.returnTexture(t)},o8.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},o8.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=o8.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},o8.SCREEN_KEY="screen",o8);function o8(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var a8=(h8.prototype.destroy=function(){this.buffer=null},h8.from=function(t,e,r,i,n){return new h8(t,e,r,i,n)},h8);function h8(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=v6.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var u8=0,l8=(c8.prototype.update=function(t){this.data=t||this.data,this._updateID++},c8.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},c8.prototype.destroy=function(){this.dispose(),this.data=null},c8.from=function(t){return new c8(t=t instanceof Array?new Float32Array(t):t)},c8);function c8(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=u8++,this.disposeRunner=new Ez("disposeBuffer")}function d8(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var f8={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var p8={5126:4,5123:2,5121:1},_8=0,y8={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},P4=(m8.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof l8||(e instanceof Array&&(e=new Float32Array(e)),e=new l8(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new a8(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},m8.prototype.getAttribute=function(t){return this.attributes[t]},m8.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},m8.prototype.addIndex=function(t){return t instanceof l8||(t instanceof Array&&(t=new Uint16Array(t)),t=new l8(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},m8.prototype.getIndex=function(){return this.indexBuffer},m8.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new l8;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*p8[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=d8(l);n[c]||(n[c]=new f8[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},m8.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},m8.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},m8.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},m8.prototype.clone=function(){for(var t=new m8,e=0;e<this.buffers.length;e++)t.buffers[e]=new l8(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new a8(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},m8.merge=function(t){for(var e=new m8,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new y8[d8(o.buffers[s].data)](i[s]),e.buffers[s]=new l8(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*p8[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},m8);function m8(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=_8++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ez("disposeGeometry"),this.refCount=0}var v8,x8=(iW(g8,v8=P4),g8);function g8(){var t=v8.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var E8,T8=(iW(b8,E8=P4),b8.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},b8.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},b8);function b8(){var t=E8.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new l8(t.vertices),t.uvBuffer=new l8(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var A8=0,S8=(I8.prototype.update=function(){this.dirtyId++},I8.prototype.add=function(t,e,r){this.uniforms[t]=new I8(e,r)},I8.from=function(t,e){return new I8(t,e)},I8);function I8(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=A8++,this.static=!!e}var R8=(O8.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},O8);function O8(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Nz,this.destinationFrame=new Nz,this.bindingSourceFrame=new Nz,this.bindingDestinationFrame=new Nz,this.filters=[],this.transform=null}var w8,C8=[new Bz,new Bz,new Bz,new Bz],P8=new Hz,N8=(iW(M8,w8=NW),M8.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new R8,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(P8.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},M8.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,A6.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,A6.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,A6.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},M8.prototype.bindAndClear=function(t,e){void 0===e&&(e=A6.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===A6.CLEAR||e===A6.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},M8.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(_6.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(_6.TRIANGLE_STRIP))},M8.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(Hz.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},M8.prototype.destroy=function(){this.texturePool.clear(!1)},M8.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},M8.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},M8.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},M8.prototype.emptyPool=function(){this.texturePool.clear(!0)},M8.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},M8.prototype.transformAABB=function(t,e){var r=C8[0],i=C8[1],n=C8[2],s=C8[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},M8.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?P8.copyFrom(n):P8.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},M8);function M8(t){var e=w8.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new s8,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new x8,e.quadUv=new T8,e.tempRect=new Nz,e.activeState={},e.globalUniforms=new S8({outputFrame:new Nz,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var L8=(D8.prototype.flush=function(){},D8.prototype.destroy=function(){this.renderer=null},D8.prototype.start=function(){},D8.prototype.stop=function(){this.flush()},D8.prototype.render=function(t){},D8);function D8(t){this.renderer=t}var U8,F8=(iW(B8,U8=NW),B8.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},B8.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},B8.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},B8.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},B8.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},B8);function B8(t){var e=U8.call(this,t)||this;return e.emptyRenderer=new L8(t),e.currentRenderer=e.emptyRenderer,e}var k8,G8=0,X8=(iW(H8,k8=NW),Object.defineProperty(H8.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),H8.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=G8++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},H8.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=G8++,this.renderer.runners.contextChange.emit(t)},H8.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},H8.prototype.createContext=function(t,e){var r;if(r=J6.PREFER_ENV>=c6.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},H8.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},H8.prototype.handleContextLost=function(t){t.preventDefault()},H8.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},H8.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},H8.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},H8.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},H8);function H8(t){var e=k8.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var V8,j8=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=O6.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},Y8=new Nz,z8=(iW(W8,V8=NW),W8.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Nz,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,J6.PREFER_ENV===c6.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},W8.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},W8.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(W8.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),W8.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=f6.COLOR|f6.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},W8.prototype.initFramebuffer=function(t){var e=this.gl,e=new j8(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},W8.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},W8.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},W8.prototype.detectSamples=function(t){var e=this.msaaSamples,r=O6.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?O6.NONE:r},W8.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new jW(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=Y8).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},W8.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},W8.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},W8.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},W8.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Nz},W8);function W8(t){t=V8.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new jW(10,10),t.msaaSamples=null,t}var Z8,K8=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},q8={5126:4,5123:2,5121:1},J8=(iW(Q8,Z8=NW),Q8.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=J6.PREFER_ENV===c6.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},Q8.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},Q8.prototype.reset=function(){this.unbind()},Q8.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},Q8.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},Q8.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},Q8.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*q8[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*q8[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*q8[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new K8(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},Q8.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},Q8.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},Q8.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},Q8.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},Q8.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},Q8.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},Q8);function Q8(t){t=Z8.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var $8=(t7.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=R6.NONE,this.autoDetect=!0),this._target=null},t7.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t7);function t7(t){void 0===t&&(t=null),this.type=R6.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function e7(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function r7(t,e,r,i){var n=e7(t,t.VERTEX_SHADER,e),s=e7(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function i7(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function n7(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return i7(2*e);case"bvec3":return i7(3*e);case"bvec4":return i7(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var s7,o7={},a7=o7;function h7(){var t,e;return(a7===o7||a7&&a7.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=J6.PREFER_ENV>=c6.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),a7=e),a7}function u7(t,e,r){if("precision"===t.substring(0,9))return r!==I6.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===I6.HIGH&&r!==I6.HIGH?I6.MEDIUM:e)+" float;\n"+t}var l7={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var c7=null,d7={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function f7(t,e){if(!c7){var r=Object.keys(d7);c7={};for(var i=0;i<r.length;++i){var n=r[i];c7[t[n]]=d7[n]}}return c7[e]}var p7=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],_7={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},y7={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var m7,v7=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function x7(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=v7.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var g7=0,E7={},T7=(b7.prototype.extractData=function(t,e){var r=h7();r?(e=r7(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},b7.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=f7(e,o.type),a={type:a,name:o.name,size:l7[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},b7.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=f7(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:n7(h,s.size)}}return r},Object.defineProperty(b7,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(b7,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),b7.from=function(t,e,r){var i=t+e,n=pz[i];return n||(pz[i]=n=new b7(t,e,r)),n},b7);function b7(t,e,r){void 0===r&&(r="pixi-shader"),this.id=g7++,this.vertexSrc=t||b7.defaultVertexSrc,this.fragmentSrc=e||b7.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),E7[r]?(E7[r]++,r+="-"+E7[r]):E7[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=u7(this.vertexSrc,J6.PRECISION_VERTEX,I6.HIGH),this.fragmentSrc=u7(this.fragmentSrc,J6.PRECISION_FRAGMENT,(s7||(s7=I6.MEDIUM,(r=h7())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),s7=r.precision?I6.HIGH:I6.MEDIUM)),s7))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var A7=(S7.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},S7.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(S7.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),S7.from=function(t,e,r){return new S7(T7.from(t,e),r)},S7);function S7(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof S8?e:new S8(e):new S8({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var I7=(Object.defineProperty(R7.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(R7.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(R7.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(R7.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(R7.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(R7.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(R7.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==p6.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(R7.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),R7.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},R7.for2d=function(){var t=new R7;return t.depthTest=!1,t.blend=!0,t},R7);function R7(){this.data=0,this.blendMode=p6.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var O7,FW=(iW(w7,O7=A7),w7.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(w7.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(w7,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(w7,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),w7);function w7(t,e,r){var i=this,e=T7.from(t||w7.defaultVertexSrc,e||w7.defaultFragmentSrc);return(i=O7.call(this,e,r)||this).padding=0,i.resolution=J6.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new I7,i}var C7=new Hz,P7=(Object.defineProperty(N7.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),N7.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},N7.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(C7.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(C7));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},N7);function N7(t,e){this._texture=t,this.mapCoord=new Hz,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var M7,L7=(iW(D7,M7=FW),D7.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new P7(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},D7);function D7(t){var e=this,r=new Hz,e=M7.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var U7,F7=(iW(B7,U7=NW),B7.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},B7.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new $8).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case R6.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case R6.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case R6.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},B7.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case R6.SCISSOR:this.renderer.scissor.pop();break;case R6.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case R6.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},B7.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=R6.SPRITE:(t.type=R6.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=R6.SCISSOR)))},B7.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new L7(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},B7.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},B7);function B7(t){t=U7.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var k7,FW=(iW(G7,k7=NW),G7.prototype.getStackLength=function(){return this.maskStack.length},G7.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},G7.prototype._useCurrent=function(){},G7.prototype.destroy=function(){k7.prototype.destroy.call(this),this.maskStack=null},G7);function G7(t){t=k7.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var X7,H7=(iW(V7,X7=FW),V7.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},V7.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},V7.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},V7.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},V7);function V7(t){t=X7.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var j7,Y7=(iW(z7,j7=FW),z7.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},z7.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},z7.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},z7.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},z7.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},z7);function z7(t){t=j7.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var W7,Z7=(iW(K7,W7=NW),K7.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},K7.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},K7.prototype.setTransform=function(t){},K7);function K7(t){t=W7.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new Hz,t.transform=null,t}var q7,J7=new Nz,Q7=new Nz,$7=(iW(t9,q7=NW),t9.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(J7.width=t.frame.width,J7.height=t.frame.height,e=J7),r||(Q7.x=t.frame.x,Q7.y=t.frame.y,Q7.width=e.width,Q7.height=e.height,r=Q7),n=i.framebuffer):(s=o.resolution,e||(J7.width=o.screen.width,J7.height=o.screen.height,e=J7),r||((r=J7).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},t9.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},t9.prototype.resize=function(){this.bind(null)},t9.prototype.reset=function(){this.bind(null)},t9);function t9(t){var e=q7.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new Nz,e.destinationFrame=new Nz,e.viewportFrame=new Nz,e}var e9=(r9.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},r9);function r9(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var i9,n9=0,s9={textureCount:0},o9=(iW(a9,i9=NW),a9.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof m7)return m7;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");m7=!0===t({a:"b"},"a","b")}catch(t){m7=!1}return m7}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},a9.prototype.contextChange=function(t){this.gl=t,this.reset()},a9.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(s9.textureCount=0,this.syncUniformGroup(t.uniformGroup,s9)),i},a9.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},a9.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},a9.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},a9.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<p7.length;h++)if(p7[h].test(n,o)){i.push(p7[h].code(r,o)),a=!0;break}a||(s=(1===n.size?_7:y7)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},a9.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},a9.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},a9.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=r7(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:n7(a.type,a.size)}}t=new e9(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},a9.prototype.reset=function(){this.program=null,this.shader=null},a9.prototype.destroy=function(){this.destroyed=!0},a9);function a9(t){t=i9.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=n9++,t}var h9,u9=(iW(l9,h9=NW),l9.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[p6.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.ADD]=[t.ONE,t.ONE],e[p6.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.NONE]=[0,0],e[p6.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[p6.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[p6.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[p6.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[p6.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[p6.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[p6.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[p6.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[p6.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[p6.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[p6.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},l9.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},l9.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},l9.prototype.setBlend=function(t){this.updateCheck(l9.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},l9.prototype.setOffset=function(t){this.updateCheck(l9.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},l9.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},l9.prototype.setDepthMask=function(t){this.gl.depthMask(t)},l9.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},l9.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},l9.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},l9.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},l9.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},l9.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},l9.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},l9.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},l9);function l9(t){t=h9.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=p6.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new I7,t.defaultState.blend=!0,t}var c9,d9=(iW(f9,c9=NW),f9.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==S6.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},f9.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},f9.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},f9);function f9(t){t=c9.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=J6.GC_MAX_IDLE,t.checkCountMax=J6.GC_MAX_CHECK_COUNT,t.mode=J6.GC_MODE,t}var p9,_9=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},y9=(iW(m9,p9=NW),m9.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new _9(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new _9(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},m9.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},m9.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},m9.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},m9.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==x6.FLOAT&&this.renderer.texture.unbind(s)}},m9.prototype.initTexture=function(t){var e=new _9(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},m9.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===v6.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},m9.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==x6.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},m9.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&uz(this.managedTextures,t,1))},m9.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==T6.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=E6.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},m9.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==T6.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===g6.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===g6.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===g6.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===g6.LINEAR?i.LINEAR:i.NEAREST)},m9);function m9(t){t=p9.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new cW,t.hasIntegerTextures=!1,t}var v9,x9={__proto__:null,FilterSystem:N8,BatchSystem:F8,ContextSystem:X8,FramebufferSystem:z8,GeometrySystem:J8,MaskSystem:F7,ScissorSystem:H7,StencilSystem:Y7,ProjectionSystem:Z7,RenderTextureSystem:$7,ShaderSystem:o9,StateSystem:u9,TextureGCSystem:d9,TextureSystem:y9},g9=new Hz,NW=(iW(E9,v9=pt.a),E9.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(E9.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(E9.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),E9.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},E9.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=i8.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return g9.tx=-i.x,g9.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:g9,skipUpdateTransform:!!t.parent}),r},E9.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=d6.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(E9.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=nz(t),iz(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(E9.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),E9);function E9(t,e){void 0===t&&(t=d6.UNKNOWN);var r=v9.call(this)||this;return e=Object.assign({},J6.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new Nz(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||J6.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(fz("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var T9;iW(b9,T9=NW),b9.create=function(t){if($6=void 0===$6?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:J6.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():$6)return new b9(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},b9.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},b9.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof i8?(fz("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},b9.prototype.resize=function(t,e){T9.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},b9.prototype.reset=function(){return this.runners.reset.emit(),this},b9.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},b9.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();T9.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(b9.prototype,"extract",{get:function(){return fz("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),b9.registerPlugin=function(t,e){(b9.__plugins=b9.__plugins||{})[t]=e};function b9(t){var e,r=T9.call(this,d6.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Ez("destroy"),contextChange:new Ez("contextChange"),reset:new Ez("reset"),update:new Ez("update"),postrender:new Ez("postrender"),prerender:new Ez("prerender"),resize:new Ez("resize")},r.globalUniforms=new S8({projectionMatrix:new Hz},!0),r.addSystem(F7,"mask").addSystem(X8,"context").addSystem(u9,"state").addSystem(o9,"shader").addSystem(y9,"texture").addSystem(J8,"geometry").addSystem(z8,"framebuffer").addSystem(H7,"scissor").addSystem(Y7,"stencil").addSystem(Z7,"projection").addSystem(d9,"textureGC").addSystem(N8,"filter").addSystem($7,"renderTexture").addSystem(F8,"batch"),r.initPlugins(b9.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",tz||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+ez+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+ez+" - "+e+" - http://www.pixijs.com/"),tz=!0),r.resize(r.options.width,r.options.height),r}var A9=function(){this.texArray=null,this.blend=0,this.type=_6.TRIANGLES,this.start=0,this.size=0,this.data=null},S9=(I9.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},I9);function I9(){this.elements=[],this.ids=[],this.count=0}var R9=(Object.defineProperty(O9.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(O9.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(O9.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(O9.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(O9.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),O9.prototype.view=function(t){return this[t+"View"]},O9.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},O9.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},O9);function O9(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var w9,C9=(iW(P9,w9=L8),P9.prototype.contextChange=function(){var t=this.renderer.gl;J6.PREFER_ENV===c6.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),J6.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=x7(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},P9.prototype.initFlushBuffers=function(){for(var t=P9._drawCallPool,e=P9._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new A9);for(;e.length<i;)e.push(new S9);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},P9.prototype.onPrerender=function(){this._flushId=0},P9.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},P9.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=P9._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++cW._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;cW._globalBatch=o},P9.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=P9._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=sz[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},P9.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},P9.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;J6.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},P9.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=P9._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},P9.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},P9.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),J6.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},P9.prototype.stop=function(){this.flush()},P9.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),w9.prototype.destroy.call(this)},P9.prototype.getAttributeBuffer=function(t){var e=oz(Math.ceil(t/8)),t=hz(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new R9(e*this.vertexSize*4)),t},P9.prototype.getIndexBuffer=function(t){var e=oz(Math.ceil(t/12)),r=hz(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},P9.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},P9._drawCallPool=[],P9._textureArrayPool=[],P9);function P9(t){var e=w9.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=I7.for2d(),e.size=4*J6.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var N9=(M9.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=S8.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new T7(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Hz,default:this.defaultGroupCache[t]};return new A7(this.programCache[t],i)},M9.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},M9);function M9(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var L9,D9=(iW(U9,L9=P4),U9);function U9(t){void 0===t&&(t=!1);var e=L9.call(this)||this;return e._buffer=new l8(null,t,!1),e._indexBuffer=new l8(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,v6.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,v6.FLOAT).addAttribute("aColor",e._buffer,4,!0,v6.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,v6.FLOAT).addIndex(e._indexBuffer),e}var F9="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",B9="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function k9(){}(k9.create=function(t){var e,t=Object.assign({vertex:F9,fragment:B9,geometryClass:D9,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return iW(o,e=C9),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new N9(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(k9,"defaultVertexSrc",{get:function(){return F9},enumerable:!1,configurable:!0}),Object.defineProperty(k9,"defaultFragmentTemplate",{get:function(){return B9},enumerable:!1,configurable:!0}),k9).create();var G9={};for(X9 in kW)!function(t){Object.defineProperty(G9,t,{get:function(){return fz("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),kW[t]}})}(X9);var X9,H9={};for(X9 in x9)!function(t){Object.defineProperty(H9,t,{get:function(){return fz("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),x9[t]}})}(X9);J6.SORTABLE_CHILDREN=!1;var V9=(j9.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},j9.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},j9.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Nz.EMPTY:((t=t||new Nz(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},j9.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},j9.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,t=t.ty,o=r*e.x+n*e.y+o,t=i*e.x+s*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},j9.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},j9.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},j9.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},j9.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},j9.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},j9.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},j9.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},j9.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},j9.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},j9.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},j9.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},j9.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},j9);function j9(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var Y9=function(t,e){return(Y9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function z9(t,e){function r(){this.constructor=t}Y9(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var W9,NW=(z9(Z9,W9=pt.a),Z9.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(Z9.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},Z9.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},Z9.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},Z9.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Nz),e=this._boundsRect),this._bounds.getRectangle(e)},Z9.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Nz),t=this._localBoundsRect),this._localBounds||(this._localBounds=new V9);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},Z9.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},Z9.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},Z9.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},Z9.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},Z9.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(Z9.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new q9),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),Z9.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},Z9.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(Z9.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(Z9.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(Z9.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(Z9.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(Z9.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Z9.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Z9.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Z9.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Z9.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(Z9.prototype,"angle",{get:function(){return this.transform.rotation*Cz},set:function(t){this.transform.rotation=t*Pz},enumerable:!1,configurable:!0}),Object.defineProperty(Z9.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Z9.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(Z9.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),Z9);function Z9(){var t=W9.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new Qz,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new V9,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var K9,q9=(z9(J9,K9=NW),J9);function J9(){var t=null!==K9&&K9.apply(this,arguments)||this;return t.sortDirty=null,t}function Q9(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}NW.prototype.displayObjectUpdateTransform=NW.prototype.updateTransform;var $9,tZ=(z9(eZ,$9=NW),eZ.prototype.onChildrenChange=function(t){},eZ.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},eZ.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},eZ.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},eZ.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},eZ.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);uz(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},eZ.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},eZ.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,uz(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},eZ.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,uz(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},eZ.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},eZ.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(Q9),this.sortDirty=!1},eZ.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},eZ.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},eZ.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=$9.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},eZ.prototype._calculateBounds=function(){},eZ.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},eZ.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},eZ.prototype._render=function(t){},eZ.prototype.destroy=function(t){$9.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(eZ.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(eZ.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),eZ);function eZ(){var t=$9.call(this)||this;return t.children=[],t.sortableChildren=J6.SORTABLE_CHILDREN,t.sortDirty=!1,t}tZ.prototype.containerUpdateTransform=tZ.prototype.updateTransform;var rZ=function(t,e){return(rZ=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var iZ,nZ,sZ,oZ=new Bz,aZ=new Uint16Array([0,1,2,0,2,3]),hZ=(rZ(nZ=lZ,sZ=iZ=tZ),nZ.prototype=null===sZ?Object.create(sZ):(uZ.prototype=sZ.prototype,new uZ),lZ.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=lz(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=lz(this.scale.y)*this._height/this._texture.orig.height)},lZ.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},lZ.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,s=e.d,o=e.tx,a=e.ty,h=this.vertexData,u=t.trim,l=t.orig,c=this._anchor,d=0,f=0,e=0,t=0,e=u?(d=(f=u.x-c._x*l.width)+u.width,(t=u.y-c._y*l.height)+u.height):(d=(f=-c._x*l.width)+l.width,(t=-c._y*l.height)+l.height);if(h[0]=r*f+n*t+o,h[1]=s*t+i*f+a,h[2]=r*d+n*t+o,h[3]=s*t+i*d+a,h[4]=r*d+n*e+o,h[5]=s*e+i*d+a,h[6]=r*f+n*e+o,h[7]=s*e+i*f+a,this._roundPixels)for(var p=J6.RESOLUTION,_=0;_<h.length;++_)h[_]=Math.round((h[_]*p|0)/p)}},lZ.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,h=n.d,u=n.tx,l=n.ty,t=-i._x*r.width,n=t+r.width,i=-i._y*r.height,r=i+r.height;e[0]=s*t+a*i+u,e[1]=h*i+o*t+l,e[2]=s*n+a*i+u,e[3]=h*i+o*n+l,e[4]=s*n+a*r+u,e[5]=h*r+o*n+l,e[6]=s*t+a*r+u,e[7]=h*r+o*t+l},lZ.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},lZ.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},lZ.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Nz),t=this._localBoundsRect),this._bounds.getRectangle(t)):iZ.prototype.getLocalBounds.call(this,t)},lZ.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,oZ);var e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x,t=0;return oZ.x>=i&&oZ.x<i+e&&(t=-r*this.anchor.y,oZ.y>=t&&oZ.y<t+r)},lZ.prototype.destroy=function(t){iZ.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&(t="boolean"==typeof t?t:t&&t.baseTexture,this._texture.destroy(!!t)),this._texture=null},lZ.from=function(t,e){return new lZ(t instanceof $W?t:$W.from(t,e))},Object.defineProperty(lZ.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(lZ.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=lz(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(lZ.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=lz(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(lZ.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(lZ.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(lZ.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||$W.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),lZ);function uZ(){this.constructor=nZ}function lZ(t){var e=iZ.call(this)||this;return e._anchor=new Gz(e._onAnchorUpdate,e,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),e._texture=null,e._width=0,e._height=0,e._tint=null,e._tintRGB=null,e.tint=16777215,e.blendMode=p6.NORMAL,e._cachedTint=16777215,e.uvs=null,e.texture=t||$W.EMPTY,e.vertexData=new Float32Array(8),e.vertexTrimmedData=null,e._transformID=-1,e._textureID=-1,e._transformTrimmedID=-1,e._textureTrimmedID=-1,e.indices=aZ,e.pluginName="batch",e.isSprite=!0,e._roundPixels=J6.ROUND_PIXELS,e}var cZ,dZ=function(t,e){return(dZ=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};(P4=cZ=cZ||{})[P4.LINEAR_VERTICAL=0]="LINEAR_VERTICAL";var fZ={align:"left",breakWords:!(P4[P4.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"),dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:cZ.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},pZ=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_Z=(yZ.prototype.clone=function(){var t={};return xZ(t,this,fZ),new yZ(t)},yZ.prototype.reset=function(){xZ(this,fZ,fZ)},Object.defineProperty(yZ.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){t=vZ(t);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"fill",{get:function(){return this._fill},set:function(t){t=vZ(t);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){!function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}(this._fillGradientStops,t)&&(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"stroke",{get:function(){return this._stroke},set:function(t){t=vZ(t);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(yZ.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),yZ.prototype.toFontString=function(){for(var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily,r=(e=!Array.isArray(this.fontFamily)?this.fontFamily.split(","):e).length-1;0<=r;r--){var i=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&pZ.indexOf(i)<0&&(i='"'+i+'"'),e[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},yZ);function yZ(t){this.styleID=0,this.reset(),xZ(this,t,t)}function mZ(t){return"number"==typeof t?nz(t):"string"==typeof t&&0===t.indexOf("0x")?t.replace("0x","#"):t}function vZ(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=mZ(t[e]);return t}return mZ(t)}function xZ(t,e,r){for(var i in r)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}var gZ=(EZ.measureText=function(t,e,r,i){void 0===i&&(i=EZ._canvas),r=null==r?e.wordWrap:r;var n=e.toFontString(),s=EZ.measureFont(n);0===s.fontSize&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);var o=i.getContext("2d");o.font=n;for(var a=(r?EZ.wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),h=new Array(a.length),u=0,l=0;l<a.length;l++){var c=o.measureText(a[l]).width+(a[l].length-1)*e.letterSpacing;h[l]=c,u=Math.max(u,c)}n=u+e.strokeThickness;e.dropShadow&&(n+=e.dropShadowDistance);r=e.lineHeight||s.fontSize+e.strokeThickness,i=Math.max(r,s.fontSize+e.strokeThickness)+(a.length-1)*(r+e.leading);return e.dropShadow&&(i+=e.dropShadowDistance),new EZ(t,e,n,i,a,h,r+e.leading,u,s)},EZ.wordWrap=function(t,e,r){for(var i=(r=void 0===r?EZ._canvas:r).getContext("2d"),n=0,s="",o="",a=Object.create(null),h=e.letterSpacing,r=e.whiteSpace,u=EZ.collapseSpaces(r),l=EZ.collapseNewlines(r),c=!u,d=e.wordWrapWidth+h,f=EZ.tokenize(t),p=0;p<f.length;p++){var _=f[p];if(EZ.isNewline(_)){if(!l){o+=EZ.addLine(s),c=!u,s="",n=0;continue}_=" "}if(u){var y=EZ.isBreakingSpace(_),m=EZ.isBreakingSpace(s[s.length-1]);if(y&&m)continue}y=EZ.getFromCache(_,h,a,i);if(d<y)if(""!==s&&(o+=EZ.addLine(s),s="",n=0),EZ.canBreakWords(_,e.breakWords))for(var v=EZ.wordWrapSplit(_),x=0;x<v.length;x++){for(var g=v[x],E=1;v[x+E];){var T=v[x+E],b=g[g.length-1];if(EZ.canBreakChars(b,T,_,x,e.breakWords))break;g+=T,E++}x+=g.length-1;var A=EZ.getFromCache(g,h,a,i);d<A+n&&(o+=EZ.addLine(s),c=!1,s="",n=0),s+=g,n+=A}else{0<s.length&&(o+=EZ.addLine(s),s="",n=0);m=p===f.length-1;o+=EZ.addLine(_,!m),c=!1,s="",n=0}else d<y+n&&(c=!1,o+=EZ.addLine(s),s="",n=0),(0<s.length||!EZ.isBreakingSpace(_)||c)&&(s+=_,n+=y)}return o+=EZ.addLine(s,!1)},EZ.addLine=function(t,e){return void 0===e&&(e=!0),t=EZ.trimRight(t),t=e?t+"\n":t},EZ.getFromCache=function(t,e,r,i){var n=r[t];return"number"!=typeof n&&(e=t.length*e,n=i.measureText(t).width+e,r[t]=n),n},EZ.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},EZ.collapseNewlines=function(t){return"normal"===t},EZ.trimRight=function(t){if("string"!=typeof t)return"";for(var e=t.length-1;0<=e;e--){var r=t[e];if(!EZ.isBreakingSpace(r))break;t=t.slice(0,-1)}return t},EZ.isNewline=function(t){return"string"==typeof t&&0<=EZ._newlines.indexOf(t.charCodeAt(0))},EZ.isBreakingSpace=function(t,e){return"string"==typeof t&&0<=EZ._breakingSpaces.indexOf(t.charCodeAt(0))},EZ.tokenize=function(t){var e=[],r="";if("string"!=typeof t)return e;for(var i=0;i<t.length;i++){var n=t[i],s=t[i+1];EZ.isBreakingSpace(n,s)||EZ.isNewline(n)?(""!==r&&(e.push(r),r=""),e.push(n)):r+=n}return""!==r&&e.push(r),e},EZ.canBreakWords=function(t,e){return e},EZ.canBreakChars=function(t,e,r,i,n){return!0},EZ.wordWrapSplit=function(t){return t.split("")},EZ.measureFont=function(t){if(EZ._fonts[t])return EZ._fonts[t];var e={ascent:0,descent:0,fontSize:0},r=EZ._canvas,i=EZ._context;i.font=t;var n=EZ.METRICS_STRING+EZ.BASELINE_SYMBOL,s=Math.ceil(i.measureText(n).width),o=Math.ceil(i.measureText(EZ.BASELINE_SYMBOL).width),a=Math.ceil(EZ.HEIGHT_MULTIPLIER*o),o=o*EZ.BASELINE_MULTIPLIER|0;r.width=s,r.height=a,i.fillStyle="#f00",i.fillRect(0,0,s,a),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(n,0,o);for(var h=i.getImageData(0,0,s,a).data,i=h.length,u=4*s,l=0,c=0,d=!1,l=0;l<o;++l){for(var f=0;f<u;f+=4)if(255!==h[c+f]){d=!0;break}if(d)break;c+=u}for(e.ascent=o-l,c=i-u,d=!1,l=a;o<l;--l){for(f=0;f<u;f+=4)if(255!==h[c+f]){d=!0;break}if(d)break;c-=u}return e.descent=l-o,e.fontSize=e.ascent+e.descent,EZ._fonts[t]=e},EZ.clearMetrics=function(t){(t=void 0===t?"":t)?delete EZ._fonts[t]:EZ._fonts={}},EZ);function EZ(t,e,r,i,n,s,o,a,h){this.text=t,this.style=e,this.width=r,this.height=i,this.lines=n,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}NW=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();NW.width=NW.height=10,gZ._canvas=NW,gZ._context=NW.getContext("2d"),gZ._fonts={},gZ.METRICS_STRING="|ÉqÅ",gZ.BASELINE_SYMBOL="M",gZ.BASELINE_MULTIPLIER=1.4,gZ.HEIGHT_MULTIPLIER=2,gZ._newlines=[10,13];var TZ,bZ,AZ,SZ={texture:!0,children:!(gZ._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]),baseTexture:!0},IZ=(dZ(bZ=OZ,AZ=TZ=hZ),bZ.prototype=null===AZ?Object.create(AZ):(RZ.prototype=AZ.prototype,new RZ),OZ.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var r,i,n=this.context,s=gZ.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),t=s.width,o=s.height,a=s.lines,h=s.lineHeight,u=s.lineWidths,l=s.maxLineWidth,c=s.fontProperties;this.canvas.width=Math.ceil((Math.max(1,t)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*e.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;for(var d=e.dropShadow?2:1,f=0;f<d;++f){var p,_=e.dropShadow&&0===f,y=_?Math.ceil(Math.max(1,o)+2*e.padding):0,m=y*this._resolution;_?(n.fillStyle="black",n.strokeStyle="black",p=iz("number"==typeof(_=e.dropShadowColor)?_:("string"==typeof(p=_)&&"#"===(p=rz[p.toLowerCase()]||p)[0]&&(p=p.substr(1)),parseInt(p,16))),n.shadowColor="rgba("+255*p[0]+","+255*p[1]+","+255*p[2]+","+e.dropShadowAlpha+")",n.shadowBlur=e.dropShadowBlur,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+m):(n.fillStyle=this._generateFillStyle(e,a,s),n.strokeStyle=e.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0);var v=(h-c.fontSize)/2;(!OZ.nextLineHeightBehavior||h-c.fontSize<0)&&(v=0);for(var x=0;x<a.length;x++)r=e.strokeThickness/2,i=e.strokeThickness/2+x*h+c.ascent+v,"right"===e.align?r+=l-u[x]:"center"===e.align&&(r+=(l-u[x])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[x],r+e.padding,i+e.padding-y,!0),e.fill&&this.drawLetterSpacing(a[x],r+e.padding,i+e.padding-y)}this.updateTexture()}},OZ.prototype.drawLetterSpacing=function(t,e,r,i){void 0===i&&(i=!1);var n=this._style.letterSpacing;if(0!==n)for(var s,o=e,a=Array.from?Array.from(t):t.split(""),h=this.context.measureText(t).width,u=0;u<a.length;++u){var l=a[u];i?this.context.strokeText(l,o,r):this.context.fillText(l,o,r),o+=h-(s=this.context.measureText(t.substring(u+1)).width)+n,h=s}else i?this.context.strokeText(t,e,r):this.context.fillText(t,e,r)},OZ.prototype.updateTexture=function(){var t=this.canvas;!this._style.trim||(i=function(t){for(var e,r,i=t.width,n=t.height,s=t.getContext("2d"),o=s.getImageData(0,0,i,n).data,a=o.length,h={top:null,left:null,right:null,bottom:null},t=null,u=0;u<a;u+=4)0!==o[u+3]&&(e=u/4%i,r=~~(u/4/i),null===h.top&&(h.top=r),(null===h.left||e<h.left)&&(h.left=e),(null===h.right||h.right<e)&&(h.right=1+e),(null===h.bottom||h.bottom<r)&&(h.bottom=r));return null!==h.top&&(i=h.right-h.left,n=h.bottom-h.top+1,t=s.getImageData(h.left,h.top,i,n)),{height:n,width:i,data:t}}(t)).data&&(t.width=i.width,t.height=i.height,this.context.putImageData(i.data,0,0));var e=this._texture,r=this._style,i=r.trim?0:r.padding,r=e.baseTexture;e.trim.width=e._frame.width=Math.ceil(t.width/this._resolution),e.trim.height=e._frame.height=Math.ceil(t.height/this._resolution),e.trim.x=-i,e.trim.y=-i,e.orig.width=e._frame.width-2*i,e.orig.height=e._frame.height-2*i,this._onTextureUpdate(),r.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},OZ.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),TZ.prototype._render.call(this,t)},OZ.prototype.getLocalBounds=function(t){return this.updateText(!0),TZ.prototype.getLocalBounds.call(this,t)},OZ.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},OZ.prototype._generateFillStyle=function(t,e,r){var i=t.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];var n=t.dropShadow?t.dropShadowDistance:0,s=t.padding||0,o=Math.ceil(this.canvas.width/this._resolution)-n-2*s,a=Math.ceil(this.canvas.height/this._resolution)-n-2*s,h=i.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var l=h.length+1,c=1;c<l;++c)u.push(c/l);if(h.unshift(i[0]),u.unshift(0),h.push(i[i.length-1]),u.push(1),t.fillGradientType===cZ.LINEAR_VERTICAL)for(var d=this.context.createLinearGradient(o/2,s,o/2,a+s),f=(r.fontProperties.fontSize+t.strokeThickness)/a,c=0;c<e.length;c++)for(var p=r.lineHeight*c,_=0;_<h.length;_++){var y=0,y="number"==typeof u[_]?u[_]:_/h.length,y=Math.min(1,Math.max(0,p/a+y*f)),y=Number(y.toFixed(5));d.addColorStop(y,h[_])}else{d=this.context.createLinearGradient(s,a/2,o+s,a/2);for(var m=h.length+1,v=1,c=0;c<h.length;c++){var x=void 0,x="number"==typeof u[c]?u[c]:v/m;d.addColorStop(x,h[c]),v++}}return d},OZ.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},SZ,t),TZ.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(OZ.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=lz(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(OZ.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=lz(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(OZ.prototype,"style",{get:function(){return this._style},set:function(t){this._style=(t=t||{})instanceof _Z?t:new _Z(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(OZ.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(OZ.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),OZ.nextLineHeightBehavior=!1,OZ);function RZ(){this.constructor=bZ}function OZ(t,e,r){var i=this,n=!1;r||(r=document.createElement("canvas"),n=!0),r.width=3,r.height=3;var s=$W.from(r);return s.orig=new Nz,s.trim=new Nz,(i=TZ.call(this,s)||this)._ownCanvas=n,i.canvas=r,i.context=i.canvas.getContext("2d"),i._resolution=J6.RESOLUTION,i._autoResolution=!0,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=t,i.style=e,i.localStyleID=-1,i}UF.UPLOADS_PER_FRAME=4;var wZ=function(t,e){return(wZ=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var CZ=(PZ.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},PZ.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},PZ);function PZ(t){this.maxItemsPerFrame=t,this.itemsLeft=0}function NZ(t,e){var r=!1;if(t&&t._textures&&t._textures.length)for(var i,n=0;n<t._textures.length;n++)t._textures[n]instanceof L3&&(i=t._textures[n].baseTexture,-1===e.indexOf(i)&&(e.push(i),r=!0));return r}function MZ(t,e){if(t.baseTexture instanceof zB){t=t.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function LZ(t,e){if(t._texture&&t._texture instanceof L3){t=t._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function DZ(t,e){return e instanceof IZ&&(e.updateText(!0),!0)}function UZ(t,e){if(e instanceof _Z){e=e.toFontString();return gZ.measureFont(e),!0}return!1}function FZ(t,e){if(t instanceof IZ){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);t=t._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function BZ(t,e){return t instanceof _Z&&(-1===e.indexOf(t)&&e.push(t),!0)}var kZ=(GZ.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,oB.system.addOnce(this.tick,this,eB.UTILITY))):e&&e()},GZ.prototype.tick=function(){setTimeout(this.delayedTick,0)},GZ.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)oB.system.addOnce(this.tick,this,eB.UTILITY);else{this.ticking=!1;for(var n=this.completes.slice(0),r=this.completes.length=0,i=n.length;r<i;r++)n[r]()}},GZ.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},GZ.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},GZ.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof w6)for(e=t.children.length-1;0<=e;e--)this.add(t.children[e]);return this},GZ.prototype.destroy=function(){this.ticking&&oB.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},GZ);function GZ(t){var e=this;this.limiter=new CZ(UF.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(FZ),this.registerFindHook(BZ),this.registerFindHook(NZ),this.registerFindHook(MZ),this.registerFindHook(LZ),this.registerUploadHook(DZ),this.registerUploadHook(UZ)}function XZ(t,e){return e instanceof zB&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function HZ(t,e){if(!(e instanceof QY))return!1;var r=e.geometry;e.finishPoly(),r.updateBatches();for(var i=r.batches,n=0;n<i.length;n++){var s=i[n].style.texture;s&&XZ(t,s.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function VZ(t,e){return t instanceof QY&&(e.push(t),!0)}var jZ,YZ,zZ,P4=(wZ(YZ=ZZ,zZ=jZ=kZ),YZ.prototype=null===zZ?Object.create(zZ):(WZ.prototype=zZ.prototype,new WZ),ZZ);function WZ(){this.constructor=YZ}function ZZ(t){t=jZ.call(this,t)||this;return t.uploadHookHelper=t.renderer,t.registerFindHook(VZ),t.registerUploadHook(XZ),t.registerUploadHook(HZ),t}KZ.prototype.beginFrame=function(){this.frameStart=Date.now()},KZ.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};function KZ(t){this.maxMilliseconds=t,this.frameStart=0}var qZ,JZ=2*Math.PI;Math.PI,Math.PI;(NW=qZ=qZ||{})[NW.POLY=0]="POLY",NW[NW.RECT=1]="RECT",NW[NW.CIRC=2]="CIRC",NW[NW.ELIP=3]="ELIP",NW[NW.RREC=4]="RREC";var QZ=(Object.defineProperty($Z.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty($Z.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty($Z.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty($Z.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty($Z,"EMPTY",{get:function(){return new $Z(0,0,0,0)},enumerable:!1,configurable:!0}),$Z.prototype.clone=function(){return new $Z(this.x,this.y,this.width,this.height)},$Z.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},$Z.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},$Z.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},$Z.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},$Z.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},$Z.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},$Z.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},$Z.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},$Z);function $Z(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=qZ.RECT}tK.prototype.clone=function(){return new tK(this.x,this.y,this.radius)},tK.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},tK.prototype.getBounds=function(){return new QZ(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},tK.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function tK(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=qZ.CIRC}eK.prototype.clone=function(){return new eK(this.x,this.y,this.width,this.height)},eK.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},eK.prototype.getBounds=function(){return new QZ(this.x-this.width,this.y-this.height,this.width,this.height)},eK.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function eK(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=qZ.ELIP}rK.prototype.clone=function(){var t=new rK(this.points.slice());return t.closeStroke=this.closeStroke,t},rK.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},rK.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function rK(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=qZ.POLY,this.closeStroke=!0}iK.prototype.clone=function(){return new iK(this.x,this.y,this.width,this.height,this.radius)},iK.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},iK.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function iK(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=qZ.RREC}var nK=(sK.prototype.clone=function(){return new sK(this.x,this.y)},sK.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},sK.prototype.copyTo=function(t){return t.set(this.x,this.y),t},sK.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},sK.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},sK.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},sK);function sK(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var oK=(aK.prototype.clone=function(t,e){return new aK(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},aK.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},aK.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},aK.prototype.copyTo=function(t){return t.set(this._x,this._y),t},aK.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},aK.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(aK.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(aK.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),aK);function aK(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var hK=(uK.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},uK.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},uK.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},uK.prototype.apply=function(t,e){e=e||new nK;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},uK.prototype.applyInverse=function(t,e){e=e||new nK;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},uK.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},uK.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},uK.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},uK.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},uK.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},uK.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},uK.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(JZ-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},uK.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},uK.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},uK.prototype.clone=function(){var t=new uK;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},uK.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},uK.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},uK.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(uK,"IDENTITY",{get:function(){return new uK},enumerable:!1,configurable:!0}),Object.defineProperty(uK,"TEMP_MATRIX",{get:function(){return new uK},enumerable:!1,configurable:!0}),uK);function uK(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var lK=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],cK=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],dK=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],fK=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],pK=[],_K=[],yK=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];pK.push(e);for(var r=0;r<16;r++)for(var i=yK(lK[t]*lK[r]+dK[t]*cK[r]),n=yK(cK[t]*lK[r]+fK[t]*cK[r]),s=yK(lK[t]*dK[r]+dK[t]*fK[r]),o=yK(cK[t]*dK[r]+fK[t]*fK[r]),a=0;a<16;a++)if(lK[a]===i&&cK[a]===n&&dK[a]===s&&fK[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new hK;h.set(lK[t],cK[t],dK[t],fK[t],0,0),_K.push(h)}}();var mK={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return lK[t]},uY:function(t){return cK[t]},vX:function(t){return dK[t]},vY:function(t){return fK[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return pK[t][e]},sub:function(t,e){return pK[t][mK.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?mK.S:mK.N:2*Math.abs(e)<=Math.abs(t)?0<t?mK.E:mK.W:0<e?0<t?mK.SE:mK.SW:0<t?mK.NE:mK.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=_K[mK.inv(e)];e.tx=r,e.ty=i,t.append(e)}};vK.prototype.onChange=function(){this._localID++},vK.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},vK.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},vK.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},vK.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},vK.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(vK.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),vK.IDENTITY=new vK;function vK(){this.worldTransform=new hK,this.localTransform=new hK,this.position=new oK(this.onChange,this,0,0),this.scale=new oK(this.onChange,this,1,1),this.pivot=new oK(this.onChange,this,0,0),this.skew=new oK(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}function xK(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var gK=/iPhone/i,EK=/iPod/i,TK=/iPad/i,bK=/\biOS-universal(?:.+)Mac\b/i,AK=/\bAndroid(?:.+)Mobile\b/i,SK=/Android/i,IK=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,RK=/Silk/i,OK=/Windows Phone/i,wK=/\bWindows(?:.+)ARM\b/i,CK=/BlackBerry/i,PK=/BB10/i,NK=/Opera Mini/i,MK=/\b(CriOS|Chrome)(?:.+)Mobile/i,LK=/Mobile(?:.+)Firefox\b/i;var DK=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(gK)&&!i(OK),ipod:i(EK),tablet:!i(gK)&&(i(TK)||xK(e))&&!i(OK),universal:i(bK),device:(i(gK)||i(EK)||i(TK)||i(bK)||xK(e))&&!i(OK)},amazon:{phone:i(IK),tablet:!i(IK)&&i(RK),device:i(IK)||i(RK)},android:{phone:!i(OK)&&i(IK)||!i(OK)&&i(AK),tablet:!i(OK)&&!i(IK)&&!i(AK)&&(i(RK)||i(SK)),device:!i(OK)&&(i(IK)||i(RK)||i(AK)||i(SK))||i(/\bokhttp\b/i)},windows:{phone:i(OK),tablet:i(wK),device:i(OK)||i(wK)},other:{blackberry:i(CK),blackberry10:i(PK),opera:i(NK),firefox:i(LK),chrome:i(MK),device:i(CK)||i(PK)||i(NK)||i(LK)||i(MK)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(NW={})[NW.WEBGL_LEGACY=0]="WEBGL_LEGACY",NW[NW.WEBGL=1]="WEBGL",NW[NW.WEBGL2=2]="WEBGL2",(NW={})[NW.UNKNOWN=0]="UNKNOWN",NW[NW.WEBGL=1]="WEBGL",NW[NW.CANVAS=2]="CANVAS",(NW={})[NW.COLOR=16384]="COLOR",NW[NW.DEPTH=256]="DEPTH",NW[NW.STENCIL=1024]="STENCIL",(NW={})[NW.NORMAL=0]="NORMAL",NW[NW.ADD=1]="ADD",NW[NW.MULTIPLY=2]="MULTIPLY",NW[NW.SCREEN=3]="SCREEN",NW[NW.OVERLAY=4]="OVERLAY",NW[NW.DARKEN=5]="DARKEN",NW[NW.LIGHTEN=6]="LIGHTEN",NW[NW.COLOR_DODGE=7]="COLOR_DODGE",NW[NW.COLOR_BURN=8]="COLOR_BURN",NW[NW.HARD_LIGHT=9]="HARD_LIGHT",NW[NW.SOFT_LIGHT=10]="SOFT_LIGHT",NW[NW.DIFFERENCE=11]="DIFFERENCE",NW[NW.EXCLUSION=12]="EXCLUSION",NW[NW.HUE=13]="HUE",NW[NW.SATURATION=14]="SATURATION",NW[NW.COLOR=15]="COLOR",NW[NW.LUMINOSITY=16]="LUMINOSITY",NW[NW.NORMAL_NPM=17]="NORMAL_NPM",NW[NW.ADD_NPM=18]="ADD_NPM",NW[NW.SCREEN_NPM=19]="SCREEN_NPM",NW[NW.NONE=20]="NONE",NW[NW.SRC_OVER=0]="SRC_OVER",NW[NW.SRC_IN=21]="SRC_IN",NW[NW.SRC_OUT=22]="SRC_OUT",NW[NW.SRC_ATOP=23]="SRC_ATOP",NW[NW.DST_OVER=24]="DST_OVER",NW[NW.DST_IN=25]="DST_IN",NW[NW.DST_OUT=26]="DST_OUT",NW[NW.DST_ATOP=27]="DST_ATOP",NW[NW.ERASE=26]="ERASE",NW[NW.SUBTRACT=28]="SUBTRACT",NW[NW.XOR=29]="XOR",(NW={})[NW.POINTS=0]="POINTS",NW[NW.LINES=1]="LINES",NW[NW.LINE_LOOP=2]="LINE_LOOP",NW[NW.LINE_STRIP=3]="LINE_STRIP",NW[NW.TRIANGLES=4]="TRIANGLES",NW[NW.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",NW[NW.TRIANGLE_FAN=6]="TRIANGLE_FAN",(NW={})[NW.RGBA=6408]="RGBA",NW[NW.RGB=6407]="RGB",NW[NW.ALPHA=6406]="ALPHA",NW[NW.LUMINANCE=6409]="LUMINANCE",NW[NW.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",NW[NW.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",NW[NW.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(NW={})[NW.TEXTURE_2D=3553]="TEXTURE_2D",NW[NW.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",NW[NW.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",NW[NW.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",NW[NW.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",NW[NW.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",NW[NW.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",NW[NW.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",NW[NW.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(NW={})[NW.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",NW[NW.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",NW[NW.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",NW[NW.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",NW[NW.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",NW[NW.FLOAT=5126]="FLOAT",NW[NW.HALF_FLOAT=36193]="HALF_FLOAT",(NW={})[NW.FLOAT=0]="FLOAT",NW[NW.INT=1]="INT",NW[NW.UINT=2]="UINT",(NW=aJ=aJ||{})[NW.NEAREST=0]="NEAREST",NW[NW.LINEAR=1]="LINEAR",(NW=eJ=eJ||{})[NW.CLAMP=33071]="CLAMP",NW[NW.REPEAT=10497]="REPEAT",NW[NW.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(NW=Vq=Vq||{})[NW.OFF=0]="OFF",NW[NW.POW2=1]="POW2",NW[NW.ON=2]="ON",NW[NW.ON_MANUAL=3]="ON_MANUAL",(NW={})[NW.NPM=0]="NPM",NW[NW.UNPACK=1]="UNPACK",NW[NW.PMA=2]="PMA",NW[NW.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",NW[NW.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",NW[NW.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(NW={})[NW.NO=0]="NO",NW[NW.YES=1]="YES",NW[NW.AUTO=2]="AUTO",NW[NW.BLEND=0]="BLEND",NW[NW.CLEAR=1]="CLEAR",NW[NW.BLIT=2]="BLIT",(NW=zq=zq||{})[NW.AUTO=0]="AUTO",NW[NW.MANUAL=1]="MANUAL",(NW=lJ=lJ||{}).LOW="lowp",NW.MEDIUM="mediump",NW.HIGH="highp",(NW={})[NW.NONE=0]="NONE",NW[NW.SCISSOR=1]="SCISSOR",NW[NW.STENCIL=2]="STENCIL",NW[NW.SPRITE=3]="SPRITE",(NW={})[NW.NONE=0]="NONE",NW[NW.LOW=2]="LOW",NW[NW.MEDIUM=4]="MEDIUM",NW[NW.HIGH=8]="HIGH";var UK,FK,BK,kK,GK,XK,HK,VK,jK,YK,zK,WK,ZK,KK,qK,JK,QK,$K,tq,eq,rq,iq={MIPMAP_TEXTURES:Vq.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(UK=32,BK=!0,(DK.tablet||DK.phone)&&(DK.apple.device&&(FK=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(FK[1],10)<11&&(BK=!1),DK.android.device&&(FK=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(FK[1],10)<7&&(BK=!1)),BK?UK:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:zq.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:eJ.CLAMP,SCALE_MODE:aJ.LINEAR,PRECISION_VERTEX:lJ.HIGH,PRECISION_FRAGMENT:DK.apple.device?lJ.HIGH:lJ.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!DK.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};(NW=kK=kK||{})[NW.WEBGL_LEGACY=0]="WEBGL_LEGACY",NW[NW.WEBGL=1]="WEBGL",NW[NW.WEBGL2=2]="WEBGL2",(Vq=GK=GK||{})[Vq.UNKNOWN=0]="UNKNOWN",Vq[Vq.WEBGL=1]="WEBGL",Vq[Vq.CANVAS=2]="CANVAS",(zq=XK=XK||{})[zq.COLOR=16384]="COLOR",zq[zq.DEPTH=256]="DEPTH",zq[zq.STENCIL=1024]="STENCIL",(eJ=HK=HK||{})[eJ.NORMAL=0]="NORMAL",eJ[eJ.ADD=1]="ADD",eJ[eJ.MULTIPLY=2]="MULTIPLY",eJ[eJ.SCREEN=3]="SCREEN",eJ[eJ.OVERLAY=4]="OVERLAY",eJ[eJ.DARKEN=5]="DARKEN",eJ[eJ.LIGHTEN=6]="LIGHTEN",eJ[eJ.COLOR_DODGE=7]="COLOR_DODGE",eJ[eJ.COLOR_BURN=8]="COLOR_BURN",eJ[eJ.HARD_LIGHT=9]="HARD_LIGHT",eJ[eJ.SOFT_LIGHT=10]="SOFT_LIGHT",eJ[eJ.DIFFERENCE=11]="DIFFERENCE",eJ[eJ.EXCLUSION=12]="EXCLUSION",eJ[eJ.HUE=13]="HUE",eJ[eJ.SATURATION=14]="SATURATION",eJ[eJ.COLOR=15]="COLOR",eJ[eJ.LUMINOSITY=16]="LUMINOSITY",eJ[eJ.NORMAL_NPM=17]="NORMAL_NPM",eJ[eJ.ADD_NPM=18]="ADD_NPM",eJ[eJ.SCREEN_NPM=19]="SCREEN_NPM",eJ[eJ.NONE=20]="NONE",eJ[eJ.SRC_OVER=0]="SRC_OVER",eJ[eJ.SRC_IN=21]="SRC_IN",eJ[eJ.SRC_OUT=22]="SRC_OUT",eJ[eJ.SRC_ATOP=23]="SRC_ATOP",eJ[eJ.DST_OVER=24]="DST_OVER",eJ[eJ.DST_IN=25]="DST_IN",eJ[eJ.DST_OUT=26]="DST_OUT",eJ[eJ.DST_ATOP=27]="DST_ATOP",eJ[eJ.ERASE=26]="ERASE",eJ[eJ.SUBTRACT=28]="SUBTRACT",eJ[eJ.XOR=29]="XOR",(aJ=VK=VK||{})[aJ.POINTS=0]="POINTS",aJ[aJ.LINES=1]="LINES",aJ[aJ.LINE_LOOP=2]="LINE_LOOP",aJ[aJ.LINE_STRIP=3]="LINE_STRIP",aJ[aJ.TRIANGLES=4]="TRIANGLES",aJ[aJ.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",aJ[aJ.TRIANGLE_FAN=6]="TRIANGLE_FAN",(lJ=jK=jK||{})[lJ.RGBA=6408]="RGBA",lJ[lJ.RGB=6407]="RGB",lJ[lJ.ALPHA=6406]="ALPHA",lJ[lJ.LUMINANCE=6409]="LUMINANCE",lJ[lJ.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",lJ[lJ.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",lJ[lJ.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(NW=YK=YK||{})[NW.TEXTURE_2D=3553]="TEXTURE_2D",NW[NW.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",NW[NW.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",NW[NW.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",NW[NW.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",NW[NW.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",NW[NW.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",NW[NW.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",NW[NW.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(Vq=zK=zK||{})[Vq.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Vq[Vq.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Vq[Vq.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Vq[Vq.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Vq[Vq.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Vq[Vq.FLOAT=5126]="FLOAT",Vq[Vq.HALF_FLOAT=36193]="HALF_FLOAT",(zq=WK=WK||{})[zq.FLOAT=0]="FLOAT",zq[zq.INT=1]="INT",zq[zq.UINT=2]="UINT",(eJ=ZK=ZK||{})[eJ.NEAREST=0]="NEAREST",eJ[eJ.LINEAR=1]="LINEAR",(aJ=KK=KK||{})[aJ.CLAMP=33071]="CLAMP",aJ[aJ.REPEAT=10497]="REPEAT",aJ[aJ.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(lJ=qK=qK||{})[lJ.OFF=0]="OFF",lJ[lJ.POW2=1]="POW2",lJ[lJ.ON=2]="ON",lJ[lJ.ON_MANUAL=3]="ON_MANUAL",(NW=JK=JK||{})[NW.NPM=0]="NPM",NW[NW.UNPACK=1]="UNPACK",NW[NW.PMA=2]="PMA",NW[NW.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",NW[NW.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",NW[NW.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Vq=QK=QK||{})[Vq.NO=0]="NO",Vq[Vq.YES=1]="YES",Vq[Vq.AUTO=2]="AUTO",Vq[Vq.BLEND=0]="BLEND",Vq[Vq.CLEAR=1]="CLEAR",Vq[Vq.BLIT=2]="BLIT",(zq=$K=$K||{})[zq.AUTO=0]="AUTO",zq[zq.MANUAL=1]="MANUAL",(eJ=tq=tq||{}).LOW="lowp",eJ.MEDIUM="mediump",eJ.HIGH="highp",(aJ=eq=eq||{})[aJ.NONE=0]="NONE",aJ[aJ.SCISSOR=1]="SCISSOR",aJ[aJ.STENCIL=2]="STENCIL",aJ[aJ.SPRITE=3]="SPRITE",(lJ=rq=rq||{})[lJ.NONE=0]="NONE",lJ[lJ.LOW=2]="LOW",lJ[lJ.MEDIUM=4]="MEDIUM",lJ[lJ.HIGH=8]="HIGH";r(16);var nq={parse:_t.parse,format:_t.format,resolve:_t.resolve};iq.RETINA_PREFIX=/@([0-9\.]+)x/;var sq,oq=iq.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,aq="6.0.4";var hq=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[HK.NORMAL_NPM]=HK.NORMAL,t[HK.ADD_NPM]=HK.ADD,t[HK.SCREEN_NPM]=HK.SCREEN,e[HK.NORMAL]=HK.NORMAL_NPM,e[HK.ADD]=HK.ADD_NPM,e[HK.SCREEN]=HK.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function uq(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function lq(t){return!(t&t-1||!t)}function cq(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}var dq=0;var fq={};function pq(t,e,r){var i;void 0===r&&(r=3),fq[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),fq[e]=!0)}var _q={},yq=Object.create(null),mq=Object.create(null);vq.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},vq.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},vq.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(vq.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(vq.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function vq(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||iq.RESOLUTION,this.resize(t,e)}var xq;function gq(t,e){t=iq.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var Eq,Tq=(bq.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},bq.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},bq.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},bq.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},bq.prototype.contains=function(t){return-1!==this.items.indexOf(t)},bq.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},bq.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(bq.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(bq.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),bq);function bq(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(Tq.prototype,{dispatch:{value:Tq.prototype.emit},run:{value:Tq.prototype.emit}}),iq.TARGET_FPMS=.06,(NW=Eq=Eq||{})[NW.INTERACTION=50]="INTERACTION",NW[NW.HIGH=25]="HIGH",NW[NW.NORMAL=0]="NORMAL",NW[NW.LOW=-25]="LOW",NW[NW.UTILITY=-50]="UTILITY";var Aq=(Sq.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},Sq.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},Sq.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},Sq.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},Sq);function Sq(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var Iq=(Rq.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Rq.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Rq.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Rq.prototype.add=function(t,e,r){return void 0===r&&(r=Eq.NORMAL),this._addListener(new Aq(t,e,r))},Rq.prototype.addOnce=function(t,e,r){return void 0===r&&(r=Eq.NORMAL),this._addListener(new Aq(t,e,r,!0))},Rq.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},Rq.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Rq.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),Rq.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Rq.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Rq.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},Rq.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*iq.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(Rq.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(Rq.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,iq.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(Rq.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(Rq,"shared",{get:function(){var t;return Rq._shared||((t=Rq._shared=new Rq).autoStart=!0,t._protected=!0),Rq._shared},enumerable:!1,configurable:!0}),Object.defineProperty(Rq,"system",{get:function(){var t;return Rq._system||((t=Rq._system=new Rq).autoStart=!0,t._protected=!0),Rq._system},enumerable:!1,configurable:!0}),Rq);function Rq(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Aq(null,null,1/0),this.deltaMS=1/iq.TARGET_FPMS,this.elapsedMS=1/iq.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}Oq.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,Eq.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Iq.shared:new Iq,t.autoStart&&this.start()},Oq.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function Oq(){}iq.PREFER_ENV=DK.any?kK.WEBGL:kK.WEBGL2,iq.STRICT_TEXTURE_CACHE=!1;var wq=[];function Cq(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=wq.length-1;0<=n;--n){var s=wq[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var Pq=function(t,e){return(Pq=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Nq(t,e){function r(){this.constructor=t}Pq(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Mq=(Lq.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},Lq.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},Lq.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(Lq.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),Lq.prototype.update=function(){this.destroyed||this.onUpdate.emit()},Lq.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(Lq.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(Lq.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Lq.prototype.style=function(t,e,r){return!1},Lq.prototype.dispose=function(){},Lq.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Lq.test=function(t,e){return!1},Lq);function Lq(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Tq("setRealSize"),this.onUpdate=new Tq("update"),this.onError=new Tq("onError")}var Dq,Uq=(Nq(Fq,Dq=Mq),Fq.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===JK.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},Fq.prototype.dispose=function(){this.data=null},Fq.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},Fq);function Fq(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=Dq.call(this,e,i)||this).data=t,r}var Bq,kq={scaleMode:ZK.NEAREST,format:jK.RGBA,alphaMode:JK.NPM},Gq=(Nq(Xq,Bq=pt.a),Object.defineProperty(Xq.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(Xq.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Xq.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},Xq.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},Xq.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},Xq.prototype._refreshPOT=function(){this.isPowerOfTwo=lq(this.realWidth)&&lq(this.realHeight)},Xq.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},Xq.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},Xq.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},Xq.prototype.onError=function(t){this.emit("error",this,t)},Xq.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete mq[this.cacheId],delete yq[this.cacheId],this.cacheId=null),this.dispose(),Xq.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},Xq.prototype.dispose=function(){this.emit("dispose",this)},Xq.prototype.castToBaseTexture=function(){return this},Xq.from=function(t,e,r){void 0===r&&(r=iq.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++dq),t._pixiId),s=mq[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new Xq(t,e)).cacheId=n,Xq.addToCache(s,n)),s},Xq.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new Uq(t,{width:e,height:r}),t=t instanceof Float32Array?zK.FLOAT:zK.UNSIGNED_BYTE;return new Xq(n,Object.assign(kq,i||{width:e,height:r,type:t}))},Xq.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),mq[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),mq[e]=t)},Xq.removeFromCache=function(t){if("string"==typeof t){var e=mq[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete mq[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete mq[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Xq._globalBatch=0,Xq);function Xq(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=Bq.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof Mq||((t=Cq(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||iq.RESOLUTION,r.mipmap=void 0!==n?n:iq.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:iq.ANISOTROPIC_LEVEL,r.wrapMode=u||iq.WRAP_MODE,r.scaleMode=void 0!==o?o:iq.SCALE_MODE,r.format=l||jK.RGBA,r.type=c||zK.UNSIGNED_BYTE,r.target=d||YK.TEXTURE_2D,r.alphaMode=void 0!==i?i:JK.UNPACK,r.uid=++dq,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var Hq,Vq=(Nq(jq,Hq=Mq),jq.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof Mq?this.addResourceAt(t[r],r):this.addResourceAt(Cq(t[r],e),r))},jq.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},jq.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},jq.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");Hq.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},jq.prototype.unbind=function(t){Hq.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},jq.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},jq);function jq(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=Hq.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new Gq;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var Yq,zq=(Nq(Wq,Yq=Vq),Wq.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},Wq.prototype.bind=function(t){Yq.prototype.bind.call(this,t),t.target=YK.TEXTURE_2D_ARRAY},Wq.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},Wq);function Wq(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=Yq.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var Zq,Kq=(Nq(qq,Zq=Mq),qq.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(xq=xq||document.createElement("a")).href=t;var r=nq.parse(xq.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},qq.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===JK.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},qq.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),Zq.prototype.update.call(this))},qq.prototype.dispose=function(){this.source=null},qq);function qq(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=Zq.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var Jq,Qq=(Nq($q,Jq=Kq),$q.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},$q);function $q(t){return Jq.call(this,t)||this}var tJ,eJ=(Nq(rJ,tJ=Vq),rJ.prototype.bind=function(t){tJ.prototype.bind.call(this,t),t.target=YK.TEXTURE_CUBE_MAP},rJ.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=YK.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},rJ.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<rJ.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},rJ.test=function(t){return Array.isArray(t)&&t.length===rJ.SIDES},rJ.SIDES=6,rJ);function rJ(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==rJ.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=tJ.call(this,6,{width:n,height:s})||this,a=0;a<rJ.SIDES;a++)r.items[a].target=YK.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var iJ,nJ=(Nq(sJ,iJ=Kq),sJ.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},sJ.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===JK.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},sJ.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return iJ.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(iJ.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},sJ.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,iJ.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},sJ.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},sJ);function sJ(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,Kq.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=iJ.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:iq.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var oJ,aJ=(Nq(hJ,oJ=Kq),hJ.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},hJ.prototype._loadSvg=function(){var s=this,o=new Image;Kq.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++dq,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},hJ.getSize=function(t){var e=hJ.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},hJ.prototype.dispose=function(){oJ.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},hJ.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},hJ.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,hJ);function hJ(t,e){var r=this;return e=e||{},(r=oJ.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var uJ,lJ=(Nq(cJ,uJ=Kq),cJ.prototype.update=function(t){var e;this.destroyed||(e=Iq.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(uJ.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},cJ.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},cJ.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},cJ.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},cJ.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},cJ.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Iq.shared.add(this.update,this),this._isConnectedToTicker=!0)},cJ.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Iq.shared.remove(this.update,this),this._isConnectedToTicker=!1)},cJ.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},cJ.prototype.dispose=function(){this._isConnectedToTicker&&Iq.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),uJ.prototype.dispose.call(this)},Object.defineProperty(cJ.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Iq.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Iq.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(cJ.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),cJ.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<cJ.TYPES.indexOf(e)},cJ.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],cJ.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},cJ);function cJ(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];Kq.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||cJ.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=uJ.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var dJ,NW=(Nq(fJ,dJ=Kq),fJ.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},fJ);function fJ(t){return dJ.call(this,t)||this}wq.push(nJ,NW,Qq,lJ,aJ,Uq,eJ,zq);var pJ={__proto__:null,Resource:Mq,BaseImageResource:Kq,INSTALLED:wq,autoDetectResource:Cq,AbstractMultiResource:Vq,ArrayResource:zq,BufferResource:Uq,CanvasResource:Qq,CubeResource:eJ,ImageResource:nJ,SVGResource:aJ,VideoResource:lJ,ImageBitmapResource:NW},aJ=(_J.prototype.destroy=function(){this.renderer=null},_J);function _J(t){this.renderer=t}var yJ,mJ=(Nq(vJ,yJ=Uq),vJ.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===JK.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},vJ);function vJ(){return null!==yJ&&yJ.apply(this,arguments)||this}var xJ=(Object.defineProperty(gJ.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),gJ.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new Gq(null,{scaleMode:ZK.NEAREST,resolution:1,mipmap:qK.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},gJ.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Gq(new mJ(null,{width:this.width,height:this.height}),{scaleMode:ZK.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:qK.OFF,format:jK.DEPTH_COMPONENT,type:zK.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},gJ.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},gJ.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},gJ.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},gJ.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},gJ.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},gJ);function gJ(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Tq("disposeFramebuffer"),this.multisample=rq.NONE}var EJ,TJ=(Nq(bJ,EJ=Gq),bJ.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},bJ.prototype.dispose=function(){this.framebuffer.dispose(),EJ.prototype.dispose.call(this)},bJ.prototype.destroy=function(){EJ.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},bJ);function bJ(t){var e=this,e=EJ.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=qK.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new xJ(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var AJ=(SJ.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=mK.add(r,mK.NW),this.x0=s+i*mK.uX(r),this.y0=e+n*mK.uY(r),r=mK.add(r,2),this.x1=s+i*mK.uX(r),this.y1=e+n*mK.uY(r),r=mK.add(r,2),this.x2=s+i*mK.uX(r),this.y2=e+n*mK.uY(r),r=mK.add(r,2),this.x3=s+i*mK.uX(r),this.y3=e+n*mK.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},SJ.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},SJ);function SJ(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var IJ,RJ=new AJ,OJ=(Nq(wJ,IJ=pt.a),wJ.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},wJ.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},wJ.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&yq[t.url]&&wJ.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,wJ.removeFromCache(this),this.textureCacheIds=null},wJ.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new wJ(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},wJ.prototype.updateUvs=function(){this._uvs===RJ&&(this._uvs=new AJ),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},wJ.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=iq.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++dq),t._pixiId),s=yq[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=gq(t)),(s=new wJ(new Gq(t,e))).baseTexture.cacheId=n,Gq.addToCache(s.baseTexture,n),wJ.addToCache(s,n)),s},wJ.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=wJ.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},wJ.fromBuffer=function(t,e,r,i){return new wJ(Gq.fromBuffer(t,e,r,i))},wJ.fromLoader=function(t,e,r,i){t=new Gq(t,Object.assign({scaleMode:iq.SCALE_MODE,resolution:gq(e)},i)),i=t.resource;i instanceof nJ&&(i.url=e);var n=new wJ(t);return Gq.addToCache(n.baseTexture,r=r||e),wJ.addToCache(n,r),r!==e&&(Gq.addToCache(n.baseTexture,e),wJ.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},wJ.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),yq[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),yq[e]=t)},wJ.removeFromCache=function(t){if("string"==typeof t){var e=yq[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete yq[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)yq[t.textureCacheIds[i]]===t&&delete yq[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(wJ.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(wJ.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(wJ.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(wJ.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(wJ.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),wJ.prototype.castToBaseTexture=function(){return this.baseTexture},wJ);function wJ(t,e,r,i,n,s){var o=IJ.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new QZ(0,0,1,1)),t instanceof wJ&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=RJ,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new nK(s.x,s.y):new nK(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function CJ(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}OJ.EMPTY=new OJ(new Gq),CJ(OJ.EMPTY),CJ(OJ.EMPTY.baseTexture),OJ.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new OJ(new Gq(new Qq(t)))}(),CJ(OJ.WHITE),CJ(OJ.WHITE.baseTexture);var PJ,NJ=(Nq(MJ,PJ=OJ),Object.defineProperty(MJ.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),MJ.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},MJ.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},MJ.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(pq("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new MJ(new TJ(t))},MJ);function MJ(t,e){e=PJ.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var LJ=(DJ.prototype.createTexture=function(t,e){e=new TJ(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new NJ(e)},DJ.prototype.getOptimalTexture=function(t,e,r){var i=DJ.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=uq(t)))<<16|65535&(e=uq(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},DJ.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},DJ.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},DJ.prototype.returnFilterTexture=function(t){this.returnTexture(t)},DJ.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},DJ.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=DJ.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},DJ.SCREEN_KEY="screen",DJ);function DJ(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var UJ=(FJ.prototype.destroy=function(){this.buffer=null},FJ.from=function(t,e,r,i,n){return new FJ(t,e,r,i,n)},FJ);function FJ(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=zK.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var BJ=0,kJ=(GJ.prototype.update=function(t){this.data=t||this.data,this._updateID++},GJ.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},GJ.prototype.destroy=function(){this.dispose(),this.data=null},GJ.from=function(t){return new GJ(t=t instanceof Array?new Float32Array(t):t)},GJ);function GJ(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=BJ++,this.disposeRunner=new Tq("disposeBuffer")}function XJ(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var HJ={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var VJ={5126:4,5123:2,5121:1},jJ=0,YJ={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},lJ=(zJ.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof kJ||(e instanceof Array&&(e=new Float32Array(e)),e=new kJ(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new UJ(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},zJ.prototype.getAttribute=function(t){return this.attributes[t]},zJ.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},zJ.prototype.addIndex=function(t){return t instanceof kJ||(t instanceof Array&&(t=new Uint16Array(t)),t=new kJ(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},zJ.prototype.getIndex=function(){return this.indexBuffer},zJ.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new kJ;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*VJ[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=XJ(l);n[c]||(n[c]=new HJ[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},zJ.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},zJ.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},zJ.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},zJ.prototype.clone=function(){for(var t=new zJ,e=0;e<this.buffers.length;e++)t.buffers[e]=new kJ(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new UJ(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},zJ.merge=function(t){for(var e=new zJ,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new YJ[XJ(o.buffers[s].data)](i[s]),e.buffers[s]=new kJ(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*VJ[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},zJ);function zJ(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=jJ++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Tq("disposeGeometry"),this.refCount=0}var WJ,ZJ=(Nq(KJ,WJ=lJ),KJ);function KJ(){var t=WJ.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var qJ,JJ=(Nq(QJ,qJ=lJ),QJ.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},QJ.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},QJ);function QJ(){var t=qJ.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new kJ(t.vertices),t.uvBuffer=new kJ(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var $J=0,tQ=(eQ.prototype.update=function(){this.dirtyId++},eQ.prototype.add=function(t,e,r){this.uniforms[t]=new eQ(e,r)},eQ.from=function(t,e){return new eQ(t,e)},eQ);function eQ(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=$J++,this.static=!!e}var rQ=(iQ.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},iQ);function iQ(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new QZ,this.destinationFrame=new QZ,this.bindingSourceFrame=new QZ,this.bindingDestinationFrame=new QZ,this.filters=[],this.transform=null}var nQ,sQ=[new nK,new nK,new nK,new nK],oQ=new hK,aQ=(Nq(hQ,nQ=aJ),hQ.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new rQ,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(oQ.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},hQ.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,QK.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,QK.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,QK.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},hQ.prototype.bindAndClear=function(t,e){void 0===e&&(e=QK.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===QK.CLEAR||e===QK.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},hQ.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(VK.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(VK.TRIANGLE_STRIP))},hQ.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(hK.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},hQ.prototype.destroy=function(){this.texturePool.clear(!1)},hQ.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},hQ.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},hQ.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},hQ.prototype.emptyPool=function(){this.texturePool.clear(!0)},hQ.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},hQ.prototype.transformAABB=function(t,e){var r=sQ[0],i=sQ[1],n=sQ[2],s=sQ[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},hQ.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?oQ.copyFrom(n):oQ.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},hQ);function hQ(t){var e=nQ.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new LJ,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new ZJ,e.quadUv=new JJ,e.tempRect=new QZ,e.activeState={},e.globalUniforms=new tQ({outputFrame:new QZ,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var uQ=(lQ.prototype.flush=function(){},lQ.prototype.destroy=function(){this.renderer=null},lQ.prototype.start=function(){},lQ.prototype.stop=function(){this.flush()},lQ.prototype.render=function(t){},lQ);function lQ(t){this.renderer=t}var cQ,dQ=(Nq(fQ,cQ=aJ),fQ.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},fQ.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},fQ.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},fQ.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},fQ.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},fQ);function fQ(t){var e=cQ.call(this,t)||this;return e.emptyRenderer=new uQ(t),e.currentRenderer=e.emptyRenderer,e}var pQ,_Q=0,yQ=(Nq(mQ,pQ=aJ),Object.defineProperty(mQ.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),mQ.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=_Q++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},mQ.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=_Q++,this.renderer.runners.contextChange.emit(t)},mQ.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},mQ.prototype.createContext=function(t,e){var r;if(r=iq.PREFER_ENV>=kK.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},mQ.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},mQ.prototype.handleContextLost=function(t){t.preventDefault()},mQ.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},mQ.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},mQ.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},mQ.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},mQ);function mQ(t){var e=pQ.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var vQ,xQ=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=rq.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},gQ=new QZ,EQ=(Nq(TQ,vQ=aJ),TQ.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new QZ,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,iq.PREFER_ENV===kK.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},TQ.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},TQ.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(TQ.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),TQ.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=XK.COLOR|XK.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},TQ.prototype.initFramebuffer=function(t){var e=this.gl,e=new xQ(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},TQ.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},TQ.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},TQ.prototype.detectSamples=function(t){var e=this.msaaSamples,r=rq.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?rq.NONE:r},TQ.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new xJ(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=gQ).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},TQ.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},TQ.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},TQ.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},TQ.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new QZ},TQ);function TQ(t){t=vQ.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new xJ(10,10),t.msaaSamples=null,t}var bQ,AQ=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},SQ={5126:4,5123:2,5121:1},IQ=(Nq(RQ,bQ=aJ),RQ.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=iq.PREFER_ENV===kK.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},RQ.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},RQ.prototype.reset=function(){this.unbind()},RQ.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},RQ.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},RQ.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},RQ.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*SQ[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*SQ[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*SQ[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new AQ(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},RQ.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},RQ.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},RQ.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},RQ.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},RQ.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},RQ.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},RQ);function RQ(t){t=bQ.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var OQ=(wQ.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=eq.NONE,this.autoDetect=!0),this._target=null},wQ.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},wQ);function wQ(t){void 0===t&&(t=null),this.type=eq.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function CQ(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function PQ(t,e,r,i){var n=CQ(t,t.VERTEX_SHADER,e),s=CQ(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function NQ(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function MQ(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return NQ(2*e);case"bvec3":return NQ(3*e);case"bvec4":return NQ(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var LQ,DQ={},UQ=DQ;function FQ(){var t,e;return(UQ===DQ||UQ&&UQ.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=iq.PREFER_ENV>=kK.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),UQ=e),UQ}function BQ(t,e,r){if("precision"===t.substring(0,9))return r!==tq.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===tq.HIGH&&r!==tq.HIGH?tq.MEDIUM:e)+" float;\n"+t}var kQ={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var GQ=null,XQ={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function HQ(t,e){if(!GQ){var r=Object.keys(XQ);GQ={};for(var i=0;i<r.length;++i){var n=r[i];GQ[t[n]]=XQ[n]}}return GQ[e]}var VQ=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],jQ={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},YQ={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var zQ,WQ=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function ZQ(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=WQ.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var KQ=0,qQ={},JQ=(QQ.prototype.extractData=function(t,e){var r=FQ();r?(e=PQ(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},QQ.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=HQ(e,o.type),a={type:a,name:o.name,size:kQ[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},QQ.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=HQ(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:MQ(h,s.size)}}return r},Object.defineProperty(QQ,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(QQ,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),QQ.from=function(t,e,r){var i=t+e,n=_q[i];return n||(_q[i]=n=new QQ(t,e,r)),n},QQ);function QQ(t,e,r){void 0===r&&(r="pixi-shader"),this.id=KQ++,this.vertexSrc=t||QQ.defaultVertexSrc,this.fragmentSrc=e||QQ.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),qQ[r]?(qQ[r]++,r+="-"+qQ[r]):qQ[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=BQ(this.vertexSrc,iq.PRECISION_VERTEX,tq.HIGH),this.fragmentSrc=BQ(this.fragmentSrc,iq.PRECISION_FRAGMENT,(LQ||(LQ=tq.MEDIUM,(r=FQ())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),LQ=r.precision?tq.HIGH:tq.MEDIUM)),LQ))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var $Q=(t$.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t$.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t$.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t$.from=function(t,e,r){return new t$(JQ.from(t,e),r)},t$);function t$(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof tQ?e:new tQ(e):new tQ({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var e$=(Object.defineProperty(r$.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(r$.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(r$.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(r$.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(r$.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(r$.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(r$.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==HK.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r$.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r$.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},r$.for2d=function(){var t=new r$;return t.depthTest=!1,t.blend=!0,t},r$);function r$(){this.data=0,this.blendMode=HK.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var i$,NW=(Nq(n$,i$=$Q),n$.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(n$.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(n$,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(n$,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),n$);function n$(t,e,r){var i=this,e=JQ.from(t||n$.defaultVertexSrc,e||n$.defaultFragmentSrc);return(i=i$.call(this,e,r)||this).padding=0,i.resolution=iq.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new e$,i}var s$=new hK,o$=(Object.defineProperty(a$.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),a$.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},a$.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(s$.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(s$));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},a$);function a$(t,e){this._texture=t,this.mapCoord=new hK,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var h$,u$=(Nq(l$,h$=NW),l$.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new o$(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},l$);function l$(t){var e=this,r=new hK,e=h$.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var c$,d$=(Nq(f$,c$=aJ),f$.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},f$.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new OQ).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case eq.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case eq.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case eq.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},f$.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case eq.SCISSOR:this.renderer.scissor.pop();break;case eq.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case eq.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},f$.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=eq.SPRITE:(t.type=eq.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=eq.SCISSOR)))},f$.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new u$(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},f$.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},f$);function f$(t){t=c$.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var p$,NW=(Nq(_$,p$=aJ),_$.prototype.getStackLength=function(){return this.maskStack.length},_$.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},_$.prototype._useCurrent=function(){},_$.prototype.destroy=function(){p$.prototype.destroy.call(this),this.maskStack=null},_$);function _$(t){t=p$.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var y$,m$=(Nq(v$,y$=NW),v$.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},v$.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},v$.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},v$.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},v$);function v$(t){t=y$.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var x$,g$=(Nq(E$,x$=NW),E$.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},E$.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},E$.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},E$.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},E$.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},E$);function E$(t){t=x$.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var T$,b$=(Nq(A$,T$=aJ),A$.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},A$.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},A$.prototype.setTransform=function(t){},A$);function A$(t){t=T$.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new hK,t.transform=null,t}var S$,I$=new QZ,R$=new QZ,O$=(Nq(w$,S$=aJ),w$.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(I$.width=t.frame.width,I$.height=t.frame.height,e=I$),r||(R$.x=t.frame.x,R$.y=t.frame.y,R$.width=e.width,R$.height=e.height,r=R$),n=i.framebuffer):(s=o.resolution,e||(I$.width=o.screen.width,I$.height=o.screen.height,e=I$),r||((r=I$).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},w$.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},w$.prototype.resize=function(){this.bind(null)},w$.prototype.reset=function(){this.bind(null)},w$);function w$(t){var e=S$.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new QZ,e.destinationFrame=new QZ,e.viewportFrame=new QZ,e}var C$=(P$.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},P$);function P$(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var N$,M$=0,L$={textureCount:0},D$=(Nq(U$,N$=aJ),U$.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof zQ)return zQ;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");zQ=!0===t({a:"b"},"a","b")}catch(t){zQ=!1}return zQ}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},U$.prototype.contextChange=function(t){this.gl=t,this.reset()},U$.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(L$.textureCount=0,this.syncUniformGroup(t.uniformGroup,L$)),i},U$.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},U$.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},U$.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},U$.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<VQ.length;h++)if(VQ[h].test(n,o)){i.push(VQ[h].code(r,o)),a=!0;break}a||(s=(1===n.size?jQ:YQ)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},U$.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},U$.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},U$.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=PQ(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:MQ(a.type,a.size)}}t=new C$(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},U$.prototype.reset=function(){this.program=null,this.shader=null},U$.prototype.destroy=function(){this.destroyed=!0},U$);function U$(t){t=N$.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=M$++,t}var F$,B$=(Nq(k$,F$=aJ),k$.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[HK.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.ADD]=[t.ONE,t.ONE],e[HK.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.NONE]=[0,0],e[HK.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[HK.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[HK.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[HK.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[HK.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[HK.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[HK.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[HK.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[HK.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[HK.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[HK.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},k$.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},k$.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},k$.prototype.setBlend=function(t){this.updateCheck(k$.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},k$.prototype.setOffset=function(t){this.updateCheck(k$.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},k$.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},k$.prototype.setDepthMask=function(t){this.gl.depthMask(t)},k$.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},k$.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},k$.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},k$.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},k$.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},k$.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},k$.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},k$.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},k$);function k$(t){t=F$.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=HK.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new e$,t.defaultState.blend=!0,t}var G$,X$=(Nq(H$,G$=aJ),H$.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==$K.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},H$.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},H$.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},H$);function H$(t){t=G$.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=iq.GC_MAX_IDLE,t.checkCountMax=iq.GC_MAX_CHECK_COUNT,t.mode=iq.GC_MODE,t}var V$,j$=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},Y$=(Nq(z$,V$=aJ),z$.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new j$(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new j$(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},z$.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},z$.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},z$.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},z$.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==WK.FLOAT&&this.renderer.texture.unbind(s)}},z$.prototype.initTexture=function(t){var e=new j$(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},z$.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===zK.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},z$.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==WK.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},z$.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&function(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}(this.managedTextures,t,1))},z$.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==qK.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=KK.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},z$.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==qK.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===ZK.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===ZK.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===ZK.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===ZK.LINEAR?i.LINEAR:i.NEAREST)},z$);function z$(t){t=V$.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new Gq,t.hasIntegerTextures=!1,t}var W$,Z$={__proto__:null,FilterSystem:aQ,BatchSystem:dQ,ContextSystem:yQ,FramebufferSystem:EQ,GeometrySystem:IQ,MaskSystem:d$,ScissorSystem:m$,StencilSystem:g$,ProjectionSystem:b$,RenderTextureSystem:O$,ShaderSystem:D$,StateSystem:B$,TextureGCSystem:X$,TextureSystem:Y$},K$=new hK,NW=(Nq(q$,W$=pt.a),q$.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(q$.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(q$.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),q$.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},q$.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=NJ.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return K$.tx=-i.x,K$.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:K$,skipUpdateTransform:!!t.parent}),r},q$.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=GK.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(q$.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(q$.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),q$);function q$(t,e){void 0===t&&(t=GK.UNKNOWN);var r=W$.call(this)||this;return e=Object.assign({},iq.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new QZ(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||iq.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(pq("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var J$;Nq(Q$,J$=NW),Q$.create=function(t){if(sq=void 0===sq?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:iq.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():sq)return new Q$(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},Q$.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},Q$.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof NJ?(pq("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},Q$.prototype.resize=function(t,e){J$.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},Q$.prototype.reset=function(){return this.runners.reset.emit(),this},Q$.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},Q$.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();J$.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(Q$.prototype,"extract",{get:function(){return pq("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),Q$.registerPlugin=function(t,e){(Q$.__plugins=Q$.__plugins||{})[t]=e};function Q$(t){var e,r=J$.call(this,GK.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Tq("destroy"),contextChange:new Tq("contextChange"),reset:new Tq("reset"),update:new Tq("update"),postrender:new Tq("postrender"),prerender:new Tq("prerender"),resize:new Tq("resize")},r.globalUniforms=new tQ({projectionMatrix:new hK},!0),r.addSystem(d$,"mask").addSystem(yQ,"context").addSystem(B$,"state").addSystem(D$,"shader").addSystem(Y$,"texture").addSystem(IQ,"geometry").addSystem(EQ,"framebuffer").addSystem(m$,"scissor").addSystem(g$,"stencil").addSystem(b$,"projection").addSystem(X$,"textureGC").addSystem(aQ,"filter").addSystem(O$,"renderTexture").addSystem(dQ,"batch"),r.initPlugins(Q$.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",oq||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+aq+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+aq+" - "+e+" - http://www.pixijs.com/"),oq=!0),r.resize(r.options.width,r.options.height),r}var $$=function(){this.texArray=null,this.blend=0,this.type=VK.TRIANGLES,this.start=0,this.size=0,this.data=null},ttt=(ett.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},ett);function ett(){this.elements=[],this.ids=[],this.count=0}var rtt=(Object.defineProperty(itt.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(itt.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(itt.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(itt.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(itt.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),itt.prototype.view=function(t){return this[t+"View"]},itt.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},itt.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},itt);function itt(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var ntt,stt=(Nq(ott,ntt=uQ),ott.prototype.contextChange=function(){var t=this.renderer.gl;iq.PREFER_ENV===kK.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),iq.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=ZQ(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},ott.prototype.initFlushBuffers=function(){for(var t=ott._drawCallPool,e=ott._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new $$);for(;e.length<i;)e.push(new ttt);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},ott.prototype.onPrerender=function(){this._flushId=0},ott.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},ott.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=ott._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++Gq._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;Gq._globalBatch=o},ott.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=ott._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=hq[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},ott.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},ott.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;iq.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},ott.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=ott._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},ott.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},ott.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),iq.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},ott.prototype.stop=function(){this.flush()},ott.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),ntt.prototype.destroy.call(this)},ott.prototype.getAttributeBuffer=function(t){var e=uq(Math.ceil(t/8)),t=cq(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new rtt(e*this.vertexSize*4)),t},ott.prototype.getIndexBuffer=function(t){var e=uq(Math.ceil(t/12)),r=cq(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},ott.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},ott._drawCallPool=[],ott._textureArrayPool=[],ott);function ott(t){var e=ntt.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=e$.for2d(),e.size=4*iq.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var att=(htt.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=tQ.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new JQ(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new hK,default:this.defaultGroupCache[t]};return new $Q(this.programCache[t],i)},htt.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},htt);function htt(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var utt,ltt=(Nq(ctt,utt=lJ),ctt);function ctt(t){void 0===t&&(t=!1);var e=utt.call(this)||this;return e._buffer=new kJ(null,t,!1),e._indexBuffer=new kJ(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,zK.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,zK.FLOAT).addAttribute("aColor",e._buffer,4,!0,zK.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,zK.FLOAT).addIndex(e._indexBuffer),e}var dtt="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",ftt="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function ptt(){}(ptt.create=function(t){var e,t=Object.assign({vertex:dtt,fragment:ftt,geometryClass:ltt,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return Nq(o,e=stt),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new att(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(ptt,"defaultVertexSrc",{get:function(){return dtt},enumerable:!1,configurable:!0}),Object.defineProperty(ptt,"defaultFragmentTemplate",{get:function(){return ftt},enumerable:!1,configurable:!0}),ptt).create();var _tt={};for(ytt in pJ)!function(t){Object.defineProperty(_tt,t,{get:function(){return pq("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),pJ[t]}})}(ytt);var ytt,mtt={};for(ytt in Z$)!function(t){Object.defineProperty(mtt,t,{get:function(){return pq("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),Z$[t]}})}(ytt);function vtt(){}function xtt(r,i,n,s){var o=0,a=r.length;!function t(e){e||o===a?n&&n(e):s?setTimeout(function(){i(r[o++],t)},1):i(r[o++],t)}()}function gtt(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var r=0,i={_tasks:[],concurrency:t,saturated:vtt,unsaturated:vtt,buffer:t/4,empty:vtt,drain:vtt,error:vtt,started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){r=0,i.drain=vtt,i.started=!1,i._tasks=[]},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!i.paused&&r<i.concurrency&&i._tasks.length;){var t=i._tasks.shift();0===i._tasks.length&&i.empty(),(r+=1)===i.concurrency&&i.saturated(),e(t.data,function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}(function(t){return function(){--r,t.callback.apply(t,arguments),null!=arguments[0]&&i.error(arguments[0],t.data),r<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}(t)))}},length:function(){return i._tasks.length},running:function(){return r},idle:function(){return i._tasks.length+r===0},pause:function(){!0!==i.paused&&(i.paused=!0)},resume:function(){if(!1!==i.paused){i.paused=!1;for(var t=1;t<=i.concurrency;t++)i.process()}}};function n(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");i.started=!0,null==t&&i.idle()?setTimeout(function(){return i.drain()},1):(r={data:t,callback:"function"==typeof r?r:vtt},e?i._tasks.unshift(r):i._tasks.push(r),setTimeout(function(){return i.process()},1))}return i}var Ett={};function Ttt(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function btt(t,e,r){return e&&Ttt(t.prototype,e),r&&Ttt(t,r),t}var Att=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),Stt=null;function Itt(){}var Rtt=function(){function s(t,e,r){if("string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(s.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=s.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Itt,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new us.a,this.onProgress=new us.a,this.onComplete=new us.a,this.onAfterMiddleware=new us.a}s.setExtensionLoadType=function(t,e){Ott(s._loadTypeMap,t,e)},s.setExtensionXhrType=function(t,e){Ott(s._xhrTypeMap,t,e)};var t=s.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=s.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(t){var e=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(e)},1);else switch(t&&this.onComplete.once(t),this._setFlag(s.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case s.LOAD_TYPE.IMAGE:this.type=s.TYPE.IMAGE,this._loadElement("image");break;case s.LOAD_TYPE.AUDIO:this.type=s.TYPE.AUDIO,this._loadSourceElement("audio");break;case s.LOAD_TYPE.VIDEO:this.type=s.TYPE.VIDEO,this._loadSourceElement("video");break;case s.LOAD_TYPE.XHR:default:Att&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t._hasFlag=function(t){return 0!=(this._flags&t)},t._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(s.STATUS_FLAGS.COMPLETE,!0),this._setFlag(s.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var i=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=s.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},t._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t._createSource=function(t,e,r){r=r||t+"/"+this._getExtension(e);t=document.createElement("source");return t.src=e,t.type=r,t},t._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var t=this.xhr;this.abort(wtt(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t._xhrOnTimeout=function(){var t=this.xhr;this.abort(wtt(t)+" Request timed out.")},t._xhrOnAbort=function(){var t=this.xhr;this.abort(wtt(t)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var t,e,r=this.xhr,i="",n=void 0===r.status?200:r.status;if(""!==r.responseType&&"text"!==r.responseType&&void 0!==r.responseType||(i=r.responseText),0===n&&(0<i.length||r.responseType===s.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2==(n/100|0)){if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=s.TYPE.TEXT;else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=s.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT)try{window.DOMParser?(t=new DOMParser,this.data=t.parseFromString(i,"text/xml")):((e=document.createElement("div")).innerHTML=i,this.data=e),this.type=s.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=r.response||i;this.complete()}else this.abort("["+r.status+"] "+r.statusText+": "+r.responseURL)},t._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,(Stt=Stt||document.createElement("a")).href=t;var r=!(t=hs()(Stt.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},t._determineXhrType=function(){return s._xhrTypeMap[this.extension]||s.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return s._loadTypeMap[this.extension]||s.LOAD_TYPE.XHR},t._getExtension=function(){var t,e,r=this.url;return(this.isDataUrl?(e=r.indexOf("/"),r.substring(e+1,r.indexOf(";",e))):(t=r.indexOf("?"),e=r.indexOf("#"),e=Math.min(-1<t?t:r.length,-1<e?e:r.length),(r=r.substring(0,e)).substring(r.lastIndexOf(".")+1))).toLowerCase()},t._getMimeFromXhrType=function(t){switch(t){case s.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case s.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case s.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case s.XHR_RESPONSE_TYPE.JSON:return"application/json";case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},btt(s,[{key:"isDataUrl",get:function(){return this._hasFlag(s.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(s.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(s.STATUS_FLAGS.LOADING)}}]),s}();function Ott(t,e,r){(e=e&&0===e.indexOf(".")?e.substring(1):e)&&(t[e]=r)}function wtt(t){return t.toString().replace("object ","")}Rtt.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},Rtt.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},Rtt.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Rtt.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Rtt._loadTypeMap={gif:Rtt.LOAD_TYPE.IMAGE,png:Rtt.LOAD_TYPE.IMAGE,bmp:Rtt.LOAD_TYPE.IMAGE,jpg:Rtt.LOAD_TYPE.IMAGE,jpeg:Rtt.LOAD_TYPE.IMAGE,tif:Rtt.LOAD_TYPE.IMAGE,tiff:Rtt.LOAD_TYPE.IMAGE,webp:Rtt.LOAD_TYPE.IMAGE,tga:Rtt.LOAD_TYPE.IMAGE,svg:Rtt.LOAD_TYPE.IMAGE,"svg+xml":Rtt.LOAD_TYPE.IMAGE,mp3:Rtt.LOAD_TYPE.AUDIO,ogg:Rtt.LOAD_TYPE.AUDIO,wav:Rtt.LOAD_TYPE.AUDIO,mp4:Rtt.LOAD_TYPE.VIDEO,webm:Rtt.LOAD_TYPE.VIDEO},Rtt._xhrTypeMap={xhtml:Rtt.XHR_RESPONSE_TYPE.DOCUMENT,html:Rtt.XHR_RESPONSE_TYPE.DOCUMENT,htm:Rtt.XHR_RESPONSE_TYPE.DOCUMENT,xml:Rtt.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Rtt.XHR_RESPONSE_TYPE.DOCUMENT,svg:Rtt.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Rtt.XHR_RESPONSE_TYPE.DOCUMENT,gif:Rtt.XHR_RESPONSE_TYPE.BLOB,png:Rtt.XHR_RESPONSE_TYPE.BLOB,bmp:Rtt.XHR_RESPONSE_TYPE.BLOB,jpg:Rtt.XHR_RESPONSE_TYPE.BLOB,jpeg:Rtt.XHR_RESPONSE_TYPE.BLOB,tif:Rtt.XHR_RESPONSE_TYPE.BLOB,tiff:Rtt.XHR_RESPONSE_TYPE.BLOB,webp:Rtt.XHR_RESPONSE_TYPE.BLOB,tga:Rtt.XHR_RESPONSE_TYPE.BLOB,json:Rtt.XHR_RESPONSE_TYPE.JSON,text:Rtt.XHR_RESPONSE_TYPE.TEXT,txt:Rtt.XHR_RESPONSE_TYPE.TEXT,ttf:Rtt.XHR_RESPONSE_TYPE.BUFFER,otf:Rtt.XHR_RESPONSE_TYPE.BUFFER},Rtt.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Ctt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var Ptt=window.URL||window.webkitURL;var aJ={caching:function(t,e){var r=this;Ett[t.url]?(t.data=Ett[t.url],t.complete()):t.onComplete.once(function(){return Ett[r.url]=r.data}),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===Rtt.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=Ptt.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=Rtt.TYPE.IMAGE,void(t.data.onload=function(){Ptt.revokeObjectURL(r),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],n=[0,0,0,0],s=0;s<i.length;++s)r<t.length?i[s]=255&t.charCodeAt(r++):i[s]=0;switch(n[0]=i[0]>>2,n[1]=(3&i[0])<<4|i[1]>>4,n[2]=(15&i[1])<<2|i[2]>>6,n[3]=63&i[2],r-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var o=0;o<n.length;++o)e+=Ctt.charAt(n[o])}return e}(t.xhr.responseText),t.type=Rtt.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},Ntt=/(#[\w-]+)?$/,Mtt=function(){function s(t,e){var r=this;void 0===e&&(e=10),this.baseUrl=t=void 0===t?"":t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=gtt(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new us.a,this.onError=new us.a,this.onLoad=new us.a,this.onStart=new us.a,this.onComplete=new us.a;for(var i=0;i<s._defaultBeforeMiddleware.length;++i)this.pre(s._defaultBeforeMiddleware[i]);for(var n=0;n<s._defaultAfterMiddleware.length;++n)this.use(s._defaultAfterMiddleware[n])}var t=s.prototype;return t.add=function(t,e,r,i){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(i=e||t.callback||t.onComplete,e=(r=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(i=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new Rtt(t,e,r),"function"==typeof i&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var s=r.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var h=s.progressChunk*(o.length+1)/(o.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var u=0;u<o.length;++u)o[u].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},t.pre=function(t){return this._beforeMiddleware.push(t),this},t.use=function(t){return this._afterMiddleware.push(t),this},t.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){t=this.resources[t];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},t.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(t){var e=hs()(t,{strictMode:!0});return e=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString&&(t=Ntt.exec(e)[0],-1!==(e=e.substr(0,e.length-t.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=t),e},t._loadResource=function(r,t){var i=this;r._dequeue=t,xtt(this._beforeMiddleware,function(t,e){t.call(i,r,function(){e(r.isComplete?{}:null)})},function(){r.isComplete?i._onLoad(r):(r._onLoadBinding=r.onComplete.once(i._onLoad,i),r.load())},!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(r){var i=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),xtt(this._afterMiddleware,function(t,e){t.call(i,r,e)},function(){r.onAfterMiddleware.dispatch(r),i.progress=Math.min(100,i.progress+r.progressChunk),i.onProgress.dispatch(i,r),r.error?i.onError.dispatch(r.error,i,r):i.onLoad.dispatch(i,r),i._resourcesParsing.splice(i._resourcesParsing.indexOf(r),1),i._queue.idle()&&0===i._resourcesParsing.length&&i._onComplete()},!0)},btt(s,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),s}();Mtt._defaultBeforeMiddleware=[],Mtt._defaultAfterMiddleware=[],Mtt.pre=function(t){return Mtt._defaultBeforeMiddleware.push(t),Mtt},Mtt.use=function(t){return Mtt._defaultAfterMiddleware.push(t),Mtt};var Ltt=function(t,e){return(Ltt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};Dtt.add=function(){Rtt.setExtensionLoadType("svg",Rtt.LOAD_TYPE.XHR),Rtt.setExtensionXhrType("svg",Rtt.XHR_RESPONSE_TYPE.TEXT)},Dtt.use=function(e,r){var t,i,n,s;!e.data||e.type!==Rtt.TYPE.IMAGE&&"svg"!==e.extension?r():(t=e.data,i=e.url,n=e.name,s=e.metadata,OJ.fromLoader(t,i,n,s).then(function(t){e.texture=t,r()}).catch(r))},NW=Dtt;function Dtt(){}var Utt,Ftt,Btt,ktt=(Ltt(Ftt=Xtt,Btt=Utt=Mtt),Ftt.prototype=null===Btt?Object.create(Btt):(Gtt.prototype=Btt.prototype,new Gtt),Xtt.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(Xtt,"shared",{get:function(){var t=Xtt._shared;return t||((t=new Xtt)._protected=!0,Xtt._shared=t),t},enumerable:!1,configurable:!0}),Xtt.registerPlugin=function(t){return Xtt._plugins.push(t),t.add&&t.add(),Xtt},Xtt._plugins=[],Xtt);function Gtt(){this.constructor=Ftt}function Xtt(t,e){for(var r=Utt.call(this,t,e)||this,i=0;i<Xtt._plugins.length;++i){var n=Xtt._plugins[i],s=n.pre,n=n.use;s&&r.pre(s),n&&r.use(n)}return r._protected=!1,r}ktt.registerPlugin({use:aJ.parsing}),ktt.registerPlugin(NW);Htt.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?ktt.shared:new ktt},Htt.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)};function Htt(){}var Vtt=Rtt,jtt=(Ytt.prototype._updateResolution=function(t){var e=this.data.meta.scale,t=gq(t=void 0===t?null:t,null);return 1!==(t=null===t?void 0!==e?parseFloat(e):1:t)&&this.baseTexture.setResolution(t),t},Ytt.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=Ytt.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},Ytt.prototype._processFrames=function(t){for(var e=t,r=Ytt.BATCH_SIZE;e-t<r&&e<this._frameKeys.length;){var i,n,s,o=this._frameKeys[e],a=this._frames[o],h=a.frame;h&&(i=s=null,n=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,n=new QZ(0,0,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),s=a.rotated?new QZ(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):new QZ(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(i=new QZ(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[o]=new OJ(this.baseTexture,s,n,i,a.rotated?2:0,a.anchor),OJ.addToCache(this.textures[o],o)),e++}},Ytt.prototype._processAnimations=function(){var t,e=this.data.animations||{};for(t in e){this.animations[t]=[];for(var r=0;r<e[t].length;r++){var i=e[t][r];this.animations[t].push(this.textures[i])}}},Ytt.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},Ytt.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*Ytt.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*Ytt.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},Ytt.prototype.destroy=function(t){for(var e in void 0===t&&(t=!1),this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null!==(t=this._texture)&&void 0!==t&&t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},Ytt.BATCH_SIZE=1e3,Ytt);function Ytt(t,e,r){void 0===r&&(r=null),this._texture=t instanceof OJ?t:null,this.baseTexture=t instanceof Gq?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;e=this.baseTexture.resource;this.resolution=this._updateResolution(r||(e?e.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}ztt.use=function(i,r){var n=this,t=i.name+"_image";if(i.data&&i.type===Vtt.TYPE.JSON&&i.data.frames&&!n.resources[t]){var e=null===(a=null===(e=i.data)||void 0===e?void 0:e.meta)||void 0===a?void 0:a.related_multi_packs;if(Array.isArray(e))for(var s=0,o=e;s<o.length;s++)!function(t){if("string"!=typeof t)return;var e=t.replace(".json",""),r=nq.resolve(i.url.replace(n.baseUrl,""),t);if(n.resources[e]||Object.values(n.resources).some(function(t){return nq.format(nq.parse(t.url))===r}))return;t={crossOrigin:i.crossOrigin,loadType:Vtt.LOAD_TYPE.XHR,xhrType:Vtt.XHR_RESPONSE_TYPE.JSON,parentResource:i};n.add(e,r,t)}(o[s]);var a={crossOrigin:i.crossOrigin,metadata:i.metadata.imageMetadata,parentResource:i},e=ztt.getResourcePath(i,n.baseUrl);n.add(t,e,a,function(t){var e;t.error?r(t.error):(e=new jtt(t.texture,i.data,i.url)).parse(function(){i.spritesheet=e,i.textures=e.textures,r()})})}else r()},ztt.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:nq.resolve(t.url.replace(e,""),t.data.meta.image)},lJ=ztt;function ztt(){}var Wtt=function(t,e){return(Wtt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Ztt,Ktt,qtt,Jtt=new Qy,Qtt=new Uint16Array([0,1,2,0,2,3]),aJ=(Wtt(Ktt=tet,qtt=Ztt=Im),Ktt.prototype=null===qtt?Object.create(qtt):($tt.prototype=qtt.prototype,new $tt),tet.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Hf(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Hf(this.scale.y)*this._height/this._texture.orig.height)},tet.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},tet.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,s=e.d,o=e.tx,a=e.ty,h=this.vertexData,u=t.trim,l=t.orig,c=this._anchor,d=0,f=0,e=0,t=0,e=u?(d=(f=u.x-c._x*l.width)+u.width,(t=u.y-c._y*l.height)+u.height):(d=(f=-c._x*l.width)+l.width,(t=-c._y*l.height)+l.height);if(h[0]=r*f+n*t+o,h[1]=s*t+i*f+a,h[2]=r*d+n*t+o,h[3]=s*t+i*d+a,h[4]=r*d+n*e+o,h[5]=s*e+i*d+a,h[6]=r*f+n*e+o,h[7]=s*e+i*f+a,this._roundPixels)for(var p=Nf.RESOLUTION,_=0;_<h.length;++_)h[_]=Math.round((h[_]*p|0)/p)}},tet.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,h=n.d,u=n.tx,l=n.ty,t=-i._x*r.width,n=t+r.width,i=-i._y*r.height,r=i+r.height;e[0]=s*t+a*i+u,e[1]=h*i+o*t+l,e[2]=s*n+a*i+u,e[3]=h*i+o*n+l,e[4]=s*n+a*r+u,e[5]=h*r+o*n+l,e[6]=s*t+a*r+u,e[7]=h*r+o*t+l},tet.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},tet.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},tet.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new zy),t=this._localBoundsRect),this._bounds.getRectangle(t)):Ztt.prototype.getLocalBounds.call(this,t)},tet.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Jtt);var e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x,t=0;return Jtt.x>=i&&Jtt.x<i+e&&(t=-r*this.anchor.y,Jtt.y>=t&&Jtt.y<t+r)},tet.prototype.destroy=function(t){Ztt.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&(t="boolean"==typeof t?t:t&&t.baseTexture,this._texture.destroy(!!t)),this._texture=null},tet.from=function(t,e){return new tet(t instanceof Nv?t:Nv.from(t,e))},Object.defineProperty(tet.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(tet.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Hf(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(tet.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Hf(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(tet.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(tet.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(tet.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Nv.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),tet);function $tt(){this.constructor=Ktt}function tet(t){var e=Ztt.call(this)||this;return e._anchor=new tm(e._onAnchorUpdate,e,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),e._texture=null,e._width=0,e._height=0,e._tint=null,e._tintRGB=null,e.tint=16777215,e.blendMode=mf.NORMAL,e._cachedTint=16777215,e.uvs=null,e.texture=t||Nv.EMPTY,e.vertexData=new Float32Array(8),e.vertexTrimmedData=null,e._transformID=-1,e._textureID=-1,e._transformTrimmedID=-1,e._textureTrimmedID=-1,e.indices=Qtt,e.pluginName="batch",e.isSprite=!0,e._roundPixels=Nf.ROUND_PIXELS,e}var eet=function(t,e){return(eet=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function ret(t,e){function r(){this.constructor=t}eet(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var iet,net=new Qy;ret(set,iet=aJ),Object.defineProperty(set.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(set.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(set.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),set.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},set.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},set.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,i)},set.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new zy),t=this._localBoundsRect),this._bounds.getRectangle(t)):iet.prototype.getLocalBounds.call(this,t)},set.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,net);var e=this._width,r=this._height,t=-e*this.anchor._x;if(net.x>=t&&net.x<t+e){e=-r*this.anchor._y;if(net.y>=e&&net.y<e+r)return!0}return!1},set.prototype.destroy=function(t){iet.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},set.from=function(t,e){return new set(t instanceof Nv?t:Nv.from(t,e),e.width,e.height)},Object.defineProperty(set.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(set.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0});function set(t,e,r){void 0===e&&(e=100),void 0===r&&(r=100);var i=iet.call(this,t)||this;return i.tileTransform=new dm,i._width=e,i._height=r,i.uvMatrix=i.texture.uvMatrix||new lg(t),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}var oet,aet="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",het=new rm,NW=(ret(uet,oet=fx),uet.prototype.render=function(t){var e=this.renderer,r=this.quad,i=r.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y);var n=t.uvRespectAnchor?t.anchor.x:0,s=t.uvRespectAnchor?t.anchor.y:0;(i=r.uvs)[0]=i[6]=-n,i[1]=i[3]=-s,i[2]=i[4]=1-n,i[5]=i[7]=1-s,r.invalidate();var o=t._texture,a=o.baseTexture,h=t.tileTransform.localTransform,u=t.uvMatrix,l=a.isPowerOfTwo&&o.frame.width===a.width&&o.frame.height===a.height;l&&(a._glTextures[e.CONTEXT_UID]?l=a.wrapMode!==Af.CLAMP:a.wrapMode===Af.CLAMP&&(a.wrapMode=Af.REPEAT));var c=l?this.simpleShader:this.shader,d=o.width,n=o.height,i=t._width,s=t._height;het.set(h.a*d/i,h.b*d/s,h.c*n/i,h.d*n/s,h.tx/i,h.ty/s),het.invert(),l?het.prepend(u.mapCoord):(c.uniforms.uMapCoord=u.mapCoord.toArray(!0),c.uniforms.uClampFrame=u.uClampFrame,c.uniforms.uClampOffset=u.uClampOffset),c.uniforms.uTransform=het.toArray(!0),c.uniforms.uColor=(h=t.tint,s=t.worldAlpha,l=c.uniforms.uColor,u=a.alphaMode,(l=l||new Float32Array(4))[0]=(h>>16&255)/255,l[1]=(h>>8&255)/255,l[2]=(255&h)/255,!u&&void 0!==u||(l[0]*=s,l[1]*=s,l[2]*=s),l[3]=s,l),c.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),c.uniforms.uSampler=o,e.shader.bind(c),e.geometry.bind(r),this.state.blendMode=(t=t.blendMode,a=a.alphaMode,Ff[a?1:0][t]),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},uet);function uet(t){var e=oet.call(this,t)||this,t={globals:e.renderer.globalUniforms};return e.shader=ig.from(aet,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",t),e.simpleShader=ig.from(aet,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",t),e.quad=new ex,e.state=sg.for2d(),e}var cet,det=2*Math.PI,fet=180/Math.PI,pet=Math.PI/180;(aJ=cet=cet||{})[aJ.POLY=0]="POLY",aJ[aJ.RECT=1]="RECT",aJ[aJ.CIRC=2]="CIRC",aJ[aJ.ELIP=3]="ELIP",aJ[aJ.RREC=4]="RREC";var _et=(Object.defineProperty(yet.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(yet.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(yet.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(yet.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(yet,"EMPTY",{get:function(){return new yet(0,0,0,0)},enumerable:!1,configurable:!0}),yet.prototype.clone=function(){return new yet(this.x,this.y,this.width,this.height)},yet.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},yet.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},yet.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},yet.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},yet.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},yet.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},yet.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},yet.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},yet);function yet(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=cet.RECT}met.prototype.clone=function(){return new met(this.x,this.y,this.radius)},met.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},met.prototype.getBounds=function(){return new _et(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},met.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function met(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=cet.CIRC}vet.prototype.clone=function(){return new vet(this.x,this.y,this.width,this.height)},vet.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},vet.prototype.getBounds=function(){return new _et(this.x-this.width,this.y-this.height,this.width,this.height)},vet.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function vet(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=cet.ELIP}xet.prototype.clone=function(){var t=new xet(this.points.slice());return t.closeStroke=this.closeStroke,t},xet.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},xet.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function xet(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=cet.POLY,this.closeStroke=!0}get.prototype.clone=function(){return new get(this.x,this.y,this.width,this.height,this.radius)},get.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},get.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function get(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=cet.RREC}var Eet=(Tet.prototype.clone=function(){return new Tet(this.x,this.y)},Tet.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},Tet.prototype.copyTo=function(t){return t.set(this.x,this.y),t},Tet.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},Tet.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},Tet.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},Tet);function Tet(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var bet=(Aet.prototype.clone=function(t,e){return new Aet(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},Aet.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},Aet.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},Aet.prototype.copyTo=function(t){return t.set(this._x,this._y),t},Aet.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Aet.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(Aet.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(Aet.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Aet);function Aet(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var Set=(Iet.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Iet.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},Iet.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},Iet.prototype.apply=function(t,e){e=e||new Eet;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},Iet.prototype.applyInverse=function(t,e){e=e||new Eet;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},Iet.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},Iet.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},Iet.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},Iet.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},Iet.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},Iet.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},Iet.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(det-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},Iet.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},Iet.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Iet.prototype.clone=function(){var t=new Iet;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Iet.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Iet.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Iet.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(Iet,"IDENTITY",{get:function(){return new Iet},enumerable:!1,configurable:!0}),Object.defineProperty(Iet,"TEMP_MATRIX",{get:function(){return new Iet},enumerable:!1,configurable:!0}),Iet);function Iet(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var Ret=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Oet=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],wet=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Cet=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Pet=[],Net=[],Met=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];Pet.push(e);for(var r=0;r<16;r++)for(var i=Met(Ret[t]*Ret[r]+wet[t]*Oet[r]),n=Met(Oet[t]*Ret[r]+Cet[t]*Oet[r]),s=Met(Ret[t]*wet[r]+wet[t]*Cet[r]),o=Met(Oet[t]*wet[r]+Cet[t]*Cet[r]),a=0;a<16;a++)if(Ret[a]===i&&Oet[a]===n&&wet[a]===s&&Cet[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new Set;h.set(Ret[t],Oet[t],wet[t],Cet[t],0,0),Net.push(h)}}();var Let={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Ret[t]},uY:function(t){return Oet[t]},vX:function(t){return wet[t]},vY:function(t){return Cet[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return Pet[t][e]},sub:function(t,e){return Pet[t][Let.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?Let.S:Let.N:2*Math.abs(e)<=Math.abs(t)?0<t?Let.E:Let.W:0<e?0<t?Let.SE:Let.SW:0<t?Let.NE:Let.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=Net[Let.inv(e)];e.tx=r,e.ty=i,t.append(e)}},Det=(Uet.prototype.onChange=function(){this._localID++},Uet.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},Uet.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},Uet.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},Uet.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},Uet.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(Uet.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),Uet.IDENTITY=new Uet,Uet);function Uet(){this.worldTransform=new Set,this.localTransform=new Set,this.position=new bet(this.onChange,this,0,0),this.scale=new bet(this.onChange,this,1,1),this.pivot=new bet(this.onChange,this,0,0),this.skew=new bet(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}function Fet(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var Bet=/iPhone/i,ket=/iPod/i,Get=/iPad/i,Xet=/\biOS-universal(?:.+)Mac\b/i,Het=/\bAndroid(?:.+)Mobile\b/i,Vet=/Android/i,jet=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Yet=/Silk/i,zet=/Windows Phone/i,Wet=/\bWindows(?:.+)ARM\b/i,Zet=/BlackBerry/i,Ket=/BB10/i,qet=/Opera Mini/i,Jet=/\b(CriOS|Chrome)(?:.+)Mobile/i,Qet=/Mobile(?:.+)Firefox\b/i;var $et,trt,ert,rrt=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(Bet)&&!i(zet),ipod:i(ket),tablet:!i(Bet)&&(i(Get)||Fet(e))&&!i(zet),universal:i(Xet),device:(i(Bet)||i(ket)||i(Get)||i(Xet)||Fet(e))&&!i(zet)},amazon:{phone:i(jet),tablet:!i(jet)&&i(Yet),device:i(jet)||i(Yet)},android:{phone:!i(zet)&&i(jet)||!i(zet)&&i(Het),tablet:!i(zet)&&!i(jet)&&!i(Het)&&(i(Yet)||i(Vet)),device:!i(zet)&&(i(jet)||i(Yet)||i(Het)||i(Vet))||i(/\bokhttp\b/i)},windows:{phone:i(zet),tablet:i(Wet),device:i(zet)||i(Wet)},other:{blackberry:i(Zet),blackberry10:i(Ket),opera:i(qet),firefox:i(Qet),chrome:i(Jet),device:i(Zet)||i(Ket)||i(qet)||i(Qet)||i(Jet)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(aJ={})[aJ.WEBGL_LEGACY=0]="WEBGL_LEGACY",aJ[aJ.WEBGL=1]="WEBGL",aJ[aJ.WEBGL2=2]="WEBGL2",(aJ={})[aJ.UNKNOWN=0]="UNKNOWN",aJ[aJ.WEBGL=1]="WEBGL",aJ[aJ.CANVAS=2]="CANVAS",(aJ={})[aJ.COLOR=16384]="COLOR",aJ[aJ.DEPTH=256]="DEPTH",aJ[aJ.STENCIL=1024]="STENCIL",(aJ={})[aJ.NORMAL=0]="NORMAL",aJ[aJ.ADD=1]="ADD",aJ[aJ.MULTIPLY=2]="MULTIPLY",aJ[aJ.SCREEN=3]="SCREEN",aJ[aJ.OVERLAY=4]="OVERLAY",aJ[aJ.DARKEN=5]="DARKEN",aJ[aJ.LIGHTEN=6]="LIGHTEN",aJ[aJ.COLOR_DODGE=7]="COLOR_DODGE",aJ[aJ.COLOR_BURN=8]="COLOR_BURN",aJ[aJ.HARD_LIGHT=9]="HARD_LIGHT",aJ[aJ.SOFT_LIGHT=10]="SOFT_LIGHT",aJ[aJ.DIFFERENCE=11]="DIFFERENCE",aJ[aJ.EXCLUSION=12]="EXCLUSION",aJ[aJ.HUE=13]="HUE",aJ[aJ.SATURATION=14]="SATURATION",aJ[aJ.COLOR=15]="COLOR",aJ[aJ.LUMINOSITY=16]="LUMINOSITY",aJ[aJ.NORMAL_NPM=17]="NORMAL_NPM",aJ[aJ.ADD_NPM=18]="ADD_NPM",aJ[aJ.SCREEN_NPM=19]="SCREEN_NPM",aJ[aJ.NONE=20]="NONE",aJ[aJ.SRC_OVER=0]="SRC_OVER",aJ[aJ.SRC_IN=21]="SRC_IN",aJ[aJ.SRC_OUT=22]="SRC_OUT",aJ[aJ.SRC_ATOP=23]="SRC_ATOP",aJ[aJ.DST_OVER=24]="DST_OVER",aJ[aJ.DST_IN=25]="DST_IN",aJ[aJ.DST_OUT=26]="DST_OUT",aJ[aJ.DST_ATOP=27]="DST_ATOP",aJ[aJ.ERASE=26]="ERASE",aJ[aJ.SUBTRACT=28]="SUBTRACT",aJ[aJ.XOR=29]="XOR",(aJ={})[aJ.POINTS=0]="POINTS",aJ[aJ.LINES=1]="LINES",aJ[aJ.LINE_LOOP=2]="LINE_LOOP",aJ[aJ.LINE_STRIP=3]="LINE_STRIP",aJ[aJ.TRIANGLES=4]="TRIANGLES",aJ[aJ.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",aJ[aJ.TRIANGLE_FAN=6]="TRIANGLE_FAN",(aJ={})[aJ.RGBA=6408]="RGBA",aJ[aJ.RGB=6407]="RGB",aJ[aJ.ALPHA=6406]="ALPHA",aJ[aJ.LUMINANCE=6409]="LUMINANCE",aJ[aJ.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",aJ[aJ.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",aJ[aJ.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(aJ={})[aJ.TEXTURE_2D=3553]="TEXTURE_2D",aJ[aJ.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",aJ[aJ.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",aJ[aJ.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",aJ[aJ.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",aJ[aJ.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",aJ[aJ.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",aJ[aJ.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",aJ[aJ.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(aJ={})[aJ.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",aJ[aJ.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",aJ[aJ.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",aJ[aJ.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",aJ[aJ.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",aJ[aJ.FLOAT=5126]="FLOAT",aJ[aJ.HALF_FLOAT=36193]="HALF_FLOAT",(aJ={})[aJ.FLOAT=0]="FLOAT",aJ[aJ.INT=1]="INT",aJ[aJ.UINT=2]="UINT",(aJ=ont=ont||{})[aJ.NEAREST=0]="NEAREST",aJ[aJ.LINEAR=1]="LINEAR",(aJ=$et=$et||{})[aJ.CLAMP=33071]="CLAMP",aJ[aJ.REPEAT=10497]="REPEAT",aJ[aJ.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(aJ=trt=trt||{})[aJ.OFF=0]="OFF",aJ[aJ.POW2=1]="POW2",aJ[aJ.ON=2]="ON",aJ[aJ.ON_MANUAL=3]="ON_MANUAL",(aJ={})[aJ.NPM=0]="NPM",aJ[aJ.UNPACK=1]="UNPACK",aJ[aJ.PMA=2]="PMA",aJ[aJ.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",aJ[aJ.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",aJ[aJ.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(aJ={})[aJ.NO=0]="NO",aJ[aJ.YES=1]="YES",aJ[aJ.AUTO=2]="AUTO",aJ[aJ.BLEND=0]="BLEND",aJ[aJ.CLEAR=1]="CLEAR",aJ[aJ.BLIT=2]="BLIT",(aJ=ert=ert||{})[aJ.AUTO=0]="AUTO",aJ[aJ.MANUAL=1]="MANUAL",(aJ=unt=unt||{}).LOW="lowp",aJ.MEDIUM="mediump",aJ.HIGH="highp",(aJ={})[aJ.NONE=0]="NONE",aJ[aJ.SCISSOR=1]="SCISSOR",aJ[aJ.STENCIL=2]="STENCIL",aJ[aJ.SPRITE=3]="SPRITE",(aJ={})[aJ.NONE=0]="NONE",aJ[aJ.LOW=2]="LOW",aJ[aJ.MEDIUM=4]="MEDIUM",aJ[aJ.HIGH=8]="HIGH";function irt(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var nrt,srt,ort,art={MIPMAP_TEXTURES:trt.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(nrt=32,ort=!0,(rrt.tablet||rrt.phone)&&(rrt.apple.device&&(srt=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(srt[1],10)<11&&(ort=!1),rrt.android.device&&(srt=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(srt[1],10)<7&&(ort=!1)),ort?nrt:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:ert.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:$et.CLAMP,SCALE_MODE:ont.LINEAR,PRECISION_VERTEX:unt.HIGH,PRECISION_FRAGMENT:rrt.apple.device?unt.HIGH:unt.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!rrt.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},hrt=/iPhone/i,urt=/iPod/i,lrt=/iPad/i,crt=/\biOS-universal(?:.+)Mac\b/i,drt=/\bAndroid(?:.+)Mobile\b/i,frt=/Android/i,prt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,_rt=/Silk/i,yrt=/Windows Phone/i,mrt=/\bWindows(?:.+)ARM\b/i,vrt=/BlackBerry/i,xrt=/BB10/i,grt=/Opera Mini/i,Ert=/\b(CriOS|Chrome)(?:.+)Mobile/i,Trt=/Mobile(?:.+)Firefox\b/i;var brt=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(hrt)&&!i(yrt),ipod:i(urt),tablet:!i(hrt)&&(i(lrt)||irt(e))&&!i(yrt),universal:i(crt),device:(i(hrt)||i(urt)||i(lrt)||i(crt)||irt(e))&&!i(yrt)},amazon:{phone:i(prt),tablet:!i(prt)&&i(_rt),device:i(prt)||i(_rt)},android:{phone:!i(yrt)&&i(prt)||!i(yrt)&&i(drt),tablet:!i(yrt)&&!i(prt)&&!i(drt)&&(i(_rt)||i(frt)),device:!i(yrt)&&(i(prt)||i(_rt)||i(drt)||i(frt))||i(/\bokhttp\b/i)},windows:{phone:i(yrt),tablet:i(mrt),device:i(yrt)||i(mrt)},other:{blackberry:i(vrt),blackberry10:i(xrt),opera:i(grt),firefox:i(Trt),chrome:i(Ert),device:i(vrt)||i(xrt)||i(grt)||i(Trt)||i(Ert)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(ont={})[ont.WEBGL_LEGACY=0]="WEBGL_LEGACY",ont[ont.WEBGL=1]="WEBGL",ont[ont.WEBGL2=2]="WEBGL2",(unt={})[unt.UNKNOWN=0]="UNKNOWN",unt[unt.WEBGL=1]="WEBGL",unt[unt.CANVAS=2]="CANVAS",(ont={})[ont.COLOR=16384]="COLOR",ont[ont.DEPTH=256]="DEPTH",ont[ont.STENCIL=1024]="STENCIL",(unt={})[unt.NORMAL=0]="NORMAL",unt[unt.ADD=1]="ADD",unt[unt.MULTIPLY=2]="MULTIPLY",unt[unt.SCREEN=3]="SCREEN",unt[unt.OVERLAY=4]="OVERLAY",unt[unt.DARKEN=5]="DARKEN",unt[unt.LIGHTEN=6]="LIGHTEN",unt[unt.COLOR_DODGE=7]="COLOR_DODGE",unt[unt.COLOR_BURN=8]="COLOR_BURN",unt[unt.HARD_LIGHT=9]="HARD_LIGHT",unt[unt.SOFT_LIGHT=10]="SOFT_LIGHT",unt[unt.DIFFERENCE=11]="DIFFERENCE",unt[unt.EXCLUSION=12]="EXCLUSION",unt[unt.HUE=13]="HUE",unt[unt.SATURATION=14]="SATURATION",unt[unt.COLOR=15]="COLOR",unt[unt.LUMINOSITY=16]="LUMINOSITY",unt[unt.NORMAL_NPM=17]="NORMAL_NPM",unt[unt.ADD_NPM=18]="ADD_NPM",unt[unt.SCREEN_NPM=19]="SCREEN_NPM",unt[unt.NONE=20]="NONE",unt[unt.SRC_OVER=0]="SRC_OVER",unt[unt.SRC_IN=21]="SRC_IN",unt[unt.SRC_OUT=22]="SRC_OUT",unt[unt.SRC_ATOP=23]="SRC_ATOP",unt[unt.DST_OVER=24]="DST_OVER",unt[unt.DST_IN=25]="DST_IN",unt[unt.DST_OUT=26]="DST_OUT",unt[unt.DST_ATOP=27]="DST_ATOP",unt[unt.ERASE=26]="ERASE",unt[unt.SUBTRACT=28]="SUBTRACT",unt[unt.XOR=29]="XOR",(ont={})[ont.POINTS=0]="POINTS",ont[ont.LINES=1]="LINES",ont[ont.LINE_LOOP=2]="LINE_LOOP",ont[ont.LINE_STRIP=3]="LINE_STRIP",ont[ont.TRIANGLES=4]="TRIANGLES",ont[ont.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",ont[ont.TRIANGLE_FAN=6]="TRIANGLE_FAN",(unt={})[unt.RGBA=6408]="RGBA",unt[unt.RGB=6407]="RGB",unt[unt.ALPHA=6406]="ALPHA",unt[unt.LUMINANCE=6409]="LUMINANCE",unt[unt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",unt[unt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",unt[unt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(ont={})[ont.TEXTURE_2D=3553]="TEXTURE_2D",ont[ont.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",ont[ont.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",ont[ont.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",ont[ont.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",ont[ont.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",ont[ont.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",ont[ont.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",ont[ont.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(unt={})[unt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",unt[unt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",unt[unt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",unt[unt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",unt[unt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",unt[unt.FLOAT=5126]="FLOAT",unt[unt.HALF_FLOAT=36193]="HALF_FLOAT",(ont={})[ont.FLOAT=0]="FLOAT",ont[ont.INT=1]="INT",ont[ont.UINT=2]="UINT",(unt=Cnt=Cnt||{})[unt.NEAREST=0]="NEAREST",unt[unt.LINEAR=1]="LINEAR",(ont=Rnt=Rnt||{})[ont.CLAMP=33071]="CLAMP",ont[ont.REPEAT=10497]="REPEAT",ont[ont.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(unt=vnt=vnt||{})[unt.OFF=0]="OFF",unt[unt.POW2=1]="POW2",unt[unt.ON=2]="ON",unt[unt.ON_MANUAL=3]="ON_MANUAL",(ont={})[ont.NPM=0]="NPM",ont[ont.UNPACK=1]="UNPACK",ont[ont.PMA=2]="PMA",ont[ont.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",ont[ont.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",ont[ont.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(unt={})[unt.NO=0]="NO",unt[unt.YES=1]="YES",unt[unt.AUTO=2]="AUTO",unt[unt.BLEND=0]="BLEND",unt[unt.CLEAR=1]="CLEAR",unt[unt.BLIT=2]="BLIT",(ont=Ant=Ant||{})[ont.AUTO=0]="AUTO",ont[ont.MANUAL=1]="MANUAL",(unt=Iit=Iit||{}).LOW="lowp",unt.MEDIUM="mediump",unt.HIGH="highp",(ont={})[ont.NONE=0]="NONE",ont[ont.SCISSOR=1]="SCISSOR",ont[ont.STENCIL=2]="STENCIL",ont[ont.SPRITE=3]="SPRITE",(unt={})[unt.NONE=0]="NONE",unt[unt.LOW=2]="LOW",unt[unt.MEDIUM=4]="MEDIUM",unt[unt.HIGH=8]="HIGH";var Art,Srt,Irt,Rrt,Ort,wrt,Crt,Prt,Nrt,Mrt,Lrt,Drt,Urt,Frt,Brt,krt,Grt,Xrt,Hrt,Vrt,jrt,Yrt={MIPMAP_TEXTURES:vnt.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(Art=32,Irt=!0,(brt.tablet||brt.phone)&&(brt.apple.device&&(Srt=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(Srt[1],10)<11&&(Irt=!1),brt.android.device&&(Srt=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(Srt[1],10)<7&&(Irt=!1)),Irt?Art:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Ant.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:Rnt.CLAMP,SCALE_MODE:Cnt.LINEAR,PRECISION_VERTEX:Iit.HIGH,PRECISION_FRAGMENT:brt.apple.device?Iit.HIGH:Iit.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!brt.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};(ont=Rrt=Rrt||{})[ont.WEBGL_LEGACY=0]="WEBGL_LEGACY",ont[ont.WEBGL=1]="WEBGL",ont[ont.WEBGL2=2]="WEBGL2",(unt=Ort=Ort||{})[unt.UNKNOWN=0]="UNKNOWN",unt[unt.WEBGL=1]="WEBGL",unt[unt.CANVAS=2]="CANVAS",(vnt=wrt=wrt||{})[vnt.COLOR=16384]="COLOR",vnt[vnt.DEPTH=256]="DEPTH",vnt[vnt.STENCIL=1024]="STENCIL",(Ant=Crt=Crt||{})[Ant.NORMAL=0]="NORMAL",Ant[Ant.ADD=1]="ADD",Ant[Ant.MULTIPLY=2]="MULTIPLY",Ant[Ant.SCREEN=3]="SCREEN",Ant[Ant.OVERLAY=4]="OVERLAY",Ant[Ant.DARKEN=5]="DARKEN",Ant[Ant.LIGHTEN=6]="LIGHTEN",Ant[Ant.COLOR_DODGE=7]="COLOR_DODGE",Ant[Ant.COLOR_BURN=8]="COLOR_BURN",Ant[Ant.HARD_LIGHT=9]="HARD_LIGHT",Ant[Ant.SOFT_LIGHT=10]="SOFT_LIGHT",Ant[Ant.DIFFERENCE=11]="DIFFERENCE",Ant[Ant.EXCLUSION=12]="EXCLUSION",Ant[Ant.HUE=13]="HUE",Ant[Ant.SATURATION=14]="SATURATION",Ant[Ant.COLOR=15]="COLOR",Ant[Ant.LUMINOSITY=16]="LUMINOSITY",Ant[Ant.NORMAL_NPM=17]="NORMAL_NPM",Ant[Ant.ADD_NPM=18]="ADD_NPM",Ant[Ant.SCREEN_NPM=19]="SCREEN_NPM",Ant[Ant.NONE=20]="NONE",Ant[Ant.SRC_OVER=0]="SRC_OVER",Ant[Ant.SRC_IN=21]="SRC_IN",Ant[Ant.SRC_OUT=22]="SRC_OUT",Ant[Ant.SRC_ATOP=23]="SRC_ATOP",Ant[Ant.DST_OVER=24]="DST_OVER",Ant[Ant.DST_IN=25]="DST_IN",Ant[Ant.DST_OUT=26]="DST_OUT",Ant[Ant.DST_ATOP=27]="DST_ATOP",Ant[Ant.ERASE=26]="ERASE",Ant[Ant.SUBTRACT=28]="SUBTRACT",Ant[Ant.XOR=29]="XOR",(Rnt=Prt=Prt||{})[Rnt.POINTS=0]="POINTS",Rnt[Rnt.LINES=1]="LINES",Rnt[Rnt.LINE_LOOP=2]="LINE_LOOP",Rnt[Rnt.LINE_STRIP=3]="LINE_STRIP",Rnt[Rnt.TRIANGLES=4]="TRIANGLES",Rnt[Rnt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Rnt[Rnt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(Cnt=Nrt=Nrt||{})[Cnt.RGBA=6408]="RGBA",Cnt[Cnt.RGB=6407]="RGB",Cnt[Cnt.ALPHA=6406]="ALPHA",Cnt[Cnt.LUMINANCE=6409]="LUMINANCE",Cnt[Cnt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Cnt[Cnt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Cnt[Cnt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Iit=Mrt=Mrt||{})[Iit.TEXTURE_2D=3553]="TEXTURE_2D",Iit[Iit.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Iit[Iit.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Iit[Iit.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Iit[Iit.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Iit[Iit.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Iit[Iit.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Iit[Iit.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Iit[Iit.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(ont=Lrt=Lrt||{})[ont.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",ont[ont.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",ont[ont.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",ont[ont.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",ont[ont.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",ont[ont.FLOAT=5126]="FLOAT",ont[ont.HALF_FLOAT=36193]="HALF_FLOAT",(unt=Drt=Drt||{})[unt.FLOAT=0]="FLOAT",unt[unt.INT=1]="INT",unt[unt.UINT=2]="UINT",(vnt=Urt=Urt||{})[vnt.NEAREST=0]="NEAREST",vnt[vnt.LINEAR=1]="LINEAR",(Ant=Frt=Frt||{})[Ant.CLAMP=33071]="CLAMP",Ant[Ant.REPEAT=10497]="REPEAT",Ant[Ant.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(Rnt=Brt=Brt||{})[Rnt.OFF=0]="OFF",Rnt[Rnt.POW2=1]="POW2",Rnt[Rnt.ON=2]="ON",Rnt[Rnt.ON_MANUAL=3]="ON_MANUAL",(Cnt=krt=krt||{})[Cnt.NPM=0]="NPM",Cnt[Cnt.UNPACK=1]="UNPACK",Cnt[Cnt.PMA=2]="PMA",Cnt[Cnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Cnt[Cnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Cnt[Cnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Iit=Grt=Grt||{})[Iit.NO=0]="NO",Iit[Iit.YES=1]="YES",Iit[Iit.AUTO=2]="AUTO",Iit[Iit.BLEND=0]="BLEND",Iit[Iit.CLEAR=1]="CLEAR",Iit[Iit.BLIT=2]="BLIT",(ont=Xrt=Xrt||{})[ont.AUTO=0]="AUTO",ont[ont.MANUAL=1]="MANUAL",(unt=Hrt=Hrt||{}).LOW="lowp",unt.MEDIUM="mediump",unt.HIGH="highp",(vnt=Vrt=Vrt||{})[vnt.NONE=0]="NONE",vnt[vnt.SCISSOR=1]="SCISSOR",vnt[vnt.STENCIL=2]="STENCIL",vnt[vnt.SPRITE=3]="SPRITE",(Ant=jrt=jrt||{})[Ant.NONE=0]="NONE",Ant[Ant.LOW=2]="LOW",Ant[Ant.MEDIUM=4]="MEDIUM",Ant[Ant.HIGH=8]="HIGH";r(17);var zrt={parse:_t.parse,format:_t.format,resolve:_t.resolve};Yrt.RETINA_PREFIX=/@([0-9\.]+)x/;var Wrt,Zrt=Yrt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,Krt="6.0.4";var qrt=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[Crt.NORMAL_NPM]=Crt.NORMAL,t[Crt.ADD_NPM]=Crt.ADD,t[Crt.SCREEN_NPM]=Crt.SCREEN,e[Crt.NORMAL]=Crt.NORMAL_NPM,e[Crt.ADD]=Crt.ADD_NPM,e[Crt.SCREEN]=Crt.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function Jrt(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function Qrt(t){return!(t&t-1||!t)}function $rt(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}function tit(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}var eit=0;var rit={};function iit(t,e,r){var i;void 0===r&&(r=3),rit[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),rit[e]=!0)}var nit={},sit=Object.create(null),oit=Object.create(null);ait.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},ait.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},ait.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(ait.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(ait.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function ait(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||Yrt.RESOLUTION,this.resize(t,e)}var hit;function uit(t,e){t=Yrt.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var lit,cit=(dit.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},dit.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},dit.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},dit.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},dit.prototype.contains=function(t){return-1!==this.items.indexOf(t)},dit.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},dit.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(dit.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(dit.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),dit);function dit(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(cit.prototype,{dispatch:{value:cit.prototype.emit},run:{value:cit.prototype.emit}}),Yrt.TARGET_FPMS=.06,(Rnt=lit=lit||{})[Rnt.INTERACTION=50]="INTERACTION",Rnt[Rnt.HIGH=25]="HIGH",Rnt[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.LOW=-25]="LOW",Rnt[Rnt.UTILITY=-50]="UTILITY";var fit=(pit.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},pit.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},pit.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},pit.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},pit);function pit(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var _it=(yit.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},yit.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},yit.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},yit.prototype.add=function(t,e,r){return void 0===r&&(r=lit.NORMAL),this._addListener(new fit(t,e,r))},yit.prototype.addOnce=function(t,e,r){return void 0===r&&(r=lit.NORMAL),this._addListener(new fit(t,e,r,!0))},yit.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},yit.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(yit.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),yit.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},yit.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},yit.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},yit.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*Yrt.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(yit.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(yit.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,Yrt.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(yit.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(yit,"shared",{get:function(){var t;return yit._shared||((t=yit._shared=new yit).autoStart=!0,t._protected=!0),yit._shared},enumerable:!1,configurable:!0}),Object.defineProperty(yit,"system",{get:function(){var t;return yit._system||((t=yit._system=new yit).autoStart=!0,t._protected=!0),yit._system},enumerable:!1,configurable:!0}),yit);function yit(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new fit(null,null,1/0),this.deltaMS=1/Yrt.TARGET_FPMS,this.elapsedMS=1/Yrt.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}mit.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,lit.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?_it.shared:new _it,t.autoStart&&this.start()},mit.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function mit(){}var vit,xit=2*Math.PI,git=180/Math.PI,Eit=Math.PI/180;(Cnt=vit=vit||{})[Cnt.POLY=0]="POLY",Cnt[Cnt.RECT=1]="RECT",Cnt[Cnt.CIRC=2]="CIRC",Cnt[Cnt.ELIP=3]="ELIP",Cnt[Cnt.RREC=4]="RREC";var Tit=(Object.defineProperty(bit.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(bit.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(bit.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(bit.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(bit,"EMPTY",{get:function(){return new bit(0,0,0,0)},enumerable:!1,configurable:!0}),bit.prototype.clone=function(){return new bit(this.x,this.y,this.width,this.height)},bit.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},bit.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},bit.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},bit.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},bit.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},bit.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},bit.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},bit.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},bit);function bit(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=vit.RECT}Ait.prototype.clone=function(){return new Ait(this.x,this.y,this.radius)},Ait.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},Ait.prototype.getBounds=function(){return new Tit(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Ait.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function Ait(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=vit.CIRC}Sit.prototype.clone=function(){return new Sit(this.x,this.y,this.width,this.height)},Sit.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},Sit.prototype.getBounds=function(){return new Tit(this.x-this.width,this.y-this.height,this.width,this.height)},Sit.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function Sit(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=vit.ELIP}var Iit=(Rit.prototype.clone=function(){var t=new Rit(this.points.slice());return t.closeStroke=this.closeStroke,t},Rit.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},Rit.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"},Rit);function Rit(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=vit.POLY,this.closeStroke=!0}Oit.prototype.clone=function(){return new Oit(this.x,this.y,this.width,this.height,this.radius)},Oit.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},Oit.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function Oit(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=vit.RREC}var wit=(Cit.prototype.clone=function(){return new Cit(this.x,this.y)},Cit.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},Cit.prototype.copyTo=function(t){return t.set(this.x,this.y),t},Cit.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},Cit.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},Cit.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},Cit);function Cit(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var Pit=(Nit.prototype.clone=function(t,e){return new Nit(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},Nit.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},Nit.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},Nit.prototype.copyTo=function(t){return t.set(this._x,this._y),t},Nit.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Nit.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(Nit.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(Nit.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Nit);function Nit(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var Mit=(Lit.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Lit.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},Lit.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},Lit.prototype.apply=function(t,e){e=e||new wit;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},Lit.prototype.applyInverse=function(t,e){e=e||new wit;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},Lit.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},Lit.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},Lit.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},Lit.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},Lit.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},Lit.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},Lit.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(xit-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},Lit.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},Lit.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Lit.prototype.clone=function(){var t=new Lit;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Lit.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Lit.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Lit.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(Lit,"IDENTITY",{get:function(){return new Lit},enumerable:!1,configurable:!0}),Object.defineProperty(Lit,"TEMP_MATRIX",{get:function(){return new Lit},enumerable:!1,configurable:!0}),Lit);function Lit(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var Dit=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Uit=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Fit=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Bit=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],kit=[],Git=[],Xit=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];kit.push(e);for(var r=0;r<16;r++)for(var i=Xit(Dit[t]*Dit[r]+Fit[t]*Uit[r]),n=Xit(Uit[t]*Dit[r]+Bit[t]*Uit[r]),s=Xit(Dit[t]*Fit[r]+Fit[t]*Bit[r]),o=Xit(Uit[t]*Fit[r]+Bit[t]*Bit[r]),a=0;a<16;a++)if(Dit[a]===i&&Uit[a]===n&&Fit[a]===s&&Bit[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new Mit;h.set(Dit[t],Uit[t],Fit[t],Bit[t],0,0),Git.push(h)}}();var Hit={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Dit[t]},uY:function(t){return Uit[t]},vX:function(t){return Fit[t]},vY:function(t){return Bit[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return kit[t][e]},sub:function(t,e){return kit[t][Hit.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?Hit.S:Hit.N:2*Math.abs(e)<=Math.abs(t)?0<t?Hit.E:Hit.W:0<e?0<t?Hit.SE:Hit.SW:0<t?Hit.NE:Hit.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=Git[Hit.inv(e)];e.tx=r,e.ty=i,t.append(e)}},Vit=(jit.prototype.onChange=function(){this._localID++},jit.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},jit.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},jit.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},jit.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},jit.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(jit.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),jit.IDENTITY=new jit,jit);function jit(){this.worldTransform=new Mit,this.localTransform=new Mit,this.position=new Pit(this.onChange,this,0,0),this.scale=new Pit(this.onChange,this,1,1),this.pivot=new Pit(this.onChange,this,0,0),this.skew=new Pit(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}Yrt.PREFER_ENV=brt.any?Rrt.WEBGL:Rrt.WEBGL2,Yrt.STRICT_TEXTURE_CACHE=!1;var Yit=[];function zit(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=Yit.length-1;0<=n;--n){var s=Yit[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var Wit=function(t,e){return(Wit=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Zit(t,e){function r(){this.constructor=t}Wit(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Kit=(qit.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},qit.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},qit.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(qit.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),qit.prototype.update=function(){this.destroyed||this.onUpdate.emit()},qit.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(qit.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(qit.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),qit.prototype.style=function(t,e,r){return!1},qit.prototype.dispose=function(){},qit.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},qit.test=function(t,e){return!1},qit);function qit(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new cit("setRealSize"),this.onUpdate=new cit("update"),this.onError=new cit("onError")}var Jit,Qit=(Zit($it,Jit=Kit),$it.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===krt.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},$it.prototype.dispose=function(){this.data=null},$it.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},$it);function $it(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=Jit.call(this,e,i)||this).data=t,r}var tnt,ent={scaleMode:Urt.NEAREST,format:Nrt.RGBA,alphaMode:krt.NPM},rnt=(Zit(nnt,tnt=pt.a),Object.defineProperty(nnt.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(nnt.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),nnt.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},nnt.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},nnt.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},nnt.prototype._refreshPOT=function(){this.isPowerOfTwo=Qrt(this.realWidth)&&Qrt(this.realHeight)},nnt.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},nnt.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},nnt.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},nnt.prototype.onError=function(t){this.emit("error",this,t)},nnt.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete oit[this.cacheId],delete sit[this.cacheId],this.cacheId=null),this.dispose(),nnt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},nnt.prototype.dispose=function(){this.emit("dispose",this)},nnt.prototype.castToBaseTexture=function(){return this},nnt.from=function(t,e,r){void 0===r&&(r=Yrt.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++eit),t._pixiId),s=oit[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new nnt(t,e)).cacheId=n,nnt.addToCache(s,n)),s},nnt.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new Qit(t,{width:e,height:r}),t=t instanceof Float32Array?Lrt.FLOAT:Lrt.UNSIGNED_BYTE;return new nnt(n,Object.assign(ent,i||{width:e,height:r,type:t}))},nnt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),oit[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),oit[e]=t)},nnt.removeFromCache=function(t){if("string"==typeof t){var e=oit[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete oit[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete oit[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},nnt._globalBatch=0,nnt);function nnt(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=tnt.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof Kit||((t=zit(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||Yrt.RESOLUTION,r.mipmap=void 0!==n?n:Yrt.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:Yrt.ANISOTROPIC_LEVEL,r.wrapMode=u||Yrt.WRAP_MODE,r.scaleMode=void 0!==o?o:Yrt.SCALE_MODE,r.format=l||Nrt.RGBA,r.type=c||Lrt.UNSIGNED_BYTE,r.target=d||Mrt.TEXTURE_2D,r.alphaMode=void 0!==i?i:krt.UNPACK,r.uid=++eit,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var snt,ont=(Zit(ant,snt=Kit),ant.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof Kit?this.addResourceAt(t[r],r):this.addResourceAt(zit(t[r],e),r))},ant.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},ant.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},ant.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");snt.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},ant.prototype.unbind=function(t){snt.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},ant.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},ant);function ant(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=snt.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new rnt;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var hnt,unt=(Zit(lnt,hnt=ont),lnt.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},lnt.prototype.bind=function(t){hnt.prototype.bind.call(this,t),t.target=Mrt.TEXTURE_2D_ARRAY},lnt.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},lnt);function lnt(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=hnt.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var cnt,dnt=(Zit(fnt,cnt=Kit),fnt.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(hit=hit||document.createElement("a")).href=t;var r=zrt.parse(hit.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},fnt.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===krt.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},fnt.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),cnt.prototype.update.call(this))},fnt.prototype.dispose=function(){this.source=null},fnt);function fnt(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=cnt.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var pnt,_nt=(Zit(ynt,pnt=dnt),ynt.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},ynt);function ynt(t){return pnt.call(this,t)||this}var mnt,vnt=(Zit(xnt,mnt=ont),xnt.prototype.bind=function(t){mnt.prototype.bind.call(this,t),t.target=Mrt.TEXTURE_CUBE_MAP},xnt.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=Mrt.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},xnt.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<xnt.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},xnt.test=function(t){return Array.isArray(t)&&t.length===xnt.SIDES},xnt.SIDES=6,xnt);function xnt(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==xnt.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=mnt.call(this,6,{width:n,height:s})||this,a=0;a<xnt.SIDES;a++)r.items[a].target=Mrt.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var gnt,Ent=(Zit(Tnt,gnt=dnt),Tnt.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},Tnt.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===krt.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},Tnt.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return gnt.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(gnt.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},Tnt.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,gnt.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},Tnt.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},Tnt);function Tnt(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,dnt.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=gnt.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:Yrt.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var bnt,Ant=(Zit(Snt,bnt=dnt),Snt.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},Snt.prototype._loadSvg=function(){var s=this,o=new Image;dnt.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++eit,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},Snt.getSize=function(t){var e=Snt.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},Snt.prototype.dispose=function(){bnt.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},Snt.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},Snt.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,Snt);function Snt(t,e){var r=this;return e=e||{},(r=bnt.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var Int,Rnt=(Zit(Ont,Int=dnt),Ont.prototype.update=function(t){var e;this.destroyed||(e=_it.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(Int.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},Ont.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},Ont.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},Ont.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},Ont.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},Ont.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(_it.shared.add(this.update,this),this._isConnectedToTicker=!0)},Ont.prototype._onPlayStop=function(){this._isConnectedToTicker&&(_it.shared.remove(this.update,this),this._isConnectedToTicker=!1)},Ont.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},Ont.prototype.dispose=function(){this._isConnectedToTicker&&_it.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),Int.prototype.dispose.call(this)},Object.defineProperty(Ont.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(_it.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(_it.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(Ont.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),Ont.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<Ont.TYPES.indexOf(e)},Ont.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Ont.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},Ont);function Ont(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];dnt.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||Ont.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=Int.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var wnt,Cnt=(Zit(Pnt,wnt=dnt),Pnt.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},Pnt);function Pnt(t){return wnt.call(this,t)||this}Yit.push(Ent,Cnt,_nt,Rnt,Ant,Qit,vnt,unt);var Nnt={__proto__:null,Resource:Kit,BaseImageResource:dnt,INSTALLED:Yit,autoDetectResource:zit,AbstractMultiResource:ont,ArrayResource:unt,BufferResource:Qit,CanvasResource:_nt,CubeResource:vnt,ImageResource:Ent,SVGResource:Ant,VideoResource:Rnt,ImageBitmapResource:Cnt},unt=(Mnt.prototype.destroy=function(){this.renderer=null},Mnt);function Mnt(t){this.renderer=t}var Lnt,Dnt=(Zit(Unt,Lnt=Qit),Unt.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===krt.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},Unt);function Unt(){return null!==Lnt&&Lnt.apply(this,arguments)||this}var Fnt=(Object.defineProperty(Bnt.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),Bnt.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new rnt(null,{scaleMode:Urt.NEAREST,resolution:1,mipmap:Brt.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Bnt.prototype.addDepthTexture=function(t){return this.depthTexture=t||new rnt(new Dnt(null,{width:this.width,height:this.height}),{scaleMode:Urt.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Brt.OFF,format:Nrt.DEPTH_COMPONENT,type:Lrt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Bnt.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Bnt.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Bnt.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},Bnt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Bnt.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},Bnt);function Bnt(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new cit("disposeFramebuffer"),this.multisample=jrt.NONE}var knt,Gnt=(Zit(Xnt,knt=rnt),Xnt.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},Xnt.prototype.dispose=function(){this.framebuffer.dispose(),knt.prototype.dispose.call(this)},Xnt.prototype.destroy=function(){knt.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},Xnt);function Xnt(t){var e=this,e=knt.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=Brt.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new Fnt(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var Hnt=(Vnt.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=Hit.add(r,Hit.NW),this.x0=s+i*Hit.uX(r),this.y0=e+n*Hit.uY(r),r=Hit.add(r,2),this.x1=s+i*Hit.uX(r),this.y1=e+n*Hit.uY(r),r=Hit.add(r,2),this.x2=s+i*Hit.uX(r),this.y2=e+n*Hit.uY(r),r=Hit.add(r,2),this.x3=s+i*Hit.uX(r),this.y3=e+n*Hit.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},Vnt.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},Vnt);function Vnt(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var jnt,Ynt=new Hnt,znt=(Zit(Wnt,jnt=pt.a),Wnt.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},Wnt.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},Wnt.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&sit[t.url]&&Wnt.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Wnt.removeFromCache(this),this.textureCacheIds=null},Wnt.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new Wnt(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},Wnt.prototype.updateUvs=function(){this._uvs===Ynt&&(this._uvs=new Hnt),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},Wnt.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=Yrt.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++eit),t._pixiId),s=sit[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=uit(t)),(s=new Wnt(new rnt(t,e))).baseTexture.cacheId=n,rnt.addToCache(s.baseTexture,n),Wnt.addToCache(s,n)),s},Wnt.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=Wnt.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},Wnt.fromBuffer=function(t,e,r,i){return new Wnt(rnt.fromBuffer(t,e,r,i))},Wnt.fromLoader=function(t,e,r,i){t=new rnt(t,Object.assign({scaleMode:Yrt.SCALE_MODE,resolution:uit(e)},i)),i=t.resource;i instanceof Ent&&(i.url=e);var n=new Wnt(t);return rnt.addToCache(n.baseTexture,r=r||e),Wnt.addToCache(n,r),r!==e&&(rnt.addToCache(n.baseTexture,e),Wnt.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},Wnt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),sit[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),sit[e]=t)},Wnt.removeFromCache=function(t){if("string"==typeof t){var e=sit[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete sit[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)sit[t.textureCacheIds[i]]===t&&delete sit[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(Wnt.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(Wnt.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Wnt.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Wnt.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(Wnt.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),Wnt.prototype.castToBaseTexture=function(){return this.baseTexture},Wnt);function Wnt(t,e,r,i,n,s){var o=jnt.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new Tit(0,0,1,1)),t instanceof Wnt&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=Ynt,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new wit(s.x,s.y):new wit(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function Znt(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}znt.EMPTY=new znt(new rnt),Znt(znt.EMPTY),Znt(znt.EMPTY.baseTexture),znt.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new znt(new rnt(new _nt(t)))}(),Znt(znt.WHITE),Znt(znt.WHITE.baseTexture);var Knt,qnt=(Zit(Jnt,Knt=znt),Object.defineProperty(Jnt.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Jnt.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},Jnt.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},Jnt.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(iit("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new Jnt(new Gnt(t))},Jnt);function Jnt(t,e){e=Knt.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var Qnt=($nt.prototype.createTexture=function(t,e){e=new Gnt(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new qnt(e)},$nt.prototype.getOptimalTexture=function(t,e,r){var i=$nt.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=Jrt(t)))<<16|65535&(e=Jrt(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},$nt.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},$nt.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},$nt.prototype.returnFilterTexture=function(t){this.returnTexture(t)},$nt.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},$nt.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=$nt.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},$nt.SCREEN_KEY="screen",$nt);function $nt(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var tst=(est.prototype.destroy=function(){this.buffer=null},est.from=function(t,e,r,i,n){return new est(t,e,r,i,n)},est);function est(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=Lrt.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var rst=0,ist=(nst.prototype.update=function(t){this.data=t||this.data,this._updateID++},nst.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},nst.prototype.destroy=function(){this.dispose(),this.data=null},nst.from=function(t){return new nst(t=t instanceof Array?new Float32Array(t):t)},nst);function nst(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=rst++,this.disposeRunner=new cit("disposeBuffer")}function sst(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var ost={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var ast={5126:4,5123:2,5121:1},hst=0,ust={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},vnt=(lst.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof ist||(e instanceof Array&&(e=new Float32Array(e)),e=new ist(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new tst(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},lst.prototype.getAttribute=function(t){return this.attributes[t]},lst.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},lst.prototype.addIndex=function(t){return t instanceof ist||(t instanceof Array&&(t=new Uint16Array(t)),t=new ist(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},lst.prototype.getIndex=function(){return this.indexBuffer},lst.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new ist;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*ast[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=sst(l);n[c]||(n[c]=new ost[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},lst.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},lst.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},lst.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},lst.prototype.clone=function(){for(var t=new lst,e=0;e<this.buffers.length;e++)t.buffers[e]=new ist(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new tst(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},lst.merge=function(t){for(var e=new lst,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new ust[sst(o.buffers[s].data)](i[s]),e.buffers[s]=new ist(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*ast[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},lst);function lst(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=hst++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new cit("disposeGeometry"),this.refCount=0}var cst,dst=(Zit(fst,cst=vnt),fst);function fst(){var t=cst.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var pst,_st=(Zit(yst,pst=vnt),yst.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},yst.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},yst);function yst(){var t=pst.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new ist(t.vertices),t.uvBuffer=new ist(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var mst=0,vst=(xst.prototype.update=function(){this.dirtyId++},xst.prototype.add=function(t,e,r){this.uniforms[t]=new xst(e,r)},xst.from=function(t,e){return new xst(t,e)},xst);function xst(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=mst++,this.static=!!e}var gst=(Est.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},Est);function Est(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Tit,this.destinationFrame=new Tit,this.bindingSourceFrame=new Tit,this.bindingDestinationFrame=new Tit,this.filters=[],this.transform=null}var Tst,bst=[new wit,new wit,new wit,new wit],Ast=new Mit,Sst=(Zit(Ist,Tst=unt),Ist.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new gst,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(Ast.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},Ist.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,Grt.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,Grt.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,Grt.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},Ist.prototype.bindAndClear=function(t,e){void 0===e&&(e=Grt.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===Grt.CLEAR||e===Grt.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},Ist.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(Prt.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(Prt.TRIANGLE_STRIP))},Ist.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(Mit.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},Ist.prototype.destroy=function(){this.texturePool.clear(!1)},Ist.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},Ist.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},Ist.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},Ist.prototype.emptyPool=function(){this.texturePool.clear(!0)},Ist.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},Ist.prototype.transformAABB=function(t,e){var r=bst[0],i=bst[1],n=bst[2],s=bst[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},Ist.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?Ast.copyFrom(n):Ast.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},Ist);function Ist(t){var e=Tst.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new Qnt,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new dst,e.quadUv=new _st,e.tempRect=new Tit,e.activeState={},e.globalUniforms=new vst({outputFrame:new Tit,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var Rst=(Ost.prototype.flush=function(){},Ost.prototype.destroy=function(){this.renderer=null},Ost.prototype.start=function(){},Ost.prototype.stop=function(){this.flush()},Ost.prototype.render=function(t){},Ost);function Ost(t){this.renderer=t}var wst,Cst=(Zit(Pst,wst=unt),Pst.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},Pst.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},Pst.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},Pst.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},Pst.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},Pst);function Pst(t){var e=wst.call(this,t)||this;return e.emptyRenderer=new Rst(t),e.currentRenderer=e.emptyRenderer,e}var Nst,Mst=0,Lst=(Zit(Dst,Nst=unt),Object.defineProperty(Dst.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),Dst.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Mst++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},Dst.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Mst++,this.renderer.runners.contextChange.emit(t)},Dst.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},Dst.prototype.createContext=function(t,e){var r;if(r=Yrt.PREFER_ENV>=Rrt.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},Dst.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},Dst.prototype.handleContextLost=function(t){t.preventDefault()},Dst.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},Dst.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},Dst.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},Dst.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},Dst);function Dst(t){var e=Nst.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var Ust,Fst=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=jrt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},Bst=new Tit,kst=(Zit(Gst,Ust=unt),Gst.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Tit,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,Yrt.PREFER_ENV===Rrt.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},Gst.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},Gst.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(Gst.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),Gst.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=wrt.COLOR|wrt.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},Gst.prototype.initFramebuffer=function(t){var e=this.gl,e=new Fst(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},Gst.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},Gst.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},Gst.prototype.detectSamples=function(t){var e=this.msaaSamples,r=jrt.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?jrt.NONE:r},Gst.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new Fnt(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=Bst).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},Gst.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},Gst.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},Gst.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},Gst.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Tit},Gst);function Gst(t){t=Ust.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new Fnt(10,10),t.msaaSamples=null,t}var Xst,Hst=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Vst={5126:4,5123:2,5121:1},jst=(Zit(Yst,Xst=unt),Yst.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=Yrt.PREFER_ENV===Rrt.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},Yst.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},Yst.prototype.reset=function(){this.unbind()},Yst.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},Yst.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},Yst.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},Yst.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*Vst[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*Vst[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*Vst[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new Hst(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},Yst.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},Yst.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},Yst.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},Yst.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},Yst.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},Yst.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},Yst);function Yst(t){t=Xst.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var zst=(Wst.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Vrt.NONE,this.autoDetect=!0),this._target=null},Wst.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},Wst);function Wst(t){void 0===t&&(t=null),this.type=Vrt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function Zst(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function Kst(t,e,r,i){var n=Zst(t,t.VERTEX_SHADER,e),s=Zst(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function qst(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function Jst(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return qst(2*e);case"bvec3":return qst(3*e);case"bvec4":return qst(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Qst,$st={},tot=$st;function eot(){var t,e;return(tot===$st||tot&&tot.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=Yrt.PREFER_ENV>=Rrt.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),tot=e),tot}function rot(t,e,r){if("precision"===t.substring(0,9))return r!==Hrt.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===Hrt.HIGH&&r!==Hrt.HIGH?Hrt.MEDIUM:e)+" float;\n"+t}var iot={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var not=null,sot={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function oot(t,e){if(!not){var r=Object.keys(sot);not={};for(var i=0;i<r.length;++i){var n=r[i];not[t[n]]=sot[n]}}return not[e]}var aot=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],hot={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},uot={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var lot,cot=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function dot(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=cot.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var fot=0,pot={},_ot=(yot.prototype.extractData=function(t,e){var r=eot();r?(e=Kst(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},yot.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=oot(e,o.type),a={type:a,name:o.name,size:iot[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},yot.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=oot(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:Jst(h,s.size)}}return r},Object.defineProperty(yot,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(yot,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),yot.from=function(t,e,r){var i=t+e,n=nit[i];return n||(nit[i]=n=new yot(t,e,r)),n},yot);function yot(t,e,r){void 0===r&&(r="pixi-shader"),this.id=fot++,this.vertexSrc=t||yot.defaultVertexSrc,this.fragmentSrc=e||yot.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),pot[r]?(pot[r]++,r+="-"+pot[r]):pot[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=rot(this.vertexSrc,Yrt.PRECISION_VERTEX,Hrt.HIGH),this.fragmentSrc=rot(this.fragmentSrc,Yrt.PRECISION_FRAGMENT,(Qst||(Qst=Hrt.MEDIUM,(r=eot())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),Qst=r.precision?Hrt.HIGH:Hrt.MEDIUM)),Qst))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var mot=(vot.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},vot.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(vot.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),vot.from=function(t,e,r){return new vot(_ot.from(t,e),r)},vot);function vot(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof vst?e:new vst(e):new vst({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var xot=(Object.defineProperty(got.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(got.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(got.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(got.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(got.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(got.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(got.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==Crt.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(got.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),got.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},got.for2d=function(){var t=new got;return t.depthTest=!1,t.blend=!0,t},got);function got(){this.data=0,this.blendMode=Crt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var Eot,Ant=(Zit(Tot,Eot=mot),Tot.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(Tot.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Tot,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Tot,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),Tot);function Tot(t,e,r){var i=this,e=_ot.from(t||Tot.defaultVertexSrc,e||Tot.defaultFragmentSrc);return(i=Eot.call(this,e,r)||this).padding=0,i.resolution=Yrt.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new xot,i}var bot=new Mit,Aot=(Object.defineProperty(Sot.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),Sot.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},Sot.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(bot.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(bot));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},Sot);function Sot(t,e){this._texture=t,this.mapCoord=new Mit,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var Iot,Rot=(Zit(Oot,Iot=Ant),Oot.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Aot(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},Oot);function Oot(t){var e=this,r=new Mit,e=Iot.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var wot,Cot=(Zit(Pot,wot=unt),Pot.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},Pot.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new zst).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case Vrt.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case Vrt.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case Vrt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},Pot.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case Vrt.SCISSOR:this.renderer.scissor.pop();break;case Vrt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Vrt.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},Pot.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=Vrt.SPRITE:(t.type=Vrt.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=Vrt.SCISSOR)))},Pot.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new Rot(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},Pot.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},Pot);function Pot(t){t=wot.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var Not,Rnt=(Zit(Mot,Not=unt),Mot.prototype.getStackLength=function(){return this.maskStack.length},Mot.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},Mot.prototype._useCurrent=function(){},Mot.prototype.destroy=function(){Not.prototype.destroy.call(this),this.maskStack=null},Mot);function Mot(t){t=Not.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var Lot,Dot=(Zit(Uot,Lot=Rnt),Uot.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},Uot.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},Uot.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},Uot.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},Uot);function Uot(t){t=Lot.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var Fot,Bot=(Zit(kot,Fot=Rnt),kot.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},kot.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},kot.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},kot.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},kot.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},kot);function kot(t){t=Fot.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var Got,Xot=(Zit(Hot,Got=unt),Hot.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},Hot.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},Hot.prototype.setTransform=function(t){},Hot);function Hot(t){t=Got.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new Mit,t.transform=null,t}var Vot,jot=new Tit,Yot=new Tit,zot=(Zit(Wot,Vot=unt),Wot.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(jot.width=t.frame.width,jot.height=t.frame.height,e=jot),r||(Yot.x=t.frame.x,Yot.y=t.frame.y,Yot.width=e.width,Yot.height=e.height,r=Yot),n=i.framebuffer):(s=o.resolution,e||(jot.width=o.screen.width,jot.height=o.screen.height,e=jot),r||((r=jot).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},Wot.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},Wot.prototype.resize=function(){this.bind(null)},Wot.prototype.reset=function(){this.bind(null)},Wot);function Wot(t){var e=Vot.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new Tit,e.destinationFrame=new Tit,e.viewportFrame=new Tit,e}var Zot=(Kot.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},Kot);function Kot(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var qot,Jot=0,Qot={textureCount:0},$ot=(Zit(tat,qot=unt),tat.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof lot)return lot;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");lot=!0===t({a:"b"},"a","b")}catch(t){lot=!1}return lot}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},tat.prototype.contextChange=function(t){this.gl=t,this.reset()},tat.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(Qot.textureCount=0,this.syncUniformGroup(t.uniformGroup,Qot)),i},tat.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},tat.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},tat.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},tat.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<aot.length;h++)if(aot[h].test(n,o)){i.push(aot[h].code(r,o)),a=!0;break}a||(s=(1===n.size?hot:uot)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},tat.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},tat.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},tat.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=Kst(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:Jst(a.type,a.size)}}t=new Zot(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},tat.prototype.reset=function(){this.program=null,this.shader=null},tat.prototype.destroy=function(){this.destroyed=!0},tat);function tat(t){t=qot.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=Jot++,t}var eat,rat=(Zit(iat,eat=unt),iat.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[Crt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.ADD]=[t.ONE,t.ONE],e[Crt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.NONE]=[0,0],e[Crt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Crt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Crt.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Crt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Crt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Crt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Crt.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Crt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Crt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Crt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Crt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},iat.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},iat.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},iat.prototype.setBlend=function(t){this.updateCheck(iat.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},iat.prototype.setOffset=function(t){this.updateCheck(iat.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},iat.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},iat.prototype.setDepthMask=function(t){this.gl.depthMask(t)},iat.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},iat.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},iat.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},iat.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},iat.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},iat.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},iat.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},iat.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},iat);function iat(t){t=eat.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=Crt.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new xot,t.defaultState.blend=!0,t}var nat,sat=(Zit(oat,nat=unt),oat.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Xrt.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},oat.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},oat.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},oat);function oat(t){t=nat.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=Yrt.GC_MAX_IDLE,t.checkCountMax=Yrt.GC_MAX_CHECK_COUNT,t.mode=Yrt.GC_MODE,t}var aat,hat=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},uat=(Zit(lat,aat=unt),lat.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new hat(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new hat(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},lat.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},lat.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},lat.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},lat.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==Drt.FLOAT&&this.renderer.texture.unbind(s)}},lat.prototype.initTexture=function(t){var e=new hat(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},lat.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===Lrt.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},lat.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==Drt.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},lat.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&tit(this.managedTextures,t,1))},lat.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==Brt.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=Frt.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},lat.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==Brt.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Urt.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===Urt.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Urt.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===Urt.LINEAR?i.LINEAR:i.NEAREST)},lat);function lat(t){t=aat.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new rnt,t.hasIntegerTextures=!1,t}var cat,dat={__proto__:null,FilterSystem:Sst,BatchSystem:Cst,ContextSystem:Lst,FramebufferSystem:kst,GeometrySystem:jst,MaskSystem:Cot,ScissorSystem:Dot,StencilSystem:Bot,ProjectionSystem:Xot,RenderTextureSystem:zot,ShaderSystem:$ot,StateSystem:rat,TextureGCSystem:sat,TextureSystem:uat},fat=new Mit,Cnt=(Zit(pat,cat=pt.a),pat.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(pat.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(pat.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),pat.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},pat.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=qnt.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return fat.tx=-i.x,fat.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:fat,skipUpdateTransform:!!t.parent}),r},pat.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=Ort.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(pat.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(pat.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),pat);function pat(t,e){void 0===t&&(t=Ort.UNKNOWN);var r=cat.call(this)||this;return e=Object.assign({},Yrt.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new Tit(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||Yrt.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(iit("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var _at;Zit(yat,_at=Cnt),yat.create=function(t){if(Wrt=void 0===Wrt?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:Yrt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():Wrt)return new yat(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},yat.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},yat.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof qnt?(iit("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},yat.prototype.resize=function(t,e){_at.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},yat.prototype.reset=function(){return this.runners.reset.emit(),this},yat.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},yat.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();_at.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(yat.prototype,"extract",{get:function(){return iit("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),yat.registerPlugin=function(t,e){(yat.__plugins=yat.__plugins||{})[t]=e};function yat(t){var e,r=_at.call(this,Ort.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new cit("destroy"),contextChange:new cit("contextChange"),reset:new cit("reset"),update:new cit("update"),postrender:new cit("postrender"),prerender:new cit("prerender"),resize:new cit("resize")},r.globalUniforms=new vst({projectionMatrix:new Mit},!0),r.addSystem(Cot,"mask").addSystem(Lst,"context").addSystem(rat,"state").addSystem($ot,"shader").addSystem(uat,"texture").addSystem(jst,"geometry").addSystem(kst,"framebuffer").addSystem(Dot,"scissor").addSystem(Bot,"stencil").addSystem(Xot,"projection").addSystem(sat,"textureGC").addSystem(Sst,"filter").addSystem(zot,"renderTexture").addSystem(Cst,"batch"),r.initPlugins(yat.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",Zrt||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+Krt+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+Krt+" - "+e+" - http://www.pixijs.com/"),Zrt=!0),r.resize(r.options.width,r.options.height),r}var mat=function(){this.texArray=null,this.blend=0,this.type=Prt.TRIANGLES,this.start=0,this.size=0,this.data=null},vat=(xat.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},xat);function xat(){this.elements=[],this.ids=[],this.count=0}var gat=(Object.defineProperty(Eat.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(Eat.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(Eat.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(Eat.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(Eat.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),Eat.prototype.view=function(t){return this[t+"View"]},Eat.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},Eat.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Eat);function Eat(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var Tat,bat=(Zit(Aat,Tat=Rst),Aat.prototype.contextChange=function(){var t=this.renderer.gl;Yrt.PREFER_ENV===Rrt.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Yrt.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=dot(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},Aat.prototype.initFlushBuffers=function(){for(var t=Aat._drawCallPool,e=Aat._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new mat);for(;e.length<i;)e.push(new vat);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},Aat.prototype.onPrerender=function(){this._flushId=0},Aat.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},Aat.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=Aat._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++rnt._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;rnt._globalBatch=o},Aat.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=Aat._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=qrt[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},Aat.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},Aat.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;Yrt.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},Aat.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=Aat._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},Aat.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},Aat.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Yrt.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},Aat.prototype.stop=function(){this.flush()},Aat.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),Tat.prototype.destroy.call(this)},Aat.prototype.getAttributeBuffer=function(t){var e=Jrt(Math.ceil(t/8)),t=$rt(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new gat(e*this.vertexSize*4)),t},Aat.prototype.getIndexBuffer=function(t){var e=Jrt(Math.ceil(t/12)),r=$rt(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},Aat.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},Aat._drawCallPool=[],Aat._textureArrayPool=[],Aat);function Aat(t){var e=Tat.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=xot.for2d(),e.size=4*Yrt.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var Sat=(Iat.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=vst.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new _ot(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Mit,default:this.defaultGroupCache[t]};return new mot(this.programCache[t],i)},Iat.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},Iat);function Iat(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var Rat,Oat=(Zit(wat,Rat=vnt),wat);function wat(t){void 0===t&&(t=!1);var e=Rat.call(this)||this;return e._buffer=new ist(null,t,!1),e._indexBuffer=new ist(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,Lrt.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,Lrt.FLOAT).addAttribute("aColor",e._buffer,4,!0,Lrt.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,Lrt.FLOAT).addIndex(e._indexBuffer),e}var Cat="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Pat="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function Nat(){}(Nat.create=function(t){var e,t=Object.assign({vertex:Cat,fragment:Pat,geometryClass:Oat,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return Zit(o,e=bat),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new Sat(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(Nat,"defaultVertexSrc",{get:function(){return Cat},enumerable:!1,configurable:!0}),Object.defineProperty(Nat,"defaultFragmentTemplate",{get:function(){return Pat},enumerable:!1,configurable:!0}),Nat).create();var Mat={};for(Lat in Nnt)!function(t){Object.defineProperty(Mat,t,{get:function(){return iit("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),Nnt[t]}})}(Lat);var Lat,Dat={};for(Lat in dat)!function(t){Object.defineProperty(Dat,t,{get:function(){return iit("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),dat[t]}})}(Lat);Yrt.SORTABLE_CHILDREN=!1;var Uat=(Fat.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Fat.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Fat.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Tit.EMPTY:((t=t||new Tit(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},Fat.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},Fat.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,t=t.ty,o=r*e.x+n*e.y+o,t=i*e.x+s*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},Fat.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},Fat.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},Fat.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},Fat.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},Fat.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},Fat.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},Fat.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},Fat.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},Fat.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},Fat.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},Fat.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},Fat.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},Fat);function Fat(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var Bat=function(t,e){return(Bat=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function kat(t,e){function r(){this.constructor=t}Bat(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Gat,Ant=(kat(Xat,Gat=pt.a),Xat.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(Xat.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},Xat.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},Xat.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},Xat.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Tit),e=this._boundsRect),this._bounds.getRectangle(e)},Xat.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Tit),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Uat);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},Xat.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},Xat.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},Xat.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},Xat.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},Xat.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(Xat.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Vat),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),Xat.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},Xat.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(Xat.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(Xat.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(Xat.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(Xat.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(Xat.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Xat.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Xat.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Xat.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Xat.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(Xat.prototype,"angle",{get:function(){return this.transform.rotation*git},set:function(t){this.transform.rotation=t*Eit},enumerable:!1,configurable:!0}),Object.defineProperty(Xat.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Xat.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(Xat.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),Xat);function Xat(){var t=Gat.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new Vit,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Uat,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var Hat,Vat=(kat(jat,Hat=Ant),jat);function jat(){var t=null!==Hat&&Hat.apply(this,arguments)||this;return t.sortDirty=null,t}function Yat(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}Ant.prototype.displayObjectUpdateTransform=Ant.prototype.updateTransform;var zat,Rnt=(kat(Wat,zat=Ant),Wat.prototype.onChildrenChange=function(t){},Wat.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},Wat.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},Wat.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},Wat.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},Wat.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);tit(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},Wat.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},Wat.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,tit(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},Wat.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,tit(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},Wat.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Wat.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(Yat),this.sortDirty=!1},Wat.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},Wat.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},Wat.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=zat.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},Wat.prototype._calculateBounds=function(){},Wat.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},Wat.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},Wat.prototype._render=function(t){},Wat.prototype.destroy=function(t){zat.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(Wat.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Wat.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),Wat);function Wat(){var t=zat.call(this)||this;return t.children=[],t.sortableChildren=Yrt.SORTABLE_CHILDREN,t.sortDirty=!1,t}Rnt.prototype.containerUpdateTransform=Rnt.prototype.updateTransform;var Zat=function(t,e){return(Zat=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Kat(t,e){function r(){this.constructor=t}Zat(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var qat=(Jat.prototype.update=function(t){!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID||(this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID,t=this.uvBuffer.data,this.data&&this.data.length===t.length||(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++)},Jat);function Jat(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}var Qat,$at=new wit,tht=new Iit,eht=(Kat(rht,Qat=Rnt),Object.defineProperty(rht.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(rht.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(rht.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(rht.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(rht.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(rht.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(rht.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),rht.prototype._render=function(t){var e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Prt.TRIANGLES&&e.length<2*rht.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},rht.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},rht.prototype._renderToBatch=function(t){var e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)},rht.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,r=t._updateID;if(r!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var t=this.transform.worldTransform,i=t.a,n=t.b,s=t.c,o=t.d,a=t.tx,h=t.ty,u=this.vertexData,l=0;l<u.length/2;l++){var c=e[2*l],d=e[2*l+1];u[2*l]=i*c+s*d+a,u[2*l+1]=n*c+o*d+h}if(this._roundPixels)for(var f=Yrt.RESOLUTION,l=0;l<u.length;++l)u[l]=Math.round((u[l]*f|0)/f);this.vertexDirty=r}},rht.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new qat(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},rht.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},rht.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,$at);for(var e=this.geometry.getBuffer("aVertexPosition").data,r=tht.points,i=this.geometry.getIndex().data,n=i.length,s=4===this.drawMode?3:1,o=0;o+2<n;o+=s){var a=2*i[o],h=2*i[o+1],u=2*i[o+2];if(r[0]=e[a],r[1]=e[1+a],r[2]=e[h],r[3]=e[1+h],r[4]=e[u],r[5]=e[1+u],tht.contains($at.x,$at.y))return!0}return!1},rht.prototype.destroy=function(t){Qat.prototype.destroy.call(this,t),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},rht.BATCHABLE_SIZE=100,rht);function rht(t,e,r,i){void 0===i&&(i=Prt.TRIANGLES);var n=Qat.call(this)||this;return(n.geometry=t).refCount++,n.shader=e,n.state=r||xot.for2d(),n.drawMode=i,n.start=0,n.size=0,n.uvs=null,n.indices=null,n.vertexData=new Float32Array(1),n.vertexDirty=-1,n._transformID=-1,n._roundPixels=Yrt.ROUND_PIXELS,n.batchUvs=null,n}var iht,nht=(Kat(sht,iht=mot),Object.defineProperty(sht.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(sht.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(sht.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),sht.prototype.update=function(){var t,e,r,i;this._colorDirty&&(this._colorDirty=!1,i=this.texture.baseTexture,t=this._tint,e=this._alpha,r=this.uniforms.uColor,i=i.alphaMode,(r=r||new Float32Array(4))[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,!i&&void 0!==i||(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},sht);function sht(t,e){var r=this,i={uSampler:t,alpha:1,uTextureMatrix:Mit.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e)).uniforms&&Object.assign(i,e.uniforms),(r=iht.call(this,e.program||_ot.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i)||this)._colorDirty=!1,r.uvMatrix=new Aot(t),r.batchable=void 0===e.program,r.pluginName=e.pluginName,r.tint=e.tint,r.alpha=e.alpha,r}var oht,aht=(Kat(hht,oht=vnt),Object.defineProperty(hht.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),hht);function hht(t,e,r){var i=oht.call(this)||this,t=new ist(t),e=new ist(e,!0),r=new ist(r,!0,!0);return i.addAttribute("aVertexPosition",t,2,!1,Lrt.FLOAT).addAttribute("aTextureCoord",e,2,!1,Lrt.FLOAT).addIndex(r),i._updateId=-1,i}var uht,lht,cht,dht,fht,pht,_ht,yht,mht,vht,xht,ght,Eht,Tht,bht,Aht,Sht,Iht;r(18);(unt=uht=uht||{})[unt.WEBGL_LEGACY=0]="WEBGL_LEGACY",unt[unt.WEBGL=1]="WEBGL",unt[unt.WEBGL2=2]="WEBGL2",(Cnt=lht=lht||{})[Cnt.UNKNOWN=0]="UNKNOWN",Cnt[Cnt.WEBGL=1]="WEBGL",Cnt[Cnt.CANVAS=2]="CANVAS",(Ant=cht=cht||{})[Ant.COLOR=16384]="COLOR",Ant[Ant.DEPTH=256]="DEPTH",Ant[Ant.STENCIL=1024]="STENCIL",(Iit=dht=dht||{})[Iit.NORMAL=0]="NORMAL",Iit[Iit.ADD=1]="ADD",Iit[Iit.MULTIPLY=2]="MULTIPLY",Iit[Iit.SCREEN=3]="SCREEN",Iit[Iit.OVERLAY=4]="OVERLAY",Iit[Iit.DARKEN=5]="DARKEN",Iit[Iit.LIGHTEN=6]="LIGHTEN",Iit[Iit.COLOR_DODGE=7]="COLOR_DODGE",Iit[Iit.COLOR_BURN=8]="COLOR_BURN",Iit[Iit.HARD_LIGHT=9]="HARD_LIGHT",Iit[Iit.SOFT_LIGHT=10]="SOFT_LIGHT",Iit[Iit.DIFFERENCE=11]="DIFFERENCE",Iit[Iit.EXCLUSION=12]="EXCLUSION",Iit[Iit.HUE=13]="HUE",Iit[Iit.SATURATION=14]="SATURATION",Iit[Iit.COLOR=15]="COLOR",Iit[Iit.LUMINOSITY=16]="LUMINOSITY",Iit[Iit.NORMAL_NPM=17]="NORMAL_NPM",Iit[Iit.ADD_NPM=18]="ADD_NPM",Iit[Iit.SCREEN_NPM=19]="SCREEN_NPM",Iit[Iit.NONE=20]="NONE",Iit[Iit.SRC_OVER=0]="SRC_OVER",Iit[Iit.SRC_IN=21]="SRC_IN",Iit[Iit.SRC_OUT=22]="SRC_OUT",Iit[Iit.SRC_ATOP=23]="SRC_ATOP",Iit[Iit.DST_OVER=24]="DST_OVER",Iit[Iit.DST_IN=25]="DST_IN",Iit[Iit.DST_OUT=26]="DST_OUT",Iit[Iit.DST_ATOP=27]="DST_ATOP",Iit[Iit.ERASE=26]="ERASE",Iit[Iit.SUBTRACT=28]="SUBTRACT",Iit[Iit.XOR=29]="XOR",(Rnt=fht=fht||{})[Rnt.POINTS=0]="POINTS",Rnt[Rnt.LINES=1]="LINES",Rnt[Rnt.LINE_LOOP=2]="LINE_LOOP",Rnt[Rnt.LINE_STRIP=3]="LINE_STRIP",Rnt[Rnt.TRIANGLES=4]="TRIANGLES",Rnt[Rnt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Rnt[Rnt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(vnt=pht=pht||{})[vnt.RGBA=6408]="RGBA",vnt[vnt.RGB=6407]="RGB",vnt[vnt.ALPHA=6406]="ALPHA",vnt[vnt.LUMINANCE=6409]="LUMINANCE",vnt[vnt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",vnt[vnt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",vnt[vnt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(unt=_ht=_ht||{})[unt.TEXTURE_2D=3553]="TEXTURE_2D",unt[unt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",unt[unt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",unt[unt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",unt[unt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",unt[unt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",unt[unt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",unt[unt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",unt[unt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(Cnt=yht=yht||{})[Cnt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Cnt[Cnt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Cnt[Cnt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Cnt[Cnt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Cnt[Cnt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Cnt[Cnt.FLOAT=5126]="FLOAT",Cnt[Cnt.HALF_FLOAT=36193]="HALF_FLOAT",(Ant=mht=mht||{})[Ant.FLOAT=0]="FLOAT",Ant[Ant.INT=1]="INT",Ant[Ant.UINT=2]="UINT",(Iit=vht=vht||{})[Iit.NEAREST=0]="NEAREST",Iit[Iit.LINEAR=1]="LINEAR",(Rnt=xht=xht||{})[Rnt.CLAMP=33071]="CLAMP",Rnt[Rnt.REPEAT=10497]="REPEAT",Rnt[Rnt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(vnt=ght=ght||{})[vnt.OFF=0]="OFF",vnt[vnt.POW2=1]="POW2",vnt[vnt.ON=2]="ON",vnt[vnt.ON_MANUAL=3]="ON_MANUAL",(unt=Eht=Eht||{})[unt.NPM=0]="NPM",unt[unt.UNPACK=1]="UNPACK",unt[unt.PMA=2]="PMA",unt[unt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",unt[unt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",unt[unt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Cnt=Tht=Tht||{})[Cnt.NO=0]="NO",Cnt[Cnt.YES=1]="YES",Cnt[Cnt.AUTO=2]="AUTO",Cnt[Cnt.BLEND=0]="BLEND",Cnt[Cnt.CLEAR=1]="CLEAR",Cnt[Cnt.BLIT=2]="BLIT",(Ant=bht=bht||{})[Ant.AUTO=0]="AUTO",Ant[Ant.MANUAL=1]="MANUAL",(Iit=Aht=Aht||{}).LOW="lowp",Iit.MEDIUM="mediump",Iit.HIGH="highp",(Rnt=Sht=Sht||{})[Rnt.NONE=0]="NONE",Rnt[Rnt.SCISSOR=1]="SCISSOR",Rnt[Rnt.STENCIL=2]="STENCIL",Rnt[Rnt.SPRITE=3]="SPRITE",(vnt=Iht=Iht||{})[vnt.NONE=0]="NONE",vnt[vnt.LOW=2]="LOW",vnt[vnt.MEDIUM=4]="MEDIUM",vnt[vnt.HIGH=8]="HIGH";var Rht={parse:_t.parse,format:_t.format,resolve:_t.resolve};art.RETINA_PREFIX=/@([0-9\.]+)x/;var Oht,wht=art.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,Cht="6.0.4";var Pht={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Nht(t,e){return(e=void 0===e?[]:e)[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}var Mht=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[dht.NORMAL_NPM]=dht.NORMAL,t[dht.ADD_NPM]=dht.ADD,t[dht.SCREEN_NPM]=dht.SCREEN,e[dht.NORMAL]=dht.NORMAL_NPM,e[dht.ADD]=dht.ADD_NPM,e[dht.SCREEN]=dht.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function Lht(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function Dht(t){return!(t&t-1||!t)}function Uht(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}function Fht(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}var Bht=0;var kht={};function Ght(t,e,r){var i;void 0===r&&(r=3),kht[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),kht[e]=!0)}var Xht={},Hht=Object.create(null),Vht=Object.create(null);jht.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},jht.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},jht.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(jht.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(jht.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function jht(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||art.RESOLUTION,this.resize(t,e)}var Yht;function zht(t,e){t=art.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var Wht,Zht=(Kht.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},Kht.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},Kht.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},Kht.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},Kht.prototype.contains=function(t){return-1!==this.items.indexOf(t)},Kht.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Kht.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(Kht.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(Kht.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Kht);function Kht(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(Zht.prototype,{dispatch:{value:Zht.prototype.emit},run:{value:Zht.prototype.emit}}),art.TARGET_FPMS=.06,(unt=Wht=Wht||{})[unt.INTERACTION=50]="INTERACTION",unt[unt.HIGH=25]="HIGH",unt[unt.NORMAL=0]="NORMAL",unt[unt.LOW=-25]="LOW",unt[unt.UTILITY=-50]="UTILITY";var qht=(Jht.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},Jht.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},Jht.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},Jht.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},Jht);function Jht(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var Qht=($ht.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},$ht.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},$ht.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},$ht.prototype.add=function(t,e,r){return void 0===r&&(r=Wht.NORMAL),this._addListener(new qht(t,e,r))},$ht.prototype.addOnce=function(t,e,r){return void 0===r&&(r=Wht.NORMAL),this._addListener(new qht(t,e,r,!0))},$ht.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},$ht.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty($ht.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),$ht.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},$ht.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},$ht.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},$ht.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*art.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty($ht.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty($ht.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,art.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty($ht.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty($ht,"shared",{get:function(){var t;return $ht._shared||((t=$ht._shared=new $ht).autoStart=!0,t._protected=!0),$ht._shared},enumerable:!1,configurable:!0}),Object.defineProperty($ht,"system",{get:function(){var t;return $ht._system||((t=$ht._system=new $ht).autoStart=!0,t._protected=!0),$ht._system},enumerable:!1,configurable:!0}),$ht);function $ht(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new qht(null,null,1/0),this.deltaMS=1/art.TARGET_FPMS,this.elapsedMS=1/art.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}tut.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,Wht.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Qht.shared:new Qht,t.autoStart&&this.start()},tut.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function tut(){}art.PREFER_ENV=rrt.any?uht.WEBGL:uht.WEBGL2,art.STRICT_TEXTURE_CACHE=!1;var eut=[];function rut(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=eut.length-1;0<=n;--n){var s=eut[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var iut=function(t,e){return(iut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function nut(t,e){function r(){this.constructor=t}iut(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var sut=(out.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},out.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},out.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(out.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),out.prototype.update=function(){this.destroyed||this.onUpdate.emit()},out.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(out.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(out.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),out.prototype.style=function(t,e,r){return!1},out.prototype.dispose=function(){},out.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},out.test=function(t,e){return!1},out);function out(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Zht("setRealSize"),this.onUpdate=new Zht("update"),this.onError=new Zht("onError")}var aut,hut=(nut(uut,aut=sut),uut.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Eht.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},uut.prototype.dispose=function(){this.data=null},uut.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},uut);function uut(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=aut.call(this,e,i)||this).data=t,r}var lut,cut={scaleMode:vht.NEAREST,format:pht.RGBA,alphaMode:Eht.NPM},dut=(nut(fut,lut=pt.a),Object.defineProperty(fut.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(fut.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),fut.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},fut.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},fut.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},fut.prototype._refreshPOT=function(){this.isPowerOfTwo=Dht(this.realWidth)&&Dht(this.realHeight)},fut.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},fut.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},fut.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},fut.prototype.onError=function(t){this.emit("error",this,t)},fut.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Vht[this.cacheId],delete Hht[this.cacheId],this.cacheId=null),this.dispose(),fut.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},fut.prototype.dispose=function(){this.emit("dispose",this)},fut.prototype.castToBaseTexture=function(){return this},fut.from=function(t,e,r){void 0===r&&(r=art.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++Bht),t._pixiId),s=Vht[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new fut(t,e)).cacheId=n,fut.addToCache(s,n)),s},fut.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new hut(t,{width:e,height:r}),t=t instanceof Float32Array?yht.FLOAT:yht.UNSIGNED_BYTE;return new fut(n,Object.assign(cut,i||{width:e,height:r,type:t}))},fut.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Vht[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),Vht[e]=t)},fut.removeFromCache=function(t){if("string"==typeof t){var e=Vht[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete Vht[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete Vht[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},fut._globalBatch=0,fut);function fut(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=lut.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof sut||((t=rut(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||art.RESOLUTION,r.mipmap=void 0!==n?n:art.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:art.ANISOTROPIC_LEVEL,r.wrapMode=u||art.WRAP_MODE,r.scaleMode=void 0!==o?o:art.SCALE_MODE,r.format=l||pht.RGBA,r.type=c||yht.UNSIGNED_BYTE,r.target=d||_ht.TEXTURE_2D,r.alphaMode=void 0!==i?i:Eht.UNPACK,r.uid=++Bht,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var put,Cnt=(nut(_ut,put=sut),_ut.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof sut?this.addResourceAt(t[r],r):this.addResourceAt(rut(t[r],e),r))},_ut.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},_ut.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},_ut.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");put.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},_ut.prototype.unbind=function(t){put.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},_ut.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},_ut);function _ut(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=put.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new dut;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var yut,Ant=(nut(mut,yut=Cnt),mut.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},mut.prototype.bind=function(t){yut.prototype.bind.call(this,t),t.target=_ht.TEXTURE_2D_ARRAY},mut.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},mut);function mut(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=yut.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var vut,xut=(nut(gut,vut=sut),gut.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(Yht=Yht||document.createElement("a")).href=t;var r=Rht.parse(Yht.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},gut.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Eht.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},gut.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),vut.prototype.update.call(this))},gut.prototype.dispose=function(){this.source=null},gut);function gut(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=vut.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var Eut,Tut=(nut(but,Eut=xut),but.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},but);function but(t){return Eut.call(this,t)||this}var Aut,Iit=(nut(Sut,Aut=Cnt),Sut.prototype.bind=function(t){Aut.prototype.bind.call(this,t),t.target=_ht.TEXTURE_CUBE_MAP},Sut.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=_ht.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},Sut.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<Sut.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},Sut.test=function(t){return Array.isArray(t)&&t.length===Sut.SIDES},Sut.SIDES=6,Sut);function Sut(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==Sut.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=Aut.call(this,6,{width:n,height:s})||this,a=0;a<Sut.SIDES;a++)r.items[a].target=_ht.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var Iut,Rut=(nut(Out,Iut=xut),Out.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},Out.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===Eht.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},Out.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return Iut.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(Iut.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},Out.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,Iut.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},Out.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},Out);function Out(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,xut.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=Iut.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:art.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var wut,Rnt=(nut(Cut,wut=xut),Cut.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},Cut.prototype._loadSvg=function(){var s=this,o=new Image;xut.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++Bht,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},Cut.getSize=function(t){var e=Cut.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},Cut.prototype.dispose=function(){wut.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},Cut.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},Cut.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,Cut);function Cut(t,e){var r=this;return e=e||{},(r=wut.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var Put,vnt=(nut(Nut,Put=xut),Nut.prototype.update=function(t){var e;this.destroyed||(e=Qht.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(Put.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},Nut.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},Nut.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},Nut.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},Nut.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},Nut.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Qht.shared.add(this.update,this),this._isConnectedToTicker=!0)},Nut.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Qht.shared.remove(this.update,this),this._isConnectedToTicker=!1)},Nut.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},Nut.prototype.dispose=function(){this._isConnectedToTicker&&Qht.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),Put.prototype.dispose.call(this)},Object.defineProperty(Nut.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Qht.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Qht.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(Nut.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),Nut.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<Nut.TYPES.indexOf(e)},Nut.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Nut.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},Nut);function Nut(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];xut.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||Nut.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=Put.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var Mut,unt=(nut(Lut,Mut=xut),Lut.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},Lut);function Lut(t){return Mut.call(this,t)||this}eut.push(Rut,unt,Tut,vnt,Rnt,hut,Iit,Ant);var Dut={__proto__:null,Resource:sut,BaseImageResource:xut,INSTALLED:eut,autoDetectResource:rut,AbstractMultiResource:Cnt,ArrayResource:Ant,BufferResource:hut,CanvasResource:Tut,CubeResource:Iit,ImageResource:Rut,SVGResource:Rnt,VideoResource:vnt,ImageBitmapResource:unt},Rnt=(Uut.prototype.destroy=function(){this.renderer=null},Uut);function Uut(t){this.renderer=t}var Fut,But=(nut(kut,Fut=hut),kut.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Eht.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},kut);function kut(){return null!==Fut&&Fut.apply(this,arguments)||this}var Gut=(Object.defineProperty(Xut.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),Xut.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new dut(null,{scaleMode:vht.NEAREST,resolution:1,mipmap:ght.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Xut.prototype.addDepthTexture=function(t){return this.depthTexture=t||new dut(new But(null,{width:this.width,height:this.height}),{scaleMode:vht.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ght.OFF,format:pht.DEPTH_COMPONENT,type:yht.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Xut.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Xut.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Xut.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},Xut.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Xut.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},Xut);function Xut(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Zht("disposeFramebuffer"),this.multisample=Iht.NONE}var Hut,Vut=(nut(jut,Hut=dut),jut.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},jut.prototype.dispose=function(){this.framebuffer.dispose(),Hut.prototype.dispose.call(this)},jut.prototype.destroy=function(){Hut.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},jut);function jut(t){var e=this,e=Hut.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=ght.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new Gut(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var Yut=(zut.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=Let.add(r,Let.NW),this.x0=s+i*Let.uX(r),this.y0=e+n*Let.uY(r),r=Let.add(r,2),this.x1=s+i*Let.uX(r),this.y1=e+n*Let.uY(r),r=Let.add(r,2),this.x2=s+i*Let.uX(r),this.y2=e+n*Let.uY(r),r=Let.add(r,2),this.x3=s+i*Let.uX(r),this.y3=e+n*Let.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},zut.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},zut);function zut(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var Wut,Zut=new Yut,Kut=(nut(qut,Wut=pt.a),qut.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},qut.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},qut.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&Hht[t.url]&&qut.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,qut.removeFromCache(this),this.textureCacheIds=null},qut.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new qut(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},qut.prototype.updateUvs=function(){this._uvs===Zut&&(this._uvs=new Yut),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},qut.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=art.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++Bht),t._pixiId),s=Hht[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=zht(t)),(s=new qut(new dut(t,e))).baseTexture.cacheId=n,dut.addToCache(s.baseTexture,n),qut.addToCache(s,n)),s},qut.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=qut.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},qut.fromBuffer=function(t,e,r,i){return new qut(dut.fromBuffer(t,e,r,i))},qut.fromLoader=function(t,e,r,i){t=new dut(t,Object.assign({scaleMode:art.SCALE_MODE,resolution:zht(e)},i)),i=t.resource;i instanceof Rut&&(i.url=e);var n=new qut(t);return dut.addToCache(n.baseTexture,r=r||e),qut.addToCache(n,r),r!==e&&(dut.addToCache(n.baseTexture,e),qut.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},qut.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Hht[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),Hht[e]=t)},qut.removeFromCache=function(t){if("string"==typeof t){var e=Hht[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete Hht[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)Hht[t.textureCacheIds[i]]===t&&delete Hht[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(qut.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(qut.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(qut.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(qut.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(qut.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),qut.prototype.castToBaseTexture=function(){return this.baseTexture},qut);function qut(t,e,r,i,n,s){var o=Wut.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new _et(0,0,1,1)),t instanceof qut&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=Zut,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new Eet(s.x,s.y):new Eet(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function Jut(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}Kut.EMPTY=new Kut(new dut),Jut(Kut.EMPTY),Jut(Kut.EMPTY.baseTexture),Kut.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new Kut(new dut(new Tut(t)))}(),Jut(Kut.WHITE),Jut(Kut.WHITE.baseTexture);var Qut,$ut=(nut(tlt,Qut=Kut),Object.defineProperty(tlt.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),tlt.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},tlt.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},tlt.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(Ght("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new tlt(new Vut(t))},tlt);function tlt(t,e){e=Qut.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var elt=(rlt.prototype.createTexture=function(t,e){e=new Vut(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new $ut(e)},rlt.prototype.getOptimalTexture=function(t,e,r){var i=rlt.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=Lht(t)))<<16|65535&(e=Lht(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},rlt.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},rlt.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},rlt.prototype.returnFilterTexture=function(t){this.returnTexture(t)},rlt.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},rlt.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=rlt.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},rlt.SCREEN_KEY="screen",rlt);function rlt(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var ilt=(nlt.prototype.destroy=function(){this.buffer=null},nlt.from=function(t,e,r,i,n){return new nlt(t,e,r,i,n)},nlt);function nlt(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=yht.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var slt=0,olt=(alt.prototype.update=function(t){this.data=t||this.data,this._updateID++},alt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},alt.prototype.destroy=function(){this.dispose(),this.data=null},alt.from=function(t){return new alt(t=t instanceof Array?new Float32Array(t):t)},alt);function alt(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=slt++,this.disposeRunner=new Zht("disposeBuffer")}function hlt(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var ult={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var llt={5126:4,5123:2,5121:1},clt=0,dlt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},vnt=(flt.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof olt||(e instanceof Array&&(e=new Float32Array(e)),e=new olt(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new ilt(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},flt.prototype.getAttribute=function(t){return this.attributes[t]},flt.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},flt.prototype.addIndex=function(t){return t instanceof olt||(t instanceof Array&&(t=new Uint16Array(t)),t=new olt(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},flt.prototype.getIndex=function(){return this.indexBuffer},flt.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new olt;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*llt[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=hlt(l);n[c]||(n[c]=new ult[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},flt.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},flt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},flt.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},flt.prototype.clone=function(){for(var t=new flt,e=0;e<this.buffers.length;e++)t.buffers[e]=new olt(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new ilt(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},flt.merge=function(t){for(var e=new flt,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new dlt[hlt(o.buffers[s].data)](i[s]),e.buffers[s]=new olt(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*llt[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},flt);function flt(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=clt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Zht("disposeGeometry"),this.refCount=0}var plt,_lt=(nut(ylt,plt=vnt),ylt);function ylt(){var t=plt.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var mlt,vlt=(nut(xlt,mlt=vnt),xlt.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},xlt.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},xlt);function xlt(){var t=mlt.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new olt(t.vertices),t.uvBuffer=new olt(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var glt=0,Elt=(Tlt.prototype.update=function(){this.dirtyId++},Tlt.prototype.add=function(t,e,r){this.uniforms[t]=new Tlt(e,r)},Tlt.from=function(t,e){return new Tlt(t,e)},Tlt);function Tlt(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=glt++,this.static=!!e}var blt=(Alt.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},Alt);function Alt(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new _et,this.destinationFrame=new _et,this.bindingSourceFrame=new _et,this.bindingDestinationFrame=new _et,this.filters=[],this.transform=null}var Slt,Ilt=[new Eet,new Eet,new Eet,new Eet],Rlt=new Set,Olt=(nut(wlt,Slt=Rnt),wlt.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new blt,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(Rlt.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},wlt.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,Tht.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,Tht.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,Tht.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},wlt.prototype.bindAndClear=function(t,e){void 0===e&&(e=Tht.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===Tht.CLEAR||e===Tht.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},wlt.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(fht.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(fht.TRIANGLE_STRIP))},wlt.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(Set.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},wlt.prototype.destroy=function(){this.texturePool.clear(!1)},wlt.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},wlt.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},wlt.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},wlt.prototype.emptyPool=function(){this.texturePool.clear(!0)},wlt.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},wlt.prototype.transformAABB=function(t,e){var r=Ilt[0],i=Ilt[1],n=Ilt[2],s=Ilt[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},wlt.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?Rlt.copyFrom(n):Rlt.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},wlt);function wlt(t){var e=Slt.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new elt,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new _lt,e.quadUv=new vlt,e.tempRect=new _et,e.activeState={},e.globalUniforms=new Elt({outputFrame:new _et,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var Clt=(Plt.prototype.flush=function(){},Plt.prototype.destroy=function(){this.renderer=null},Plt.prototype.start=function(){},Plt.prototype.stop=function(){this.flush()},Plt.prototype.render=function(t){},Plt);function Plt(t){this.renderer=t}var Nlt,Mlt=(nut(Llt,Nlt=Rnt),Llt.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},Llt.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},Llt.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},Llt.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},Llt.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},Llt);function Llt(t){var e=Nlt.call(this,t)||this;return e.emptyRenderer=new Clt(t),e.currentRenderer=e.emptyRenderer,e}var Dlt,Ult=0,Flt=(nut(Blt,Dlt=Rnt),Object.defineProperty(Blt.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),Blt.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Ult++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},Blt.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Ult++,this.renderer.runners.contextChange.emit(t)},Blt.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},Blt.prototype.createContext=function(t,e){var r;if(r=art.PREFER_ENV>=uht.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},Blt.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},Blt.prototype.handleContextLost=function(t){t.preventDefault()},Blt.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},Blt.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},Blt.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},Blt.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},Blt);function Blt(t){var e=Dlt.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var klt,Glt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=Iht.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},Xlt=new _et,Hlt=(nut(Vlt,klt=Rnt),Vlt.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new _et,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,art.PREFER_ENV===uht.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},Vlt.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},Vlt.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(Vlt.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),Vlt.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=cht.COLOR|cht.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},Vlt.prototype.initFramebuffer=function(t){var e=this.gl,e=new Glt(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},Vlt.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},Vlt.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},Vlt.prototype.detectSamples=function(t){var e=this.msaaSamples,r=Iht.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?Iht.NONE:r},Vlt.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new Gut(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=Xlt).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},Vlt.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},Vlt.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},Vlt.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},Vlt.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new _et},Vlt);function Vlt(t){t=klt.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new Gut(10,10),t.msaaSamples=null,t}var jlt,Ylt=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},zlt={5126:4,5123:2,5121:1},Wlt=(nut(Zlt,jlt=Rnt),Zlt.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=art.PREFER_ENV===uht.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},Zlt.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},Zlt.prototype.reset=function(){this.unbind()},Zlt.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},Zlt.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},Zlt.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},Zlt.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*zlt[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*zlt[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*zlt[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new Ylt(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},Zlt.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},Zlt.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},Zlt.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},Zlt.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},Zlt.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},Zlt.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},Zlt);function Zlt(t){t=jlt.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var Klt=(qlt.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Sht.NONE,this.autoDetect=!0),this._target=null},qlt.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},qlt);function qlt(t){void 0===t&&(t=null),this.type=Sht.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function Jlt(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function Qlt(t,e,r,i){var n=Jlt(t,t.VERTEX_SHADER,e),s=Jlt(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function $lt(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function tct(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return $lt(2*e);case"bvec3":return $lt(3*e);case"bvec4":return $lt(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ect,rct={},ict=rct;function nct(){var t,e;return(ict===rct||ict&&ict.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=art.PREFER_ENV>=uht.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),ict=e),ict}function sct(t,e,r){if("precision"===t.substring(0,9))return r!==Aht.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===Aht.HIGH&&r!==Aht.HIGH?Aht.MEDIUM:e)+" float;\n"+t}var oct={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var act=null,hct={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function uct(t,e){if(!act){var r=Object.keys(hct);act={};for(var i=0;i<r.length;++i){var n=r[i];act[t[n]]=hct[n]}}return act[e]}var lct=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],cct={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},dct={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var fct,pct=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function _ct(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=pct.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var yct=0,mct={},vct=(xct.prototype.extractData=function(t,e){var r=nct();r?(e=Qlt(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},xct.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=uct(e,o.type),a={type:a,name:o.name,size:oct[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},xct.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=uct(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:tct(h,s.size)}}return r},Object.defineProperty(xct,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(xct,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),xct.from=function(t,e,r){var i=t+e,n=Xht[i];return n||(Xht[i]=n=new xct(t,e,r)),n},xct);function xct(t,e,r){void 0===r&&(r="pixi-shader"),this.id=yct++,this.vertexSrc=t||xct.defaultVertexSrc,this.fragmentSrc=e||xct.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),mct[r]?(mct[r]++,r+="-"+mct[r]):mct[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=sct(this.vertexSrc,art.PRECISION_VERTEX,Aht.HIGH),this.fragmentSrc=sct(this.fragmentSrc,art.PRECISION_FRAGMENT,(ect||(ect=Aht.MEDIUM,(r=nct())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),ect=r.precision?Aht.HIGH:Aht.MEDIUM)),ect))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var gct=(Ect.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},Ect.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(Ect.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),Ect.from=function(t,e,r){return new Ect(vct.from(t,e),r)},Ect);function Ect(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof Elt?e:new Elt(e):new Elt({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var Tct=(Object.defineProperty(bct.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(bct.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(bct.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(bct.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(bct.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(bct.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(bct.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==dht.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(bct.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),bct.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},bct.for2d=function(){var t=new bct;return t.depthTest=!1,t.blend=!0,t},bct);function bct(){this.data=0,this.blendMode=dht.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var Act,unt=(nut(Sct,Act=gct),Sct.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(Sct.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Sct,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Sct,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),Sct);function Sct(t,e,r){var i=this,e=vct.from(t||Sct.defaultVertexSrc,e||Sct.defaultFragmentSrc);return(i=Act.call(this,e,r)||this).padding=0,i.resolution=art.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new Tct,i}var Ict=new Set,Rct=(Object.defineProperty(Oct.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),Oct.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},Oct.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(Ict.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Ict));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},Oct);function Oct(t,e){this._texture=t,this.mapCoord=new Set,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var wct,Cct=(nut(Pct,wct=unt),Pct.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Rct(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},Pct);function Pct(t){var e=this,r=new Set,e=wct.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var Nct,Mct=(nut(Lct,Nct=Rnt),Lct.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},Lct.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new Klt).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case Sht.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case Sht.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case Sht.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},Lct.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case Sht.SCISSOR:this.renderer.scissor.pop();break;case Sht.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Sht.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},Lct.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=Sht.SPRITE:(t.type=Sht.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=Sht.SCISSOR)))},Lct.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new Cct(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},Lct.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},Lct);function Lct(t){t=Nct.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var Dct,unt=(nut(Uct,Dct=Rnt),Uct.prototype.getStackLength=function(){return this.maskStack.length},Uct.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},Uct.prototype._useCurrent=function(){},Uct.prototype.destroy=function(){Dct.prototype.destroy.call(this),this.maskStack=null},Uct);function Uct(t){t=Dct.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var Fct,Bct=(nut(kct,Fct=unt),kct.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},kct.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},kct.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},kct.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},kct);function kct(t){t=Fct.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var Gct,Xct=(nut(Hct,Gct=unt),Hct.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},Hct.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},Hct.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},Hct.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},Hct.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},Hct);function Hct(t){t=Gct.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var Vct,jct=(nut(Yct,Vct=Rnt),Yct.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},Yct.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},Yct.prototype.setTransform=function(t){},Yct);function Yct(t){t=Vct.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new Set,t.transform=null,t}var zct,Wct=new _et,Zct=new _et,Kct=(nut(qct,zct=Rnt),qct.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(Wct.width=t.frame.width,Wct.height=t.frame.height,e=Wct),r||(Zct.x=t.frame.x,Zct.y=t.frame.y,Zct.width=e.width,Zct.height=e.height,r=Zct),n=i.framebuffer):(s=o.resolution,e||(Wct.width=o.screen.width,Wct.height=o.screen.height,e=Wct),r||((r=Wct).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},qct.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},qct.prototype.resize=function(){this.bind(null)},qct.prototype.reset=function(){this.bind(null)},qct);function qct(t){var e=zct.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new _et,e.destinationFrame=new _et,e.viewportFrame=new _et,e}var Jct=(Qct.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},Qct);function Qct(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var $ct,tdt=0,edt={textureCount:0},rdt=(nut(idt,$ct=Rnt),idt.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof fct)return fct;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");fct=!0===t({a:"b"},"a","b")}catch(t){fct=!1}return fct}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},idt.prototype.contextChange=function(t){this.gl=t,this.reset()},idt.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(edt.textureCount=0,this.syncUniformGroup(t.uniformGroup,edt)),i},idt.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},idt.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},idt.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},idt.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<lct.length;h++)if(lct[h].test(n,o)){i.push(lct[h].code(r,o)),a=!0;break}a||(s=(1===n.size?cct:dct)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},idt.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},idt.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},idt.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=Qlt(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:tct(a.type,a.size)}}t=new Jct(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},idt.prototype.reset=function(){this.program=null,this.shader=null},idt.prototype.destroy=function(){this.destroyed=!0},idt);function idt(t){t=$ct.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=tdt++,t}var ndt,sdt=(nut(odt,ndt=Rnt),odt.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[dht.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.ADD]=[t.ONE,t.ONE],e[dht.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.NONE]=[0,0],e[dht.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[dht.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[dht.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[dht.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[dht.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[dht.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[dht.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[dht.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[dht.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[dht.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[dht.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},odt.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},odt.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},odt.prototype.setBlend=function(t){this.updateCheck(odt.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},odt.prototype.setOffset=function(t){this.updateCheck(odt.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},odt.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},odt.prototype.setDepthMask=function(t){this.gl.depthMask(t)},odt.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},odt.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},odt.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},odt.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},odt.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},odt.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},odt.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},odt.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},odt);function odt(t){t=ndt.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=dht.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new Tct,t.defaultState.blend=!0,t}var adt,hdt=(nut(udt,adt=Rnt),udt.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==bht.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},udt.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},udt.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},udt);function udt(t){t=adt.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=art.GC_MAX_IDLE,t.checkCountMax=art.GC_MAX_CHECK_COUNT,t.mode=art.GC_MODE,t}var ldt,cdt=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},ddt=(nut(fdt,ldt=Rnt),fdt.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new cdt(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new cdt(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},fdt.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},fdt.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},fdt.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},fdt.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==mht.FLOAT&&this.renderer.texture.unbind(s)}},fdt.prototype.initTexture=function(t){var e=new cdt(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},fdt.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===yht.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},fdt.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==mht.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},fdt.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&Fht(this.managedTextures,t,1))},fdt.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==ght.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=xht.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},fdt.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==ght.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===vht.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===vht.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===vht.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===vht.LINEAR?i.LINEAR:i.NEAREST)},fdt);function fdt(t){t=ldt.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new dut,t.hasIntegerTextures=!1,t}var pdt,_dt={__proto__:null,FilterSystem:Olt,BatchSystem:Mlt,ContextSystem:Flt,FramebufferSystem:Hlt,GeometrySystem:Wlt,MaskSystem:Mct,ScissorSystem:Bct,StencilSystem:Xct,ProjectionSystem:jct,RenderTextureSystem:Kct,ShaderSystem:rdt,StateSystem:sdt,TextureGCSystem:hdt,TextureSystem:ddt},ydt=new Set,Rnt=(nut(mdt,pdt=pt.a),mdt.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(mdt.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(mdt.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),mdt.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},mdt.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=$ut.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return ydt.tx=-i.x,ydt.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:ydt,skipUpdateTransform:!!t.parent}),r},mdt.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=lht.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(mdt.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),Nht(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(mdt.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),mdt);function mdt(t,e){void 0===t&&(t=lht.UNKNOWN);var r=pdt.call(this)||this;return e=Object.assign({},art.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new _et(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||art.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(Ght("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var vdt;nut(xdt,vdt=Rnt),xdt.create=function(t){if(Oht=void 0===Oht?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:art.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():Oht)return new xdt(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},xdt.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},xdt.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof $ut?(Ght("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},xdt.prototype.resize=function(t,e){vdt.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},xdt.prototype.reset=function(){return this.runners.reset.emit(),this},xdt.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},xdt.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();vdt.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(xdt.prototype,"extract",{get:function(){return Ght("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),xdt.registerPlugin=function(t,e){(xdt.__plugins=xdt.__plugins||{})[t]=e};function xdt(t){var e,r=vdt.call(this,lht.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Zht("destroy"),contextChange:new Zht("contextChange"),reset:new Zht("reset"),update:new Zht("update"),postrender:new Zht("postrender"),prerender:new Zht("prerender"),resize:new Zht("resize")},r.globalUniforms=new Elt({projectionMatrix:new Set},!0),r.addSystem(Mct,"mask").addSystem(Flt,"context").addSystem(sdt,"state").addSystem(rdt,"shader").addSystem(ddt,"texture").addSystem(Wlt,"geometry").addSystem(Hlt,"framebuffer").addSystem(Bct,"scissor").addSystem(Xct,"stencil").addSystem(jct,"projection").addSystem(hdt,"textureGC").addSystem(Olt,"filter").addSystem(Kct,"renderTexture").addSystem(Mlt,"batch"),r.initPlugins(xdt.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",wht||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+Cht+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+Cht+" - "+e+" - http://www.pixijs.com/"),wht=!0),r.resize(r.options.width,r.options.height),r}var gdt=function(){this.texArray=null,this.blend=0,this.type=fht.TRIANGLES,this.start=0,this.size=0,this.data=null},Edt=(Tdt.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},Tdt);function Tdt(){this.elements=[],this.ids=[],this.count=0}var bdt=(Object.defineProperty(Adt.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(Adt.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(Adt.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(Adt.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(Adt.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),Adt.prototype.view=function(t){return this[t+"View"]},Adt.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},Adt.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Adt);function Adt(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var Sdt,Idt=(nut(Rdt,Sdt=Clt),Rdt.prototype.contextChange=function(){var t=this.renderer.gl;art.PREFER_ENV===uht.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),art.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=_ct(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},Rdt.prototype.initFlushBuffers=function(){for(var t=Rdt._drawCallPool,e=Rdt._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new gdt);for(;e.length<i;)e.push(new Edt);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},Rdt.prototype.onPrerender=function(){this._flushId=0},Rdt.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},Rdt.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=Rdt._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++dut._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;dut._globalBatch=o},Rdt.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=Rdt._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=Mht[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},Rdt.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},Rdt.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;art.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},Rdt.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=Rdt._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},Rdt.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},Rdt.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),art.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},Rdt.prototype.stop=function(){this.flush()},Rdt.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),Sdt.prototype.destroy.call(this)},Rdt.prototype.getAttributeBuffer=function(t){var e=Lht(Math.ceil(t/8)),t=Uht(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new bdt(e*this.vertexSize*4)),t},Rdt.prototype.getIndexBuffer=function(t){var e=Lht(Math.ceil(t/12)),r=Uht(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},Rdt.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},Rdt._drawCallPool=[],Rdt._textureArrayPool=[],Rdt);function Rdt(t){var e=Sdt.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=Tct.for2d(),e.size=4*art.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var Odt=(wdt.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=Elt.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new vct(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Set,default:this.defaultGroupCache[t]};return new gct(this.programCache[t],i)},wdt.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},wdt);function wdt(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var Cdt,Pdt=(nut(Ndt,Cdt=vnt),Ndt);function Ndt(t){void 0===t&&(t=!1);var e=Cdt.call(this)||this;return e._buffer=new olt(null,t,!1),e._indexBuffer=new olt(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,yht.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,yht.FLOAT).addAttribute("aColor",e._buffer,4,!0,yht.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,yht.FLOAT).addIndex(e._indexBuffer),e}var Mdt="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Ldt="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function Ddt(){}(Ddt.create=function(t){var e,t=Object.assign({vertex:Mdt,fragment:Ldt,geometryClass:Pdt,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return nut(o,e=Idt),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new Odt(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(Ddt,"defaultVertexSrc",{get:function(){return Mdt},enumerable:!1,configurable:!0}),Object.defineProperty(Ddt,"defaultFragmentTemplate",{get:function(){return Ldt},enumerable:!1,configurable:!0}),Ddt).create();var Udt={};for(Fdt in Dut)!function(t){Object.defineProperty(Udt,t,{get:function(){return Ght("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),Dut[t]}})}(Fdt);var Fdt,Bdt={};for(Fdt in _dt)!function(t){Object.defineProperty(Bdt,t,{get:function(){return Ght("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),_dt[t]}})}(Fdt);art.SORTABLE_CHILDREN=!1;var kdt=(Gdt.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Gdt.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Gdt.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?_et.EMPTY:((t=t||new _et(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},Gdt.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},Gdt.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,t=t.ty,o=r*e.x+n*e.y+o,t=i*e.x+s*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},Gdt.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},Gdt.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},Gdt.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},Gdt.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},Gdt.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},Gdt.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},Gdt.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},Gdt.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},Gdt.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},Gdt.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},Gdt.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},Gdt.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},Gdt);function Gdt(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var Xdt=function(t,e){return(Xdt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Hdt(t,e){function r(){this.constructor=t}Xdt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Vdt,Rnt=(Hdt(jdt,Vdt=pt.a),jdt.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(jdt.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},jdt.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},jdt.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},jdt.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new _et),e=this._boundsRect),this._bounds.getRectangle(e)},jdt.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new _et),t=this._localBoundsRect),this._localBounds||(this._localBounds=new kdt);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},jdt.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},jdt.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},jdt.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},jdt.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},jdt.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(jdt.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new zdt),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),jdt.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},jdt.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(jdt.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(jdt.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(jdt.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(jdt.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(jdt.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(jdt.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(jdt.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(jdt.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(jdt.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(jdt.prototype,"angle",{get:function(){return this.transform.rotation*fet},set:function(t){this.transform.rotation=t*pet},enumerable:!1,configurable:!0}),Object.defineProperty(jdt.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(jdt.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(jdt.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),jdt);function jdt(){var t=Vdt.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new Det,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new kdt,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var Ydt,zdt=(Hdt(Wdt,Ydt=Rnt),Wdt);function Wdt(){var t=null!==Ydt&&Ydt.apply(this,arguments)||this;return t.sortDirty=null,t}function Zdt(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}Rnt.prototype.displayObjectUpdateTransform=Rnt.prototype.updateTransform;var Kdt,qdt=(Hdt(Jdt,Kdt=Rnt),Jdt.prototype.onChildrenChange=function(t){},Jdt.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},Jdt.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},Jdt.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},Jdt.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},Jdt.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);Fht(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},Jdt.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},Jdt.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,Fht(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},Jdt.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Fht(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},Jdt.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Jdt.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(Zdt),this.sortDirty=!1},Jdt.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},Jdt.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},Jdt.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=Kdt.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},Jdt.prototype._calculateBounds=function(){},Jdt.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},Jdt.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},Jdt.prototype._render=function(t){},Jdt.prototype.destroy=function(t){Kdt.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(Jdt.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Jdt.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),Jdt);function Jdt(){var t=Kdt.call(this)||this;return t.children=[],t.sortableChildren=art.SORTABLE_CHILDREN,t.sortDirty=!1,t}function Qdt(){}function $dt(r,i,n,s){var o=0,a=r.length;!function t(e){e||o===a?n&&n(e):s?setTimeout(function(){i(r[o++],t)},1):i(r[o++],t)}()}function tft(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var r=0,i={_tasks:[],concurrency:t,saturated:Qdt,unsaturated:Qdt,buffer:t/4,empty:Qdt,drain:Qdt,error:Qdt,started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){r=0,i.drain=Qdt,i.started=!1,i._tasks=[]},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!i.paused&&r<i.concurrency&&i._tasks.length;){var t=i._tasks.shift();0===i._tasks.length&&i.empty(),(r+=1)===i.concurrency&&i.saturated(),e(t.data,function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}(function(t){return function(){--r,t.callback.apply(t,arguments),null!=arguments[0]&&i.error(arguments[0],t.data),r<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}(t)))}},length:function(){return i._tasks.length},running:function(){return r},idle:function(){return i._tasks.length+r===0},pause:function(){!0!==i.paused&&(i.paused=!0)},resume:function(){if(!1!==i.paused){i.paused=!1;for(var t=1;t<=i.concurrency;t++)i.process()}}};function n(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");i.started=!0,null==t&&i.idle()?setTimeout(function(){return i.drain()},1):(r={data:t,callback:"function"==typeof r?r:Qdt},e?i._tasks.unshift(r):i._tasks.push(r),setTimeout(function(){return i.process()},1))}return i}qdt.prototype.containerUpdateTransform=qdt.prototype.updateTransform;var eft={};function rft(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ift(t,e,r){return e&&rft(t.prototype,e),r&&rft(t,r),t}var nft=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),sft=null;function oft(){}var aft=function(){function s(t,e,r){if("string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(s.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=s.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=oft,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new us.a,this.onProgress=new us.a,this.onComplete=new us.a,this.onAfterMiddleware=new us.a}s.setExtensionLoadType=function(t,e){hft(s._loadTypeMap,t,e)},s.setExtensionXhrType=function(t,e){hft(s._xhrTypeMap,t,e)};var t=s.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=s.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(t){var e=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(e)},1);else switch(t&&this.onComplete.once(t),this._setFlag(s.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case s.LOAD_TYPE.IMAGE:this.type=s.TYPE.IMAGE,this._loadElement("image");break;case s.LOAD_TYPE.AUDIO:this.type=s.TYPE.AUDIO,this._loadSourceElement("audio");break;case s.LOAD_TYPE.VIDEO:this.type=s.TYPE.VIDEO,this._loadSourceElement("video");break;case s.LOAD_TYPE.XHR:default:nft&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t._hasFlag=function(t){return 0!=(this._flags&t)},t._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(s.STATUS_FLAGS.COMPLETE,!0),this._setFlag(s.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var i=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=s.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},t._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t._createSource=function(t,e,r){r=r||t+"/"+this._getExtension(e);t=document.createElement("source");return t.src=e,t.type=r,t},t._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var t=this.xhr;this.abort(uft(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t._xhrOnTimeout=function(){var t=this.xhr;this.abort(uft(t)+" Request timed out.")},t._xhrOnAbort=function(){var t=this.xhr;this.abort(uft(t)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var t,e,r=this.xhr,i="",n=void 0===r.status?200:r.status;if(""!==r.responseType&&"text"!==r.responseType&&void 0!==r.responseType||(i=r.responseText),0===n&&(0<i.length||r.responseType===s.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2==(n/100|0)){if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=s.TYPE.TEXT;else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=s.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT)try{window.DOMParser?(t=new DOMParser,this.data=t.parseFromString(i,"text/xml")):((e=document.createElement("div")).innerHTML=i,this.data=e),this.type=s.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=r.response||i;this.complete()}else this.abort("["+r.status+"] "+r.statusText+": "+r.responseURL)},t._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,(sft=sft||document.createElement("a")).href=t;var r=!(t=hs()(sft.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},t._determineXhrType=function(){return s._xhrTypeMap[this.extension]||s.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return s._loadTypeMap[this.extension]||s.LOAD_TYPE.XHR},t._getExtension=function(){var t,e,r=this.url;return(this.isDataUrl?(e=r.indexOf("/"),r.substring(e+1,r.indexOf(";",e))):(t=r.indexOf("?"),e=r.indexOf("#"),e=Math.min(-1<t?t:r.length,-1<e?e:r.length),(r=r.substring(0,e)).substring(r.lastIndexOf(".")+1))).toLowerCase()},t._getMimeFromXhrType=function(t){switch(t){case s.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case s.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case s.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case s.XHR_RESPONSE_TYPE.JSON:return"application/json";case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},ift(s,[{key:"isDataUrl",get:function(){return this._hasFlag(s.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(s.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(s.STATUS_FLAGS.LOADING)}}]),s}();function hft(t,e,r){(e=e&&0===e.indexOf(".")?e.substring(1):e)&&(t[e]=r)}function uft(t){return t.toString().replace("object ","")}aft.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},aft.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},aft.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},aft.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},aft._loadTypeMap={gif:aft.LOAD_TYPE.IMAGE,png:aft.LOAD_TYPE.IMAGE,bmp:aft.LOAD_TYPE.IMAGE,jpg:aft.LOAD_TYPE.IMAGE,jpeg:aft.LOAD_TYPE.IMAGE,tif:aft.LOAD_TYPE.IMAGE,tiff:aft.LOAD_TYPE.IMAGE,webp:aft.LOAD_TYPE.IMAGE,tga:aft.LOAD_TYPE.IMAGE,svg:aft.LOAD_TYPE.IMAGE,"svg+xml":aft.LOAD_TYPE.IMAGE,mp3:aft.LOAD_TYPE.AUDIO,ogg:aft.LOAD_TYPE.AUDIO,wav:aft.LOAD_TYPE.AUDIO,mp4:aft.LOAD_TYPE.VIDEO,webm:aft.LOAD_TYPE.VIDEO},aft._xhrTypeMap={xhtml:aft.XHR_RESPONSE_TYPE.DOCUMENT,html:aft.XHR_RESPONSE_TYPE.DOCUMENT,htm:aft.XHR_RESPONSE_TYPE.DOCUMENT,xml:aft.XHR_RESPONSE_TYPE.DOCUMENT,tmx:aft.XHR_RESPONSE_TYPE.DOCUMENT,svg:aft.XHR_RESPONSE_TYPE.DOCUMENT,tsx:aft.XHR_RESPONSE_TYPE.DOCUMENT,gif:aft.XHR_RESPONSE_TYPE.BLOB,png:aft.XHR_RESPONSE_TYPE.BLOB,bmp:aft.XHR_RESPONSE_TYPE.BLOB,jpg:aft.XHR_RESPONSE_TYPE.BLOB,jpeg:aft.XHR_RESPONSE_TYPE.BLOB,tif:aft.XHR_RESPONSE_TYPE.BLOB,tiff:aft.XHR_RESPONSE_TYPE.BLOB,webp:aft.XHR_RESPONSE_TYPE.BLOB,tga:aft.XHR_RESPONSE_TYPE.BLOB,json:aft.XHR_RESPONSE_TYPE.JSON,text:aft.XHR_RESPONSE_TYPE.TEXT,txt:aft.XHR_RESPONSE_TYPE.TEXT,ttf:aft.XHR_RESPONSE_TYPE.BUFFER,otf:aft.XHR_RESPONSE_TYPE.BUFFER},aft.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var lft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var cft=window.URL||window.webkitURL;var vnt={caching:function(t,e){var r=this;eft[t.url]?(t.data=eft[t.url],t.complete()):t.onComplete.once(function(){return eft[r.url]=r.data}),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===aft.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=cft.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=aft.TYPE.IMAGE,void(t.data.onload=function(){cft.revokeObjectURL(r),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],n=[0,0,0,0],s=0;s<i.length;++s)r<t.length?i[s]=255&t.charCodeAt(r++):i[s]=0;switch(n[0]=i[0]>>2,n[1]=(3&i[0])<<4|i[1]>>4,n[2]=(15&i[1])<<2|i[2]>>6,n[3]=63&i[2],r-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var o=0;o<n.length;++o)e+=lft.charAt(n[o])}return e}(t.xhr.responseText),t.type=aft.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},dft=/(#[\w-]+)?$/,fft=function(){function s(t,e){var r=this;void 0===e&&(e=10),this.baseUrl=t=void 0===t?"":t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=tft(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new us.a,this.onError=new us.a,this.onLoad=new us.a,this.onStart=new us.a,this.onComplete=new us.a;for(var i=0;i<s._defaultBeforeMiddleware.length;++i)this.pre(s._defaultBeforeMiddleware[i]);for(var n=0;n<s._defaultAfterMiddleware.length;++n)this.use(s._defaultAfterMiddleware[n])}var t=s.prototype;return t.add=function(t,e,r,i){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(i=e||t.callback||t.onComplete,e=(r=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(i=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new aft(t,e,r),"function"==typeof i&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var s=r.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var h=s.progressChunk*(o.length+1)/(o.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var u=0;u<o.length;++u)o[u].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},t.pre=function(t){return this._beforeMiddleware.push(t),this},t.use=function(t){return this._afterMiddleware.push(t),this},t.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){t=this.resources[t];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},t.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(t){var e=hs()(t,{strictMode:!0});return e=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString&&(t=dft.exec(e)[0],-1!==(e=e.substr(0,e.length-t.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=t),e},t._loadResource=function(r,t){var i=this;r._dequeue=t,$dt(this._beforeMiddleware,function(t,e){t.call(i,r,function(){e(r.isComplete?{}:null)})},function(){r.isComplete?i._onLoad(r):(r._onLoadBinding=r.onComplete.once(i._onLoad,i),r.load())},!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(r){var i=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),$dt(this._afterMiddleware,function(t,e){t.call(i,r,e)},function(){r.onAfterMiddleware.dispatch(r),i.progress=Math.min(100,i.progress+r.progressChunk),i.onProgress.dispatch(i,r),r.error?i.onError.dispatch(r.error,i,r):i.onLoad.dispatch(i,r),i._resourcesParsing.splice(i._resourcesParsing.indexOf(r),1),i._queue.idle()&&0===i._resourcesParsing.length&&i._onComplete()},!0)},ift(s,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),s}();fft._defaultBeforeMiddleware=[],fft._defaultAfterMiddleware=[],fft.pre=function(t){return fft._defaultBeforeMiddleware.push(t),fft},fft.use=function(t){return fft._defaultAfterMiddleware.push(t),fft};var pft=function(t,e){return(pft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};_ft.add=function(){aft.setExtensionLoadType("svg",aft.LOAD_TYPE.XHR),aft.setExtensionXhrType("svg",aft.XHR_RESPONSE_TYPE.TEXT)},_ft.use=function(e,r){var t,i,n,s;!e.data||e.type!==aft.TYPE.IMAGE&&"svg"!==e.extension?r():(t=e.data,i=e.url,n=e.name,s=e.metadata,Kut.fromLoader(t,i,n,s).then(function(t){e.texture=t,r()}).catch(r))},Rnt=_ft;function _ft(){}var yft,mft,vft,xft=(pft(mft=Eft,vft=yft=fft),mft.prototype=null===vft?Object.create(vft):(gft.prototype=vft.prototype,new gft),Eft.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(Eft,"shared",{get:function(){var t=Eft._shared;return t||((t=new Eft)._protected=!0,Eft._shared=t),t},enumerable:!1,configurable:!0}),Eft.registerPlugin=function(t){return Eft._plugins.push(t),t.add&&t.add(),Eft},Eft._plugins=[],Eft);function gft(){this.constructor=mft}function Eft(t,e){for(var r=yft.call(this,t,e)||this,i=0;i<Eft._plugins.length;++i){var n=Eft._plugins[i],s=n.pre,n=n.use;s&&r.pre(s),n&&r.use(n)}return r._protected=!1,r}xft.registerPlugin({use:vnt.parsing}),xft.registerPlugin(Rnt);Tft.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?xft.shared:new xft},Tft.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)};function Tft(){}var bft=aft,Aft=function(t,e){return(Aft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Sft=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},vnt=(Ift.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},Ift.parse=function(t){var e,r=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(e in r){var n,s=r[e].match(/^[a-z]+/gm)[0],o=r[e].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(n in o){var h=o[n].split("="),u=h[0],l=h[1].replace(/"/gm,""),h=parseFloat(l),h=isNaN(h)?l:h;a[u]=h}i[s].push(a)}var c=new Sft;return i.info.forEach(function(t){return c.info.push({face:t.face,size:parseInt(t.size,10)})}),i.common.forEach(function(t){return c.common.push({lineHeight:parseInt(t.lineHeight,10)})}),i.page.forEach(function(t){return c.page.push({id:parseInt(t.id,10),file:t.file})}),i.char.forEach(function(t){return c.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})}),i.kerning.forEach(function(t){return c.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})}),c},Ift);function Ift(){}var Rft=(Oft.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},Oft.parse=function(t){for(var e=new Sft,r=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),a=0;a<r.length;a++)e.info.push({face:r[a].getAttribute("face"),size:parseInt(r[a].getAttribute("size"),10)});for(a=0;a<i.length;a++)e.common.push({lineHeight:parseInt(i[a].getAttribute("lineHeight"),10)});for(a=0;a<n.length;a++)e.page.push({id:parseInt(n[a].getAttribute("id"),10)||0,file:n[a].getAttribute("file")});for(a=0;a<s.length;a++){var h=s[a];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(a=0;a<o.length;a++)e.kerning.push({first:parseInt(o[a].getAttribute("first"),10),second:parseInt(o[a].getAttribute("second"),10),amount:parseInt(o[a].getAttribute("amount"),10)});return e},Oft);function Oft(){}wft.test=function(t){if("string"==typeof t&&-1<t.indexOf("<font>")){t=(new self.DOMParser).parseFromString(t,"text/xml");return Rft.test(t)}return!1},wft.parse=function(t){t=(new self.DOMParser).parseFromString(t,"text/xml");return Rft.parse(t)},Rnt=wft;function wft(){}var Cft=[vnt,Rft,Rnt];function Pft(t){for(var e=0;e<Cft.length;e++)if(Cft[e].test(t))return Cft[e];return null}function Nft(t,e,r,i,n,s){var o=r.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];var a=r.dropShadow?r.dropShadowDistance:0,h=r.padding||0,u=Math.ceil(t.width/i)-a-2*h,l=Math.ceil(t.height/i)-a-2*h,c=o.slice(),d=r.fillGradientStops.slice();if(!d.length)for(var f=c.length+1,p=1;p<f;++p)d.push(p/f);if(c.unshift(o[0]),d.unshift(0),c.push(o[o.length-1]),d.push(1),r.fillGradientType===cZ.LINEAR_VERTICAL)for(var _=e.createLinearGradient(u/2,h,u/2,l+h),y=0,m=(s.fontProperties.fontSize+r.strokeThickness)/l,p=0;p<n.length;p++)for(var v=s.lineHeight*p,x=0;x<c.length;x++){var g=0,g="number"==typeof d[x]?d[x]:x/c.length,g=Math.max(y,v/l+g*m),g=Math.min(g,1);_.addColorStop(g,c[x]),y=g}else{_=e.createLinearGradient(h,l/2,u+h,l/2);for(var E=c.length+1,T=1,p=0;p<c.length;p++){var b=void 0,b="number"==typeof d[p]?d[p]:T/E;_.addColorStop(b,c[p]),T++}}return _}function Mft(t,e,r,i,n,s,o){var a=r.text,h=r.fontProperties;e.translate(i,n),e.scale(s,s);i=o.strokeThickness/2,n=-o.strokeThickness/2;e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=Nft(t,e,o,s,[a],r),e.strokeStyle=o.stroke,e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=Nft(t,e,o,s,[a],r),e.strokeStyle=o.stroke;var u,s=o.dropShadowColor,u=Nht("number"==typeof s?s:("string"==typeof(u=s)&&"#"===(u=Pht[u.toLowerCase()]||u)[0]&&(u=u.substr(1)),parseInt(u,16)));o.dropShadow?(e.shadowColor="rgba("+255*u[0]+","+255*u[1]+","+255*u[2]+","+o.dropShadowAlpha+")",e.shadowBlur=o.dropShadowBlur,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*o.dropShadowDistance,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*o.dropShadowDistance):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),o.stroke&&o.strokeThickness&&e.strokeText(a,i,n+r.lineHeight-h.descent),o.fill&&e.fillText(a,i,n+r.lineHeight-h.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}var Lft=(Dft.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},Dft.install=function(t,e,r){var i;if(t instanceof Sft)i=t;else{var n=Pft(t);if(!n)throw new Error("Unrecognized data format for font.");i=n.parse(t)}r=new Dft(i,e=e instanceof Kut?[e]:e,r);return Dft.available[r.font]=r},Dft.uninstall=function(t){var e=Dft.available[t];if(!e)throw new Error("No font found named '"+t+"'");e.destroy(),delete Dft.available[t]},Dft.from=function(t,e,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},Dft.defaultOptions,r),r=i.chars,n=i.padding,s=i.resolution,o=i.textureWidth,a=i.textureHeight,h=function(t){for(var e=[],r=0,i=(t="string"==typeof t?[t]:t).length;r<i;r++){var n=t[r];if(Array.isArray(n)){if(2!==n.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(var a=s,h=o;a<=h;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,n.split(""))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(r),u=e instanceof _Z?e:new _Z(e),l=o,c=new Sft;c.info[0]={face:u.fontFamily,size:u.fontSize},c.common[0]={lineHeight:u.fontSize};for(var d,f,p,_=0,y=0,m=0,v=[],x=0;x<h.length;x++){d||((d=document.createElement("canvas")).width=o,d.height=a,f=d.getContext("2d"),p=new dut(d,{resolution:s}),v.push(new Kut(p)),c.page.push({id:v.length-1,file:""}));var g=gZ.measureText(h[x],u,!1,d),E=g.width,T=Math.ceil(g.height),b=Math.ceil(("italic"===u.fontStyle?2:1)*E);if(a-T*s<=y){if(0===y)throw new Error("[BitmapFont] textureHeight "+a+"px is too small for "+u.fontSize+"px fonts");--x,p=f=d=null,m=_=y=0}else{m=Math.max(T+g.fontProperties.descent,m);l<=b*s+_?(--x,y+=m*s,y=Math.ceil(y),m=_=0):(Mft(d,f,g,_,y,s,u),g=g.text.charCodeAt(0),c.char.push({id:g,page:v.length-1,x:_/s,y:y/s,width:b,height:T,xoffset:0,yoffset:0,xadvance:Math.ceil(E-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0))}),_+=(b+2*n)*s,_=Math.ceil(_))}}for(var x=0,A=h.length;x<A;x++)for(var S=h[x],I=0;I<A;I++){var R=h[I],O=f.measureText(S).width,w=f.measureText(R).width,w=f.measureText(S+R).width-(O+w);w&&c.kerning.push({first:S.charCodeAt(0),second:R.charCodeAt(0),amount:w})}e=new Dft(c,v,!0);return void 0!==Dft.available[t]&&Dft.uninstall(t),Dft.available[t]=e},Dft.ALPHA=[["a","z"],["A","Z"]," "],Dft.NUMERIC=[["0","9"]],Dft.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Dft.ASCII=[[" ","~"]],Dft.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Dft.ALPHANUMERIC},Dft.available={},Dft);function Dft(t,e,r){var i=t.info[0],n=t.common[0],s=zht(t.page[0].file),o={};this._ownsTextures=r,this.font=i.face,this.size=i.size,this.lineHeight=n.lineHeight/s,this.chars={},this.pageTextures=o;for(var a=0;a<t.page.length;a++){var h=t.page[a],u=h.id,h=h.file;o[u]=e instanceof Array?e[a]:e[h]}for(a=0;a<t.char.length;a++){var l=t.char[a],u=l.id,c=l.page,d=t.char[a],f=d.x,p=d.y,_=d.width,y=d.height,m=d.xoffset,l=d.yoffset,d=d.xadvance;p/=s,_/=s,y/=s,m/=s,l/=s,d/=s;y=new _et((f/=s)+o[c].frame.x/s,p+o[c].frame.y/s,_,y);this.chars[u]={xOffset:m,yOffset:l,xAdvance:d,kerning:{},texture:new Kut(o[c].baseTexture,y),page:c}}for(a=0;a<t.kerning.length;a++){var v=t.kerning[a],x=v.first,g=v.second,v=v.amount;x/=s,g/=s,v/=s,this.chars[g]&&(this.chars[g].kerning[x]=v)}}var Uft,Fft,Bft,kft=[],Gft=[];Aft(Fft=Hft,Bft=Uft=qdt),Fft.prototype=null===Bft?Object.create(Bft):(Xft.prototype=Bft.prototype,new Xft),Hft.prototype.updateText=function(){for(var t=Lft.available[this._fontName],e=this._fontSize/t.size,r=new Eet,i=[],n=[],s=[],o=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",a=o.length,h=this._maxWidth*t.size/this._fontSize,u=null,l=0,c=0,d=0,f=-1,p=0,_=0,y=0,m=0,v=0;v<a;v++){var x,g,E=o.charCodeAt(v),T=o.charAt(v);/(?:\s)/.test(T)&&(f=v,p=l,m++),"\r"!==T&&"\n"!==T?(x=t.chars[E])&&(u&&x.kerning[u]&&(r.x+=x.kerning[u]),(g=Gft.pop()||{texture:Kut.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Eet}).texture=x.texture,g.line=d,g.charCode=E,g.position.x=r.x+x.xOffset+this._letterSpacing/2,g.position.y=r.y+x.yOffset,g.prevSpaces=m,i.push(g),r.x+=x.xAdvance+this._letterSpacing,l=r.x,y=Math.max(y,x.yOffset+x.texture.height),u=E,-1!==f&&0<h&&r.x>h&&(Fht(i,1+f-++_,1+v-f),v=f,f=-1,n.push(p),s.push(0<i.length?i[i.length-1].prevSpaces:0),c=Math.max(c,p),d++,r.x=0,r.y+=t.lineHeight,u=null,m=0)):(n.push(l),s.push(-1),c=Math.max(c,l),++d,++_,r.x=0,r.y+=t.lineHeight,u=null,m=0)}var b=o.charAt(o.length-1);"\r"!==b&&"\n"!==b&&(/(?:\s)/.test(b)&&(l=p),n.push(l),c=Math.max(c,l),s.push(-1));for(var A=[],v=0;v<=d;v++){var S=0;"right"===this._align?S=c-n[v]:"center"===this._align?S=(c-n[v])/2:"justify"===this._align&&(S=s[v]<0?0:(c-n[v])/s[v]),A.push(S)}for(var I=i.length,R={},O=[],w=this._activePagesMeshData,v=0;v<w.length;v++)kft.push(w[v]);for(v=0;v<I;v++){var C,P,N=(F=i[v].texture).baseTexture.uid;R[N]||((j=kft.pop())||(C=new aht,P=new nht(Kut.EMPTY),j={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new eht(C,P),vertices:null,uvs:null,indices:null}),j.index=0,j.indexCount=0,j.vertexCount=0,j.uvsCount=0,j.total=0,(P=this._textureCache)[N]=P[N]||new Kut(F.baseTexture),j.mesh.texture=P[N],j.mesh.tint=this._tint,O.push(j),R[N]=j),R[N].total++}for(v=0;v<w.length;v++)-1===O.indexOf(w[v])&&this.removeChild(w[v].mesh);for(v=0;v<O.length;v++)O[v].mesh.parent!==this&&this.addChild(O[v].mesh);for(v in this._activePagesMeshData=O,R){var M=(j=R[v]).total;if(!((null===(L=j.indices)||void 0===L?void 0:L.length)>6*M)||j.vertices.length<2*eht.BATCHABLE_SIZE)j.vertices=new Float32Array(8*M),j.uvs=new Float32Array(8*M),j.indices=new Uint16Array(6*M);else for(var L=j.total,D=j.vertices,U=4*L*2;U<D.length;U++)D[U]=0;j.mesh.size=6*M}for(v=0;v<I;v++){var F,B=(T=i[v]).position.x+A[T.line]*("justify"===this._align?T.prevSpaces:1),k=(B=this._roundPixels?Math.round(B):B)*e,G=T.position.y*e,X=R[(F=T.texture).baseTexture.uid],H=F.frame,V=F._uvs,B=X.index++;X.indices[6*B+0]=0+4*B,X.indices[6*B+1]=1+4*B,X.indices[6*B+2]=2+4*B,X.indices[6*B+3]=0+4*B,X.indices[6*B+4]=2+4*B,X.indices[6*B+5]=3+4*B,X.vertices[8*B+0]=k,X.vertices[8*B+1]=G,X.vertices[8*B+2]=k+H.width*e,X.vertices[8*B+3]=G,X.vertices[8*B+4]=k+H.width*e,X.vertices[8*B+5]=G+H.height*e,X.vertices[8*B+6]=k,X.vertices[8*B+7]=G+H.height*e,X.uvs[8*B+0]=V.x0,X.uvs[8*B+1]=V.y0,X.uvs[8*B+2]=V.x1,X.uvs[8*B+3]=V.y1,X.uvs[8*B+4]=V.x2,X.uvs[8*B+5]=V.y2,X.uvs[8*B+6]=V.x3,X.uvs[8*B+7]=V.y3}for(v in this._textWidth=c*e,this._textHeight=(r.y+t.lineHeight)*e,R){var j=R[v];if(0!==this.anchor.x||0!==this.anchor.y)for(var Y=0,z=this._textWidth*this.anchor.x,W=this._textHeight*this.anchor.y,Z=0;Z<j.total;Z++)j.vertices[Y++]-=z,j.vertices[Y++]-=W,j.vertices[Y++]-=z,j.vertices[Y++]-=W,j.vertices[Y++]-=z,j.vertices[Y++]-=W,j.vertices[Y++]-=z,j.vertices[Y++]-=W;this._maxLineHeight=y*e;var K=j.mesh.geometry.getBuffer("aVertexPosition"),q=j.mesh.geometry.getBuffer("aTextureCoord"),J=j.mesh.geometry.getIndex();K.data=j.vertices,q.data=j.uvs,J.data=j.indices,K.update(),q.update(),J.update()}for(v=0;v<i.length;v++)Gft.push(i[v])},Hft.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},Hft.prototype.getLocalBounds=function(){return this.validate(),Uft.prototype.getLocalBounds.call(this)},Hft.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(Hft.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(Hft.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Hft.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Lft.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Hft.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Hft.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Hft.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Hft.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Hft.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(Hft.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(Hft.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Hft.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Hft.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Hft.prototype.destroy=function(t){var e,r=this._textureCache;for(e in r)r[e].destroy(),delete r[e];this._textureCache=null,Uft.prototype.destroy.call(this,t)},Hft.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};function Xft(){this.constructor=Fft}function Hft(t,e){void 0===e&&(e={});var r=Uft.call(this)||this;r._tint=16777215;var i=Object.assign({},Hft.styleDefaults,e),n=i.align,s=i.tint,o=i.maxWidth,a=i.letterSpacing,e=i.fontName,i=i.fontSize;if(!Lft.available[e])throw new Error('Missing BitmapFont "'+e+'"');return r._activePagesMeshData=[],r._textWidth=0,r._textHeight=0,r._align=n,r._tint=s,r._fontName=e,r._fontSize=i||Lft.available[e].size,r._text=t,r._maxWidth=o,r._maxLineHeight=0,r._letterSpacing=a,r._anchor=new bet(function(){r.dirty=!0},r,0,0),r._roundPixels=art.ROUND_PIXELS,r.dirty=!0,r._textureCache={},r}Vft.add=function(){bft.setExtensionXhrType("fnt",bft.XHR_RESPONSE_TYPE.TEXT)},Vft.use=function(e,r){var t=Pft(e.data);if(t)for(var i=Vft.getBaseUrl(this,e),n=t.parse(e.data),s={},o=function(t){s[t.metadata.pageFile]=t.texture,Object.keys(s).length===n.page.length&&(e.bitmapFont=Lft.install(n,s,!0),r())},a=0;a<n.page.length;++a){var h,u,l=n.page[a].file,c=i+l,d=!1;for(h in this.resources){var f=this.resources[h];if(f.url===c){f.metadata.pageFile=l,f.texture?o(f):f.onAfterMiddleware.add(o),d=!0;break}}d||(u={crossOrigin:e.crossOrigin,loadType:bft.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e},this.add(c,u,o))}else r()},Vft.getBaseUrl=function(t,e){var r=e.isDataUrl?"":Vft.dirname(e.url);return e.isDataUrl&&("."===r&&(r=""),t.baseUrl&&r&&"/"===t.baseUrl.charAt(t.baseUrl.length-1)&&(r+="/")),(r=r.replace(t.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},Vft.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},vnt=Vft;function Vft(){}function jft(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var Yft=/iPhone/i,zft=/iPod/i,Wft=/iPad/i,Zft=/\biOS-universal(?:.+)Mac\b/i,Kft=/\bAndroid(?:.+)Mobile\b/i,qft=/Android/i,Jft=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Qft=/Silk/i,$ft=/Windows Phone/i,tpt=/\bWindows(?:.+)ARM\b/i,ept=/BlackBerry/i,rpt=/BB10/i,ipt=/Opera Mini/i,npt=/\b(CriOS|Chrome)(?:.+)Mobile/i,spt=/Mobile(?:.+)Firefox\b/i;var opt=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(Yft)&&!i($ft),ipod:i(zft),tablet:!i(Yft)&&(i(Wft)||jft(e))&&!i($ft),universal:i(Zft),device:(i(Yft)||i(zft)||i(Wft)||i(Zft)||jft(e))&&!i($ft)},amazon:{phone:i(Jft),tablet:!i(Jft)&&i(Qft),device:i(Jft)||i(Qft)},android:{phone:!i($ft)&&i(Jft)||!i($ft)&&i(Kft),tablet:!i($ft)&&!i(Jft)&&!i(Kft)&&(i(Qft)||i(qft)),device:!i($ft)&&(i(Jft)||i(Qft)||i(Kft)||i(qft))||i(/\bokhttp\b/i)},windows:{phone:i($ft),tablet:i(tpt),device:i($ft)||i(tpt)},other:{blackberry:i(ept),blackberry10:i(rpt),opera:i(ipt),firefox:i(spt),chrome:i(npt),device:i(ept)||i(rpt)||i(ipt)||i(spt)||i(npt)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(Rnt={})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(Rnt={})[Rnt.UNKNOWN=0]="UNKNOWN",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.CANVAS=2]="CANVAS",(Rnt={})[Rnt.COLOR=16384]="COLOR",Rnt[Rnt.DEPTH=256]="DEPTH",Rnt[Rnt.STENCIL=1024]="STENCIL",(Rnt={})[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.ADD=1]="ADD",Rnt[Rnt.MULTIPLY=2]="MULTIPLY",Rnt[Rnt.SCREEN=3]="SCREEN",Rnt[Rnt.OVERLAY=4]="OVERLAY",Rnt[Rnt.DARKEN=5]="DARKEN",Rnt[Rnt.LIGHTEN=6]="LIGHTEN",Rnt[Rnt.COLOR_DODGE=7]="COLOR_DODGE",Rnt[Rnt.COLOR_BURN=8]="COLOR_BURN",Rnt[Rnt.HARD_LIGHT=9]="HARD_LIGHT",Rnt[Rnt.SOFT_LIGHT=10]="SOFT_LIGHT",Rnt[Rnt.DIFFERENCE=11]="DIFFERENCE",Rnt[Rnt.EXCLUSION=12]="EXCLUSION",Rnt[Rnt.HUE=13]="HUE",Rnt[Rnt.SATURATION=14]="SATURATION",Rnt[Rnt.COLOR=15]="COLOR",Rnt[Rnt.LUMINOSITY=16]="LUMINOSITY",Rnt[Rnt.NORMAL_NPM=17]="NORMAL_NPM",Rnt[Rnt.ADD_NPM=18]="ADD_NPM",Rnt[Rnt.SCREEN_NPM=19]="SCREEN_NPM",Rnt[Rnt.NONE=20]="NONE",Rnt[Rnt.SRC_OVER=0]="SRC_OVER",Rnt[Rnt.SRC_IN=21]="SRC_IN",Rnt[Rnt.SRC_OUT=22]="SRC_OUT",Rnt[Rnt.SRC_ATOP=23]="SRC_ATOP",Rnt[Rnt.DST_OVER=24]="DST_OVER",Rnt[Rnt.DST_IN=25]="DST_IN",Rnt[Rnt.DST_OUT=26]="DST_OUT",Rnt[Rnt.DST_ATOP=27]="DST_ATOP",Rnt[Rnt.ERASE=26]="ERASE",Rnt[Rnt.SUBTRACT=28]="SUBTRACT",Rnt[Rnt.XOR=29]="XOR",(Rnt={})[Rnt.POINTS=0]="POINTS",Rnt[Rnt.LINES=1]="LINES",Rnt[Rnt.LINE_LOOP=2]="LINE_LOOP",Rnt[Rnt.LINE_STRIP=3]="LINE_STRIP",Rnt[Rnt.TRIANGLES=4]="TRIANGLES",Rnt[Rnt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Rnt[Rnt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(Rnt={})[Rnt.RGBA=6408]="RGBA",Rnt[Rnt.RGB=6407]="RGB",Rnt[Rnt.ALPHA=6406]="ALPHA",Rnt[Rnt.LUMINANCE=6409]="LUMINANCE",Rnt[Rnt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Rnt[Rnt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Rnt[Rnt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt={})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(Rnt={})[Rnt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Rnt[Rnt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Rnt[Rnt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Rnt[Rnt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Rnt[Rnt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Rnt[Rnt.FLOAT=5126]="FLOAT",Rnt[Rnt.HALF_FLOAT=36193]="HALF_FLOAT",(Rnt={})[Rnt.FLOAT=0]="FLOAT",Rnt[Rnt.INT=1]="INT",Rnt[Rnt.UINT=2]="UINT",(Rnt=K_t=K_t||{})[Rnt.NEAREST=0]="NEAREST",Rnt[Rnt.LINEAR=1]="LINEAR",(Rnt=G_t=G_t||{})[Rnt.CLAMP=33071]="CLAMP",Rnt[Rnt.REPEAT=10497]="REPEAT",Rnt[Rnt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(Rnt=oyt=oyt||{})[Rnt.OFF=0]="OFF",Rnt[Rnt.POW2=1]="POW2",Rnt[Rnt.ON=2]="ON",Rnt[Rnt.ON_MANUAL=3]="ON_MANUAL",(Rnt={})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Rnt={})[Rnt.NO=0]="NO",Rnt[Rnt.YES=1]="YES",Rnt[Rnt.AUTO=2]="AUTO",Rnt[Rnt.BLEND=0]="BLEND",Rnt[Rnt.CLEAR=1]="CLEAR",Rnt[Rnt.BLIT=2]="BLIT",(Rnt=F_t=F_t||{})[Rnt.AUTO=0]="AUTO",Rnt[Rnt.MANUAL=1]="MANUAL",(Rnt=eyt=eyt||{}).LOW="lowp",Rnt.MEDIUM="mediump",Rnt.HIGH="highp",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.SCISSOR=1]="SCISSOR",Rnt[Rnt.STENCIL=2]="STENCIL",Rnt[Rnt.SPRITE=3]="SPRITE",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.LOW=2]="LOW",Rnt[Rnt.MEDIUM=4]="MEDIUM",Rnt[Rnt.HIGH=8]="HIGH";var apt,hpt,upt,lpt,cpt,dpt,fpt,ppt,_pt,ypt,mpt,vpt,xpt,gpt,Ept,Tpt,bpt,Apt,Spt,Ipt,Rpt,Opt={MIPMAP_TEXTURES:oyt.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(apt=32,upt=!0,(opt.tablet||opt.phone)&&(opt.apple.device&&(hpt=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(hpt[1],10)<11&&(upt=!1),opt.android.device&&(hpt=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(hpt[1],10)<7&&(upt=!1)),upt?apt:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:F_t.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:G_t.CLAMP,SCALE_MODE:K_t.LINEAR,PRECISION_VERTEX:eyt.HIGH,PRECISION_FRAGMENT:opt.apple.device?eyt.HIGH:eyt.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!opt.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};(Rnt=lpt=lpt||{})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(oyt=cpt=cpt||{})[oyt.UNKNOWN=0]="UNKNOWN",oyt[oyt.WEBGL=1]="WEBGL",oyt[oyt.CANVAS=2]="CANVAS",(F_t=dpt=dpt||{})[F_t.COLOR=16384]="COLOR",F_t[F_t.DEPTH=256]="DEPTH",F_t[F_t.STENCIL=1024]="STENCIL",(G_t=fpt=fpt||{})[G_t.NORMAL=0]="NORMAL",G_t[G_t.ADD=1]="ADD",G_t[G_t.MULTIPLY=2]="MULTIPLY",G_t[G_t.SCREEN=3]="SCREEN",G_t[G_t.OVERLAY=4]="OVERLAY",G_t[G_t.DARKEN=5]="DARKEN",G_t[G_t.LIGHTEN=6]="LIGHTEN",G_t[G_t.COLOR_DODGE=7]="COLOR_DODGE",G_t[G_t.COLOR_BURN=8]="COLOR_BURN",G_t[G_t.HARD_LIGHT=9]="HARD_LIGHT",G_t[G_t.SOFT_LIGHT=10]="SOFT_LIGHT",G_t[G_t.DIFFERENCE=11]="DIFFERENCE",G_t[G_t.EXCLUSION=12]="EXCLUSION",G_t[G_t.HUE=13]="HUE",G_t[G_t.SATURATION=14]="SATURATION",G_t[G_t.COLOR=15]="COLOR",G_t[G_t.LUMINOSITY=16]="LUMINOSITY",G_t[G_t.NORMAL_NPM=17]="NORMAL_NPM",G_t[G_t.ADD_NPM=18]="ADD_NPM",G_t[G_t.SCREEN_NPM=19]="SCREEN_NPM",G_t[G_t.NONE=20]="NONE",G_t[G_t.SRC_OVER=0]="SRC_OVER",G_t[G_t.SRC_IN=21]="SRC_IN",G_t[G_t.SRC_OUT=22]="SRC_OUT",G_t[G_t.SRC_ATOP=23]="SRC_ATOP",G_t[G_t.DST_OVER=24]="DST_OVER",G_t[G_t.DST_IN=25]="DST_IN",G_t[G_t.DST_OUT=26]="DST_OUT",G_t[G_t.DST_ATOP=27]="DST_ATOP",G_t[G_t.ERASE=26]="ERASE",G_t[G_t.SUBTRACT=28]="SUBTRACT",G_t[G_t.XOR=29]="XOR",(K_t=ppt=ppt||{})[K_t.POINTS=0]="POINTS",K_t[K_t.LINES=1]="LINES",K_t[K_t.LINE_LOOP=2]="LINE_LOOP",K_t[K_t.LINE_STRIP=3]="LINE_STRIP",K_t[K_t.TRIANGLES=4]="TRIANGLES",K_t[K_t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",K_t[K_t.TRIANGLE_FAN=6]="TRIANGLE_FAN",(eyt=_pt=_pt||{})[eyt.RGBA=6408]="RGBA",eyt[eyt.RGB=6407]="RGB",eyt[eyt.ALPHA=6406]="ALPHA",eyt[eyt.LUMINANCE=6409]="LUMINANCE",eyt[eyt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",eyt[eyt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",eyt[eyt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt=ypt=ypt||{})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(oyt=mpt=mpt||{})[oyt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",oyt[oyt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",oyt[oyt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",oyt[oyt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",oyt[oyt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",oyt[oyt.FLOAT=5126]="FLOAT",oyt[oyt.HALF_FLOAT=36193]="HALF_FLOAT",(F_t=vpt=vpt||{})[F_t.FLOAT=0]="FLOAT",F_t[F_t.INT=1]="INT",F_t[F_t.UINT=2]="UINT",(G_t=xpt=xpt||{})[G_t.NEAREST=0]="NEAREST",G_t[G_t.LINEAR=1]="LINEAR",(K_t=gpt=gpt||{})[K_t.CLAMP=33071]="CLAMP",K_t[K_t.REPEAT=10497]="REPEAT",K_t[K_t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(eyt=Ept=Ept||{})[eyt.OFF=0]="OFF",eyt[eyt.POW2=1]="POW2",eyt[eyt.ON=2]="ON",eyt[eyt.ON_MANUAL=3]="ON_MANUAL",(Rnt=Tpt=Tpt||{})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(oyt=bpt=bpt||{})[oyt.NO=0]="NO",oyt[oyt.YES=1]="YES",oyt[oyt.AUTO=2]="AUTO",oyt[oyt.BLEND=0]="BLEND",oyt[oyt.CLEAR=1]="CLEAR",oyt[oyt.BLIT=2]="BLIT",(F_t=Apt=Apt||{})[F_t.AUTO=0]="AUTO",F_t[F_t.MANUAL=1]="MANUAL",(G_t=Spt=Spt||{}).LOW="lowp",G_t.MEDIUM="mediump",G_t.HIGH="highp",(K_t=Ipt=Ipt||{})[K_t.NONE=0]="NONE",K_t[K_t.SCISSOR=1]="SCISSOR",K_t[K_t.STENCIL=2]="STENCIL",K_t[K_t.SPRITE=3]="SPRITE",(eyt=Rpt=Rpt||{})[eyt.NONE=0]="NONE",eyt[eyt.LOW=2]="LOW",eyt[eyt.MEDIUM=4]="MEDIUM",eyt[eyt.HIGH=8]="HIGH";r(19);var wpt={parse:_t.parse,format:_t.format,resolve:_t.resolve};Opt.RETINA_PREFIX=/@([0-9\.]+)x/;var Cpt,Ppt=Opt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,Npt="6.0.4";var Mpt=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[fpt.NORMAL_NPM]=fpt.NORMAL,t[fpt.ADD_NPM]=fpt.ADD,t[fpt.SCREEN_NPM]=fpt.SCREEN,e[fpt.NORMAL]=fpt.NORMAL_NPM,e[fpt.ADD]=fpt.ADD_NPM,e[fpt.SCREEN]=fpt.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function Lpt(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function Dpt(t){return!(t&t-1||!t)}function Upt(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}var Fpt=0;var Bpt={};function kpt(t,e,r){var i;void 0===r&&(r=3),Bpt[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),Bpt[e]=!0)}var Gpt={},Xpt=Object.create(null),Hpt=Object.create(null);Vpt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},Vpt.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},Vpt.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(Vpt.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Vpt.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function Vpt(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||Opt.RESOLUTION,this.resize(t,e)}var jpt;function Ypt(t,e){t=Opt.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var zpt,Wpt=(Zpt.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},Zpt.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},Zpt.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},Zpt.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},Zpt.prototype.contains=function(t){return-1!==this.items.indexOf(t)},Zpt.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Zpt.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(Zpt.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(Zpt.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Zpt);function Zpt(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(Wpt.prototype,{dispatch:{value:Wpt.prototype.emit},run:{value:Wpt.prototype.emit}}),Opt.TARGET_FPMS=.06,(Rnt=zpt=zpt||{})[Rnt.INTERACTION=50]="INTERACTION",Rnt[Rnt.HIGH=25]="HIGH",Rnt[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.LOW=-25]="LOW",Rnt[Rnt.UTILITY=-50]="UTILITY";var Kpt=(qpt.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},qpt.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},qpt.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},qpt.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},qpt);function qpt(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var Jpt=(Qpt.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Qpt.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Qpt.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Qpt.prototype.add=function(t,e,r){return void 0===r&&(r=zpt.NORMAL),this._addListener(new Kpt(t,e,r))},Qpt.prototype.addOnce=function(t,e,r){return void 0===r&&(r=zpt.NORMAL),this._addListener(new Kpt(t,e,r,!0))},Qpt.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},Qpt.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Qpt.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),Qpt.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Qpt.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Qpt.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},Qpt.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*Opt.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(Qpt.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(Qpt.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,Opt.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(Qpt.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(Qpt,"shared",{get:function(){var t;return Qpt._shared||((t=Qpt._shared=new Qpt).autoStart=!0,t._protected=!0),Qpt._shared},enumerable:!1,configurable:!0}),Object.defineProperty(Qpt,"system",{get:function(){var t;return Qpt._system||((t=Qpt._system=new Qpt).autoStart=!0,t._protected=!0),Qpt._system},enumerable:!1,configurable:!0}),Qpt);function Qpt(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Kpt(null,null,1/0),this.deltaMS=1/Opt.TARGET_FPMS,this.elapsedMS=1/Opt.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}$pt.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,zpt.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Jpt.shared:new Jpt,t.autoStart&&this.start()},$pt.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function $pt(){}var t_t,e_t=2*Math.PI;Math.PI,Math.PI;(oyt=t_t=t_t||{})[oyt.POLY=0]="POLY",oyt[oyt.RECT=1]="RECT",oyt[oyt.CIRC=2]="CIRC",oyt[oyt.ELIP=3]="ELIP",oyt[oyt.RREC=4]="RREC";var r_t=(Object.defineProperty(i_t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i_t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i_t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i_t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i_t,"EMPTY",{get:function(){return new i_t(0,0,0,0)},enumerable:!1,configurable:!0}),i_t.prototype.clone=function(){return new i_t(this.x,this.y,this.width,this.height)},i_t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},i_t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},i_t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},i_t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},i_t.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},i_t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},i_t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},i_t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},i_t);function i_t(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=t_t.RECT}n_t.prototype.clone=function(){return new n_t(this.x,this.y,this.radius)},n_t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},n_t.prototype.getBounds=function(){return new r_t(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},n_t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function n_t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=t_t.CIRC}s_t.prototype.clone=function(){return new s_t(this.x,this.y,this.width,this.height)},s_t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},s_t.prototype.getBounds=function(){return new r_t(this.x-this.width,this.y-this.height,this.width,this.height)},s_t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function s_t(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=t_t.ELIP}o_t.prototype.clone=function(){var t=new o_t(this.points.slice());return t.closeStroke=this.closeStroke,t},o_t.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},o_t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function o_t(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=t_t.POLY,this.closeStroke=!0}a_t.prototype.clone=function(){return new a_t(this.x,this.y,this.width,this.height,this.radius)},a_t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},a_t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function a_t(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=t_t.RREC}var h_t=(u_t.prototype.clone=function(){return new u_t(this.x,this.y)},u_t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},u_t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},u_t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},u_t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},u_t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},u_t);function u_t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var l_t=(c_t.prototype.clone=function(t,e){return new c_t(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},c_t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},c_t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},c_t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},c_t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},c_t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(c_t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(c_t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),c_t);function c_t(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var d_t=(f_t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},f_t.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},f_t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},f_t.prototype.apply=function(t,e){e=e||new h_t;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},f_t.prototype.applyInverse=function(t,e){e=e||new h_t;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},f_t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},f_t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},f_t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},f_t.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},f_t.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},f_t.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},f_t.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(e_t-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},f_t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},f_t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},f_t.prototype.clone=function(){var t=new f_t;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},f_t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},f_t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},f_t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(f_t,"IDENTITY",{get:function(){return new f_t},enumerable:!1,configurable:!0}),Object.defineProperty(f_t,"TEMP_MATRIX",{get:function(){return new f_t},enumerable:!1,configurable:!0}),f_t);function f_t(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var p_t=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],__t=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],y_t=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],m_t=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],v_t=[],x_t=[],g_t=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];v_t.push(e);for(var r=0;r<16;r++)for(var i=g_t(p_t[t]*p_t[r]+y_t[t]*__t[r]),n=g_t(__t[t]*p_t[r]+m_t[t]*__t[r]),s=g_t(p_t[t]*y_t[r]+y_t[t]*m_t[r]),o=g_t(__t[t]*y_t[r]+m_t[t]*m_t[r]),a=0;a<16;a++)if(p_t[a]===i&&__t[a]===n&&y_t[a]===s&&m_t[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new d_t;h.set(p_t[t],__t[t],y_t[t],m_t[t],0,0),x_t.push(h)}}();var E_t={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return p_t[t]},uY:function(t){return __t[t]},vX:function(t){return y_t[t]},vY:function(t){return m_t[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return v_t[t][e]},sub:function(t,e){return v_t[t][E_t.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?E_t.S:E_t.N:2*Math.abs(e)<=Math.abs(t)?0<t?E_t.E:E_t.W:0<e?0<t?E_t.SE:E_t.SW:0<t?E_t.NE:E_t.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=x_t[E_t.inv(e)];e.tx=r,e.ty=i,t.append(e)}};T_t.prototype.onChange=function(){this._localID++},T_t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},T_t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},T_t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},T_t.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},T_t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(T_t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),T_t.IDENTITY=new T_t;function T_t(){this.worldTransform=new d_t,this.localTransform=new d_t,this.position=new l_t(this.onChange,this,0,0),this.scale=new l_t(this.onChange,this,1,1),this.pivot=new l_t(this.onChange,this,0,0),this.skew=new l_t(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}Opt.PREFER_ENV=opt.any?lpt.WEBGL:lpt.WEBGL2,Opt.STRICT_TEXTURE_CACHE=!1;var b_t=[];function A_t(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=b_t.length-1;0<=n;--n){var s=b_t[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var S_t=function(t,e){return(S_t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function I_t(t,e){function r(){this.constructor=t}S_t(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var R_t=(O_t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},O_t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},O_t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(O_t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),O_t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},O_t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(O_t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(O_t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),O_t.prototype.style=function(t,e,r){return!1},O_t.prototype.dispose=function(){},O_t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},O_t.test=function(t,e){return!1},O_t);function O_t(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Wpt("setRealSize"),this.onUpdate=new Wpt("update"),this.onError=new Wpt("onError")}var w_t,C_t=(I_t(P_t,w_t=R_t),P_t.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Tpt.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},P_t.prototype.dispose=function(){this.data=null},P_t.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},P_t);function P_t(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=w_t.call(this,e,i)||this).data=t,r}var N_t,M_t={scaleMode:xpt.NEAREST,format:_pt.RGBA,alphaMode:Tpt.NPM},L_t=(I_t(D_t,N_t=pt.a),Object.defineProperty(D_t.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(D_t.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),D_t.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},D_t.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},D_t.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},D_t.prototype._refreshPOT=function(){this.isPowerOfTwo=Dpt(this.realWidth)&&Dpt(this.realHeight)},D_t.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},D_t.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},D_t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},D_t.prototype.onError=function(t){this.emit("error",this,t)},D_t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Hpt[this.cacheId],delete Xpt[this.cacheId],this.cacheId=null),this.dispose(),D_t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},D_t.prototype.dispose=function(){this.emit("dispose",this)},D_t.prototype.castToBaseTexture=function(){return this},D_t.from=function(t,e,r){void 0===r&&(r=Opt.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++Fpt),t._pixiId),s=Hpt[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new D_t(t,e)).cacheId=n,D_t.addToCache(s,n)),s},D_t.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new C_t(t,{width:e,height:r}),t=t instanceof Float32Array?mpt.FLOAT:mpt.UNSIGNED_BYTE;return new D_t(n,Object.assign(M_t,i||{width:e,height:r,type:t}))},D_t.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Hpt[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),Hpt[e]=t)},D_t.removeFromCache=function(t){if("string"==typeof t){var e=Hpt[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete Hpt[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete Hpt[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},D_t._globalBatch=0,D_t);function D_t(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=N_t.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof R_t||((t=A_t(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||Opt.RESOLUTION,r.mipmap=void 0!==n?n:Opt.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:Opt.ANISOTROPIC_LEVEL,r.wrapMode=u||Opt.WRAP_MODE,r.scaleMode=void 0!==o?o:Opt.SCALE_MODE,r.format=l||_pt.RGBA,r.type=c||mpt.UNSIGNED_BYTE,r.target=d||ypt.TEXTURE_2D,r.alphaMode=void 0!==i?i:Tpt.UNPACK,r.uid=++Fpt,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var U_t,F_t=(I_t(B_t,U_t=R_t),B_t.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof R_t?this.addResourceAt(t[r],r):this.addResourceAt(A_t(t[r],e),r))},B_t.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},B_t.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},B_t.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");U_t.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},B_t.prototype.unbind=function(t){U_t.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},B_t.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},B_t);function B_t(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=U_t.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new L_t;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var k_t,G_t=(I_t(X_t,k_t=F_t),X_t.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},X_t.prototype.bind=function(t){k_t.prototype.bind.call(this,t),t.target=ypt.TEXTURE_2D_ARRAY},X_t.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},X_t);function X_t(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=k_t.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var H_t,V_t=(I_t(j_t,H_t=R_t),j_t.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(jpt=jpt||document.createElement("a")).href=t;var r=wpt.parse(jpt.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},j_t.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Tpt.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},j_t.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),H_t.prototype.update.call(this))},j_t.prototype.dispose=function(){this.source=null},j_t);function j_t(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=H_t.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var Y_t,z_t=(I_t(W_t,Y_t=V_t),W_t.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},W_t);function W_t(t){return Y_t.call(this,t)||this}var Z_t,K_t=(I_t(q_t,Z_t=F_t),q_t.prototype.bind=function(t){Z_t.prototype.bind.call(this,t),t.target=ypt.TEXTURE_CUBE_MAP},q_t.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=ypt.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},q_t.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<q_t.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},q_t.test=function(t){return Array.isArray(t)&&t.length===q_t.SIDES},q_t.SIDES=6,q_t);function q_t(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==q_t.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=Z_t.call(this,6,{width:n,height:s})||this,a=0;a<q_t.SIDES;a++)r.items[a].target=ypt.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var J_t,Q_t=(I_t($_t,J_t=V_t),$_t.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},$_t.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===Tpt.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},$_t.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return J_t.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(J_t.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},$_t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,J_t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},$_t.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},$_t);function $_t(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,V_t.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=J_t.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:Opt.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var tyt,eyt=(I_t(ryt,tyt=V_t),ryt.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},ryt.prototype._loadSvg=function(){var s=this,o=new Image;V_t.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++Fpt,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},ryt.getSize=function(t){var e=ryt.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},ryt.prototype.dispose=function(){tyt.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},ryt.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},ryt.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,ryt);function ryt(t,e){var r=this;return e=e||{},(r=tyt.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var iyt,Rnt=(I_t(nyt,iyt=V_t),nyt.prototype.update=function(t){var e;this.destroyed||(e=Jpt.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(iyt.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},nyt.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},nyt.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},nyt.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},nyt.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},nyt.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Jpt.shared.add(this.update,this),this._isConnectedToTicker=!0)},nyt.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Jpt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},nyt.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},nyt.prototype.dispose=function(){this._isConnectedToTicker&&Jpt.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),iyt.prototype.dispose.call(this)},Object.defineProperty(nyt.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Jpt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Jpt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(nyt.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),nyt.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<nyt.TYPES.indexOf(e)},nyt.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],nyt.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},nyt);function nyt(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];V_t.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||nyt.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=iyt.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var syt,oyt=(I_t(ayt,syt=V_t),ayt.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},ayt);function ayt(t){return syt.call(this,t)||this}b_t.push(Q_t,oyt,z_t,Rnt,eyt,C_t,K_t,G_t);var hyt={__proto__:null,Resource:R_t,BaseImageResource:V_t,INSTALLED:b_t,autoDetectResource:A_t,AbstractMultiResource:F_t,ArrayResource:G_t,BufferResource:C_t,CanvasResource:z_t,CubeResource:K_t,ImageResource:Q_t,SVGResource:eyt,VideoResource:Rnt,ImageBitmapResource:oyt},eyt=(uyt.prototype.destroy=function(){this.renderer=null},uyt);function uyt(t){this.renderer=t}var lyt,cyt=(I_t(dyt,lyt=C_t),dyt.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Tpt.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},dyt);function dyt(){return null!==lyt&&lyt.apply(this,arguments)||this}var fyt=(Object.defineProperty(pyt.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),pyt.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new L_t(null,{scaleMode:xpt.NEAREST,resolution:1,mipmap:Ept.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},pyt.prototype.addDepthTexture=function(t){return this.depthTexture=t||new L_t(new cyt(null,{width:this.width,height:this.height}),{scaleMode:xpt.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ept.OFF,format:_pt.DEPTH_COMPONENT,type:mpt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},pyt.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},pyt.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},pyt.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},pyt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},pyt.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},pyt);function pyt(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Wpt("disposeFramebuffer"),this.multisample=Rpt.NONE}var _yt,yyt=(I_t(myt,_yt=L_t),myt.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},myt.prototype.dispose=function(){this.framebuffer.dispose(),_yt.prototype.dispose.call(this)},myt.prototype.destroy=function(){_yt.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},myt);function myt(t){var e=this,e=_yt.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=Ept.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new fyt(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var vyt=(xyt.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=E_t.add(r,E_t.NW),this.x0=s+i*E_t.uX(r),this.y0=e+n*E_t.uY(r),r=E_t.add(r,2),this.x1=s+i*E_t.uX(r),this.y1=e+n*E_t.uY(r),r=E_t.add(r,2),this.x2=s+i*E_t.uX(r),this.y2=e+n*E_t.uY(r),r=E_t.add(r,2),this.x3=s+i*E_t.uX(r),this.y3=e+n*E_t.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},xyt.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},xyt);function xyt(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var gyt,Eyt=new vyt,Tyt=(I_t(byt,gyt=pt.a),byt.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},byt.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},byt.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&Xpt[t.url]&&byt.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,byt.removeFromCache(this),this.textureCacheIds=null},byt.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new byt(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},byt.prototype.updateUvs=function(){this._uvs===Eyt&&(this._uvs=new vyt),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},byt.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=Opt.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++Fpt),t._pixiId),s=Xpt[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=Ypt(t)),(s=new byt(new L_t(t,e))).baseTexture.cacheId=n,L_t.addToCache(s.baseTexture,n),byt.addToCache(s,n)),s},byt.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=byt.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},byt.fromBuffer=function(t,e,r,i){return new byt(L_t.fromBuffer(t,e,r,i))},byt.fromLoader=function(t,e,r,i){t=new L_t(t,Object.assign({scaleMode:Opt.SCALE_MODE,resolution:Ypt(e)},i)),i=t.resource;i instanceof Q_t&&(i.url=e);var n=new byt(t);return L_t.addToCache(n.baseTexture,r=r||e),byt.addToCache(n,r),r!==e&&(L_t.addToCache(n.baseTexture,e),byt.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},byt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Xpt[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),Xpt[e]=t)},byt.removeFromCache=function(t){if("string"==typeof t){var e=Xpt[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete Xpt[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)Xpt[t.textureCacheIds[i]]===t&&delete Xpt[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(byt.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(byt.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(byt.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(byt.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(byt.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),byt.prototype.castToBaseTexture=function(){return this.baseTexture},byt);function byt(t,e,r,i,n,s){var o=gyt.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new r_t(0,0,1,1)),t instanceof byt&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=Eyt,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new h_t(s.x,s.y):new h_t(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function Ayt(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}Tyt.EMPTY=new Tyt(new L_t),Ayt(Tyt.EMPTY),Ayt(Tyt.EMPTY.baseTexture),Tyt.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new Tyt(new L_t(new z_t(t)))}(),Ayt(Tyt.WHITE),Ayt(Tyt.WHITE.baseTexture);var Syt,Iyt=(I_t(Ryt,Syt=Tyt),Object.defineProperty(Ryt.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Ryt.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},Ryt.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},Ryt.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(kpt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new Ryt(new yyt(t))},Ryt);function Ryt(t,e){e=Syt.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var Oyt=(wyt.prototype.createTexture=function(t,e){e=new yyt(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Iyt(e)},wyt.prototype.getOptimalTexture=function(t,e,r){var i=wyt.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=Lpt(t)))<<16|65535&(e=Lpt(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},wyt.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},wyt.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},wyt.prototype.returnFilterTexture=function(t){this.returnTexture(t)},wyt.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},wyt.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=wyt.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},wyt.SCREEN_KEY="screen",wyt);function wyt(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var Cyt=(Pyt.prototype.destroy=function(){this.buffer=null},Pyt.from=function(t,e,r,i,n){return new Pyt(t,e,r,i,n)},Pyt);function Pyt(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=mpt.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var Nyt=0,Myt=(Lyt.prototype.update=function(t){this.data=t||this.data,this._updateID++},Lyt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Lyt.prototype.destroy=function(){this.dispose(),this.data=null},Lyt.from=function(t){return new Lyt(t=t instanceof Array?new Float32Array(t):t)},Lyt);function Lyt(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=Nyt++,this.disposeRunner=new Wpt("disposeBuffer")}function Dyt(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var Uyt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Fyt={5126:4,5123:2,5121:1},Byt=0,kyt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Rnt=(Gyt.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Myt||(e instanceof Array&&(e=new Float32Array(e)),e=new Myt(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new Cyt(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},Gyt.prototype.getAttribute=function(t){return this.attributes[t]},Gyt.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},Gyt.prototype.addIndex=function(t){return t instanceof Myt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Myt(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},Gyt.prototype.getIndex=function(){return this.indexBuffer},Gyt.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new Myt;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*Fyt[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=Dyt(l);n[c]||(n[c]=new Uyt[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Gyt.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},Gyt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Gyt.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},Gyt.prototype.clone=function(){for(var t=new Gyt,e=0;e<this.buffers.length;e++)t.buffers[e]=new Myt(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new Cyt(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},Gyt.merge=function(t){for(var e=new Gyt,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new kyt[Dyt(o.buffers[s].data)](i[s]),e.buffers[s]=new Myt(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*Fyt[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},Gyt);function Gyt(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Byt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Wpt("disposeGeometry"),this.refCount=0}var Xyt,Hyt=(I_t(Vyt,Xyt=Rnt),Vyt);function Vyt(){var t=Xyt.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var jyt,Yyt=(I_t(zyt,jyt=Rnt),zyt.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},zyt.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},zyt);function zyt(){var t=jyt.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Myt(t.vertices),t.uvBuffer=new Myt(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var Wyt=0,Zyt=(Kyt.prototype.update=function(){this.dirtyId++},Kyt.prototype.add=function(t,e,r){this.uniforms[t]=new Kyt(e,r)},Kyt.from=function(t,e){return new Kyt(t,e)},Kyt);function Kyt(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Wyt++,this.static=!!e}var qyt=(Jyt.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},Jyt);function Jyt(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new r_t,this.destinationFrame=new r_t,this.bindingSourceFrame=new r_t,this.bindingDestinationFrame=new r_t,this.filters=[],this.transform=null}var Qyt,$yt=[new h_t,new h_t,new h_t,new h_t],tmt=new d_t,emt=(I_t(rmt,Qyt=eyt),rmt.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new qyt,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(tmt.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},rmt.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,bpt.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,bpt.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,bpt.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},rmt.prototype.bindAndClear=function(t,e){void 0===e&&(e=bpt.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===bpt.CLEAR||e===bpt.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},rmt.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(ppt.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(ppt.TRIANGLE_STRIP))},rmt.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(d_t.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},rmt.prototype.destroy=function(){this.texturePool.clear(!1)},rmt.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},rmt.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},rmt.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},rmt.prototype.emptyPool=function(){this.texturePool.clear(!0)},rmt.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},rmt.prototype.transformAABB=function(t,e){var r=$yt[0],i=$yt[1],n=$yt[2],s=$yt[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},rmt.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?tmt.copyFrom(n):tmt.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},rmt);function rmt(t){var e=Qyt.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new Oyt,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new Hyt,e.quadUv=new Yyt,e.tempRect=new r_t,e.activeState={},e.globalUniforms=new Zyt({outputFrame:new r_t,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var imt=(nmt.prototype.flush=function(){},nmt.prototype.destroy=function(){this.renderer=null},nmt.prototype.start=function(){},nmt.prototype.stop=function(){this.flush()},nmt.prototype.render=function(t){},nmt);function nmt(t){this.renderer=t}var smt,omt=(I_t(amt,smt=eyt),amt.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},amt.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},amt.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},amt.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},amt.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},amt);function amt(t){var e=smt.call(this,t)||this;return e.emptyRenderer=new imt(t),e.currentRenderer=e.emptyRenderer,e}var hmt,umt=0,lmt=(I_t(cmt,hmt=eyt),Object.defineProperty(cmt.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),cmt.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=umt++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},cmt.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=umt++,this.renderer.runners.contextChange.emit(t)},cmt.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},cmt.prototype.createContext=function(t,e){var r;if(r=Opt.PREFER_ENV>=lpt.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},cmt.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},cmt.prototype.handleContextLost=function(t){t.preventDefault()},cmt.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},cmt.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},cmt.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},cmt.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},cmt);function cmt(t){var e=hmt.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var dmt,fmt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=Rpt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},pmt=new r_t,_mt=(I_t(ymt,dmt=eyt),ymt.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new r_t,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,Opt.PREFER_ENV===lpt.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},ymt.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},ymt.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(ymt.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),ymt.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=dpt.COLOR|dpt.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},ymt.prototype.initFramebuffer=function(t){var e=this.gl,e=new fmt(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},ymt.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},ymt.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},ymt.prototype.detectSamples=function(t){var e=this.msaaSamples,r=Rpt.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?Rpt.NONE:r},ymt.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new fyt(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=pmt).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},ymt.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},ymt.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},ymt.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},ymt.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new r_t},ymt);function ymt(t){t=dmt.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new fyt(10,10),t.msaaSamples=null,t}var mmt,vmt=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},xmt={5126:4,5123:2,5121:1},gmt=(I_t(Emt,mmt=eyt),Emt.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=Opt.PREFER_ENV===lpt.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},Emt.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},Emt.prototype.reset=function(){this.unbind()},Emt.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},Emt.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},Emt.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},Emt.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*xmt[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*xmt[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*xmt[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new vmt(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},Emt.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},Emt.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},Emt.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},Emt.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},Emt.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},Emt.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},Emt);function Emt(t){t=mmt.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var Tmt=(bmt.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Ipt.NONE,this.autoDetect=!0),this._target=null},bmt.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},bmt);function bmt(t){void 0===t&&(t=null),this.type=Ipt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function Amt(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function Smt(t,e,r,i){var n=Amt(t,t.VERTEX_SHADER,e),s=Amt(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function Imt(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function Rmt(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Imt(2*e);case"bvec3":return Imt(3*e);case"bvec4":return Imt(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Omt,wmt={},Cmt=wmt;function Pmt(){var t,e;return(Cmt===wmt||Cmt&&Cmt.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=Opt.PREFER_ENV>=lpt.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Cmt=e),Cmt}function Nmt(t,e,r){if("precision"===t.substring(0,9))return r!==Spt.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===Spt.HIGH&&r!==Spt.HIGH?Spt.MEDIUM:e)+" float;\n"+t}var Mmt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var Lmt=null,Dmt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Umt(t,e){if(!Lmt){var r=Object.keys(Dmt);Lmt={};for(var i=0;i<r.length;++i){var n=r[i];Lmt[t[n]]=Dmt[n]}}return Lmt[e]}var Fmt=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Bmt={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},kmt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Gmt,Xmt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Hmt(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=Xmt.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var Vmt=0,jmt={},Ymt=(zmt.prototype.extractData=function(t,e){var r=Pmt();r?(e=Smt(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},zmt.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=Umt(e,o.type),a={type:a,name:o.name,size:Mmt[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},zmt.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=Umt(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:Rmt(h,s.size)}}return r},Object.defineProperty(zmt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(zmt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),zmt.from=function(t,e,r){var i=t+e,n=Gpt[i];return n||(Gpt[i]=n=new zmt(t,e,r)),n},zmt);function zmt(t,e,r){void 0===r&&(r="pixi-shader"),this.id=Vmt++,this.vertexSrc=t||zmt.defaultVertexSrc,this.fragmentSrc=e||zmt.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),jmt[r]?(jmt[r]++,r+="-"+jmt[r]):jmt[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=Nmt(this.vertexSrc,Opt.PRECISION_VERTEX,Spt.HIGH),this.fragmentSrc=Nmt(this.fragmentSrc,Opt.PRECISION_FRAGMENT,(Omt||(Omt=Spt.MEDIUM,(r=Pmt())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),Omt=r.precision?Spt.HIGH:Spt.MEDIUM)),Omt))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var Wmt=(Zmt.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},Zmt.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(Zmt.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),Zmt.from=function(t,e,r){return new Zmt(Ymt.from(t,e),r)},Zmt);function Zmt(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof Zyt?e:new Zyt(e):new Zyt({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var Kmt=(Object.defineProperty(qmt.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(qmt.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(qmt.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(qmt.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(qmt.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(qmt.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(qmt.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==fpt.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(qmt.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),qmt.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},qmt.for2d=function(){var t=new qmt;return t.depthTest=!1,t.blend=!0,t},qmt);function qmt(){this.data=0,this.blendMode=fpt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var Jmt,Qmt=(I_t($mt,Jmt=Wmt),$mt.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty($mt.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty($mt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty($mt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),$mt);function $mt(t,e,r){var i=this,e=Ymt.from(t||$mt.defaultVertexSrc,e||$mt.defaultFragmentSrc);return(i=Jmt.call(this,e,r)||this).padding=0,i.resolution=Opt.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new Kmt,i}var tvt=new d_t,evt=(Object.defineProperty(rvt.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),rvt.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},rvt.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(tvt.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(tvt));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},rvt);function rvt(t,e){this._texture=t,this.mapCoord=new d_t,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var ivt,nvt=(I_t(svt,ivt=Qmt),svt.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new evt(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},svt);function svt(t){var e=this,r=new d_t,e=ivt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var ovt,avt=(I_t(hvt,ovt=eyt),hvt.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},hvt.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new Tmt).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case Ipt.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case Ipt.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case Ipt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},hvt.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case Ipt.SCISSOR:this.renderer.scissor.pop();break;case Ipt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Ipt.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},hvt.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=Ipt.SPRITE:(t.type=Ipt.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=Ipt.SCISSOR)))},hvt.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new nvt(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},hvt.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},hvt);function hvt(t){t=ovt.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var uvt,oyt=(I_t(lvt,uvt=eyt),lvt.prototype.getStackLength=function(){return this.maskStack.length},lvt.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},lvt.prototype._useCurrent=function(){},lvt.prototype.destroy=function(){uvt.prototype.destroy.call(this),this.maskStack=null},lvt);function lvt(t){t=uvt.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var cvt,dvt=(I_t(fvt,cvt=oyt),fvt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},fvt.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},fvt.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},fvt.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},fvt);function fvt(t){t=cvt.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var pvt,_vt=(I_t(yvt,pvt=oyt),yvt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},yvt.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},yvt.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},yvt.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},yvt.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},yvt);function yvt(t){t=pvt.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var mvt,vvt=(I_t(xvt,mvt=eyt),xvt.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},xvt.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},xvt.prototype.setTransform=function(t){},xvt);function xvt(t){t=mvt.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new d_t,t.transform=null,t}var gvt,Evt=new r_t,Tvt=new r_t,bvt=(I_t(Avt,gvt=eyt),Avt.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(Evt.width=t.frame.width,Evt.height=t.frame.height,e=Evt),r||(Tvt.x=t.frame.x,Tvt.y=t.frame.y,Tvt.width=e.width,Tvt.height=e.height,r=Tvt),n=i.framebuffer):(s=o.resolution,e||(Evt.width=o.screen.width,Evt.height=o.screen.height,e=Evt),r||((r=Evt).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},Avt.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},Avt.prototype.resize=function(){this.bind(null)},Avt.prototype.reset=function(){this.bind(null)},Avt);function Avt(t){var e=gvt.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new r_t,e.destinationFrame=new r_t,e.viewportFrame=new r_t,e}var Svt=(Ivt.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},Ivt);function Ivt(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var Rvt,Ovt=0,wvt={textureCount:0},Cvt=(I_t(Pvt,Rvt=eyt),Pvt.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Gmt)return Gmt;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Gmt=!0===t({a:"b"},"a","b")}catch(t){Gmt=!1}return Gmt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},Pvt.prototype.contextChange=function(t){this.gl=t,this.reset()},Pvt.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(wvt.textureCount=0,this.syncUniformGroup(t.uniformGroup,wvt)),i},Pvt.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},Pvt.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},Pvt.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},Pvt.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<Fmt.length;h++)if(Fmt[h].test(n,o)){i.push(Fmt[h].code(r,o)),a=!0;break}a||(s=(1===n.size?Bmt:kmt)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},Pvt.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},Pvt.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},Pvt.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=Smt(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:Rmt(a.type,a.size)}}t=new Svt(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},Pvt.prototype.reset=function(){this.program=null,this.shader=null},Pvt.prototype.destroy=function(){this.destroyed=!0},Pvt);function Pvt(t){t=Rvt.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=Ovt++,t}var Nvt,Mvt=(I_t(Lvt,Nvt=eyt),Lvt.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[fpt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.ADD]=[t.ONE,t.ONE],e[fpt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.NONE]=[0,0],e[fpt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[fpt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[fpt.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[fpt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[fpt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[fpt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[fpt.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[fpt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[fpt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[fpt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[fpt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},Lvt.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},Lvt.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},Lvt.prototype.setBlend=function(t){this.updateCheck(Lvt.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},Lvt.prototype.setOffset=function(t){this.updateCheck(Lvt.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},Lvt.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},Lvt.prototype.setDepthMask=function(t){this.gl.depthMask(t)},Lvt.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},Lvt.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},Lvt.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},Lvt.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},Lvt.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},Lvt.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},Lvt.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},Lvt.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},Lvt);function Lvt(t){t=Nvt.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=fpt.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new Kmt,t.defaultState.blend=!0,t}var Dvt,Uvt=(I_t(Fvt,Dvt=eyt),Fvt.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Apt.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},Fvt.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},Fvt.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},Fvt);function Fvt(t){t=Dvt.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=Opt.GC_MAX_IDLE,t.checkCountMax=Opt.GC_MAX_CHECK_COUNT,t.mode=Opt.GC_MODE,t}var Bvt,kvt=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},Gvt=(I_t(Xvt,Bvt=eyt),Xvt.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new kvt(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new kvt(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},Xvt.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},Xvt.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},Xvt.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},Xvt.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==vpt.FLOAT&&this.renderer.texture.unbind(s)}},Xvt.prototype.initTexture=function(t){var e=new kvt(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},Xvt.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===mpt.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},Xvt.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==vpt.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},Xvt.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&function(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}(this.managedTextures,t,1))},Xvt.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==Ept.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=gpt.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},Xvt.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==Ept.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===xpt.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===xpt.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===xpt.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===xpt.LINEAR?i.LINEAR:i.NEAREST)},Xvt);function Xvt(t){t=Bvt.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new L_t,t.hasIntegerTextures=!1,t}var Hvt,Vvt={__proto__:null,FilterSystem:emt,BatchSystem:omt,ContextSystem:lmt,FramebufferSystem:_mt,GeometrySystem:gmt,MaskSystem:avt,ScissorSystem:dvt,StencilSystem:_vt,ProjectionSystem:vvt,RenderTextureSystem:bvt,ShaderSystem:Cvt,StateSystem:Mvt,TextureGCSystem:Uvt,TextureSystem:Gvt},jvt=new d_t,eyt=(I_t(Yvt,Hvt=pt.a),Yvt.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(Yvt.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(Yvt.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),Yvt.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},Yvt.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=Iyt.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return jvt.tx=-i.x,jvt.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:jvt,skipUpdateTransform:!!t.parent}),r},Yvt.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=cpt.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(Yvt.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(Yvt.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),Yvt);function Yvt(t,e){void 0===t&&(t=cpt.UNKNOWN);var r=Hvt.call(this)||this;return e=Object.assign({},Opt.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new r_t(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||Opt.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(kpt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var zvt;I_t(Wvt,zvt=eyt),Wvt.create=function(t){if(Cpt=void 0===Cpt?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:Opt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():Cpt)return new Wvt(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},Wvt.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},Wvt.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof Iyt?(kpt("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},Wvt.prototype.resize=function(t,e){zvt.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},Wvt.prototype.reset=function(){return this.runners.reset.emit(),this},Wvt.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},Wvt.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();zvt.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(Wvt.prototype,"extract",{get:function(){return kpt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),Wvt.registerPlugin=function(t,e){(Wvt.__plugins=Wvt.__plugins||{})[t]=e};function Wvt(t){var e,r=zvt.call(this,cpt.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Wpt("destroy"),contextChange:new Wpt("contextChange"),reset:new Wpt("reset"),update:new Wpt("update"),postrender:new Wpt("postrender"),prerender:new Wpt("prerender"),resize:new Wpt("resize")},r.globalUniforms=new Zyt({projectionMatrix:new d_t},!0),r.addSystem(avt,"mask").addSystem(lmt,"context").addSystem(Mvt,"state").addSystem(Cvt,"shader").addSystem(Gvt,"texture").addSystem(gmt,"geometry").addSystem(_mt,"framebuffer").addSystem(dvt,"scissor").addSystem(_vt,"stencil").addSystem(vvt,"projection").addSystem(Uvt,"textureGC").addSystem(emt,"filter").addSystem(bvt,"renderTexture").addSystem(omt,"batch"),r.initPlugins(Wvt.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",Ppt||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+Npt+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+Npt+" - "+e+" - http://www.pixijs.com/"),Ppt=!0),r.resize(r.options.width,r.options.height),r}var Zvt=function(){this.texArray=null,this.blend=0,this.type=ppt.TRIANGLES,this.start=0,this.size=0,this.data=null},Kvt=(qvt.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},qvt);function qvt(){this.elements=[],this.ids=[],this.count=0}var Jvt=(Object.defineProperty(Qvt.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(Qvt.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(Qvt.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(Qvt.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(Qvt.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),Qvt.prototype.view=function(t){return this[t+"View"]},Qvt.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},Qvt.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Qvt);function Qvt(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var $vt,txt=(I_t(ext,$vt=imt),ext.prototype.contextChange=function(){var t=this.renderer.gl;Opt.PREFER_ENV===lpt.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Opt.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Hmt(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},ext.prototype.initFlushBuffers=function(){for(var t=ext._drawCallPool,e=ext._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new Zvt);for(;e.length<i;)e.push(new Kvt);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},ext.prototype.onPrerender=function(){this._flushId=0},ext.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},ext.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=ext._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++L_t._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;L_t._globalBatch=o},ext.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=ext._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=Mpt[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},ext.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},ext.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;Opt.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},ext.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=ext._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},ext.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},ext.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Opt.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},ext.prototype.stop=function(){this.flush()},ext.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),$vt.prototype.destroy.call(this)},ext.prototype.getAttributeBuffer=function(t){var e=Lpt(Math.ceil(t/8)),t=Upt(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new Jvt(e*this.vertexSize*4)),t},ext.prototype.getIndexBuffer=function(t){var e=Lpt(Math.ceil(t/12)),r=Upt(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},ext.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},ext._drawCallPool=[],ext._textureArrayPool=[],ext);function ext(t){var e=$vt.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=Kmt.for2d(),e.size=4*Opt.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var rxt=(ixt.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=Zyt.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Ymt(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new d_t,default:this.defaultGroupCache[t]};return new Wmt(this.programCache[t],i)},ixt.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},ixt);function ixt(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var nxt,sxt=(I_t(oxt,nxt=Rnt),oxt);function oxt(t){void 0===t&&(t=!1);var e=nxt.call(this)||this;return e._buffer=new Myt(null,t,!1),e._indexBuffer=new Myt(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,mpt.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,mpt.FLOAT).addAttribute("aColor",e._buffer,4,!0,mpt.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,mpt.FLOAT).addIndex(e._indexBuffer),e}var axt="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",hxt="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function uxt(){}(uxt.create=function(t){var e,t=Object.assign({vertex:axt,fragment:hxt,geometryClass:sxt,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return I_t(o,e=txt),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new rxt(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(uxt,"defaultVertexSrc",{get:function(){return axt},enumerable:!1,configurable:!0}),Object.defineProperty(uxt,"defaultFragmentTemplate",{get:function(){return hxt},enumerable:!1,configurable:!0}),uxt).create();var lxt={};for(cxt in hyt)!function(t){Object.defineProperty(lxt,t,{get:function(){return kpt("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),hyt[t]}})}(cxt);var cxt,dxt={};for(cxt in Vvt)!function(t){Object.defineProperty(dxt,t,{get:function(){return kpt("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),Vvt[t]}})}(cxt);var fxt=function(t,e){return(fxt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var pxt,_xt,yxt,eyt=(fxt(_xt=vxt,yxt=pxt=Qmt),_xt.prototype=null===yxt?Object.create(yxt):(mxt.prototype=yxt.prototype,new mxt),Object.defineProperty(vxt.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),vxt);function mxt(){this.constructor=_xt}function vxt(t){void 0===t&&(t=1);var e=pxt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return e.alpha=t,e}function xxt(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var gxt=/iPhone/i,Ext=/iPod/i,Txt=/iPad/i,bxt=/\biOS-universal(?:.+)Mac\b/i,Axt=/\bAndroid(?:.+)Mobile\b/i,Sxt=/Android/i,Ixt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Rxt=/Silk/i,Oxt=/Windows Phone/i,wxt=/\bWindows(?:.+)ARM\b/i,Cxt=/BlackBerry/i,Pxt=/BB10/i,Nxt=/Opera Mini/i,Mxt=/\b(CriOS|Chrome)(?:.+)Mobile/i,Lxt=/Mobile(?:.+)Firefox\b/i;var Dxt=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(gxt)&&!i(Oxt),ipod:i(Ext),tablet:!i(gxt)&&(i(Txt)||xxt(e))&&!i(Oxt),universal:i(bxt),device:(i(gxt)||i(Ext)||i(Txt)||i(bxt)||xxt(e))&&!i(Oxt)},amazon:{phone:i(Ixt),tablet:!i(Ixt)&&i(Rxt),device:i(Ixt)||i(Rxt)},android:{phone:!i(Oxt)&&i(Ixt)||!i(Oxt)&&i(Axt),tablet:!i(Oxt)&&!i(Ixt)&&!i(Axt)&&(i(Rxt)||i(Sxt)),device:!i(Oxt)&&(i(Ixt)||i(Rxt)||i(Axt)||i(Sxt))||i(/\bokhttp\b/i)},windows:{phone:i(Oxt),tablet:i(wxt),device:i(Oxt)||i(wxt)},other:{blackberry:i(Cxt),blackberry10:i(Pxt),opera:i(Nxt),firefox:i(Lxt),chrome:i(Mxt),device:i(Cxt)||i(Pxt)||i(Nxt)||i(Lxt)||i(Mxt)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(Rnt={})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(Rnt={})[Rnt.UNKNOWN=0]="UNKNOWN",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.CANVAS=2]="CANVAS",(Rnt={})[Rnt.COLOR=16384]="COLOR",Rnt[Rnt.DEPTH=256]="DEPTH",Rnt[Rnt.STENCIL=1024]="STENCIL",(Rnt={})[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.ADD=1]="ADD",Rnt[Rnt.MULTIPLY=2]="MULTIPLY",Rnt[Rnt.SCREEN=3]="SCREEN",Rnt[Rnt.OVERLAY=4]="OVERLAY",Rnt[Rnt.DARKEN=5]="DARKEN",Rnt[Rnt.LIGHTEN=6]="LIGHTEN",Rnt[Rnt.COLOR_DODGE=7]="COLOR_DODGE",Rnt[Rnt.COLOR_BURN=8]="COLOR_BURN",Rnt[Rnt.HARD_LIGHT=9]="HARD_LIGHT",Rnt[Rnt.SOFT_LIGHT=10]="SOFT_LIGHT",Rnt[Rnt.DIFFERENCE=11]="DIFFERENCE",Rnt[Rnt.EXCLUSION=12]="EXCLUSION",Rnt[Rnt.HUE=13]="HUE",Rnt[Rnt.SATURATION=14]="SATURATION",Rnt[Rnt.COLOR=15]="COLOR",Rnt[Rnt.LUMINOSITY=16]="LUMINOSITY",Rnt[Rnt.NORMAL_NPM=17]="NORMAL_NPM",Rnt[Rnt.ADD_NPM=18]="ADD_NPM",Rnt[Rnt.SCREEN_NPM=19]="SCREEN_NPM",Rnt[Rnt.NONE=20]="NONE",Rnt[Rnt.SRC_OVER=0]="SRC_OVER",Rnt[Rnt.SRC_IN=21]="SRC_IN",Rnt[Rnt.SRC_OUT=22]="SRC_OUT",Rnt[Rnt.SRC_ATOP=23]="SRC_ATOP",Rnt[Rnt.DST_OVER=24]="DST_OVER",Rnt[Rnt.DST_IN=25]="DST_IN",Rnt[Rnt.DST_OUT=26]="DST_OUT",Rnt[Rnt.DST_ATOP=27]="DST_ATOP",Rnt[Rnt.ERASE=26]="ERASE",Rnt[Rnt.SUBTRACT=28]="SUBTRACT",Rnt[Rnt.XOR=29]="XOR",(Rnt={})[Rnt.POINTS=0]="POINTS",Rnt[Rnt.LINES=1]="LINES",Rnt[Rnt.LINE_LOOP=2]="LINE_LOOP",Rnt[Rnt.LINE_STRIP=3]="LINE_STRIP",Rnt[Rnt.TRIANGLES=4]="TRIANGLES",Rnt[Rnt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Rnt[Rnt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(Rnt={})[Rnt.RGBA=6408]="RGBA",Rnt[Rnt.RGB=6407]="RGB",Rnt[Rnt.ALPHA=6406]="ALPHA",Rnt[Rnt.LUMINANCE=6409]="LUMINANCE",Rnt[Rnt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Rnt[Rnt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Rnt[Rnt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt={})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(Rnt={})[Rnt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Rnt[Rnt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Rnt[Rnt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Rnt[Rnt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Rnt[Rnt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Rnt[Rnt.FLOAT=5126]="FLOAT",Rnt[Rnt.HALF_FLOAT=36193]="HALF_FLOAT",(Rnt={})[Rnt.FLOAT=0]="FLOAT",Rnt[Rnt.INT=1]="INT",Rnt[Rnt.UINT=2]="UINT",(Rnt=AEt=AEt||{})[Rnt.NEAREST=0]="NEAREST",Rnt[Rnt.LINEAR=1]="LINEAR",(Rnt=_Et=_Et||{})[Rnt.CLAMP=33071]="CLAMP",Rnt[Rnt.REPEAT=10497]="REPEAT",Rnt[Rnt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(Rnt=DEt=DEt||{})[Rnt.OFF=0]="OFF",Rnt[Rnt.POW2=1]="POW2",Rnt[Rnt.ON=2]="ON",Rnt[Rnt.ON_MANUAL=3]="ON_MANUAL",(Rnt={})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Rnt={})[Rnt.NO=0]="NO",Rnt[Rnt.YES=1]="YES",Rnt[Rnt.AUTO=2]="AUTO",Rnt[Rnt.BLEND=0]="BLEND",Rnt[Rnt.CLEAR=1]="CLEAR",Rnt[Rnt.BLIT=2]="BLIT",(Rnt=dEt=dEt||{})[Rnt.AUTO=0]="AUTO",Rnt[Rnt.MANUAL=1]="MANUAL",(Rnt=CEt=CEt||{}).LOW="lowp",Rnt.MEDIUM="mediump",Rnt.HIGH="highp",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.SCISSOR=1]="SCISSOR",Rnt[Rnt.STENCIL=2]="STENCIL",Rnt[Rnt.SPRITE=3]="SPRITE",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.LOW=2]="LOW",Rnt[Rnt.MEDIUM=4]="MEDIUM",Rnt[Rnt.HIGH=8]="HIGH";var Uxt,Fxt,Bxt,kxt,Gxt,Xxt,Hxt,Vxt,jxt,Yxt,zxt,Wxt,Zxt,Kxt,qxt,Jxt,Qxt,$xt,tgt,egt,rgt,igt={MIPMAP_TEXTURES:DEt.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(Uxt=32,Bxt=!0,(Dxt.tablet||Dxt.phone)&&(Dxt.apple.device&&(Fxt=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(Fxt[1],10)<11&&(Bxt=!1),Dxt.android.device&&(Fxt=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(Fxt[1],10)<7&&(Bxt=!1)),Bxt?Uxt:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:dEt.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:_Et.CLAMP,SCALE_MODE:AEt.LINEAR,PRECISION_VERTEX:CEt.HIGH,PRECISION_FRAGMENT:Dxt.apple.device?CEt.HIGH:CEt.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!Dxt.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};(Rnt=kxt=kxt||{})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(DEt=Gxt=Gxt||{})[DEt.UNKNOWN=0]="UNKNOWN",DEt[DEt.WEBGL=1]="WEBGL",DEt[DEt.CANVAS=2]="CANVAS",(dEt=Xxt=Xxt||{})[dEt.COLOR=16384]="COLOR",dEt[dEt.DEPTH=256]="DEPTH",dEt[dEt.STENCIL=1024]="STENCIL",(_Et=Hxt=Hxt||{})[_Et.NORMAL=0]="NORMAL",_Et[_Et.ADD=1]="ADD",_Et[_Et.MULTIPLY=2]="MULTIPLY",_Et[_Et.SCREEN=3]="SCREEN",_Et[_Et.OVERLAY=4]="OVERLAY",_Et[_Et.DARKEN=5]="DARKEN",_Et[_Et.LIGHTEN=6]="LIGHTEN",_Et[_Et.COLOR_DODGE=7]="COLOR_DODGE",_Et[_Et.COLOR_BURN=8]="COLOR_BURN",_Et[_Et.HARD_LIGHT=9]="HARD_LIGHT",_Et[_Et.SOFT_LIGHT=10]="SOFT_LIGHT",_Et[_Et.DIFFERENCE=11]="DIFFERENCE",_Et[_Et.EXCLUSION=12]="EXCLUSION",_Et[_Et.HUE=13]="HUE",_Et[_Et.SATURATION=14]="SATURATION",_Et[_Et.COLOR=15]="COLOR",_Et[_Et.LUMINOSITY=16]="LUMINOSITY",_Et[_Et.NORMAL_NPM=17]="NORMAL_NPM",_Et[_Et.ADD_NPM=18]="ADD_NPM",_Et[_Et.SCREEN_NPM=19]="SCREEN_NPM",_Et[_Et.NONE=20]="NONE",_Et[_Et.SRC_OVER=0]="SRC_OVER",_Et[_Et.SRC_IN=21]="SRC_IN",_Et[_Et.SRC_OUT=22]="SRC_OUT",_Et[_Et.SRC_ATOP=23]="SRC_ATOP",_Et[_Et.DST_OVER=24]="DST_OVER",_Et[_Et.DST_IN=25]="DST_IN",_Et[_Et.DST_OUT=26]="DST_OUT",_Et[_Et.DST_ATOP=27]="DST_ATOP",_Et[_Et.ERASE=26]="ERASE",_Et[_Et.SUBTRACT=28]="SUBTRACT",_Et[_Et.XOR=29]="XOR",(AEt=Vxt=Vxt||{})[AEt.POINTS=0]="POINTS",AEt[AEt.LINES=1]="LINES",AEt[AEt.LINE_LOOP=2]="LINE_LOOP",AEt[AEt.LINE_STRIP=3]="LINE_STRIP",AEt[AEt.TRIANGLES=4]="TRIANGLES",AEt[AEt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",AEt[AEt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(CEt=jxt=jxt||{})[CEt.RGBA=6408]="RGBA",CEt[CEt.RGB=6407]="RGB",CEt[CEt.ALPHA=6406]="ALPHA",CEt[CEt.LUMINANCE=6409]="LUMINANCE",CEt[CEt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",CEt[CEt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",CEt[CEt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt=Yxt=Yxt||{})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(DEt=zxt=zxt||{})[DEt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",DEt[DEt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",DEt[DEt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",DEt[DEt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",DEt[DEt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",DEt[DEt.FLOAT=5126]="FLOAT",DEt[DEt.HALF_FLOAT=36193]="HALF_FLOAT",(dEt=Wxt=Wxt||{})[dEt.FLOAT=0]="FLOAT",dEt[dEt.INT=1]="INT",dEt[dEt.UINT=2]="UINT",(_Et=Zxt=Zxt||{})[_Et.NEAREST=0]="NEAREST",_Et[_Et.LINEAR=1]="LINEAR",(AEt=Kxt=Kxt||{})[AEt.CLAMP=33071]="CLAMP",AEt[AEt.REPEAT=10497]="REPEAT",AEt[AEt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(CEt=qxt=qxt||{})[CEt.OFF=0]="OFF",CEt[CEt.POW2=1]="POW2",CEt[CEt.ON=2]="ON",CEt[CEt.ON_MANUAL=3]="ON_MANUAL",(Rnt=Jxt=Jxt||{})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(DEt=Qxt=Qxt||{})[DEt.NO=0]="NO",DEt[DEt.YES=1]="YES",DEt[DEt.AUTO=2]="AUTO",DEt[DEt.BLEND=0]="BLEND",DEt[DEt.CLEAR=1]="CLEAR",DEt[DEt.BLIT=2]="BLIT",(dEt=$xt=$xt||{})[dEt.AUTO=0]="AUTO",dEt[dEt.MANUAL=1]="MANUAL",(_Et=tgt=tgt||{}).LOW="lowp",_Et.MEDIUM="mediump",_Et.HIGH="highp",(AEt=egt=egt||{})[AEt.NONE=0]="NONE",AEt[AEt.SCISSOR=1]="SCISSOR",AEt[AEt.STENCIL=2]="STENCIL",AEt[AEt.SPRITE=3]="SPRITE",(CEt=rgt=rgt||{})[CEt.NONE=0]="NONE",CEt[CEt.LOW=2]="LOW",CEt[CEt.MEDIUM=4]="MEDIUM",CEt[CEt.HIGH=8]="HIGH";r(20);var ngt={parse:_t.parse,format:_t.format,resolve:_t.resolve};igt.RETINA_PREFIX=/@([0-9\.]+)x/;var sgt,ogt=igt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,agt="6.0.4";var hgt=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[Hxt.NORMAL_NPM]=Hxt.NORMAL,t[Hxt.ADD_NPM]=Hxt.ADD,t[Hxt.SCREEN_NPM]=Hxt.SCREEN,e[Hxt.NORMAL]=Hxt.NORMAL_NPM,e[Hxt.ADD]=Hxt.ADD_NPM,e[Hxt.SCREEN]=Hxt.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function ugt(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function lgt(t){return!(t&t-1||!t)}function cgt(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}var dgt=0;var fgt={};function pgt(t,e,r){var i;void 0===r&&(r=3),fgt[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),fgt[e]=!0)}var _gt={},ygt=Object.create(null),mgt=Object.create(null);vgt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},vgt.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},vgt.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(vgt.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(vgt.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function vgt(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||igt.RESOLUTION,this.resize(t,e)}var xgt;function ggt(t,e){t=igt.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var Egt,Tgt=(bgt.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},bgt.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},bgt.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},bgt.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},bgt.prototype.contains=function(t){return-1!==this.items.indexOf(t)},bgt.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},bgt.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(bgt.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(bgt.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),bgt);function bgt(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(Tgt.prototype,{dispatch:{value:Tgt.prototype.emit},run:{value:Tgt.prototype.emit}}),igt.TARGET_FPMS=.06,(Rnt=Egt=Egt||{})[Rnt.INTERACTION=50]="INTERACTION",Rnt[Rnt.HIGH=25]="HIGH",Rnt[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.LOW=-25]="LOW",Rnt[Rnt.UTILITY=-50]="UTILITY";var Agt=(Sgt.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},Sgt.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},Sgt.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},Sgt.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},Sgt);function Sgt(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var Igt=(Rgt.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Rgt.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Rgt.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Rgt.prototype.add=function(t,e,r){return void 0===r&&(r=Egt.NORMAL),this._addListener(new Agt(t,e,r))},Rgt.prototype.addOnce=function(t,e,r){return void 0===r&&(r=Egt.NORMAL),this._addListener(new Agt(t,e,r,!0))},Rgt.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},Rgt.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Rgt.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),Rgt.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Rgt.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Rgt.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},Rgt.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*igt.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(Rgt.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(Rgt.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,igt.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(Rgt.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(Rgt,"shared",{get:function(){var t;return Rgt._shared||((t=Rgt._shared=new Rgt).autoStart=!0,t._protected=!0),Rgt._shared},enumerable:!1,configurable:!0}),Object.defineProperty(Rgt,"system",{get:function(){var t;return Rgt._system||((t=Rgt._system=new Rgt).autoStart=!0,t._protected=!0),Rgt._system},enumerable:!1,configurable:!0}),Rgt);function Rgt(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Agt(null,null,1/0),this.deltaMS=1/igt.TARGET_FPMS,this.elapsedMS=1/igt.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}Ogt.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,Egt.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Igt.shared:new Igt,t.autoStart&&this.start()},Ogt.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function Ogt(){}var wgt,Cgt=2*Math.PI;Math.PI,Math.PI;(DEt=wgt=wgt||{})[DEt.POLY=0]="POLY",DEt[DEt.RECT=1]="RECT",DEt[DEt.CIRC=2]="CIRC",DEt[DEt.ELIP=3]="ELIP",DEt[DEt.RREC=4]="RREC";var Pgt=(Object.defineProperty(Ngt.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(Ngt.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(Ngt.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(Ngt.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(Ngt,"EMPTY",{get:function(){return new Ngt(0,0,0,0)},enumerable:!1,configurable:!0}),Ngt.prototype.clone=function(){return new Ngt(this.x,this.y,this.width,this.height)},Ngt.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},Ngt.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},Ngt.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},Ngt.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},Ngt.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},Ngt.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},Ngt.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},Ngt.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},Ngt);function Ngt(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=wgt.RECT}Mgt.prototype.clone=function(){return new Mgt(this.x,this.y,this.radius)},Mgt.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},Mgt.prototype.getBounds=function(){return new Pgt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Mgt.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function Mgt(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=wgt.CIRC}Lgt.prototype.clone=function(){return new Lgt(this.x,this.y,this.width,this.height)},Lgt.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},Lgt.prototype.getBounds=function(){return new Pgt(this.x-this.width,this.y-this.height,this.width,this.height)},Lgt.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function Lgt(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=wgt.ELIP}Dgt.prototype.clone=function(){var t=new Dgt(this.points.slice());return t.closeStroke=this.closeStroke,t},Dgt.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},Dgt.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function Dgt(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=wgt.POLY,this.closeStroke=!0}Ugt.prototype.clone=function(){return new Ugt(this.x,this.y,this.width,this.height,this.radius)},Ugt.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},Ugt.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function Ugt(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=wgt.RREC}var Fgt=(Bgt.prototype.clone=function(){return new Bgt(this.x,this.y)},Bgt.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},Bgt.prototype.copyTo=function(t){return t.set(this.x,this.y),t},Bgt.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},Bgt.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},Bgt.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},Bgt);function Bgt(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var kgt=(Ggt.prototype.clone=function(t,e){return new Ggt(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},Ggt.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},Ggt.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},Ggt.prototype.copyTo=function(t){return t.set(this._x,this._y),t},Ggt.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Ggt.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(Ggt.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(Ggt.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Ggt);function Ggt(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var Xgt=(Hgt.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Hgt.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},Hgt.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},Hgt.prototype.apply=function(t,e){e=e||new Fgt;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},Hgt.prototype.applyInverse=function(t,e){e=e||new Fgt;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},Hgt.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},Hgt.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},Hgt.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},Hgt.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},Hgt.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},Hgt.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},Hgt.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(Cgt-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},Hgt.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},Hgt.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Hgt.prototype.clone=function(){var t=new Hgt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Hgt.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Hgt.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Hgt.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(Hgt,"IDENTITY",{get:function(){return new Hgt},enumerable:!1,configurable:!0}),Object.defineProperty(Hgt,"TEMP_MATRIX",{get:function(){return new Hgt},enumerable:!1,configurable:!0}),Hgt);function Hgt(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var Vgt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],jgt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ygt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],zgt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Wgt=[],Zgt=[],Kgt=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];Wgt.push(e);for(var r=0;r<16;r++)for(var i=Kgt(Vgt[t]*Vgt[r]+Ygt[t]*jgt[r]),n=Kgt(jgt[t]*Vgt[r]+zgt[t]*jgt[r]),s=Kgt(Vgt[t]*Ygt[r]+Ygt[t]*zgt[r]),o=Kgt(jgt[t]*Ygt[r]+zgt[t]*zgt[r]),a=0;a<16;a++)if(Vgt[a]===i&&jgt[a]===n&&Ygt[a]===s&&zgt[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new Xgt;h.set(Vgt[t],jgt[t],Ygt[t],zgt[t],0,0),Zgt.push(h)}}();var qgt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Vgt[t]},uY:function(t){return jgt[t]},vX:function(t){return Ygt[t]},vY:function(t){return zgt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return Wgt[t][e]},sub:function(t,e){return Wgt[t][qgt.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?qgt.S:qgt.N:2*Math.abs(e)<=Math.abs(t)?0<t?qgt.E:qgt.W:0<e?0<t?qgt.SE:qgt.SW:0<t?qgt.NE:qgt.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=Zgt[qgt.inv(e)];e.tx=r,e.ty=i,t.append(e)}};Jgt.prototype.onChange=function(){this._localID++},Jgt.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},Jgt.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},Jgt.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},Jgt.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},Jgt.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(Jgt.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),Jgt.IDENTITY=new Jgt;function Jgt(){this.worldTransform=new Xgt,this.localTransform=new Xgt,this.position=new kgt(this.onChange,this,0,0),this.scale=new kgt(this.onChange,this,1,1),this.pivot=new kgt(this.onChange,this,0,0),this.skew=new kgt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}igt.PREFER_ENV=Dxt.any?kxt.WEBGL:kxt.WEBGL2,igt.STRICT_TEXTURE_CACHE=!1;var Qgt=[];function $gt(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=Qgt.length-1;0<=n;--n){var s=Qgt[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var tEt=function(t,e){return(tEt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function eEt(t,e){function r(){this.constructor=t}tEt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var rEt=(iEt.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},iEt.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},iEt.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(iEt.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),iEt.prototype.update=function(){this.destroyed||this.onUpdate.emit()},iEt.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(iEt.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(iEt.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),iEt.prototype.style=function(t,e,r){return!1},iEt.prototype.dispose=function(){},iEt.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},iEt.test=function(t,e){return!1},iEt);function iEt(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Tgt("setRealSize"),this.onUpdate=new Tgt("update"),this.onError=new Tgt("onError")}var nEt,sEt=(eEt(oEt,nEt=rEt),oEt.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Jxt.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},oEt.prototype.dispose=function(){this.data=null},oEt.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},oEt);function oEt(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=nEt.call(this,e,i)||this).data=t,r}var aEt,hEt={scaleMode:Zxt.NEAREST,format:jxt.RGBA,alphaMode:Jxt.NPM},uEt=(eEt(lEt,aEt=pt.a),Object.defineProperty(lEt.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(lEt.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),lEt.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},lEt.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},lEt.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},lEt.prototype._refreshPOT=function(){this.isPowerOfTwo=lgt(this.realWidth)&&lgt(this.realHeight)},lEt.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},lEt.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},lEt.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},lEt.prototype.onError=function(t){this.emit("error",this,t)},lEt.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete mgt[this.cacheId],delete ygt[this.cacheId],this.cacheId=null),this.dispose(),lEt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},lEt.prototype.dispose=function(){this.emit("dispose",this)},lEt.prototype.castToBaseTexture=function(){return this},lEt.from=function(t,e,r){void 0===r&&(r=igt.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++dgt),t._pixiId),s=mgt[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new lEt(t,e)).cacheId=n,lEt.addToCache(s,n)),s},lEt.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new sEt(t,{width:e,height:r}),t=t instanceof Float32Array?zxt.FLOAT:zxt.UNSIGNED_BYTE;return new lEt(n,Object.assign(hEt,i||{width:e,height:r,type:t}))},lEt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),mgt[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),mgt[e]=t)},lEt.removeFromCache=function(t){if("string"==typeof t){var e=mgt[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete mgt[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete mgt[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},lEt._globalBatch=0,lEt);function lEt(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=aEt.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof rEt||((t=$gt(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||igt.RESOLUTION,r.mipmap=void 0!==n?n:igt.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:igt.ANISOTROPIC_LEVEL,r.wrapMode=u||igt.WRAP_MODE,r.scaleMode=void 0!==o?o:igt.SCALE_MODE,r.format=l||jxt.RGBA,r.type=c||zxt.UNSIGNED_BYTE,r.target=d||Yxt.TEXTURE_2D,r.alphaMode=void 0!==i?i:Jxt.UNPACK,r.uid=++dgt,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var cEt,dEt=(eEt(fEt,cEt=rEt),fEt.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof rEt?this.addResourceAt(t[r],r):this.addResourceAt($gt(t[r],e),r))},fEt.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},fEt.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},fEt.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");cEt.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},fEt.prototype.unbind=function(t){cEt.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},fEt.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},fEt);function fEt(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=cEt.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new uEt;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var pEt,_Et=(eEt(yEt,pEt=dEt),yEt.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},yEt.prototype.bind=function(t){pEt.prototype.bind.call(this,t),t.target=Yxt.TEXTURE_2D_ARRAY},yEt.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},yEt);function yEt(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=pEt.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var mEt,vEt=(eEt(xEt,mEt=rEt),xEt.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(xgt=xgt||document.createElement("a")).href=t;var r=ngt.parse(xgt.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},xEt.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Jxt.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},xEt.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),mEt.prototype.update.call(this))},xEt.prototype.dispose=function(){this.source=null},xEt);function xEt(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=mEt.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var gEt,EEt=(eEt(TEt,gEt=vEt),TEt.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},TEt);function TEt(t){return gEt.call(this,t)||this}var bEt,AEt=(eEt(SEt,bEt=dEt),SEt.prototype.bind=function(t){bEt.prototype.bind.call(this,t),t.target=Yxt.TEXTURE_CUBE_MAP},SEt.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=Yxt.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},SEt.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<SEt.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},SEt.test=function(t){return Array.isArray(t)&&t.length===SEt.SIDES},SEt.SIDES=6,SEt);function SEt(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==SEt.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=bEt.call(this,6,{width:n,height:s})||this,a=0;a<SEt.SIDES;a++)r.items[a].target=Yxt.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var IEt,REt=(eEt(OEt,IEt=vEt),OEt.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},OEt.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===Jxt.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},OEt.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return IEt.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(IEt.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},OEt.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,IEt.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},OEt.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},OEt);function OEt(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,vEt.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=IEt.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:igt.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var wEt,CEt=(eEt(PEt,wEt=vEt),PEt.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},PEt.prototype._loadSvg=function(){var s=this,o=new Image;vEt.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++dgt,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},PEt.getSize=function(t){var e=PEt.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},PEt.prototype.dispose=function(){wEt.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},PEt.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},PEt.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,PEt);function PEt(t,e){var r=this;return e=e||{},(r=wEt.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var NEt,Rnt=(eEt(MEt,NEt=vEt),MEt.prototype.update=function(t){var e;this.destroyed||(e=Igt.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(NEt.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},MEt.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},MEt.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},MEt.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},MEt.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},MEt.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Igt.shared.add(this.update,this),this._isConnectedToTicker=!0)},MEt.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Igt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},MEt.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},MEt.prototype.dispose=function(){this._isConnectedToTicker&&Igt.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),NEt.prototype.dispose.call(this)},Object.defineProperty(MEt.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Igt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Igt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(MEt.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),MEt.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<MEt.TYPES.indexOf(e)},MEt.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],MEt.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},MEt);function MEt(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];vEt.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||MEt.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=NEt.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var LEt,DEt=(eEt(UEt,LEt=vEt),UEt.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},UEt);function UEt(t){return LEt.call(this,t)||this}Qgt.push(REt,DEt,EEt,Rnt,CEt,sEt,AEt,_Et);var FEt={__proto__:null,Resource:rEt,BaseImageResource:vEt,INSTALLED:Qgt,autoDetectResource:$gt,AbstractMultiResource:dEt,ArrayResource:_Et,BufferResource:sEt,CanvasResource:EEt,CubeResource:AEt,ImageResource:REt,SVGResource:CEt,VideoResource:Rnt,ImageBitmapResource:DEt},AEt=(BEt.prototype.destroy=function(){this.renderer=null},BEt);function BEt(t){this.renderer=t}var kEt,GEt=(eEt(XEt,kEt=sEt),XEt.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Jxt.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},XEt);function XEt(){return null!==kEt&&kEt.apply(this,arguments)||this}var HEt=(Object.defineProperty(VEt.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),VEt.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new uEt(null,{scaleMode:Zxt.NEAREST,resolution:1,mipmap:qxt.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},VEt.prototype.addDepthTexture=function(t){return this.depthTexture=t||new uEt(new GEt(null,{width:this.width,height:this.height}),{scaleMode:Zxt.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:qxt.OFF,format:jxt.DEPTH_COMPONENT,type:zxt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},VEt.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},VEt.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},VEt.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},VEt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},VEt.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},VEt);function VEt(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Tgt("disposeFramebuffer"),this.multisample=rgt.NONE}var jEt,YEt=(eEt(zEt,jEt=uEt),zEt.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},zEt.prototype.dispose=function(){this.framebuffer.dispose(),jEt.prototype.dispose.call(this)},zEt.prototype.destroy=function(){jEt.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},zEt);function zEt(t){var e=this,e=jEt.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=qxt.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new HEt(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var WEt=(ZEt.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=qgt.add(r,qgt.NW),this.x0=s+i*qgt.uX(r),this.y0=e+n*qgt.uY(r),r=qgt.add(r,2),this.x1=s+i*qgt.uX(r),this.y1=e+n*qgt.uY(r),r=qgt.add(r,2),this.x2=s+i*qgt.uX(r),this.y2=e+n*qgt.uY(r),r=qgt.add(r,2),this.x3=s+i*qgt.uX(r),this.y3=e+n*qgt.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},ZEt.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},ZEt);function ZEt(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var KEt,qEt=new WEt,JEt=(eEt(QEt,KEt=pt.a),QEt.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},QEt.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},QEt.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&ygt[t.url]&&QEt.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,QEt.removeFromCache(this),this.textureCacheIds=null},QEt.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new QEt(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},QEt.prototype.updateUvs=function(){this._uvs===qEt&&(this._uvs=new WEt),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},QEt.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=igt.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++dgt),t._pixiId),s=ygt[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=ggt(t)),(s=new QEt(new uEt(t,e))).baseTexture.cacheId=n,uEt.addToCache(s.baseTexture,n),QEt.addToCache(s,n)),s},QEt.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=QEt.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},QEt.fromBuffer=function(t,e,r,i){return new QEt(uEt.fromBuffer(t,e,r,i))},QEt.fromLoader=function(t,e,r,i){t=new uEt(t,Object.assign({scaleMode:igt.SCALE_MODE,resolution:ggt(e)},i)),i=t.resource;i instanceof REt&&(i.url=e);var n=new QEt(t);return uEt.addToCache(n.baseTexture,r=r||e),QEt.addToCache(n,r),r!==e&&(uEt.addToCache(n.baseTexture,e),QEt.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},QEt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),ygt[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),ygt[e]=t)},QEt.removeFromCache=function(t){if("string"==typeof t){var e=ygt[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete ygt[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)ygt[t.textureCacheIds[i]]===t&&delete ygt[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(QEt.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(QEt.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(QEt.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(QEt.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(QEt.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),QEt.prototype.castToBaseTexture=function(){return this.baseTexture},QEt);function QEt(t,e,r,i,n,s){var o=KEt.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new Pgt(0,0,1,1)),t instanceof QEt&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=qEt,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new Fgt(s.x,s.y):new Fgt(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function $Et(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}JEt.EMPTY=new JEt(new uEt),$Et(JEt.EMPTY),$Et(JEt.EMPTY.baseTexture),JEt.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new JEt(new uEt(new EEt(t)))}(),$Et(JEt.WHITE),$Et(JEt.WHITE.baseTexture);var t0t,e0t=(eEt(r0t,t0t=JEt),Object.defineProperty(r0t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),r0t.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},r0t.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},r0t.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(pgt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new r0t(new YEt(t))},r0t);function r0t(t,e){e=t0t.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var i0t=(n0t.prototype.createTexture=function(t,e){e=new YEt(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new e0t(e)},n0t.prototype.getOptimalTexture=function(t,e,r){var i=n0t.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=ugt(t)))<<16|65535&(e=ugt(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},n0t.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},n0t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},n0t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},n0t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},n0t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=n0t.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},n0t.SCREEN_KEY="screen",n0t);function n0t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var s0t=(o0t.prototype.destroy=function(){this.buffer=null},o0t.from=function(t,e,r,i,n){return new o0t(t,e,r,i,n)},o0t);function o0t(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=zxt.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var a0t=0,h0t=(u0t.prototype.update=function(t){this.data=t||this.data,this._updateID++},u0t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},u0t.prototype.destroy=function(){this.dispose(),this.data=null},u0t.from=function(t){return new u0t(t=t instanceof Array?new Float32Array(t):t)},u0t);function u0t(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=a0t++,this.disposeRunner=new Tgt("disposeBuffer")}function l0t(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var c0t={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var d0t={5126:4,5123:2,5121:1},f0t=0,p0t={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},CEt=(_0t.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof h0t||(e instanceof Array&&(e=new Float32Array(e)),e=new h0t(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new s0t(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},_0t.prototype.getAttribute=function(t){return this.attributes[t]},_0t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},_0t.prototype.addIndex=function(t){return t instanceof h0t||(t instanceof Array&&(t=new Uint16Array(t)),t=new h0t(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},_0t.prototype.getIndex=function(){return this.indexBuffer},_0t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new h0t;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*d0t[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=l0t(l);n[c]||(n[c]=new c0t[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},_0t.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},_0t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},_0t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},_0t.prototype.clone=function(){for(var t=new _0t,e=0;e<this.buffers.length;e++)t.buffers[e]=new h0t(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new s0t(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},_0t.merge=function(t){for(var e=new _0t,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new p0t[l0t(o.buffers[s].data)](i[s]),e.buffers[s]=new h0t(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*d0t[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},_0t);function _0t(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=f0t++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Tgt("disposeGeometry"),this.refCount=0}var y0t,m0t=(eEt(v0t,y0t=CEt),v0t);function v0t(){var t=y0t.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var x0t,g0t=(eEt(E0t,x0t=CEt),E0t.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},E0t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},E0t);function E0t(){var t=x0t.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new h0t(t.vertices),t.uvBuffer=new h0t(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var T0t=0,b0t=(A0t.prototype.update=function(){this.dirtyId++},A0t.prototype.add=function(t,e,r){this.uniforms[t]=new A0t(e,r)},A0t.from=function(t,e){return new A0t(t,e)},A0t);function A0t(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=T0t++,this.static=!!e}var S0t=(I0t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},I0t);function I0t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Pgt,this.destinationFrame=new Pgt,this.bindingSourceFrame=new Pgt,this.bindingDestinationFrame=new Pgt,this.filters=[],this.transform=null}var R0t,O0t=[new Fgt,new Fgt,new Fgt,new Fgt],w0t=new Xgt,C0t=(eEt(P0t,R0t=AEt),P0t.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new S0t,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(w0t.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},P0t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,Qxt.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,Qxt.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,Qxt.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},P0t.prototype.bindAndClear=function(t,e){void 0===e&&(e=Qxt.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===Qxt.CLEAR||e===Qxt.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},P0t.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(Vxt.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(Vxt.TRIANGLE_STRIP))},P0t.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(Xgt.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},P0t.prototype.destroy=function(){this.texturePool.clear(!1)},P0t.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},P0t.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},P0t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},P0t.prototype.emptyPool=function(){this.texturePool.clear(!0)},P0t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},P0t.prototype.transformAABB=function(t,e){var r=O0t[0],i=O0t[1],n=O0t[2],s=O0t[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},P0t.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?w0t.copyFrom(n):w0t.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},P0t);function P0t(t){var e=R0t.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new i0t,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new m0t,e.quadUv=new g0t,e.tempRect=new Pgt,e.activeState={},e.globalUniforms=new b0t({outputFrame:new Pgt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var N0t=(M0t.prototype.flush=function(){},M0t.prototype.destroy=function(){this.renderer=null},M0t.prototype.start=function(){},M0t.prototype.stop=function(){this.flush()},M0t.prototype.render=function(t){},M0t);function M0t(t){this.renderer=t}var L0t,D0t=(eEt(U0t,L0t=AEt),U0t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},U0t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},U0t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},U0t.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},U0t.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},U0t);function U0t(t){var e=L0t.call(this,t)||this;return e.emptyRenderer=new N0t(t),e.currentRenderer=e.emptyRenderer,e}var F0t,B0t=0,k0t=(eEt(G0t,F0t=AEt),Object.defineProperty(G0t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),G0t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=B0t++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},G0t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=B0t++,this.renderer.runners.contextChange.emit(t)},G0t.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},G0t.prototype.createContext=function(t,e){var r;if(r=igt.PREFER_ENV>=kxt.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},G0t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},G0t.prototype.handleContextLost=function(t){t.preventDefault()},G0t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},G0t.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},G0t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},G0t.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},G0t);function G0t(t){var e=F0t.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var X0t,H0t=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=rgt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},V0t=new Pgt,j0t=(eEt(Y0t,X0t=AEt),Y0t.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Pgt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,igt.PREFER_ENV===kxt.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},Y0t.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},Y0t.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(Y0t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),Y0t.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=Xxt.COLOR|Xxt.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},Y0t.prototype.initFramebuffer=function(t){var e=this.gl,e=new H0t(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},Y0t.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},Y0t.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},Y0t.prototype.detectSamples=function(t){var e=this.msaaSamples,r=rgt.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?rgt.NONE:r},Y0t.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new HEt(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=V0t).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},Y0t.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},Y0t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},Y0t.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},Y0t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Pgt},Y0t);function Y0t(t){t=X0t.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new HEt(10,10),t.msaaSamples=null,t}var z0t,W0t=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Z0t={5126:4,5123:2,5121:1},K0t=(eEt(q0t,z0t=AEt),q0t.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=igt.PREFER_ENV===kxt.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},q0t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},q0t.prototype.reset=function(){this.unbind()},q0t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},q0t.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},q0t.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},q0t.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*Z0t[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*Z0t[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*Z0t[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new W0t(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},q0t.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},q0t.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},q0t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},q0t.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},q0t.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},q0t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},q0t);function q0t(t){t=z0t.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var J0t=(Q0t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=egt.NONE,this.autoDetect=!0),this._target=null},Q0t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},Q0t);function Q0t(t){void 0===t&&(t=null),this.type=egt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function $0t(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function tTt(t,e,r,i){var n=$0t(t,t.VERTEX_SHADER,e),s=$0t(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function eTt(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function rTt(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return eTt(2*e);case"bvec3":return eTt(3*e);case"bvec4":return eTt(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var iTt,nTt={},sTt=nTt;function oTt(){var t,e;return(sTt===nTt||sTt&&sTt.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=igt.PREFER_ENV>=kxt.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),sTt=e),sTt}function aTt(t,e,r){if("precision"===t.substring(0,9))return r!==tgt.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===tgt.HIGH&&r!==tgt.HIGH?tgt.MEDIUM:e)+" float;\n"+t}var hTt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var uTt=null,lTt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function cTt(t,e){if(!uTt){var r=Object.keys(lTt);uTt={};for(var i=0;i<r.length;++i){var n=r[i];uTt[t[n]]=lTt[n]}}return uTt[e]}var dTt=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],fTt={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},pTt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var _Tt,yTt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function mTt(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=yTt.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var vTt=0,xTt={},gTt=(ETt.prototype.extractData=function(t,e){var r=oTt();r?(e=tTt(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},ETt.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=cTt(e,o.type),a={type:a,name:o.name,size:hTt[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},ETt.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=cTt(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:rTt(h,s.size)}}return r},Object.defineProperty(ETt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(ETt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),ETt.from=function(t,e,r){var i=t+e,n=_gt[i];return n||(_gt[i]=n=new ETt(t,e,r)),n},ETt);function ETt(t,e,r){void 0===r&&(r="pixi-shader"),this.id=vTt++,this.vertexSrc=t||ETt.defaultVertexSrc,this.fragmentSrc=e||ETt.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),xTt[r]?(xTt[r]++,r+="-"+xTt[r]):xTt[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=aTt(this.vertexSrc,igt.PRECISION_VERTEX,tgt.HIGH),this.fragmentSrc=aTt(this.fragmentSrc,igt.PRECISION_FRAGMENT,(iTt||(iTt=tgt.MEDIUM,(r=oTt())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),iTt=r.precision?tgt.HIGH:tgt.MEDIUM)),iTt))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var TTt=(bTt.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},bTt.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(bTt.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),bTt.from=function(t,e,r){return new bTt(gTt.from(t,e),r)},bTt);function bTt(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof b0t?e:new b0t(e):new b0t({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var ATt=(Object.defineProperty(STt.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(STt.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(STt.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(STt.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(STt.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(STt.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(STt.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==Hxt.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(STt.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),STt.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},STt.for2d=function(){var t=new STt;return t.depthTest=!1,t.blend=!0,t},STt);function STt(){this.data=0,this.blendMode=Hxt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var ITt,Rnt=(eEt(RTt,ITt=TTt),RTt.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(RTt.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(RTt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(RTt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),RTt);function RTt(t,e,r){var i=this,e=gTt.from(t||RTt.defaultVertexSrc,e||RTt.defaultFragmentSrc);return(i=ITt.call(this,e,r)||this).padding=0,i.resolution=igt.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new ATt,i}var OTt=new Xgt,wTt=(Object.defineProperty(CTt.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),CTt.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},CTt.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(OTt.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(OTt));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},CTt);function CTt(t,e){this._texture=t,this.mapCoord=new Xgt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var PTt,NTt=(eEt(MTt,PTt=Rnt),MTt.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new wTt(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},MTt);function MTt(t){var e=this,r=new Xgt,e=PTt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var LTt,DTt=(eEt(UTt,LTt=AEt),UTt.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},UTt.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new J0t).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case egt.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case egt.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case egt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},UTt.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case egt.SCISSOR:this.renderer.scissor.pop();break;case egt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case egt.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},UTt.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=egt.SPRITE:(t.type=egt.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=egt.SCISSOR)))},UTt.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new NTt(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},UTt.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},UTt);function UTt(t){t=LTt.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var FTt,DEt=(eEt(BTt,FTt=AEt),BTt.prototype.getStackLength=function(){return this.maskStack.length},BTt.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},BTt.prototype._useCurrent=function(){},BTt.prototype.destroy=function(){FTt.prototype.destroy.call(this),this.maskStack=null},BTt);function BTt(t){t=FTt.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var kTt,GTt=(eEt(XTt,kTt=DEt),XTt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},XTt.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},XTt.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},XTt.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},XTt);function XTt(t){t=kTt.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var HTt,VTt=(eEt(jTt,HTt=DEt),jTt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},jTt.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},jTt.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},jTt.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},jTt.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},jTt);function jTt(t){t=HTt.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var YTt,zTt=(eEt(WTt,YTt=AEt),WTt.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},WTt.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},WTt.prototype.setTransform=function(t){},WTt);function WTt(t){t=YTt.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new Xgt,t.transform=null,t}var ZTt,KTt=new Pgt,qTt=new Pgt,JTt=(eEt(QTt,ZTt=AEt),QTt.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(KTt.width=t.frame.width,KTt.height=t.frame.height,e=KTt),r||(qTt.x=t.frame.x,qTt.y=t.frame.y,qTt.width=e.width,qTt.height=e.height,r=qTt),n=i.framebuffer):(s=o.resolution,e||(KTt.width=o.screen.width,KTt.height=o.screen.height,e=KTt),r||((r=KTt).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},QTt.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},QTt.prototype.resize=function(){this.bind(null)},QTt.prototype.reset=function(){this.bind(null)},QTt);function QTt(t){var e=ZTt.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new Pgt,e.destinationFrame=new Pgt,e.viewportFrame=new Pgt,e}var $Tt=(tbt.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},tbt);function tbt(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var ebt,rbt=0,ibt={textureCount:0},nbt=(eEt(sbt,ebt=AEt),sbt.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof _Tt)return _Tt;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");_Tt=!0===t({a:"b"},"a","b")}catch(t){_Tt=!1}return _Tt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},sbt.prototype.contextChange=function(t){this.gl=t,this.reset()},sbt.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(ibt.textureCount=0,this.syncUniformGroup(t.uniformGroup,ibt)),i},sbt.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},sbt.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},sbt.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},sbt.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<dTt.length;h++)if(dTt[h].test(n,o)){i.push(dTt[h].code(r,o)),a=!0;break}a||(s=(1===n.size?fTt:pTt)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},sbt.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},sbt.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},sbt.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=tTt(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:rTt(a.type,a.size)}}t=new $Tt(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},sbt.prototype.reset=function(){this.program=null,this.shader=null},sbt.prototype.destroy=function(){this.destroyed=!0},sbt);function sbt(t){t=ebt.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=rbt++,t}var obt,abt=(eEt(hbt,obt=AEt),hbt.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[Hxt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.ADD]=[t.ONE,t.ONE],e[Hxt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.NONE]=[0,0],e[Hxt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Hxt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Hxt.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Hxt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Hxt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Hxt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Hxt.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Hxt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Hxt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Hxt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Hxt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},hbt.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},hbt.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},hbt.prototype.setBlend=function(t){this.updateCheck(hbt.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},hbt.prototype.setOffset=function(t){this.updateCheck(hbt.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},hbt.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},hbt.prototype.setDepthMask=function(t){this.gl.depthMask(t)},hbt.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},hbt.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},hbt.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},hbt.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},hbt.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},hbt.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},hbt.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},hbt.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},hbt);function hbt(t){t=obt.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=Hxt.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new ATt,t.defaultState.blend=!0,t}var ubt,lbt=(eEt(cbt,ubt=AEt),cbt.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==$xt.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},cbt.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},cbt.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},cbt);function cbt(t){t=ubt.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=igt.GC_MAX_IDLE,t.checkCountMax=igt.GC_MAX_CHECK_COUNT,t.mode=igt.GC_MODE,t}var dbt,fbt=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},pbt=(eEt(_bt,dbt=AEt),_bt.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new fbt(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new fbt(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},_bt.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},_bt.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},_bt.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},_bt.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==Wxt.FLOAT&&this.renderer.texture.unbind(s)}},_bt.prototype.initTexture=function(t){var e=new fbt(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},_bt.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===zxt.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},_bt.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==Wxt.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},_bt.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&function(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}(this.managedTextures,t,1))},_bt.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==qxt.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=Kxt.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},_bt.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==qxt.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Zxt.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===Zxt.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Zxt.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===Zxt.LINEAR?i.LINEAR:i.NEAREST)},_bt);function _bt(t){t=dbt.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new uEt,t.hasIntegerTextures=!1,t}var ybt,mbt={__proto__:null,FilterSystem:C0t,BatchSystem:D0t,ContextSystem:k0t,FramebufferSystem:j0t,GeometrySystem:K0t,MaskSystem:DTt,ScissorSystem:GTt,StencilSystem:VTt,ProjectionSystem:zTt,RenderTextureSystem:JTt,ShaderSystem:nbt,StateSystem:abt,TextureGCSystem:lbt,TextureSystem:pbt},vbt=new Xgt,AEt=(eEt(xbt,ybt=pt.a),xbt.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(xbt.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(xbt.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),xbt.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},xbt.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=e0t.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return vbt.tx=-i.x,vbt.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:vbt,skipUpdateTransform:!!t.parent}),r},xbt.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=Gxt.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(xbt.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(xbt.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),xbt);function xbt(t,e){void 0===t&&(t=Gxt.UNKNOWN);var r=ybt.call(this)||this;return e=Object.assign({},igt.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new Pgt(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||igt.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(pgt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var gbt;eEt(Ebt,gbt=AEt),Ebt.create=function(t){if(sgt=void 0===sgt?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:igt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():sgt)return new Ebt(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},Ebt.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},Ebt.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof e0t?(pgt("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},Ebt.prototype.resize=function(t,e){gbt.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},Ebt.prototype.reset=function(){return this.runners.reset.emit(),this},Ebt.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},Ebt.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();gbt.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(Ebt.prototype,"extract",{get:function(){return pgt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),Ebt.registerPlugin=function(t,e){(Ebt.__plugins=Ebt.__plugins||{})[t]=e};function Ebt(t){var e,r=gbt.call(this,Gxt.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Tgt("destroy"),contextChange:new Tgt("contextChange"),reset:new Tgt("reset"),update:new Tgt("update"),postrender:new Tgt("postrender"),prerender:new Tgt("prerender"),resize:new Tgt("resize")},r.globalUniforms=new b0t({projectionMatrix:new Xgt},!0),r.addSystem(DTt,"mask").addSystem(k0t,"context").addSystem(abt,"state").addSystem(nbt,"shader").addSystem(pbt,"texture").addSystem(K0t,"geometry").addSystem(j0t,"framebuffer").addSystem(GTt,"scissor").addSystem(VTt,"stencil").addSystem(zTt,"projection").addSystem(lbt,"textureGC").addSystem(C0t,"filter").addSystem(JTt,"renderTexture").addSystem(D0t,"batch"),r.initPlugins(Ebt.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",ogt||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+agt+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+agt+" - "+e+" - http://www.pixijs.com/"),ogt=!0),r.resize(r.options.width,r.options.height),r}var Tbt=function(){this.texArray=null,this.blend=0,this.type=Vxt.TRIANGLES,this.start=0,this.size=0,this.data=null},bbt=(Abt.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},Abt);function Abt(){this.elements=[],this.ids=[],this.count=0}var Sbt=(Object.defineProperty(Ibt.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(Ibt.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(Ibt.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(Ibt.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(Ibt.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),Ibt.prototype.view=function(t){return this[t+"View"]},Ibt.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},Ibt.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Ibt);function Ibt(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var Rbt,Obt=(eEt(wbt,Rbt=N0t),wbt.prototype.contextChange=function(){var t=this.renderer.gl;igt.PREFER_ENV===kxt.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),igt.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=mTt(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},wbt.prototype.initFlushBuffers=function(){for(var t=wbt._drawCallPool,e=wbt._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new Tbt);for(;e.length<i;)e.push(new bbt);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},wbt.prototype.onPrerender=function(){this._flushId=0},wbt.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},wbt.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=wbt._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++uEt._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;uEt._globalBatch=o},wbt.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=wbt._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=hgt[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},wbt.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},wbt.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;igt.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},wbt.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=wbt._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},wbt.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},wbt.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),igt.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},wbt.prototype.stop=function(){this.flush()},wbt.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),Rbt.prototype.destroy.call(this)},wbt.prototype.getAttributeBuffer=function(t){var e=ugt(Math.ceil(t/8)),t=cgt(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new Sbt(e*this.vertexSize*4)),t},wbt.prototype.getIndexBuffer=function(t){var e=ugt(Math.ceil(t/12)),r=cgt(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},wbt.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},wbt._drawCallPool=[],wbt._textureArrayPool=[],wbt);function wbt(t){var e=Rbt.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=ATt.for2d(),e.size=4*igt.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var Cbt=(Pbt.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=b0t.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new gTt(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Xgt,default:this.defaultGroupCache[t]};return new TTt(this.programCache[t],i)},Pbt.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},Pbt);function Pbt(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var Nbt,Mbt=(eEt(Lbt,Nbt=CEt),Lbt);function Lbt(t){void 0===t&&(t=!1);var e=Nbt.call(this)||this;return e._buffer=new h0t(null,t,!1),e._indexBuffer=new h0t(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,zxt.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,zxt.FLOAT).addAttribute("aColor",e._buffer,4,!0,zxt.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,zxt.FLOAT).addIndex(e._indexBuffer),e}var Dbt="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Ubt="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function Fbt(){}(Fbt.create=function(t){var e,t=Object.assign({vertex:Dbt,fragment:Ubt,geometryClass:Mbt,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return eEt(o,e=Obt),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new Cbt(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(Fbt,"defaultVertexSrc",{get:function(){return Dbt},enumerable:!1,configurable:!0}),Object.defineProperty(Fbt,"defaultFragmentTemplate",{get:function(){return Ubt},enumerable:!1,configurable:!0}),Fbt).create();var Bbt={};for(kbt in FEt)!function(t){Object.defineProperty(Bbt,t,{get:function(){return pgt("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),FEt[t]}})}(kbt);var kbt,Gbt={};for(kbt in mbt)!function(t){Object.defineProperty(Gbt,t,{get:function(){return pgt("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),mbt[t]}})}(kbt);var Xbt=function(t,e){return(Xbt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Hbt(t,e){function r(){this.constructor=t}Xbt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Vbt="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }";var jbt,Ybt={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},zbt=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");(CEt={})[CEt.WEBGL_LEGACY=0]="WEBGL_LEGACY",CEt[CEt.WEBGL=1]="WEBGL",CEt[CEt.WEBGL2=2]="WEBGL2",(CEt={})[CEt.UNKNOWN=0]="UNKNOWN",CEt[CEt.WEBGL=1]="WEBGL",CEt[CEt.CANVAS=2]="CANVAS",(CEt={})[CEt.COLOR=16384]="COLOR",CEt[CEt.DEPTH=256]="DEPTH",CEt[CEt.STENCIL=1024]="STENCIL",(CEt={})[CEt.NORMAL=0]="NORMAL",CEt[CEt.ADD=1]="ADD",CEt[CEt.MULTIPLY=2]="MULTIPLY",CEt[CEt.SCREEN=3]="SCREEN",CEt[CEt.OVERLAY=4]="OVERLAY",CEt[CEt.DARKEN=5]="DARKEN",CEt[CEt.LIGHTEN=6]="LIGHTEN",CEt[CEt.COLOR_DODGE=7]="COLOR_DODGE",CEt[CEt.COLOR_BURN=8]="COLOR_BURN",CEt[CEt.HARD_LIGHT=9]="HARD_LIGHT",CEt[CEt.SOFT_LIGHT=10]="SOFT_LIGHT",CEt[CEt.DIFFERENCE=11]="DIFFERENCE",CEt[CEt.EXCLUSION=12]="EXCLUSION",CEt[CEt.HUE=13]="HUE",CEt[CEt.SATURATION=14]="SATURATION",CEt[CEt.COLOR=15]="COLOR",CEt[CEt.LUMINOSITY=16]="LUMINOSITY",CEt[CEt.NORMAL_NPM=17]="NORMAL_NPM",CEt[CEt.ADD_NPM=18]="ADD_NPM",CEt[CEt.SCREEN_NPM=19]="SCREEN_NPM",CEt[CEt.NONE=20]="NONE",CEt[CEt.SRC_OVER=0]="SRC_OVER",CEt[CEt.SRC_IN=21]="SRC_IN",CEt[CEt.SRC_OUT=22]="SRC_OUT",CEt[CEt.SRC_ATOP=23]="SRC_ATOP",CEt[CEt.DST_OVER=24]="DST_OVER",CEt[CEt.DST_IN=25]="DST_IN",CEt[CEt.DST_OUT=26]="DST_OUT",CEt[CEt.DST_ATOP=27]="DST_ATOP",CEt[CEt.ERASE=26]="ERASE",CEt[CEt.SUBTRACT=28]="SUBTRACT",CEt[CEt.XOR=29]="XOR",(CEt={})[CEt.POINTS=0]="POINTS",CEt[CEt.LINES=1]="LINES",CEt[CEt.LINE_LOOP=2]="LINE_LOOP",CEt[CEt.LINE_STRIP=3]="LINE_STRIP",CEt[CEt.TRIANGLES=4]="TRIANGLES",CEt[CEt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",CEt[CEt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(CEt={})[CEt.RGBA=6408]="RGBA",CEt[CEt.RGB=6407]="RGB",CEt[CEt.ALPHA=6406]="ALPHA",CEt[CEt.LUMINANCE=6409]="LUMINANCE",CEt[CEt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",CEt[CEt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",CEt[CEt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(CEt={})[CEt.TEXTURE_2D=3553]="TEXTURE_2D",CEt[CEt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",CEt[CEt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",CEt[CEt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",CEt[CEt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",CEt[CEt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",CEt[CEt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",CEt[CEt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",CEt[CEt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(CEt={})[CEt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",CEt[CEt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",CEt[CEt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",CEt[CEt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",CEt[CEt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",CEt[CEt.FLOAT=5126]="FLOAT",CEt[CEt.HALF_FLOAT=36193]="HALF_FLOAT",(CEt={})[CEt.FLOAT=0]="FLOAT",CEt[CEt.INT=1]="INT",CEt[CEt.UINT=2]="UINT",(CEt={})[CEt.NEAREST=0]="NEAREST",CEt[CEt.LINEAR=1]="LINEAR",(CEt={})[CEt.CLAMP=33071]="CLAMP",CEt[CEt.REPEAT=10497]="REPEAT",CEt[CEt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(CEt={})[CEt.OFF=0]="OFF",CEt[CEt.POW2=1]="POW2",CEt[CEt.ON=2]="ON",CEt[CEt.ON_MANUAL=3]="ON_MANUAL",(CEt={})[CEt.NPM=0]="NPM",CEt[CEt.UNPACK=1]="UNPACK",CEt[CEt.PMA=2]="PMA",CEt[CEt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",CEt[CEt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",CEt[CEt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(CEt=jbt=jbt||{})[CEt.NO=0]="NO",CEt[CEt.YES=1]="YES",CEt[CEt.AUTO=2]="AUTO",CEt[CEt.BLEND=0]="BLEND",CEt[CEt.CLEAR=1]="CLEAR",CEt[CEt.BLIT=2]="BLIT",(CEt={})[CEt.AUTO=0]="AUTO",CEt[CEt.MANUAL=1]="MANUAL",(CEt={}).LOW="lowp",CEt.MEDIUM="mediump",CEt.HIGH="highp",(CEt={})[CEt.NONE=0]="NONE",CEt[CEt.SCISSOR=1]="SCISSOR",CEt[CEt.STENCIL=2]="STENCIL",CEt[CEt.SPRITE=3]="SPRITE",(CEt={})[CEt.NONE=0]="NONE",CEt[CEt.LOW=2]="LOW",CEt[CEt.MEDIUM=4]="MEDIUM",CEt[CEt.HIGH=8]="HIGH";var Wbt,Zbt=(Hbt(Kbt,Wbt=Rnt),Kbt.prototype.apply=function(t,e,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/e.width):this.uniforms.strength=1/r.height*(r.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,i);else{var n=t.getFilterTexture(),s=t.renderer,o=e,a=n;this.state.blend=!1,t.applyFilter(this,o,a,jbt.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(o,jbt.BLIT);var u=this.uniforms.uSampler=a,a=o,o=u;s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,r,i),t.returnFilterTexture(n)}},Object.defineProperty(Kbt.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(Kbt.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),Kbt);function Kbt(t,e,r,i,n){void 0===e&&(e=8),void 0===r&&(r=4),void 0===i&&(i=igt.FILTER_RESOLUTION);var s=this,o=function(t,e){for(var r=Math.ceil(t/2),i=Vbt,n="",s=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);",o=0;o<t;o++)n+=s.replace("%index%",o.toString()).replace("%sampleIndex%",o-(r-1)+".0"),n+="\n";return i=(i=i.replace("%blur%",n)).replace("%size%",t.toString())}(n=void 0===n?5:n,t),n=function(t){for(var e=Ybt[t],r=e.length,i=zbt,n="",s=0;s<t;s++){var o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s.toString());n+=o=o.replace("%value%",e[r<=s?t-s-1:s].toString()),n+="\n"}return i=(i=i.replace("%blur%",n)).replace("%size%",t.toString())}(n);return(s=Wbt.call(this,o,n)||this).horizontal=t,s.resolution=i,s._quality=0,s.quality=r,s.blur=e,s}var qbt,CEt=(Hbt(Jbt,qbt=Rnt),Jbt.prototype.apply=function(t,e,r,i){var n=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);n&&s?(n=t.getFilterTexture(),this.blurXFilter.apply(t,e,n,jbt.CLEAR),this.blurYFilter.apply(t,n,r,i),t.returnFilterTexture(n)):(s?this.blurYFilter:this.blurXFilter).apply(t,e,r,i)},Jbt.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(Jbt.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(Jbt.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(Jbt.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(Jbt.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(Jbt.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Jbt.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),Jbt);function Jbt(t,e,r,i){void 0===t&&(t=8),void 0===e&&(e=4),void 0===r&&(r=igt.FILTER_RESOLUTION),void 0===i&&(i=5);var n=qbt.call(this)||this;return n.blurXFilter=new Zbt(!0,t,e,r,i),n.blurYFilter=new Zbt(!1,t,e,r,i),n.resolution=r,n.quality=e,n.blur=t,n.repeatEdgePixels=!1,n}function Qbt(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var $bt=/iPhone/i,tAt=/iPod/i,eAt=/iPad/i,rAt=/\biOS-universal(?:.+)Mac\b/i,iAt=/\bAndroid(?:.+)Mobile\b/i,nAt=/Android/i,sAt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,oAt=/Silk/i,aAt=/Windows Phone/i,hAt=/\bWindows(?:.+)ARM\b/i,uAt=/BlackBerry/i,lAt=/BB10/i,cAt=/Opera Mini/i,dAt=/\b(CriOS|Chrome)(?:.+)Mobile/i,fAt=/Mobile(?:.+)Firefox\b/i;var pAt=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))($bt)&&!i(aAt),ipod:i(tAt),tablet:!i($bt)&&(i(eAt)||Qbt(e))&&!i(aAt),universal:i(rAt),device:(i($bt)||i(tAt)||i(eAt)||i(rAt)||Qbt(e))&&!i(aAt)},amazon:{phone:i(sAt),tablet:!i(sAt)&&i(oAt),device:i(sAt)||i(oAt)},android:{phone:!i(aAt)&&i(sAt)||!i(aAt)&&i(iAt),tablet:!i(aAt)&&!i(sAt)&&!i(iAt)&&(i(oAt)||i(nAt)),device:!i(aAt)&&(i(sAt)||i(oAt)||i(iAt)||i(nAt))||i(/\bokhttp\b/i)},windows:{phone:i(aAt),tablet:i(hAt),device:i(aAt)||i(hAt)},other:{blackberry:i(uAt),blackberry10:i(lAt),opera:i(cAt),firefox:i(fAt),chrome:i(dAt),device:i(uAt)||i(lAt)||i(cAt)||i(fAt)||i(dAt)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(Rnt={})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(Rnt={})[Rnt.UNKNOWN=0]="UNKNOWN",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.CANVAS=2]="CANVAS",(Rnt={})[Rnt.COLOR=16384]="COLOR",Rnt[Rnt.DEPTH=256]="DEPTH",Rnt[Rnt.STENCIL=1024]="STENCIL",(Rnt={})[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.ADD=1]="ADD",Rnt[Rnt.MULTIPLY=2]="MULTIPLY",Rnt[Rnt.SCREEN=3]="SCREEN",Rnt[Rnt.OVERLAY=4]="OVERLAY",Rnt[Rnt.DARKEN=5]="DARKEN",Rnt[Rnt.LIGHTEN=6]="LIGHTEN",Rnt[Rnt.COLOR_DODGE=7]="COLOR_DODGE",Rnt[Rnt.COLOR_BURN=8]="COLOR_BURN",Rnt[Rnt.HARD_LIGHT=9]="HARD_LIGHT",Rnt[Rnt.SOFT_LIGHT=10]="SOFT_LIGHT",Rnt[Rnt.DIFFERENCE=11]="DIFFERENCE",Rnt[Rnt.EXCLUSION=12]="EXCLUSION",Rnt[Rnt.HUE=13]="HUE",Rnt[Rnt.SATURATION=14]="SATURATION",Rnt[Rnt.COLOR=15]="COLOR",Rnt[Rnt.LUMINOSITY=16]="LUMINOSITY",Rnt[Rnt.NORMAL_NPM=17]="NORMAL_NPM",Rnt[Rnt.ADD_NPM=18]="ADD_NPM",Rnt[Rnt.SCREEN_NPM=19]="SCREEN_NPM",Rnt[Rnt.NONE=20]="NONE",Rnt[Rnt.SRC_OVER=0]="SRC_OVER",Rnt[Rnt.SRC_IN=21]="SRC_IN",Rnt[Rnt.SRC_OUT=22]="SRC_OUT",Rnt[Rnt.SRC_ATOP=23]="SRC_ATOP",Rnt[Rnt.DST_OVER=24]="DST_OVER",Rnt[Rnt.DST_IN=25]="DST_IN",Rnt[Rnt.DST_OUT=26]="DST_OUT",Rnt[Rnt.DST_ATOP=27]="DST_ATOP",Rnt[Rnt.ERASE=26]="ERASE",Rnt[Rnt.SUBTRACT=28]="SUBTRACT",Rnt[Rnt.XOR=29]="XOR",(Rnt={})[Rnt.POINTS=0]="POINTS",Rnt[Rnt.LINES=1]="LINES",Rnt[Rnt.LINE_LOOP=2]="LINE_LOOP",Rnt[Rnt.LINE_STRIP=3]="LINE_STRIP",Rnt[Rnt.TRIANGLES=4]="TRIANGLES",Rnt[Rnt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Rnt[Rnt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(Rnt={})[Rnt.RGBA=6408]="RGBA",Rnt[Rnt.RGB=6407]="RGB",Rnt[Rnt.ALPHA=6406]="ALPHA",Rnt[Rnt.LUMINANCE=6409]="LUMINANCE",Rnt[Rnt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Rnt[Rnt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Rnt[Rnt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt={})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(Rnt={})[Rnt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Rnt[Rnt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Rnt[Rnt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Rnt[Rnt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Rnt[Rnt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Rnt[Rnt.FLOAT=5126]="FLOAT",Rnt[Rnt.HALF_FLOAT=36193]="HALF_FLOAT",(Rnt={})[Rnt.FLOAT=0]="FLOAT",Rnt[Rnt.INT=1]="INT",Rnt[Rnt.UINT=2]="UINT",(Rnt=iSt=iSt||{})[Rnt.NEAREST=0]="NEAREST",Rnt[Rnt.LINEAR=1]="LINEAR",(Rnt=Z1t=Z1t||{})[Rnt.CLAMP=33071]="CLAMP",Rnt[Rnt.REPEAT=10497]="REPEAT",Rnt[Rnt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(Rnt=pSt=pSt||{})[Rnt.OFF=0]="OFF",Rnt[Rnt.POW2=1]="POW2",Rnt[Rnt.ON=2]="ON",Rnt[Rnt.ON_MANUAL=3]="ON_MANUAL",(Rnt={})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Rnt={})[Rnt.NO=0]="NO",Rnt[Rnt.YES=1]="YES",Rnt[Rnt.AUTO=2]="AUTO",Rnt[Rnt.BLEND=0]="BLEND",Rnt[Rnt.CLEAR=1]="CLEAR",Rnt[Rnt.BLIT=2]="BLIT",(Rnt=Y1t=Y1t||{})[Rnt.AUTO=0]="AUTO",Rnt[Rnt.MANUAL=1]="MANUAL",(Rnt=uSt=uSt||{}).LOW="lowp",Rnt.MEDIUM="mediump",Rnt.HIGH="highp",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.SCISSOR=1]="SCISSOR",Rnt[Rnt.STENCIL=2]="STENCIL",Rnt[Rnt.SPRITE=3]="SPRITE",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.LOW=2]="LOW",Rnt[Rnt.MEDIUM=4]="MEDIUM",Rnt[Rnt.HIGH=8]="HIGH";var _At,yAt,mAt,vAt,xAt,gAt,EAt,TAt,bAt,AAt,SAt,IAt,RAt,OAt,wAt,CAt,PAt,NAt,MAt,LAt,DAt,UAt={MIPMAP_TEXTURES:pSt.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(_At=32,mAt=!0,(pAt.tablet||pAt.phone)&&(pAt.apple.device&&(yAt=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(yAt[1],10)<11&&(mAt=!1),pAt.android.device&&(yAt=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(yAt[1],10)<7&&(mAt=!1)),mAt?_At:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Y1t.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:Z1t.CLAMP,SCALE_MODE:iSt.LINEAR,PRECISION_VERTEX:uSt.HIGH,PRECISION_FRAGMENT:pAt.apple.device?uSt.HIGH:uSt.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!pAt.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};(Rnt=vAt=vAt||{})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(pSt=xAt=xAt||{})[pSt.UNKNOWN=0]="UNKNOWN",pSt[pSt.WEBGL=1]="WEBGL",pSt[pSt.CANVAS=2]="CANVAS",(Y1t=gAt=gAt||{})[Y1t.COLOR=16384]="COLOR",Y1t[Y1t.DEPTH=256]="DEPTH",Y1t[Y1t.STENCIL=1024]="STENCIL",(Z1t=EAt=EAt||{})[Z1t.NORMAL=0]="NORMAL",Z1t[Z1t.ADD=1]="ADD",Z1t[Z1t.MULTIPLY=2]="MULTIPLY",Z1t[Z1t.SCREEN=3]="SCREEN",Z1t[Z1t.OVERLAY=4]="OVERLAY",Z1t[Z1t.DARKEN=5]="DARKEN",Z1t[Z1t.LIGHTEN=6]="LIGHTEN",Z1t[Z1t.COLOR_DODGE=7]="COLOR_DODGE",Z1t[Z1t.COLOR_BURN=8]="COLOR_BURN",Z1t[Z1t.HARD_LIGHT=9]="HARD_LIGHT",Z1t[Z1t.SOFT_LIGHT=10]="SOFT_LIGHT",Z1t[Z1t.DIFFERENCE=11]="DIFFERENCE",Z1t[Z1t.EXCLUSION=12]="EXCLUSION",Z1t[Z1t.HUE=13]="HUE",Z1t[Z1t.SATURATION=14]="SATURATION",Z1t[Z1t.COLOR=15]="COLOR",Z1t[Z1t.LUMINOSITY=16]="LUMINOSITY",Z1t[Z1t.NORMAL_NPM=17]="NORMAL_NPM",Z1t[Z1t.ADD_NPM=18]="ADD_NPM",Z1t[Z1t.SCREEN_NPM=19]="SCREEN_NPM",Z1t[Z1t.NONE=20]="NONE",Z1t[Z1t.SRC_OVER=0]="SRC_OVER",Z1t[Z1t.SRC_IN=21]="SRC_IN",Z1t[Z1t.SRC_OUT=22]="SRC_OUT",Z1t[Z1t.SRC_ATOP=23]="SRC_ATOP",Z1t[Z1t.DST_OVER=24]="DST_OVER",Z1t[Z1t.DST_IN=25]="DST_IN",Z1t[Z1t.DST_OUT=26]="DST_OUT",Z1t[Z1t.DST_ATOP=27]="DST_ATOP",Z1t[Z1t.ERASE=26]="ERASE",Z1t[Z1t.SUBTRACT=28]="SUBTRACT",Z1t[Z1t.XOR=29]="XOR",(iSt=TAt=TAt||{})[iSt.POINTS=0]="POINTS",iSt[iSt.LINES=1]="LINES",iSt[iSt.LINE_LOOP=2]="LINE_LOOP",iSt[iSt.LINE_STRIP=3]="LINE_STRIP",iSt[iSt.TRIANGLES=4]="TRIANGLES",iSt[iSt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",iSt[iSt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(uSt=bAt=bAt||{})[uSt.RGBA=6408]="RGBA",uSt[uSt.RGB=6407]="RGB",uSt[uSt.ALPHA=6406]="ALPHA",uSt[uSt.LUMINANCE=6409]="LUMINANCE",uSt[uSt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",uSt[uSt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",uSt[uSt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt=AAt=AAt||{})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(pSt=SAt=SAt||{})[pSt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",pSt[pSt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",pSt[pSt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",pSt[pSt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",pSt[pSt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",pSt[pSt.FLOAT=5126]="FLOAT",pSt[pSt.HALF_FLOAT=36193]="HALF_FLOAT",(Y1t=IAt=IAt||{})[Y1t.FLOAT=0]="FLOAT",Y1t[Y1t.INT=1]="INT",Y1t[Y1t.UINT=2]="UINT",(Z1t=RAt=RAt||{})[Z1t.NEAREST=0]="NEAREST",Z1t[Z1t.LINEAR=1]="LINEAR",(iSt=OAt=OAt||{})[iSt.CLAMP=33071]="CLAMP",iSt[iSt.REPEAT=10497]="REPEAT",iSt[iSt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(uSt=wAt=wAt||{})[uSt.OFF=0]="OFF",uSt[uSt.POW2=1]="POW2",uSt[uSt.ON=2]="ON",uSt[uSt.ON_MANUAL=3]="ON_MANUAL",(Rnt=CAt=CAt||{})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(pSt=PAt=PAt||{})[pSt.NO=0]="NO",pSt[pSt.YES=1]="YES",pSt[pSt.AUTO=2]="AUTO",pSt[pSt.BLEND=0]="BLEND",pSt[pSt.CLEAR=1]="CLEAR",pSt[pSt.BLIT=2]="BLIT",(Y1t=NAt=NAt||{})[Y1t.AUTO=0]="AUTO",Y1t[Y1t.MANUAL=1]="MANUAL",(Z1t=MAt=MAt||{}).LOW="lowp",Z1t.MEDIUM="mediump",Z1t.HIGH="highp",(iSt=LAt=LAt||{})[iSt.NONE=0]="NONE",iSt[iSt.SCISSOR=1]="SCISSOR",iSt[iSt.STENCIL=2]="STENCIL",iSt[iSt.SPRITE=3]="SPRITE",(uSt=DAt=DAt||{})[uSt.NONE=0]="NONE",uSt[uSt.LOW=2]="LOW",uSt[uSt.MEDIUM=4]="MEDIUM",uSt[uSt.HIGH=8]="HIGH";r(21);var FAt={parse:_t.parse,format:_t.format,resolve:_t.resolve};UAt.RETINA_PREFIX=/@([0-9\.]+)x/;var BAt,kAt=UAt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,GAt="6.0.4";var XAt=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[EAt.NORMAL_NPM]=EAt.NORMAL,t[EAt.ADD_NPM]=EAt.ADD,t[EAt.SCREEN_NPM]=EAt.SCREEN,e[EAt.NORMAL]=EAt.NORMAL_NPM,e[EAt.ADD]=EAt.ADD_NPM,e[EAt.SCREEN]=EAt.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function HAt(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function VAt(t){return!(t&t-1||!t)}function jAt(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}var YAt=0;var zAt={};function WAt(t,e,r){var i;void 0===r&&(r=3),zAt[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),zAt[e]=!0)}var ZAt={},KAt=Object.create(null),qAt=Object.create(null);JAt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},JAt.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},JAt.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(JAt.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(JAt.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function JAt(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||UAt.RESOLUTION,this.resize(t,e)}var QAt;function $At(t,e){t=UAt.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var t1t,e1t=(r1t.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},r1t.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},r1t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},r1t.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},r1t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},r1t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},r1t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(r1t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(r1t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),r1t);function r1t(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(e1t.prototype,{dispatch:{value:e1t.prototype.emit},run:{value:e1t.prototype.emit}}),UAt.TARGET_FPMS=.06,(Rnt=t1t=t1t||{})[Rnt.INTERACTION=50]="INTERACTION",Rnt[Rnt.HIGH=25]="HIGH",Rnt[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.LOW=-25]="LOW",Rnt[Rnt.UTILITY=-50]="UTILITY";var i1t=(n1t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},n1t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},n1t.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},n1t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},n1t);function n1t(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var s1t=(o1t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},o1t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},o1t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},o1t.prototype.add=function(t,e,r){return void 0===r&&(r=t1t.NORMAL),this._addListener(new i1t(t,e,r))},o1t.prototype.addOnce=function(t,e,r){return void 0===r&&(r=t1t.NORMAL),this._addListener(new i1t(t,e,r,!0))},o1t.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},o1t.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(o1t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),o1t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},o1t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},o1t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},o1t.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*UAt.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(o1t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(o1t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,UAt.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(o1t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(o1t,"shared",{get:function(){var t;return o1t._shared||((t=o1t._shared=new o1t).autoStart=!0,t._protected=!0),o1t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(o1t,"system",{get:function(){var t;return o1t._system||((t=o1t._system=new o1t).autoStart=!0,t._protected=!0),o1t._system},enumerable:!1,configurable:!0}),o1t);function o1t(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new i1t(null,null,1/0),this.deltaMS=1/UAt.TARGET_FPMS,this.elapsedMS=1/UAt.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}a1t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,t1t.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?s1t.shared:new s1t,t.autoStart&&this.start()},a1t.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function a1t(){}var h1t,u1t=2*Math.PI;Math.PI,Math.PI;(pSt=h1t=h1t||{})[pSt.POLY=0]="POLY",pSt[pSt.RECT=1]="RECT",pSt[pSt.CIRC=2]="CIRC",pSt[pSt.ELIP=3]="ELIP",pSt[pSt.RREC=4]="RREC";var l1t=(Object.defineProperty(c1t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(c1t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(c1t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(c1t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(c1t,"EMPTY",{get:function(){return new c1t(0,0,0,0)},enumerable:!1,configurable:!0}),c1t.prototype.clone=function(){return new c1t(this.x,this.y,this.width,this.height)},c1t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},c1t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},c1t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},c1t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},c1t.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},c1t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},c1t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},c1t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},c1t);function c1t(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=h1t.RECT}d1t.prototype.clone=function(){return new d1t(this.x,this.y,this.radius)},d1t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},d1t.prototype.getBounds=function(){return new l1t(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},d1t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function d1t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=h1t.CIRC}f1t.prototype.clone=function(){return new f1t(this.x,this.y,this.width,this.height)},f1t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},f1t.prototype.getBounds=function(){return new l1t(this.x-this.width,this.y-this.height,this.width,this.height)},f1t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function f1t(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=h1t.ELIP}p1t.prototype.clone=function(){var t=new p1t(this.points.slice());return t.closeStroke=this.closeStroke,t},p1t.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},p1t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function p1t(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=h1t.POLY,this.closeStroke=!0}_1t.prototype.clone=function(){return new _1t(this.x,this.y,this.width,this.height,this.radius)},_1t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},_1t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function _1t(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=h1t.RREC}var y1t=(m1t.prototype.clone=function(){return new m1t(this.x,this.y)},m1t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},m1t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},m1t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},m1t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},m1t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},m1t);function m1t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var v1t=(x1t.prototype.clone=function(t,e){return new x1t(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},x1t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},x1t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},x1t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},x1t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},x1t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(x1t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(x1t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),x1t);function x1t(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var g1t=(E1t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},E1t.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},E1t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},E1t.prototype.apply=function(t,e){e=e||new y1t;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},E1t.prototype.applyInverse=function(t,e){e=e||new y1t;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},E1t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},E1t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},E1t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},E1t.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},E1t.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},E1t.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},E1t.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(u1t-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},E1t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},E1t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},E1t.prototype.clone=function(){var t=new E1t;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},E1t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},E1t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},E1t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(E1t,"IDENTITY",{get:function(){return new E1t},enumerable:!1,configurable:!0}),Object.defineProperty(E1t,"TEMP_MATRIX",{get:function(){return new E1t},enumerable:!1,configurable:!0}),E1t);function E1t(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var T1t=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],b1t=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],A1t=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],S1t=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],I1t=[],R1t=[],O1t=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];I1t.push(e);for(var r=0;r<16;r++)for(var i=O1t(T1t[t]*T1t[r]+A1t[t]*b1t[r]),n=O1t(b1t[t]*T1t[r]+S1t[t]*b1t[r]),s=O1t(T1t[t]*A1t[r]+A1t[t]*S1t[r]),o=O1t(b1t[t]*A1t[r]+S1t[t]*S1t[r]),a=0;a<16;a++)if(T1t[a]===i&&b1t[a]===n&&A1t[a]===s&&S1t[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new g1t;h.set(T1t[t],b1t[t],A1t[t],S1t[t],0,0),R1t.push(h)}}();var w1t={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return T1t[t]},uY:function(t){return b1t[t]},vX:function(t){return A1t[t]},vY:function(t){return S1t[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return I1t[t][e]},sub:function(t,e){return I1t[t][w1t.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?w1t.S:w1t.N:2*Math.abs(e)<=Math.abs(t)?0<t?w1t.E:w1t.W:0<e?0<t?w1t.SE:w1t.SW:0<t?w1t.NE:w1t.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=R1t[w1t.inv(e)];e.tx=r,e.ty=i,t.append(e)}};C1t.prototype.onChange=function(){this._localID++},C1t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},C1t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},C1t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},C1t.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},C1t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(C1t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),C1t.IDENTITY=new C1t;function C1t(){this.worldTransform=new g1t,this.localTransform=new g1t,this.position=new v1t(this.onChange,this,0,0),this.scale=new v1t(this.onChange,this,1,1),this.pivot=new v1t(this.onChange,this,0,0),this.skew=new v1t(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}UAt.PREFER_ENV=pAt.any?vAt.WEBGL:vAt.WEBGL2,UAt.STRICT_TEXTURE_CACHE=!1;var P1t=[];function N1t(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=P1t.length-1;0<=n;--n){var s=P1t[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var M1t=function(t,e){return(M1t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function L1t(t,e){function r(){this.constructor=t}M1t(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var D1t=(U1t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},U1t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},U1t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(U1t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),U1t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},U1t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(U1t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(U1t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),U1t.prototype.style=function(t,e,r){return!1},U1t.prototype.dispose=function(){},U1t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},U1t.test=function(t,e){return!1},U1t);function U1t(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new e1t("setRealSize"),this.onUpdate=new e1t("update"),this.onError=new e1t("onError")}var F1t,B1t=(L1t(k1t,F1t=D1t),k1t.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===CAt.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},k1t.prototype.dispose=function(){this.data=null},k1t.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},k1t);function k1t(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=F1t.call(this,e,i)||this).data=t,r}var G1t,X1t={scaleMode:RAt.NEAREST,format:bAt.RGBA,alphaMode:CAt.NPM},H1t=(L1t(V1t,G1t=pt.a),Object.defineProperty(V1t.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(V1t.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),V1t.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},V1t.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},V1t.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},V1t.prototype._refreshPOT=function(){this.isPowerOfTwo=VAt(this.realWidth)&&VAt(this.realHeight)},V1t.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},V1t.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},V1t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},V1t.prototype.onError=function(t){this.emit("error",this,t)},V1t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete qAt[this.cacheId],delete KAt[this.cacheId],this.cacheId=null),this.dispose(),V1t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},V1t.prototype.dispose=function(){this.emit("dispose",this)},V1t.prototype.castToBaseTexture=function(){return this},V1t.from=function(t,e,r){void 0===r&&(r=UAt.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++YAt),t._pixiId),s=qAt[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new V1t(t,e)).cacheId=n,V1t.addToCache(s,n)),s},V1t.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new B1t(t,{width:e,height:r}),t=t instanceof Float32Array?SAt.FLOAT:SAt.UNSIGNED_BYTE;return new V1t(n,Object.assign(X1t,i||{width:e,height:r,type:t}))},V1t.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),qAt[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),qAt[e]=t)},V1t.removeFromCache=function(t){if("string"==typeof t){var e=qAt[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete qAt[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete qAt[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},V1t._globalBatch=0,V1t);function V1t(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=G1t.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof D1t||((t=N1t(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||UAt.RESOLUTION,r.mipmap=void 0!==n?n:UAt.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:UAt.ANISOTROPIC_LEVEL,r.wrapMode=u||UAt.WRAP_MODE,r.scaleMode=void 0!==o?o:UAt.SCALE_MODE,r.format=l||bAt.RGBA,r.type=c||SAt.UNSIGNED_BYTE,r.target=d||AAt.TEXTURE_2D,r.alphaMode=void 0!==i?i:CAt.UNPACK,r.uid=++YAt,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var j1t,Y1t=(L1t(z1t,j1t=D1t),z1t.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof D1t?this.addResourceAt(t[r],r):this.addResourceAt(N1t(t[r],e),r))},z1t.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},z1t.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},z1t.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");j1t.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},z1t.prototype.unbind=function(t){j1t.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},z1t.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},z1t);function z1t(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=j1t.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new H1t;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var W1t,Z1t=(L1t(K1t,W1t=Y1t),K1t.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},K1t.prototype.bind=function(t){W1t.prototype.bind.call(this,t),t.target=AAt.TEXTURE_2D_ARRAY},K1t.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},K1t);function K1t(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=W1t.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var q1t,J1t=(L1t(Q1t,q1t=D1t),Q1t.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(QAt=QAt||document.createElement("a")).href=t;var r=FAt.parse(QAt.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},Q1t.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===CAt.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},Q1t.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),q1t.prototype.update.call(this))},Q1t.prototype.dispose=function(){this.source=null},Q1t);function Q1t(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=q1t.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var $1t,tSt=(L1t(eSt,$1t=J1t),eSt.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},eSt);function eSt(t){return $1t.call(this,t)||this}var rSt,iSt=(L1t(nSt,rSt=Y1t),nSt.prototype.bind=function(t){rSt.prototype.bind.call(this,t),t.target=AAt.TEXTURE_CUBE_MAP},nSt.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=AAt.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},nSt.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<nSt.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},nSt.test=function(t){return Array.isArray(t)&&t.length===nSt.SIDES},nSt.SIDES=6,nSt);function nSt(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==nSt.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=rSt.call(this,6,{width:n,height:s})||this,a=0;a<nSt.SIDES;a++)r.items[a].target=AAt.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var sSt,oSt=(L1t(aSt,sSt=J1t),aSt.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},aSt.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===CAt.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},aSt.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return sSt.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(sSt.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},aSt.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,sSt.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},aSt.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},aSt);function aSt(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,J1t.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=sSt.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:UAt.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var hSt,uSt=(L1t(lSt,hSt=J1t),lSt.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},lSt.prototype._loadSvg=function(){var s=this,o=new Image;J1t.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++YAt,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},lSt.getSize=function(t){var e=lSt.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},lSt.prototype.dispose=function(){hSt.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},lSt.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},lSt.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,lSt);function lSt(t,e){var r=this;return e=e||{},(r=hSt.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var cSt,Rnt=(L1t(dSt,cSt=J1t),dSt.prototype.update=function(t){var e;this.destroyed||(e=s1t.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(cSt.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},dSt.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},dSt.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},dSt.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},dSt.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},dSt.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(s1t.shared.add(this.update,this),this._isConnectedToTicker=!0)},dSt.prototype._onPlayStop=function(){this._isConnectedToTicker&&(s1t.shared.remove(this.update,this),this._isConnectedToTicker=!1)},dSt.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},dSt.prototype.dispose=function(){this._isConnectedToTicker&&s1t.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),cSt.prototype.dispose.call(this)},Object.defineProperty(dSt.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(s1t.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(s1t.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(dSt.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),dSt.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<dSt.TYPES.indexOf(e)},dSt.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],dSt.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},dSt);function dSt(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];J1t.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||dSt.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=cSt.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var fSt,pSt=(L1t(_St,fSt=J1t),_St.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},_St);function _St(t){return fSt.call(this,t)||this}P1t.push(oSt,pSt,tSt,Rnt,uSt,B1t,iSt,Z1t);var ySt={__proto__:null,Resource:D1t,BaseImageResource:J1t,INSTALLED:P1t,autoDetectResource:N1t,AbstractMultiResource:Y1t,ArrayResource:Z1t,BufferResource:B1t,CanvasResource:tSt,CubeResource:iSt,ImageResource:oSt,SVGResource:uSt,VideoResource:Rnt,ImageBitmapResource:pSt},uSt=(mSt.prototype.destroy=function(){this.renderer=null},mSt);function mSt(t){this.renderer=t}var vSt,xSt=(L1t(gSt,vSt=B1t),gSt.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===CAt.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},gSt);function gSt(){return null!==vSt&&vSt.apply(this,arguments)||this}var ESt=(Object.defineProperty(TSt.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),TSt.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new H1t(null,{scaleMode:RAt.NEAREST,resolution:1,mipmap:wAt.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},TSt.prototype.addDepthTexture=function(t){return this.depthTexture=t||new H1t(new xSt(null,{width:this.width,height:this.height}),{scaleMode:RAt.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:wAt.OFF,format:bAt.DEPTH_COMPONENT,type:SAt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},TSt.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},TSt.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},TSt.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},TSt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},TSt.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},TSt);function TSt(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new e1t("disposeFramebuffer"),this.multisample=DAt.NONE}var bSt,ASt=(L1t(SSt,bSt=H1t),SSt.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},SSt.prototype.dispose=function(){this.framebuffer.dispose(),bSt.prototype.dispose.call(this)},SSt.prototype.destroy=function(){bSt.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},SSt);function SSt(t){var e=this,e=bSt.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=wAt.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new ESt(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var ISt=(RSt.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=w1t.add(r,w1t.NW),this.x0=s+i*w1t.uX(r),this.y0=e+n*w1t.uY(r),r=w1t.add(r,2),this.x1=s+i*w1t.uX(r),this.y1=e+n*w1t.uY(r),r=w1t.add(r,2),this.x2=s+i*w1t.uX(r),this.y2=e+n*w1t.uY(r),r=w1t.add(r,2),this.x3=s+i*w1t.uX(r),this.y3=e+n*w1t.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},RSt.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},RSt);function RSt(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var OSt,wSt=new ISt,CSt=(L1t(PSt,OSt=pt.a),PSt.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},PSt.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},PSt.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&KAt[t.url]&&PSt.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,PSt.removeFromCache(this),this.textureCacheIds=null},PSt.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new PSt(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},PSt.prototype.updateUvs=function(){this._uvs===wSt&&(this._uvs=new ISt),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},PSt.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=UAt.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++YAt),t._pixiId),s=KAt[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=$At(t)),(s=new PSt(new H1t(t,e))).baseTexture.cacheId=n,H1t.addToCache(s.baseTexture,n),PSt.addToCache(s,n)),s},PSt.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=PSt.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},PSt.fromBuffer=function(t,e,r,i){return new PSt(H1t.fromBuffer(t,e,r,i))},PSt.fromLoader=function(t,e,r,i){t=new H1t(t,Object.assign({scaleMode:UAt.SCALE_MODE,resolution:$At(e)},i)),i=t.resource;i instanceof oSt&&(i.url=e);var n=new PSt(t);return H1t.addToCache(n.baseTexture,r=r||e),PSt.addToCache(n,r),r!==e&&(H1t.addToCache(n.baseTexture,e),PSt.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},PSt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),KAt[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),KAt[e]=t)},PSt.removeFromCache=function(t){if("string"==typeof t){var e=KAt[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete KAt[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)KAt[t.textureCacheIds[i]]===t&&delete KAt[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(PSt.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(PSt.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(PSt.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(PSt.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(PSt.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),PSt.prototype.castToBaseTexture=function(){return this.baseTexture},PSt);function PSt(t,e,r,i,n,s){var o=OSt.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new l1t(0,0,1,1)),t instanceof PSt&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=wSt,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new y1t(s.x,s.y):new y1t(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function NSt(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}CSt.EMPTY=new CSt(new H1t),NSt(CSt.EMPTY),NSt(CSt.EMPTY.baseTexture),CSt.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new CSt(new H1t(new tSt(t)))}(),NSt(CSt.WHITE),NSt(CSt.WHITE.baseTexture);var MSt,LSt=(L1t(DSt,MSt=CSt),Object.defineProperty(DSt.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),DSt.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},DSt.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},DSt.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(WAt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new DSt(new ASt(t))},DSt);function DSt(t,e){e=MSt.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var USt=(FSt.prototype.createTexture=function(t,e){e=new ASt(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new LSt(e)},FSt.prototype.getOptimalTexture=function(t,e,r){var i=FSt.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=HAt(t)))<<16|65535&(e=HAt(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},FSt.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},FSt.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},FSt.prototype.returnFilterTexture=function(t){this.returnTexture(t)},FSt.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},FSt.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=FSt.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},FSt.SCREEN_KEY="screen",FSt);function FSt(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var BSt=(kSt.prototype.destroy=function(){this.buffer=null},kSt.from=function(t,e,r,i,n){return new kSt(t,e,r,i,n)},kSt);function kSt(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=SAt.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var GSt=0,XSt=(HSt.prototype.update=function(t){this.data=t||this.data,this._updateID++},HSt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},HSt.prototype.destroy=function(){this.dispose(),this.data=null},HSt.from=function(t){return new HSt(t=t instanceof Array?new Float32Array(t):t)},HSt);function HSt(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=GSt++,this.disposeRunner=new e1t("disposeBuffer")}function VSt(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var jSt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var YSt={5126:4,5123:2,5121:1},zSt=0,WSt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Rnt=(ZSt.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof XSt||(e instanceof Array&&(e=new Float32Array(e)),e=new XSt(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new BSt(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},ZSt.prototype.getAttribute=function(t){return this.attributes[t]},ZSt.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},ZSt.prototype.addIndex=function(t){return t instanceof XSt||(t instanceof Array&&(t=new Uint16Array(t)),t=new XSt(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},ZSt.prototype.getIndex=function(){return this.indexBuffer},ZSt.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new XSt;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*YSt[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=VSt(l);n[c]||(n[c]=new jSt[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},ZSt.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},ZSt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},ZSt.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},ZSt.prototype.clone=function(){for(var t=new ZSt,e=0;e<this.buffers.length;e++)t.buffers[e]=new XSt(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new BSt(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},ZSt.merge=function(t){for(var e=new ZSt,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new WSt[VSt(o.buffers[s].data)](i[s]),e.buffers[s]=new XSt(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*YSt[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},ZSt);function ZSt(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=zSt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new e1t("disposeGeometry"),this.refCount=0}var KSt,qSt=(L1t(JSt,KSt=Rnt),JSt);function JSt(){var t=KSt.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var QSt,$St=(L1t(tIt,QSt=Rnt),tIt.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},tIt.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},tIt);function tIt(){var t=QSt.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new XSt(t.vertices),t.uvBuffer=new XSt(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var eIt=0,rIt=(iIt.prototype.update=function(){this.dirtyId++},iIt.prototype.add=function(t,e,r){this.uniforms[t]=new iIt(e,r)},iIt.from=function(t,e){return new iIt(t,e)},iIt);function iIt(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=eIt++,this.static=!!e}var nIt=(sIt.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},sIt);function sIt(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new l1t,this.destinationFrame=new l1t,this.bindingSourceFrame=new l1t,this.bindingDestinationFrame=new l1t,this.filters=[],this.transform=null}var oIt,aIt=[new y1t,new y1t,new y1t,new y1t],hIt=new g1t,uIt=(L1t(lIt,oIt=uSt),lIt.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new nIt,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(hIt.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},lIt.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,PAt.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,PAt.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,PAt.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},lIt.prototype.bindAndClear=function(t,e){void 0===e&&(e=PAt.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===PAt.CLEAR||e===PAt.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},lIt.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(TAt.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(TAt.TRIANGLE_STRIP))},lIt.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(g1t.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},lIt.prototype.destroy=function(){this.texturePool.clear(!1)},lIt.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},lIt.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},lIt.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},lIt.prototype.emptyPool=function(){this.texturePool.clear(!0)},lIt.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},lIt.prototype.transformAABB=function(t,e){var r=aIt[0],i=aIt[1],n=aIt[2],s=aIt[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},lIt.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?hIt.copyFrom(n):hIt.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},lIt);function lIt(t){var e=oIt.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new USt,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new qSt,e.quadUv=new $St,e.tempRect=new l1t,e.activeState={},e.globalUniforms=new rIt({outputFrame:new l1t,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var cIt=(dIt.prototype.flush=function(){},dIt.prototype.destroy=function(){this.renderer=null},dIt.prototype.start=function(){},dIt.prototype.stop=function(){this.flush()},dIt.prototype.render=function(t){},dIt);function dIt(t){this.renderer=t}var fIt,pIt=(L1t(_It,fIt=uSt),_It.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},_It.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},_It.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},_It.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},_It.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},_It);function _It(t){var e=fIt.call(this,t)||this;return e.emptyRenderer=new cIt(t),e.currentRenderer=e.emptyRenderer,e}var yIt,mIt=0,vIt=(L1t(xIt,yIt=uSt),Object.defineProperty(xIt.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),xIt.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=mIt++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},xIt.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=mIt++,this.renderer.runners.contextChange.emit(t)},xIt.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},xIt.prototype.createContext=function(t,e){var r;if(r=UAt.PREFER_ENV>=vAt.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},xIt.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},xIt.prototype.handleContextLost=function(t){t.preventDefault()},xIt.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},xIt.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},xIt.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},xIt.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},xIt);function xIt(t){var e=yIt.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var gIt,EIt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=DAt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},TIt=new l1t,bIt=(L1t(AIt,gIt=uSt),AIt.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new l1t,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,UAt.PREFER_ENV===vAt.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},AIt.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},AIt.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(AIt.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),AIt.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=gAt.COLOR|gAt.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},AIt.prototype.initFramebuffer=function(t){var e=this.gl,e=new EIt(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},AIt.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},AIt.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},AIt.prototype.detectSamples=function(t){var e=this.msaaSamples,r=DAt.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?DAt.NONE:r},AIt.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new ESt(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=TIt).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},AIt.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},AIt.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},AIt.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},AIt.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new l1t},AIt);function AIt(t){t=gIt.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new ESt(10,10),t.msaaSamples=null,t}var SIt,IIt=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},RIt={5126:4,5123:2,5121:1},OIt=(L1t(wIt,SIt=uSt),wIt.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=UAt.PREFER_ENV===vAt.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},wIt.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},wIt.prototype.reset=function(){this.unbind()},wIt.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},wIt.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},wIt.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},wIt.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*RIt[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*RIt[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*RIt[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new IIt(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},wIt.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},wIt.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},wIt.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},wIt.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},wIt.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},wIt.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},wIt);function wIt(t){t=SIt.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var CIt=(PIt.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=LAt.NONE,this.autoDetect=!0),this._target=null},PIt.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},PIt);function PIt(t){void 0===t&&(t=null),this.type=LAt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function NIt(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function MIt(t,e,r,i){var n=NIt(t,t.VERTEX_SHADER,e),s=NIt(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function LIt(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function DIt(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return LIt(2*e);case"bvec3":return LIt(3*e);case"bvec4":return LIt(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var UIt,FIt={},BIt=FIt;function kIt(){var t,e;return(BIt===FIt||BIt&&BIt.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=UAt.PREFER_ENV>=vAt.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),BIt=e),BIt}function GIt(t,e,r){if("precision"===t.substring(0,9))return r!==MAt.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===MAt.HIGH&&r!==MAt.HIGH?MAt.MEDIUM:e)+" float;\n"+t}var XIt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var HIt=null,VIt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function jIt(t,e){if(!HIt){var r=Object.keys(VIt);HIt={};for(var i=0;i<r.length;++i){var n=r[i];HIt[t[n]]=VIt[n]}}return HIt[e]}var YIt=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],zIt={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},WIt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var ZIt,KIt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function qIt(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=KIt.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var JIt=0,QIt={},$It=(tRt.prototype.extractData=function(t,e){var r=kIt();r?(e=MIt(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},tRt.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=jIt(e,o.type),a={type:a,name:o.name,size:XIt[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},tRt.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=jIt(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:DIt(h,s.size)}}return r},Object.defineProperty(tRt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(tRt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),tRt.from=function(t,e,r){var i=t+e,n=ZAt[i];return n||(ZAt[i]=n=new tRt(t,e,r)),n},tRt);function tRt(t,e,r){void 0===r&&(r="pixi-shader"),this.id=JIt++,this.vertexSrc=t||tRt.defaultVertexSrc,this.fragmentSrc=e||tRt.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),QIt[r]?(QIt[r]++,r+="-"+QIt[r]):QIt[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=GIt(this.vertexSrc,UAt.PRECISION_VERTEX,MAt.HIGH),this.fragmentSrc=GIt(this.fragmentSrc,UAt.PRECISION_FRAGMENT,(UIt||(UIt=MAt.MEDIUM,(r=kIt())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),UIt=r.precision?MAt.HIGH:MAt.MEDIUM)),UIt))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var eRt=(rRt.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},rRt.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(rRt.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),rRt.from=function(t,e,r){return new rRt($It.from(t,e),r)},rRt);function rRt(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof rIt?e:new rIt(e):new rIt({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var iRt=(Object.defineProperty(nRt.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(nRt.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(nRt.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(nRt.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(nRt.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(nRt.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(nRt.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==EAt.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(nRt.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),nRt.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},nRt.for2d=function(){var t=new nRt;return t.depthTest=!1,t.blend=!0,t},nRt);function nRt(){this.data=0,this.blendMode=EAt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var sRt,oRt=(L1t(aRt,sRt=eRt),aRt.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(aRt.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(aRt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(aRt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),aRt);function aRt(t,e,r){var i=this,e=$It.from(t||aRt.defaultVertexSrc,e||aRt.defaultFragmentSrc);return(i=sRt.call(this,e,r)||this).padding=0,i.resolution=UAt.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new iRt,i}var hRt=new g1t,uRt=(Object.defineProperty(lRt.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),lRt.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},lRt.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(hRt.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(hRt));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},lRt);function lRt(t,e){this._texture=t,this.mapCoord=new g1t,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var cRt,dRt=(L1t(fRt,cRt=oRt),fRt.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new uRt(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},fRt);function fRt(t){var e=this,r=new g1t,e=cRt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var pRt,_Rt=(L1t(yRt,pRt=uSt),yRt.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},yRt.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new CIt).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case LAt.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case LAt.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case LAt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},yRt.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case LAt.SCISSOR:this.renderer.scissor.pop();break;case LAt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case LAt.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},yRt.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=LAt.SPRITE:(t.type=LAt.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=LAt.SCISSOR)))},yRt.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new dRt(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},yRt.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},yRt);function yRt(t){t=pRt.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var mRt,pSt=(L1t(vRt,mRt=uSt),vRt.prototype.getStackLength=function(){return this.maskStack.length},vRt.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},vRt.prototype._useCurrent=function(){},vRt.prototype.destroy=function(){mRt.prototype.destroy.call(this),this.maskStack=null},vRt);function vRt(t){t=mRt.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var xRt,gRt=(L1t(ERt,xRt=pSt),ERt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},ERt.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},ERt.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},ERt.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},ERt);function ERt(t){t=xRt.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var TRt,bRt=(L1t(ARt,TRt=pSt),ARt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},ARt.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},ARt.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},ARt.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},ARt.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},ARt);function ARt(t){t=TRt.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var SRt,IRt=(L1t(RRt,SRt=uSt),RRt.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},RRt.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},RRt.prototype.setTransform=function(t){},RRt);function RRt(t){t=SRt.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new g1t,t.transform=null,t}var ORt,wRt=new l1t,CRt=new l1t,PRt=(L1t(NRt,ORt=uSt),NRt.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(wRt.width=t.frame.width,wRt.height=t.frame.height,e=wRt),r||(CRt.x=t.frame.x,CRt.y=t.frame.y,CRt.width=e.width,CRt.height=e.height,r=CRt),n=i.framebuffer):(s=o.resolution,e||(wRt.width=o.screen.width,wRt.height=o.screen.height,e=wRt),r||((r=wRt).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},NRt.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},NRt.prototype.resize=function(){this.bind(null)},NRt.prototype.reset=function(){this.bind(null)},NRt);function NRt(t){var e=ORt.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new l1t,e.destinationFrame=new l1t,e.viewportFrame=new l1t,e}var MRt=(LRt.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},LRt);function LRt(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var DRt,URt=0,FRt={textureCount:0},BRt=(L1t(kRt,DRt=uSt),kRt.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof ZIt)return ZIt;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");ZIt=!0===t({a:"b"},"a","b")}catch(t){ZIt=!1}return ZIt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},kRt.prototype.contextChange=function(t){this.gl=t,this.reset()},kRt.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(FRt.textureCount=0,this.syncUniformGroup(t.uniformGroup,FRt)),i},kRt.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},kRt.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},kRt.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},kRt.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<YIt.length;h++)if(YIt[h].test(n,o)){i.push(YIt[h].code(r,o)),a=!0;break}a||(s=(1===n.size?zIt:WIt)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},kRt.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},kRt.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},kRt.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=MIt(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:DIt(a.type,a.size)}}t=new MRt(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},kRt.prototype.reset=function(){this.program=null,this.shader=null},kRt.prototype.destroy=function(){this.destroyed=!0},kRt);function kRt(t){t=DRt.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=URt++,t}var GRt,XRt=(L1t(HRt,GRt=uSt),HRt.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[EAt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.ADD]=[t.ONE,t.ONE],e[EAt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.NONE]=[0,0],e[EAt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[EAt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[EAt.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[EAt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[EAt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[EAt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[EAt.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[EAt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[EAt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[EAt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[EAt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},HRt.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},HRt.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},HRt.prototype.setBlend=function(t){this.updateCheck(HRt.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},HRt.prototype.setOffset=function(t){this.updateCheck(HRt.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},HRt.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},HRt.prototype.setDepthMask=function(t){this.gl.depthMask(t)},HRt.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},HRt.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},HRt.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},HRt.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},HRt.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},HRt.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},HRt.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},HRt.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},HRt);function HRt(t){t=GRt.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=EAt.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new iRt,t.defaultState.blend=!0,t}var VRt,jRt=(L1t(YRt,VRt=uSt),YRt.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==NAt.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},YRt.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},YRt.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},YRt);function YRt(t){t=VRt.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=UAt.GC_MAX_IDLE,t.checkCountMax=UAt.GC_MAX_CHECK_COUNT,t.mode=UAt.GC_MODE,t}var zRt,WRt=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},ZRt=(L1t(KRt,zRt=uSt),KRt.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new WRt(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new WRt(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},KRt.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},KRt.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},KRt.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},KRt.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==IAt.FLOAT&&this.renderer.texture.unbind(s)}},KRt.prototype.initTexture=function(t){var e=new WRt(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},KRt.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===SAt.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},KRt.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==IAt.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},KRt.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&function(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}(this.managedTextures,t,1))},KRt.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==wAt.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=OAt.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},KRt.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==wAt.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===RAt.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===RAt.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===RAt.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===RAt.LINEAR?i.LINEAR:i.NEAREST)},KRt);function KRt(t){t=zRt.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new H1t,t.hasIntegerTextures=!1,t}var qRt,JRt={__proto__:null,FilterSystem:uIt,BatchSystem:pIt,ContextSystem:vIt,FramebufferSystem:bIt,GeometrySystem:OIt,MaskSystem:_Rt,ScissorSystem:gRt,StencilSystem:bRt,ProjectionSystem:IRt,RenderTextureSystem:PRt,ShaderSystem:BRt,StateSystem:XRt,TextureGCSystem:jRt,TextureSystem:ZRt},QRt=new g1t,uSt=(L1t($Rt,qRt=pt.a),$Rt.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty($Rt.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty($Rt.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),$Rt.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},$Rt.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=LSt.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return QRt.tx=-i.x,QRt.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:QRt,skipUpdateTransform:!!t.parent}),r},$Rt.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=xAt.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty($Rt.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty($Rt.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),$Rt);function $Rt(t,e){void 0===t&&(t=xAt.UNKNOWN);var r=qRt.call(this)||this;return e=Object.assign({},UAt.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new l1t(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||UAt.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(WAt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var tOt;L1t(eOt,tOt=uSt),eOt.create=function(t){if(BAt=void 0===BAt?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:UAt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():BAt)return new eOt(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},eOt.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},eOt.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof LSt?(WAt("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},eOt.prototype.resize=function(t,e){tOt.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},eOt.prototype.reset=function(){return this.runners.reset.emit(),this},eOt.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},eOt.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();tOt.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(eOt.prototype,"extract",{get:function(){return WAt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),eOt.registerPlugin=function(t,e){(eOt.__plugins=eOt.__plugins||{})[t]=e};function eOt(t){var e,r=tOt.call(this,xAt.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new e1t("destroy"),contextChange:new e1t("contextChange"),reset:new e1t("reset"),update:new e1t("update"),postrender:new e1t("postrender"),prerender:new e1t("prerender"),resize:new e1t("resize")},r.globalUniforms=new rIt({projectionMatrix:new g1t},!0),r.addSystem(_Rt,"mask").addSystem(vIt,"context").addSystem(XRt,"state").addSystem(BRt,"shader").addSystem(ZRt,"texture").addSystem(OIt,"geometry").addSystem(bIt,"framebuffer").addSystem(gRt,"scissor").addSystem(bRt,"stencil").addSystem(IRt,"projection").addSystem(jRt,"textureGC").addSystem(uIt,"filter").addSystem(PRt,"renderTexture").addSystem(pIt,"batch"),r.initPlugins(eOt.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",kAt||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+GAt+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+GAt+" - "+e+" - http://www.pixijs.com/"),kAt=!0),r.resize(r.options.width,r.options.height),r}var rOt=function(){this.texArray=null,this.blend=0,this.type=TAt.TRIANGLES,this.start=0,this.size=0,this.data=null},iOt=(nOt.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},nOt);function nOt(){this.elements=[],this.ids=[],this.count=0}var sOt=(Object.defineProperty(oOt.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(oOt.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(oOt.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(oOt.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(oOt.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),oOt.prototype.view=function(t){return this[t+"View"]},oOt.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},oOt.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},oOt);function oOt(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var aOt,hOt=(L1t(uOt,aOt=cIt),uOt.prototype.contextChange=function(){var t=this.renderer.gl;UAt.PREFER_ENV===vAt.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),UAt.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=qIt(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},uOt.prototype.initFlushBuffers=function(){for(var t=uOt._drawCallPool,e=uOt._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new rOt);for(;e.length<i;)e.push(new iOt);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},uOt.prototype.onPrerender=function(){this._flushId=0},uOt.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},uOt.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=uOt._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++H1t._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;H1t._globalBatch=o},uOt.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=uOt._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=XAt[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},uOt.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},uOt.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;UAt.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},uOt.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=uOt._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},uOt.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},uOt.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),UAt.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},uOt.prototype.stop=function(){this.flush()},uOt.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),aOt.prototype.destroy.call(this)},uOt.prototype.getAttributeBuffer=function(t){var e=HAt(Math.ceil(t/8)),t=jAt(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new sOt(e*this.vertexSize*4)),t},uOt.prototype.getIndexBuffer=function(t){var e=HAt(Math.ceil(t/12)),r=jAt(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},uOt.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},uOt._drawCallPool=[],uOt._textureArrayPool=[],uOt);function uOt(t){var e=aOt.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=iRt.for2d(),e.size=4*UAt.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var lOt=(cOt.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=rIt.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new $It(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new g1t,default:this.defaultGroupCache[t]};return new eRt(this.programCache[t],i)},cOt.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},cOt);function cOt(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var dOt,fOt=(L1t(pOt,dOt=Rnt),pOt);function pOt(t){void 0===t&&(t=!1);var e=dOt.call(this)||this;return e._buffer=new XSt(null,t,!1),e._indexBuffer=new XSt(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,SAt.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,SAt.FLOAT).addAttribute("aColor",e._buffer,4,!0,SAt.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,SAt.FLOAT).addIndex(e._indexBuffer),e}var _Ot="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",yOt="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function mOt(){}(mOt.create=function(t){var e,t=Object.assign({vertex:_Ot,fragment:yOt,geometryClass:fOt,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return L1t(o,e=hOt),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new lOt(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(mOt,"defaultVertexSrc",{get:function(){return _Ot},enumerable:!1,configurable:!0}),Object.defineProperty(mOt,"defaultFragmentTemplate",{get:function(){return yOt},enumerable:!1,configurable:!0}),mOt).create();var vOt={};for(xOt in ySt)!function(t){Object.defineProperty(vOt,t,{get:function(){return WAt("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),ySt[t]}})}(xOt);var xOt,gOt={};for(xOt in JRt)!function(t){Object.defineProperty(gOt,t,{get:function(){return WAt("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),JRt[t]}})}(xOt);var EOt=function(t,e){return(EOt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var TOt,bOt,AOt,uSt=(EOt(bOt=IOt,AOt=TOt=oRt),bOt.prototype=null===AOt?Object.create(AOt):(SOt.prototype=AOt.prototype,new SOt),IOt.prototype._loadMatrix=function(t,e){var r=t;(e=void 0===e?!1:e)&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},IOt.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},IOt.prototype._colorMatrix=function(t){t=new Float32Array(t);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},IOt.prototype.brightness=function(t,e){this._loadMatrix([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0],e)},IOt.prototype.greyscale=function(t,e){this._loadMatrix([t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0],e)},IOt.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},IOt.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),i=Math.sin(t),t=(0,Math.sqrt)(1/3);this._loadMatrix([r+1/3*(1-r),1/3*(1-r)-t*i,1/3*(1-r)+t*i,0,0,1/3*(1-r)+t*i,r+1/3*(1-r),1/3*(1-r)-t*i,0,0,1/3*(1-r)-t*i,1/3*(1-r)+t*i,r+1/3*(1-r),0,0,0,0,0,1,0],e)},IOt.prototype.contrast=function(t,e){var r=(t||0)+1,t=-.5*(r-1);this._loadMatrix([r,0,0,0,t,0,r,0,0,t,0,0,r,0,t,0,0,0,1,0],e)},IOt.prototype.saturate=function(t,e){var r=2*(t=void 0===t?0:t)/3+1,t=-.5*(r-1);this._loadMatrix([r,t,t,0,0,t,r,t,0,0,t,t,r,0,0,0,0,0,1,0],e)},IOt.prototype.desaturate=function(){this.saturate(-1)},IOt.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},IOt.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},IOt.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},IOt.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},IOt.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},IOt.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},IOt.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},IOt.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},IOt.prototype.colorTone=function(t,e,r,i,n){var s=((r=r||16770432)>>16&255)/255,o=(r>>8&255)/255,a=(255&r)/255,h=((i=i||3375104)>>16&255)/255,r=(i>>8&255)/255,i=(255&i)/255;this._loadMatrix([.3,.59,.11,0,0,s,o,a,t=t||.2,0,h,r,i,e=e||.15,0,s-h,o-r,a-i,0,0],n)},IOt.prototype.night=function(t,e){this._loadMatrix([-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},IOt.prototype.predator=function(t,e){this._loadMatrix([11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0],e)},IOt.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},IOt.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(IOt.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(IOt.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),IOt);function SOt(){this.constructor=bOt}function IOt(){var t=this,e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(t=TOt.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e)||this).alpha=1,t}uSt.prototype.grayscale=uSt.prototype.greyscale;function ROt(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var OOt=/iPhone/i,wOt=/iPod/i,COt=/iPad/i,POt=/\biOS-universal(?:.+)Mac\b/i,NOt=/\bAndroid(?:.+)Mobile\b/i,MOt=/Android/i,LOt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,DOt=/Silk/i,UOt=/Windows Phone/i,FOt=/\bWindows(?:.+)ARM\b/i,BOt=/BlackBerry/i,kOt=/BB10/i,GOt=/Opera Mini/i,XOt=/\b(CriOS|Chrome)(?:.+)Mobile/i,HOt=/Mobile(?:.+)Firefox\b/i;var VOt=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(OOt)&&!i(UOt),ipod:i(wOt),tablet:!i(OOt)&&(i(COt)||ROt(e))&&!i(UOt),universal:i(POt),device:(i(OOt)||i(wOt)||i(COt)||i(POt)||ROt(e))&&!i(UOt)},amazon:{phone:i(LOt),tablet:!i(LOt)&&i(DOt),device:i(LOt)||i(DOt)},android:{phone:!i(UOt)&&i(LOt)||!i(UOt)&&i(NOt),tablet:!i(UOt)&&!i(LOt)&&!i(NOt)&&(i(DOt)||i(MOt)),device:!i(UOt)&&(i(LOt)||i(DOt)||i(NOt)||i(MOt))||i(/\bokhttp\b/i)},windows:{phone:i(UOt),tablet:i(FOt),device:i(UOt)||i(FOt)},other:{blackberry:i(BOt),blackberry10:i(kOt),opera:i(GOt),firefox:i(HOt),chrome:i(XOt),device:i(BOt)||i(kOt)||i(GOt)||i(HOt)||i(XOt)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(Rnt={})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(Rnt={})[Rnt.UNKNOWN=0]="UNKNOWN",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.CANVAS=2]="CANVAS",(Rnt={})[Rnt.COLOR=16384]="COLOR",Rnt[Rnt.DEPTH=256]="DEPTH",Rnt[Rnt.STENCIL=1024]="STENCIL",(Rnt={})[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.ADD=1]="ADD",Rnt[Rnt.MULTIPLY=2]="MULTIPLY",Rnt[Rnt.SCREEN=3]="SCREEN",Rnt[Rnt.OVERLAY=4]="OVERLAY",Rnt[Rnt.DARKEN=5]="DARKEN",Rnt[Rnt.LIGHTEN=6]="LIGHTEN",Rnt[Rnt.COLOR_DODGE=7]="COLOR_DODGE",Rnt[Rnt.COLOR_BURN=8]="COLOR_BURN",Rnt[Rnt.HARD_LIGHT=9]="HARD_LIGHT",Rnt[Rnt.SOFT_LIGHT=10]="SOFT_LIGHT",Rnt[Rnt.DIFFERENCE=11]="DIFFERENCE",Rnt[Rnt.EXCLUSION=12]="EXCLUSION",Rnt[Rnt.HUE=13]="HUE",Rnt[Rnt.SATURATION=14]="SATURATION",Rnt[Rnt.COLOR=15]="COLOR",Rnt[Rnt.LUMINOSITY=16]="LUMINOSITY",Rnt[Rnt.NORMAL_NPM=17]="NORMAL_NPM",Rnt[Rnt.ADD_NPM=18]="ADD_NPM",Rnt[Rnt.SCREEN_NPM=19]="SCREEN_NPM",Rnt[Rnt.NONE=20]="NONE",Rnt[Rnt.SRC_OVER=0]="SRC_OVER",Rnt[Rnt.SRC_IN=21]="SRC_IN",Rnt[Rnt.SRC_OUT=22]="SRC_OUT",Rnt[Rnt.SRC_ATOP=23]="SRC_ATOP",Rnt[Rnt.DST_OVER=24]="DST_OVER",Rnt[Rnt.DST_IN=25]="DST_IN",Rnt[Rnt.DST_OUT=26]="DST_OUT",Rnt[Rnt.DST_ATOP=27]="DST_ATOP",Rnt[Rnt.ERASE=26]="ERASE",Rnt[Rnt.SUBTRACT=28]="SUBTRACT",Rnt[Rnt.XOR=29]="XOR",(Rnt={})[Rnt.POINTS=0]="POINTS",Rnt[Rnt.LINES=1]="LINES",Rnt[Rnt.LINE_LOOP=2]="LINE_LOOP",Rnt[Rnt.LINE_STRIP=3]="LINE_STRIP",Rnt[Rnt.TRIANGLES=4]="TRIANGLES",Rnt[Rnt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Rnt[Rnt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(Rnt={})[Rnt.RGBA=6408]="RGBA",Rnt[Rnt.RGB=6407]="RGB",Rnt[Rnt.ALPHA=6406]="ALPHA",Rnt[Rnt.LUMINANCE=6409]="LUMINANCE",Rnt[Rnt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Rnt[Rnt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Rnt[Rnt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt={})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(Rnt={})[Rnt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Rnt[Rnt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Rnt[Rnt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Rnt[Rnt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Rnt[Rnt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Rnt[Rnt.FLOAT=5126]="FLOAT",Rnt[Rnt.HALF_FLOAT=36193]="HALF_FLOAT",(Rnt={})[Rnt.FLOAT=0]="FLOAT",Rnt[Rnt.INT=1]="INT",Rnt[Rnt.UINT=2]="UINT",(Rnt=NCt=NCt||{})[Rnt.NEAREST=0]="NEAREST",Rnt[Rnt.LINEAR=1]="LINEAR",(Rnt=bCt=bCt||{})[Rnt.CLAMP=33071]="CLAMP",Rnt[Rnt.REPEAT=10497]="REPEAT",Rnt[Rnt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(Rnt=VCt=VCt||{})[Rnt.OFF=0]="OFF",Rnt[Rnt.POW2=1]="POW2",Rnt[Rnt.ON=2]="ON",Rnt[Rnt.ON_MANUAL=3]="ON_MANUAL",(Rnt={})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Rnt={})[Rnt.NO=0]="NO",Rnt[Rnt.YES=1]="YES",Rnt[Rnt.AUTO=2]="AUTO",Rnt[Rnt.BLEND=0]="BLEND",Rnt[Rnt.CLEAR=1]="CLEAR",Rnt[Rnt.BLIT=2]="BLIT",(Rnt=gCt=gCt||{})[Rnt.AUTO=0]="AUTO",Rnt[Rnt.MANUAL=1]="MANUAL",(Rnt=BCt=BCt||{}).LOW="lowp",Rnt.MEDIUM="mediump",Rnt.HIGH="highp",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.SCISSOR=1]="SCISSOR",Rnt[Rnt.STENCIL=2]="STENCIL",Rnt[Rnt.SPRITE=3]="SPRITE",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.LOW=2]="LOW",Rnt[Rnt.MEDIUM=4]="MEDIUM",Rnt[Rnt.HIGH=8]="HIGH";var jOt,YOt,zOt,WOt,ZOt,KOt,qOt,JOt,QOt,$Ot,twt,ewt,rwt,iwt,nwt,swt,owt,awt,hwt,uwt,lwt,cwt={MIPMAP_TEXTURES:VCt.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(jOt=32,zOt=!0,(VOt.tablet||VOt.phone)&&(VOt.apple.device&&(YOt=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(YOt[1],10)<11&&(zOt=!1),VOt.android.device&&(YOt=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(YOt[1],10)<7&&(zOt=!1)),zOt?jOt:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:gCt.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:bCt.CLAMP,SCALE_MODE:NCt.LINEAR,PRECISION_VERTEX:BCt.HIGH,PRECISION_FRAGMENT:VOt.apple.device?BCt.HIGH:BCt.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!VOt.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};(Rnt=WOt=WOt||{})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(VCt=ZOt=ZOt||{})[VCt.UNKNOWN=0]="UNKNOWN",VCt[VCt.WEBGL=1]="WEBGL",VCt[VCt.CANVAS=2]="CANVAS",(gCt=KOt=KOt||{})[gCt.COLOR=16384]="COLOR",gCt[gCt.DEPTH=256]="DEPTH",gCt[gCt.STENCIL=1024]="STENCIL",(bCt=qOt=qOt||{})[bCt.NORMAL=0]="NORMAL",bCt[bCt.ADD=1]="ADD",bCt[bCt.MULTIPLY=2]="MULTIPLY",bCt[bCt.SCREEN=3]="SCREEN",bCt[bCt.OVERLAY=4]="OVERLAY",bCt[bCt.DARKEN=5]="DARKEN",bCt[bCt.LIGHTEN=6]="LIGHTEN",bCt[bCt.COLOR_DODGE=7]="COLOR_DODGE",bCt[bCt.COLOR_BURN=8]="COLOR_BURN",bCt[bCt.HARD_LIGHT=9]="HARD_LIGHT",bCt[bCt.SOFT_LIGHT=10]="SOFT_LIGHT",bCt[bCt.DIFFERENCE=11]="DIFFERENCE",bCt[bCt.EXCLUSION=12]="EXCLUSION",bCt[bCt.HUE=13]="HUE",bCt[bCt.SATURATION=14]="SATURATION",bCt[bCt.COLOR=15]="COLOR",bCt[bCt.LUMINOSITY=16]="LUMINOSITY",bCt[bCt.NORMAL_NPM=17]="NORMAL_NPM",bCt[bCt.ADD_NPM=18]="ADD_NPM",bCt[bCt.SCREEN_NPM=19]="SCREEN_NPM",bCt[bCt.NONE=20]="NONE",bCt[bCt.SRC_OVER=0]="SRC_OVER",bCt[bCt.SRC_IN=21]="SRC_IN",bCt[bCt.SRC_OUT=22]="SRC_OUT",bCt[bCt.SRC_ATOP=23]="SRC_ATOP",bCt[bCt.DST_OVER=24]="DST_OVER",bCt[bCt.DST_IN=25]="DST_IN",bCt[bCt.DST_OUT=26]="DST_OUT",bCt[bCt.DST_ATOP=27]="DST_ATOP",bCt[bCt.ERASE=26]="ERASE",bCt[bCt.SUBTRACT=28]="SUBTRACT",bCt[bCt.XOR=29]="XOR",(NCt=JOt=JOt||{})[NCt.POINTS=0]="POINTS",NCt[NCt.LINES=1]="LINES",NCt[NCt.LINE_LOOP=2]="LINE_LOOP",NCt[NCt.LINE_STRIP=3]="LINE_STRIP",NCt[NCt.TRIANGLES=4]="TRIANGLES",NCt[NCt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",NCt[NCt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(BCt=QOt=QOt||{})[BCt.RGBA=6408]="RGBA",BCt[BCt.RGB=6407]="RGB",BCt[BCt.ALPHA=6406]="ALPHA",BCt[BCt.LUMINANCE=6409]="LUMINANCE",BCt[BCt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",BCt[BCt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",BCt[BCt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt=$Ot=$Ot||{})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(VCt=twt=twt||{})[VCt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",VCt[VCt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",VCt[VCt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",VCt[VCt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",VCt[VCt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",VCt[VCt.FLOAT=5126]="FLOAT",VCt[VCt.HALF_FLOAT=36193]="HALF_FLOAT",(gCt=ewt=ewt||{})[gCt.FLOAT=0]="FLOAT",gCt[gCt.INT=1]="INT",gCt[gCt.UINT=2]="UINT",(bCt=rwt=rwt||{})[bCt.NEAREST=0]="NEAREST",bCt[bCt.LINEAR=1]="LINEAR",(NCt=iwt=iwt||{})[NCt.CLAMP=33071]="CLAMP",NCt[NCt.REPEAT=10497]="REPEAT",NCt[NCt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(BCt=nwt=nwt||{})[BCt.OFF=0]="OFF",BCt[BCt.POW2=1]="POW2",BCt[BCt.ON=2]="ON",BCt[BCt.ON_MANUAL=3]="ON_MANUAL",(Rnt=swt=swt||{})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(VCt=owt=owt||{})[VCt.NO=0]="NO",VCt[VCt.YES=1]="YES",VCt[VCt.AUTO=2]="AUTO",VCt[VCt.BLEND=0]="BLEND",VCt[VCt.CLEAR=1]="CLEAR",VCt[VCt.BLIT=2]="BLIT",(gCt=awt=awt||{})[gCt.AUTO=0]="AUTO",gCt[gCt.MANUAL=1]="MANUAL",(bCt=hwt=hwt||{}).LOW="lowp",bCt.MEDIUM="mediump",bCt.HIGH="highp",(NCt=uwt=uwt||{})[NCt.NONE=0]="NONE",NCt[NCt.SCISSOR=1]="SCISSOR",NCt[NCt.STENCIL=2]="STENCIL",NCt[NCt.SPRITE=3]="SPRITE",(BCt=lwt=lwt||{})[BCt.NONE=0]="NONE",BCt[BCt.LOW=2]="LOW",BCt[BCt.MEDIUM=4]="MEDIUM",BCt[BCt.HIGH=8]="HIGH";r(22);var dwt={parse:_t.parse,format:_t.format,resolve:_t.resolve};cwt.RETINA_PREFIX=/@([0-9\.]+)x/;var fwt,pwt=cwt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,_wt="6.0.4";var ywt=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[qOt.NORMAL_NPM]=qOt.NORMAL,t[qOt.ADD_NPM]=qOt.ADD,t[qOt.SCREEN_NPM]=qOt.SCREEN,e[qOt.NORMAL]=qOt.NORMAL_NPM,e[qOt.ADD]=qOt.ADD_NPM,e[qOt.SCREEN]=qOt.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function mwt(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function vwt(t){return!(t&t-1||!t)}function xwt(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}var gwt=0;var Ewt={};function Twt(t,e,r){var i;void 0===r&&(r=3),Ewt[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),Ewt[e]=!0)}var bwt={},Awt=Object.create(null),Swt=Object.create(null);Iwt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},Iwt.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},Iwt.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(Iwt.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Iwt.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function Iwt(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||cwt.RESOLUTION,this.resize(t,e)}var Rwt;function Owt(t,e){t=cwt.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var wwt,Cwt=(Pwt.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},Pwt.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},Pwt.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},Pwt.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},Pwt.prototype.contains=function(t){return-1!==this.items.indexOf(t)},Pwt.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Pwt.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(Pwt.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(Pwt.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Pwt);function Pwt(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(Cwt.prototype,{dispatch:{value:Cwt.prototype.emit},run:{value:Cwt.prototype.emit}}),cwt.TARGET_FPMS=.06,(Rnt=wwt=wwt||{})[Rnt.INTERACTION=50]="INTERACTION",Rnt[Rnt.HIGH=25]="HIGH",Rnt[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.LOW=-25]="LOW",Rnt[Rnt.UTILITY=-50]="UTILITY";var Nwt=(Mwt.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},Mwt.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},Mwt.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},Mwt.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},Mwt);function Mwt(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var Lwt=(Dwt.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Dwt.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Dwt.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Dwt.prototype.add=function(t,e,r){return void 0===r&&(r=wwt.NORMAL),this._addListener(new Nwt(t,e,r))},Dwt.prototype.addOnce=function(t,e,r){return void 0===r&&(r=wwt.NORMAL),this._addListener(new Nwt(t,e,r,!0))},Dwt.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},Dwt.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Dwt.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),Dwt.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Dwt.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Dwt.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},Dwt.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*cwt.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(Dwt.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(Dwt.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,cwt.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(Dwt.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(Dwt,"shared",{get:function(){var t;return Dwt._shared||((t=Dwt._shared=new Dwt).autoStart=!0,t._protected=!0),Dwt._shared},enumerable:!1,configurable:!0}),Object.defineProperty(Dwt,"system",{get:function(){var t;return Dwt._system||((t=Dwt._system=new Dwt).autoStart=!0,t._protected=!0),Dwt._system},enumerable:!1,configurable:!0}),Dwt);function Dwt(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Nwt(null,null,1/0),this.deltaMS=1/cwt.TARGET_FPMS,this.elapsedMS=1/cwt.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}Uwt.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,wwt.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Lwt.shared:new Lwt,t.autoStart&&this.start()},Uwt.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function Uwt(){}var Fwt,Bwt=2*Math.PI;Math.PI,Math.PI;(VCt=Fwt=Fwt||{})[VCt.POLY=0]="POLY",VCt[VCt.RECT=1]="RECT",VCt[VCt.CIRC=2]="CIRC",VCt[VCt.ELIP=3]="ELIP",VCt[VCt.RREC=4]="RREC";var kwt=(Object.defineProperty(Gwt.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(Gwt.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(Gwt.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(Gwt.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(Gwt,"EMPTY",{get:function(){return new Gwt(0,0,0,0)},enumerable:!1,configurable:!0}),Gwt.prototype.clone=function(){return new Gwt(this.x,this.y,this.width,this.height)},Gwt.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},Gwt.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},Gwt.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},Gwt.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},Gwt.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},Gwt.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},Gwt.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},Gwt.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},Gwt);function Gwt(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=Fwt.RECT}Xwt.prototype.clone=function(){return new Xwt(this.x,this.y,this.radius)},Xwt.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},Xwt.prototype.getBounds=function(){return new kwt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Xwt.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function Xwt(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=Fwt.CIRC}Hwt.prototype.clone=function(){return new Hwt(this.x,this.y,this.width,this.height)},Hwt.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},Hwt.prototype.getBounds=function(){return new kwt(this.x-this.width,this.y-this.height,this.width,this.height)},Hwt.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function Hwt(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=Fwt.ELIP}Vwt.prototype.clone=function(){var t=new Vwt(this.points.slice());return t.closeStroke=this.closeStroke,t},Vwt.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},Vwt.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function Vwt(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=Fwt.POLY,this.closeStroke=!0}jwt.prototype.clone=function(){return new jwt(this.x,this.y,this.width,this.height,this.radius)},jwt.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},jwt.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function jwt(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=Fwt.RREC}var Ywt=(zwt.prototype.clone=function(){return new zwt(this.x,this.y)},zwt.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},zwt.prototype.copyTo=function(t){return t.set(this.x,this.y),t},zwt.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},zwt.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},zwt.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},zwt);function zwt(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var Wwt=(Zwt.prototype.clone=function(t,e){return new Zwt(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},Zwt.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},Zwt.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},Zwt.prototype.copyTo=function(t){return t.set(this._x,this._y),t},Zwt.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Zwt.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(Zwt.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(Zwt.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Zwt);function Zwt(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var Kwt=(qwt.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},qwt.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},qwt.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},qwt.prototype.apply=function(t,e){e=e||new Ywt;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},qwt.prototype.applyInverse=function(t,e){e=e||new Ywt;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},qwt.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},qwt.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},qwt.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},qwt.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},qwt.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},qwt.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},qwt.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(Bwt-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},qwt.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},qwt.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},qwt.prototype.clone=function(){var t=new qwt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},qwt.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},qwt.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},qwt.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(qwt,"IDENTITY",{get:function(){return new qwt},enumerable:!1,configurable:!0}),Object.defineProperty(qwt,"TEMP_MATRIX",{get:function(){return new qwt},enumerable:!1,configurable:!0}),qwt);function qwt(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var Jwt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Qwt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],$wt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],tCt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],eCt=[],rCt=[],iCt=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];eCt.push(e);for(var r=0;r<16;r++)for(var i=iCt(Jwt[t]*Jwt[r]+$wt[t]*Qwt[r]),n=iCt(Qwt[t]*Jwt[r]+tCt[t]*Qwt[r]),s=iCt(Jwt[t]*$wt[r]+$wt[t]*tCt[r]),o=iCt(Qwt[t]*$wt[r]+tCt[t]*tCt[r]),a=0;a<16;a++)if(Jwt[a]===i&&Qwt[a]===n&&$wt[a]===s&&tCt[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new Kwt;h.set(Jwt[t],Qwt[t],$wt[t],tCt[t],0,0),rCt.push(h)}}();var nCt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Jwt[t]},uY:function(t){return Qwt[t]},vX:function(t){return $wt[t]},vY:function(t){return tCt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return eCt[t][e]},sub:function(t,e){return eCt[t][nCt.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?nCt.S:nCt.N:2*Math.abs(e)<=Math.abs(t)?0<t?nCt.E:nCt.W:0<e?0<t?nCt.SE:nCt.SW:0<t?nCt.NE:nCt.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=rCt[nCt.inv(e)];e.tx=r,e.ty=i,t.append(e)}};sCt.prototype.onChange=function(){this._localID++},sCt.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},sCt.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},sCt.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},sCt.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},sCt.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(sCt.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),sCt.IDENTITY=new sCt;function sCt(){this.worldTransform=new Kwt,this.localTransform=new Kwt,this.position=new Wwt(this.onChange,this,0,0),this.scale=new Wwt(this.onChange,this,1,1),this.pivot=new Wwt(this.onChange,this,0,0),this.skew=new Wwt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}cwt.PREFER_ENV=VOt.any?WOt.WEBGL:WOt.WEBGL2,cwt.STRICT_TEXTURE_CACHE=!1;var oCt=[];function aCt(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=oCt.length-1;0<=n;--n){var s=oCt[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var hCt=function(t,e){return(hCt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function uCt(t,e){function r(){this.constructor=t}hCt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var lCt=(cCt.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},cCt.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},cCt.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(cCt.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),cCt.prototype.update=function(){this.destroyed||this.onUpdate.emit()},cCt.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(cCt.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(cCt.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),cCt.prototype.style=function(t,e,r){return!1},cCt.prototype.dispose=function(){},cCt.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},cCt.test=function(t,e){return!1},cCt);function cCt(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Cwt("setRealSize"),this.onUpdate=new Cwt("update"),this.onError=new Cwt("onError")}var dCt,fCt=(uCt(pCt,dCt=lCt),pCt.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===swt.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},pCt.prototype.dispose=function(){this.data=null},pCt.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},pCt);function pCt(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=dCt.call(this,e,i)||this).data=t,r}var _Ct,yCt={scaleMode:rwt.NEAREST,format:QOt.RGBA,alphaMode:swt.NPM},mCt=(uCt(vCt,_Ct=pt.a),Object.defineProperty(vCt.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(vCt.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),vCt.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},vCt.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},vCt.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},vCt.prototype._refreshPOT=function(){this.isPowerOfTwo=vwt(this.realWidth)&&vwt(this.realHeight)},vCt.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},vCt.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},vCt.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},vCt.prototype.onError=function(t){this.emit("error",this,t)},vCt.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Swt[this.cacheId],delete Awt[this.cacheId],this.cacheId=null),this.dispose(),vCt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},vCt.prototype.dispose=function(){this.emit("dispose",this)},vCt.prototype.castToBaseTexture=function(){return this},vCt.from=function(t,e,r){void 0===r&&(r=cwt.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++gwt),t._pixiId),s=Swt[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new vCt(t,e)).cacheId=n,vCt.addToCache(s,n)),s},vCt.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new fCt(t,{width:e,height:r}),t=t instanceof Float32Array?twt.FLOAT:twt.UNSIGNED_BYTE;return new vCt(n,Object.assign(yCt,i||{width:e,height:r,type:t}))},vCt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Swt[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),Swt[e]=t)},vCt.removeFromCache=function(t){if("string"==typeof t){var e=Swt[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete Swt[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete Swt[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},vCt._globalBatch=0,vCt);function vCt(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=_Ct.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof lCt||((t=aCt(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||cwt.RESOLUTION,r.mipmap=void 0!==n?n:cwt.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:cwt.ANISOTROPIC_LEVEL,r.wrapMode=u||cwt.WRAP_MODE,r.scaleMode=void 0!==o?o:cwt.SCALE_MODE,r.format=l||QOt.RGBA,r.type=c||twt.UNSIGNED_BYTE,r.target=d||$Ot.TEXTURE_2D,r.alphaMode=void 0!==i?i:swt.UNPACK,r.uid=++gwt,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var xCt,gCt=(uCt(ECt,xCt=lCt),ECt.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof lCt?this.addResourceAt(t[r],r):this.addResourceAt(aCt(t[r],e),r))},ECt.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},ECt.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},ECt.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");xCt.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},ECt.prototype.unbind=function(t){xCt.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},ECt.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},ECt);function ECt(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=xCt.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new mCt;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var TCt,bCt=(uCt(ACt,TCt=gCt),ACt.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},ACt.prototype.bind=function(t){TCt.prototype.bind.call(this,t),t.target=$Ot.TEXTURE_2D_ARRAY},ACt.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},ACt);function ACt(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=TCt.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var SCt,ICt=(uCt(RCt,SCt=lCt),RCt.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(Rwt=Rwt||document.createElement("a")).href=t;var r=dwt.parse(Rwt.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},RCt.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===swt.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},RCt.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),SCt.prototype.update.call(this))},RCt.prototype.dispose=function(){this.source=null},RCt);function RCt(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=SCt.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var OCt,wCt=(uCt(CCt,OCt=ICt),CCt.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},CCt);function CCt(t){return OCt.call(this,t)||this}var PCt,NCt=(uCt(MCt,PCt=gCt),MCt.prototype.bind=function(t){PCt.prototype.bind.call(this,t),t.target=$Ot.TEXTURE_CUBE_MAP},MCt.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=$Ot.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},MCt.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<MCt.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},MCt.test=function(t){return Array.isArray(t)&&t.length===MCt.SIDES},MCt.SIDES=6,MCt);function MCt(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==MCt.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=PCt.call(this,6,{width:n,height:s})||this,a=0;a<MCt.SIDES;a++)r.items[a].target=$Ot.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var LCt,DCt=(uCt(UCt,LCt=ICt),UCt.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},UCt.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===swt.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},UCt.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return LCt.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(LCt.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},UCt.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,LCt.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},UCt.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},UCt);function UCt(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,ICt.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=LCt.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:cwt.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var FCt,BCt=(uCt(kCt,FCt=ICt),kCt.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},kCt.prototype._loadSvg=function(){var s=this,o=new Image;ICt.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++gwt,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},kCt.getSize=function(t){var e=kCt.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},kCt.prototype.dispose=function(){FCt.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},kCt.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},kCt.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,kCt);function kCt(t,e){var r=this;return e=e||{},(r=FCt.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var GCt,Rnt=(uCt(XCt,GCt=ICt),XCt.prototype.update=function(t){var e;this.destroyed||(e=Lwt.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(GCt.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},XCt.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},XCt.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},XCt.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},XCt.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},XCt.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Lwt.shared.add(this.update,this),this._isConnectedToTicker=!0)},XCt.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Lwt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},XCt.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},XCt.prototype.dispose=function(){this._isConnectedToTicker&&Lwt.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),GCt.prototype.dispose.call(this)},Object.defineProperty(XCt.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Lwt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Lwt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(XCt.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),XCt.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<XCt.TYPES.indexOf(e)},XCt.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],XCt.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},XCt);function XCt(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];ICt.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||XCt.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=GCt.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var HCt,VCt=(uCt(jCt,HCt=ICt),jCt.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},jCt);function jCt(t){return HCt.call(this,t)||this}oCt.push(DCt,VCt,wCt,Rnt,BCt,fCt,NCt,bCt);var YCt={__proto__:null,Resource:lCt,BaseImageResource:ICt,INSTALLED:oCt,autoDetectResource:aCt,AbstractMultiResource:gCt,ArrayResource:bCt,BufferResource:fCt,CanvasResource:wCt,CubeResource:NCt,ImageResource:DCt,SVGResource:BCt,VideoResource:Rnt,ImageBitmapResource:VCt},BCt=(zCt.prototype.destroy=function(){this.renderer=null},zCt);function zCt(t){this.renderer=t}var WCt,ZCt=(uCt(KCt,WCt=fCt),KCt.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===swt.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},KCt);function KCt(){return null!==WCt&&WCt.apply(this,arguments)||this}var qCt=(Object.defineProperty(JCt.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),JCt.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new mCt(null,{scaleMode:rwt.NEAREST,resolution:1,mipmap:nwt.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},JCt.prototype.addDepthTexture=function(t){return this.depthTexture=t||new mCt(new ZCt(null,{width:this.width,height:this.height}),{scaleMode:rwt.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:nwt.OFF,format:QOt.DEPTH_COMPONENT,type:twt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},JCt.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},JCt.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},JCt.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},JCt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},JCt.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},JCt);function JCt(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Cwt("disposeFramebuffer"),this.multisample=lwt.NONE}var QCt,$Ct=(uCt(tPt,QCt=mCt),tPt.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},tPt.prototype.dispose=function(){this.framebuffer.dispose(),QCt.prototype.dispose.call(this)},tPt.prototype.destroy=function(){QCt.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},tPt);function tPt(t){var e=this,e=QCt.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=nwt.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new qCt(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var ePt=(rPt.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=nCt.add(r,nCt.NW),this.x0=s+i*nCt.uX(r),this.y0=e+n*nCt.uY(r),r=nCt.add(r,2),this.x1=s+i*nCt.uX(r),this.y1=e+n*nCt.uY(r),r=nCt.add(r,2),this.x2=s+i*nCt.uX(r),this.y2=e+n*nCt.uY(r),r=nCt.add(r,2),this.x3=s+i*nCt.uX(r),this.y3=e+n*nCt.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},rPt.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},rPt);function rPt(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var iPt,nPt=new ePt,sPt=(uCt(oPt,iPt=pt.a),oPt.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},oPt.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},oPt.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&Awt[t.url]&&oPt.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,oPt.removeFromCache(this),this.textureCacheIds=null},oPt.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new oPt(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},oPt.prototype.updateUvs=function(){this._uvs===nPt&&(this._uvs=new ePt),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},oPt.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=cwt.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++gwt),t._pixiId),s=Awt[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=Owt(t)),(s=new oPt(new mCt(t,e))).baseTexture.cacheId=n,mCt.addToCache(s.baseTexture,n),oPt.addToCache(s,n)),s},oPt.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=oPt.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},oPt.fromBuffer=function(t,e,r,i){return new oPt(mCt.fromBuffer(t,e,r,i))},oPt.fromLoader=function(t,e,r,i){t=new mCt(t,Object.assign({scaleMode:cwt.SCALE_MODE,resolution:Owt(e)},i)),i=t.resource;i instanceof DCt&&(i.url=e);var n=new oPt(t);return mCt.addToCache(n.baseTexture,r=r||e),oPt.addToCache(n,r),r!==e&&(mCt.addToCache(n.baseTexture,e),oPt.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},oPt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Awt[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),Awt[e]=t)},oPt.removeFromCache=function(t){if("string"==typeof t){var e=Awt[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete Awt[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)Awt[t.textureCacheIds[i]]===t&&delete Awt[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(oPt.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(oPt.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(oPt.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(oPt.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(oPt.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),oPt.prototype.castToBaseTexture=function(){return this.baseTexture},oPt);function oPt(t,e,r,i,n,s){var o=iPt.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new kwt(0,0,1,1)),t instanceof oPt&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=nPt,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new Ywt(s.x,s.y):new Ywt(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function aPt(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}sPt.EMPTY=new sPt(new mCt),aPt(sPt.EMPTY),aPt(sPt.EMPTY.baseTexture),sPt.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new sPt(new mCt(new wCt(t)))}(),aPt(sPt.WHITE),aPt(sPt.WHITE.baseTexture);var hPt,uPt=(uCt(lPt,hPt=sPt),Object.defineProperty(lPt.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),lPt.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},lPt.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},lPt.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(Twt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new lPt(new $Ct(t))},lPt);function lPt(t,e){e=hPt.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var cPt=(dPt.prototype.createTexture=function(t,e){e=new $Ct(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new uPt(e)},dPt.prototype.getOptimalTexture=function(t,e,r){var i=dPt.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=mwt(t)))<<16|65535&(e=mwt(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},dPt.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},dPt.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},dPt.prototype.returnFilterTexture=function(t){this.returnTexture(t)},dPt.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},dPt.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=dPt.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},dPt.SCREEN_KEY="screen",dPt);function dPt(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var fPt=(pPt.prototype.destroy=function(){this.buffer=null},pPt.from=function(t,e,r,i,n){return new pPt(t,e,r,i,n)},pPt);function pPt(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=twt.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var _Pt=0,yPt=(mPt.prototype.update=function(t){this.data=t||this.data,this._updateID++},mPt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},mPt.prototype.destroy=function(){this.dispose(),this.data=null},mPt.from=function(t){return new mPt(t=t instanceof Array?new Float32Array(t):t)},mPt);function mPt(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=_Pt++,this.disposeRunner=new Cwt("disposeBuffer")}function vPt(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var xPt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var gPt={5126:4,5123:2,5121:1},EPt=0,TPt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Rnt=(bPt.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof yPt||(e instanceof Array&&(e=new Float32Array(e)),e=new yPt(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new fPt(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},bPt.prototype.getAttribute=function(t){return this.attributes[t]},bPt.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},bPt.prototype.addIndex=function(t){return t instanceof yPt||(t instanceof Array&&(t=new Uint16Array(t)),t=new yPt(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},bPt.prototype.getIndex=function(){return this.indexBuffer},bPt.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new yPt;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*gPt[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=vPt(l);n[c]||(n[c]=new xPt[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},bPt.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},bPt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},bPt.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},bPt.prototype.clone=function(){for(var t=new bPt,e=0;e<this.buffers.length;e++)t.buffers[e]=new yPt(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new fPt(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},bPt.merge=function(t){for(var e=new bPt,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new TPt[vPt(o.buffers[s].data)](i[s]),e.buffers[s]=new yPt(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*gPt[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},bPt);function bPt(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=EPt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Cwt("disposeGeometry"),this.refCount=0}var APt,SPt=(uCt(IPt,APt=Rnt),IPt);function IPt(){var t=APt.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var RPt,OPt=(uCt(wPt,RPt=Rnt),wPt.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},wPt.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},wPt);function wPt(){var t=RPt.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new yPt(t.vertices),t.uvBuffer=new yPt(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var CPt=0,PPt=(NPt.prototype.update=function(){this.dirtyId++},NPt.prototype.add=function(t,e,r){this.uniforms[t]=new NPt(e,r)},NPt.from=function(t,e){return new NPt(t,e)},NPt);function NPt(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=CPt++,this.static=!!e}var MPt=(LPt.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},LPt);function LPt(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new kwt,this.destinationFrame=new kwt,this.bindingSourceFrame=new kwt,this.bindingDestinationFrame=new kwt,this.filters=[],this.transform=null}var DPt,UPt=[new Ywt,new Ywt,new Ywt,new Ywt],FPt=new Kwt,BPt=(uCt(kPt,DPt=BCt),kPt.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new MPt,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(FPt.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},kPt.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,owt.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,owt.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,owt.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},kPt.prototype.bindAndClear=function(t,e){void 0===e&&(e=owt.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===owt.CLEAR||e===owt.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},kPt.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(JOt.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(JOt.TRIANGLE_STRIP))},kPt.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(Kwt.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},kPt.prototype.destroy=function(){this.texturePool.clear(!1)},kPt.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},kPt.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},kPt.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},kPt.prototype.emptyPool=function(){this.texturePool.clear(!0)},kPt.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},kPt.prototype.transformAABB=function(t,e){var r=UPt[0],i=UPt[1],n=UPt[2],s=UPt[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},kPt.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?FPt.copyFrom(n):FPt.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},kPt);function kPt(t){var e=DPt.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new cPt,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new SPt,e.quadUv=new OPt,e.tempRect=new kwt,e.activeState={},e.globalUniforms=new PPt({outputFrame:new kwt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var GPt=(XPt.prototype.flush=function(){},XPt.prototype.destroy=function(){this.renderer=null},XPt.prototype.start=function(){},XPt.prototype.stop=function(){this.flush()},XPt.prototype.render=function(t){},XPt);function XPt(t){this.renderer=t}var HPt,VPt=(uCt(jPt,HPt=BCt),jPt.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},jPt.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},jPt.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},jPt.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},jPt.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},jPt);function jPt(t){var e=HPt.call(this,t)||this;return e.emptyRenderer=new GPt(t),e.currentRenderer=e.emptyRenderer,e}var YPt,zPt=0,WPt=(uCt(ZPt,YPt=BCt),Object.defineProperty(ZPt.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),ZPt.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=zPt++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},ZPt.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=zPt++,this.renderer.runners.contextChange.emit(t)},ZPt.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},ZPt.prototype.createContext=function(t,e){var r;if(r=cwt.PREFER_ENV>=WOt.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},ZPt.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},ZPt.prototype.handleContextLost=function(t){t.preventDefault()},ZPt.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},ZPt.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},ZPt.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},ZPt.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},ZPt);function ZPt(t){var e=YPt.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var KPt,qPt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=lwt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},JPt=new kwt,QPt=(uCt($Pt,KPt=BCt),$Pt.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new kwt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,cwt.PREFER_ENV===WOt.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},$Pt.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},$Pt.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty($Pt.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),$Pt.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=KOt.COLOR|KOt.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},$Pt.prototype.initFramebuffer=function(t){var e=this.gl,e=new qPt(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},$Pt.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},$Pt.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},$Pt.prototype.detectSamples=function(t){var e=this.msaaSamples,r=lwt.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?lwt.NONE:r},$Pt.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new qCt(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=JPt).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},$Pt.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},$Pt.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},$Pt.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},$Pt.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new kwt},$Pt);function $Pt(t){t=KPt.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new qCt(10,10),t.msaaSamples=null,t}var tNt,eNt=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},rNt={5126:4,5123:2,5121:1},iNt=(uCt(nNt,tNt=BCt),nNt.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=cwt.PREFER_ENV===WOt.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},nNt.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},nNt.prototype.reset=function(){this.unbind()},nNt.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},nNt.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},nNt.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},nNt.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*rNt[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*rNt[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*rNt[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new eNt(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},nNt.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},nNt.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},nNt.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},nNt.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},nNt.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},nNt.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},nNt);function nNt(t){t=tNt.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var sNt=(oNt.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=uwt.NONE,this.autoDetect=!0),this._target=null},oNt.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},oNt);function oNt(t){void 0===t&&(t=null),this.type=uwt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function aNt(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function hNt(t,e,r,i){var n=aNt(t,t.VERTEX_SHADER,e),s=aNt(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function uNt(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function lNt(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return uNt(2*e);case"bvec3":return uNt(3*e);case"bvec4":return uNt(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var cNt,dNt={},fNt=dNt;function pNt(){var t,e;return(fNt===dNt||fNt&&fNt.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=cwt.PREFER_ENV>=WOt.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),fNt=e),fNt}function _Nt(t,e,r){if("precision"===t.substring(0,9))return r!==hwt.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===hwt.HIGH&&r!==hwt.HIGH?hwt.MEDIUM:e)+" float;\n"+t}var yNt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var mNt=null,vNt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function xNt(t,e){if(!mNt){var r=Object.keys(vNt);mNt={};for(var i=0;i<r.length;++i){var n=r[i];mNt[t[n]]=vNt[n]}}return mNt[e]}var gNt=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],ENt={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},TNt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var bNt,ANt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function SNt(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=ANt.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var INt=0,RNt={},ONt=(wNt.prototype.extractData=function(t,e){var r=pNt();r?(e=hNt(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},wNt.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=xNt(e,o.type),a={type:a,name:o.name,size:yNt[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},wNt.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=xNt(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:lNt(h,s.size)}}return r},Object.defineProperty(wNt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(wNt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),wNt.from=function(t,e,r){var i=t+e,n=bwt[i];return n||(bwt[i]=n=new wNt(t,e,r)),n},wNt);function wNt(t,e,r){void 0===r&&(r="pixi-shader"),this.id=INt++,this.vertexSrc=t||wNt.defaultVertexSrc,this.fragmentSrc=e||wNt.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),RNt[r]?(RNt[r]++,r+="-"+RNt[r]):RNt[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=_Nt(this.vertexSrc,cwt.PRECISION_VERTEX,hwt.HIGH),this.fragmentSrc=_Nt(this.fragmentSrc,cwt.PRECISION_FRAGMENT,(cNt||(cNt=hwt.MEDIUM,(r=pNt())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),cNt=r.precision?hwt.HIGH:hwt.MEDIUM)),cNt))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var CNt=(PNt.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},PNt.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(PNt.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),PNt.from=function(t,e,r){return new PNt(ONt.from(t,e),r)},PNt);function PNt(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof PPt?e:new PPt(e):new PPt({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var NNt=(Object.defineProperty(MNt.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(MNt.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(MNt.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(MNt.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(MNt.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(MNt.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(MNt.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==qOt.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(MNt.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),MNt.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},MNt.for2d=function(){var t=new MNt;return t.depthTest=!1,t.blend=!0,t},MNt);function MNt(){this.data=0,this.blendMode=qOt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var LNt,DNt=(uCt(UNt,LNt=CNt),UNt.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(UNt.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(UNt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(UNt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),UNt);function UNt(t,e,r){var i=this,e=ONt.from(t||UNt.defaultVertexSrc,e||UNt.defaultFragmentSrc);return(i=LNt.call(this,e,r)||this).padding=0,i.resolution=cwt.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new NNt,i}var FNt=new Kwt,BNt=(Object.defineProperty(kNt.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),kNt.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},kNt.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(FNt.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(FNt));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},kNt);function kNt(t,e){this._texture=t,this.mapCoord=new Kwt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var GNt,XNt=(uCt(HNt,GNt=DNt),HNt.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new BNt(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},HNt);function HNt(t){var e=this,r=new Kwt,e=GNt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var VNt,jNt=(uCt(YNt,VNt=BCt),YNt.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},YNt.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new sNt).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case uwt.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case uwt.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case uwt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},YNt.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case uwt.SCISSOR:this.renderer.scissor.pop();break;case uwt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case uwt.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},YNt.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=uwt.SPRITE:(t.type=uwt.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=uwt.SCISSOR)))},YNt.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new XNt(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},YNt.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},YNt);function YNt(t){t=VNt.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var zNt,VCt=(uCt(WNt,zNt=BCt),WNt.prototype.getStackLength=function(){return this.maskStack.length},WNt.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},WNt.prototype._useCurrent=function(){},WNt.prototype.destroy=function(){zNt.prototype.destroy.call(this),this.maskStack=null},WNt);function WNt(t){t=zNt.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var ZNt,KNt=(uCt(qNt,ZNt=VCt),qNt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},qNt.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},qNt.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},qNt.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},qNt);function qNt(t){t=ZNt.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var JNt,QNt=(uCt($Nt,JNt=VCt),$Nt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},$Nt.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},$Nt.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},$Nt.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},$Nt.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},$Nt);function $Nt(t){t=JNt.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var tMt,eMt=(uCt(rMt,tMt=BCt),rMt.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},rMt.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},rMt.prototype.setTransform=function(t){},rMt);function rMt(t){t=tMt.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new Kwt,t.transform=null,t}var iMt,nMt=new kwt,sMt=new kwt,oMt=(uCt(aMt,iMt=BCt),aMt.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(nMt.width=t.frame.width,nMt.height=t.frame.height,e=nMt),r||(sMt.x=t.frame.x,sMt.y=t.frame.y,sMt.width=e.width,sMt.height=e.height,r=sMt),n=i.framebuffer):(s=o.resolution,e||(nMt.width=o.screen.width,nMt.height=o.screen.height,e=nMt),r||((r=nMt).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},aMt.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},aMt.prototype.resize=function(){this.bind(null)},aMt.prototype.reset=function(){this.bind(null)},aMt);function aMt(t){var e=iMt.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new kwt,e.destinationFrame=new kwt,e.viewportFrame=new kwt,e}var hMt=(uMt.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},uMt);function uMt(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var lMt,cMt=0,dMt={textureCount:0},fMt=(uCt(pMt,lMt=BCt),pMt.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof bNt)return bNt;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");bNt=!0===t({a:"b"},"a","b")}catch(t){bNt=!1}return bNt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},pMt.prototype.contextChange=function(t){this.gl=t,this.reset()},pMt.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(dMt.textureCount=0,this.syncUniformGroup(t.uniformGroup,dMt)),i},pMt.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},pMt.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},pMt.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},pMt.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<gNt.length;h++)if(gNt[h].test(n,o)){i.push(gNt[h].code(r,o)),a=!0;break}a||(s=(1===n.size?ENt:TNt)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},pMt.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},pMt.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},pMt.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=hNt(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:lNt(a.type,a.size)}}t=new hMt(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},pMt.prototype.reset=function(){this.program=null,this.shader=null},pMt.prototype.destroy=function(){this.destroyed=!0},pMt);function pMt(t){t=lMt.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=cMt++,t}var _Mt,yMt=(uCt(mMt,_Mt=BCt),mMt.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[qOt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.ADD]=[t.ONE,t.ONE],e[qOt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.NONE]=[0,0],e[qOt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[qOt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[qOt.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[qOt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[qOt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[qOt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[qOt.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[qOt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[qOt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[qOt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[qOt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},mMt.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},mMt.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},mMt.prototype.setBlend=function(t){this.updateCheck(mMt.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},mMt.prototype.setOffset=function(t){this.updateCheck(mMt.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},mMt.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},mMt.prototype.setDepthMask=function(t){this.gl.depthMask(t)},mMt.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},mMt.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},mMt.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},mMt.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},mMt.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},mMt.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},mMt.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},mMt.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},mMt);function mMt(t){t=_Mt.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=qOt.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new NNt,t.defaultState.blend=!0,t}var vMt,xMt=(uCt(gMt,vMt=BCt),gMt.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==awt.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},gMt.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},gMt.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},gMt);function gMt(t){t=vMt.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=cwt.GC_MAX_IDLE,t.checkCountMax=cwt.GC_MAX_CHECK_COUNT,t.mode=cwt.GC_MODE,t}var EMt,TMt=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},bMt=(uCt(AMt,EMt=BCt),AMt.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new TMt(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new TMt(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},AMt.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},AMt.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},AMt.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},AMt.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==ewt.FLOAT&&this.renderer.texture.unbind(s)}},AMt.prototype.initTexture=function(t){var e=new TMt(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},AMt.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===twt.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},AMt.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==ewt.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},AMt.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&function(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}(this.managedTextures,t,1))},AMt.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==nwt.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=iwt.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},AMt.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==nwt.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===rwt.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===rwt.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===rwt.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===rwt.LINEAR?i.LINEAR:i.NEAREST)},AMt);function AMt(t){t=EMt.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new mCt,t.hasIntegerTextures=!1,t}var SMt,IMt={__proto__:null,FilterSystem:BPt,BatchSystem:VPt,ContextSystem:WPt,FramebufferSystem:QPt,GeometrySystem:iNt,MaskSystem:jNt,ScissorSystem:KNt,StencilSystem:QNt,ProjectionSystem:eMt,RenderTextureSystem:oMt,ShaderSystem:fMt,StateSystem:yMt,TextureGCSystem:xMt,TextureSystem:bMt},RMt=new Kwt,BCt=(uCt(OMt,SMt=pt.a),OMt.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(OMt.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(OMt.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),OMt.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},OMt.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=uPt.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return RMt.tx=-i.x,RMt.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:RMt,skipUpdateTransform:!!t.parent}),r},OMt.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=ZOt.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(OMt.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(OMt.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),OMt);function OMt(t,e){void 0===t&&(t=ZOt.UNKNOWN);var r=SMt.call(this)||this;return e=Object.assign({},cwt.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new kwt(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||cwt.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(Twt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var wMt;uCt(CMt,wMt=BCt),CMt.create=function(t){if(fwt=void 0===fwt?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:cwt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():fwt)return new CMt(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},CMt.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},CMt.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof uPt?(Twt("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},CMt.prototype.resize=function(t,e){wMt.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},CMt.prototype.reset=function(){return this.runners.reset.emit(),this},CMt.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},CMt.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();wMt.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(CMt.prototype,"extract",{get:function(){return Twt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),CMt.registerPlugin=function(t,e){(CMt.__plugins=CMt.__plugins||{})[t]=e};function CMt(t){var e,r=wMt.call(this,ZOt.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Cwt("destroy"),contextChange:new Cwt("contextChange"),reset:new Cwt("reset"),update:new Cwt("update"),postrender:new Cwt("postrender"),prerender:new Cwt("prerender"),resize:new Cwt("resize")},r.globalUniforms=new PPt({projectionMatrix:new Kwt},!0),r.addSystem(jNt,"mask").addSystem(WPt,"context").addSystem(yMt,"state").addSystem(fMt,"shader").addSystem(bMt,"texture").addSystem(iNt,"geometry").addSystem(QPt,"framebuffer").addSystem(KNt,"scissor").addSystem(QNt,"stencil").addSystem(eMt,"projection").addSystem(xMt,"textureGC").addSystem(BPt,"filter").addSystem(oMt,"renderTexture").addSystem(VPt,"batch"),r.initPlugins(CMt.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",pwt||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+_wt+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+_wt+" - "+e+" - http://www.pixijs.com/"),pwt=!0),r.resize(r.options.width,r.options.height),r}var PMt=function(){this.texArray=null,this.blend=0,this.type=JOt.TRIANGLES,this.start=0,this.size=0,this.data=null},NMt=(MMt.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},MMt);function MMt(){this.elements=[],this.ids=[],this.count=0}var LMt=(Object.defineProperty(DMt.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(DMt.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(DMt.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(DMt.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(DMt.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),DMt.prototype.view=function(t){return this[t+"View"]},DMt.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},DMt.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},DMt);function DMt(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var UMt,FMt=(uCt(BMt,UMt=GPt),BMt.prototype.contextChange=function(){var t=this.renderer.gl;cwt.PREFER_ENV===WOt.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),cwt.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=SNt(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},BMt.prototype.initFlushBuffers=function(){for(var t=BMt._drawCallPool,e=BMt._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new PMt);for(;e.length<i;)e.push(new NMt);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},BMt.prototype.onPrerender=function(){this._flushId=0},BMt.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},BMt.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=BMt._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++mCt._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;mCt._globalBatch=o},BMt.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=BMt._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=ywt[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},BMt.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},BMt.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;cwt.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},BMt.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=BMt._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},BMt.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},BMt.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),cwt.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},BMt.prototype.stop=function(){this.flush()},BMt.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),UMt.prototype.destroy.call(this)},BMt.prototype.getAttributeBuffer=function(t){var e=mwt(Math.ceil(t/8)),t=xwt(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new LMt(e*this.vertexSize*4)),t},BMt.prototype.getIndexBuffer=function(t){var e=mwt(Math.ceil(t/12)),r=xwt(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},BMt.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},BMt._drawCallPool=[],BMt._textureArrayPool=[],BMt);function BMt(t){var e=UMt.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=NNt.for2d(),e.size=4*cwt.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var kMt=(GMt.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=PPt.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new ONt(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Kwt,default:this.defaultGroupCache[t]};return new CNt(this.programCache[t],i)},GMt.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},GMt);function GMt(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var XMt,HMt=(uCt(VMt,XMt=Rnt),VMt);function VMt(t){void 0===t&&(t=!1);var e=XMt.call(this)||this;return e._buffer=new yPt(null,t,!1),e._indexBuffer=new yPt(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,twt.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,twt.FLOAT).addAttribute("aColor",e._buffer,4,!0,twt.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,twt.FLOAT).addIndex(e._indexBuffer),e}var jMt="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",YMt="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function zMt(){}(zMt.create=function(t){var e,t=Object.assign({vertex:jMt,fragment:YMt,geometryClass:HMt,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return uCt(o,e=FMt),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new kMt(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(zMt,"defaultVertexSrc",{get:function(){return jMt},enumerable:!1,configurable:!0}),Object.defineProperty(zMt,"defaultFragmentTemplate",{get:function(){return YMt},enumerable:!1,configurable:!0}),zMt).create();var WMt={};for(ZMt in YCt)!function(t){Object.defineProperty(WMt,t,{get:function(){return Twt("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),YCt[t]}})}(ZMt);var ZMt,KMt={};for(ZMt in IMt)!function(t){Object.defineProperty(KMt,t,{get:function(){return Twt("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),IMt[t]}})}(ZMt);var qMt=function(t,e){return(qMt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var JMt,QMt,$Mt,BCt=(qMt(QMt=eLt,$Mt=JMt=DNt),QMt.prototype=null===$Mt?Object.create($Mt):(tLt.prototype=$Mt.prototype,new tLt),eLt.prototype.apply=function(t,e,r,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var n=this.maskSprite.worldTransform,s=Math.sqrt(n.a*n.a+n.b*n.b),o=Math.sqrt(n.c*n.c+n.d*n.d);0!==s&&0!==o&&(this.uniforms.rotation[0]=n.a/s,this.uniforms.rotation[1]=n.b/s,this.uniforms.rotation[2]=n.c/o,this.uniforms.rotation[3]=n.d/o),t.applyFilter(this,e,r,i)},Object.defineProperty(eLt.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),eLt);function tLt(){this.constructor=QMt}function eLt(t,e){var r=this,i=new Kwt;return t.renderable=!1,(r=JMt.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=t,r.maskMatrix=i,r.scale=new Ywt(e=null==e?20:e,e),r}function rLt(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var iLt=/iPhone/i,nLt=/iPod/i,sLt=/iPad/i,oLt=/\biOS-universal(?:.+)Mac\b/i,aLt=/\bAndroid(?:.+)Mobile\b/i,hLt=/Android/i,uLt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,lLt=/Silk/i,cLt=/Windows Phone/i,dLt=/\bWindows(?:.+)ARM\b/i,fLt=/BlackBerry/i,pLt=/BB10/i,_Lt=/Opera Mini/i,yLt=/\b(CriOS|Chrome)(?:.+)Mobile/i,mLt=/Mobile(?:.+)Firefox\b/i;var vLt=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(iLt)&&!i(cLt),ipod:i(nLt),tablet:!i(iLt)&&(i(sLt)||rLt(e))&&!i(cLt),universal:i(oLt),device:(i(iLt)||i(nLt)||i(sLt)||i(oLt)||rLt(e))&&!i(cLt)},amazon:{phone:i(uLt),tablet:!i(uLt)&&i(lLt),device:i(uLt)||i(lLt)},android:{phone:!i(cLt)&&i(uLt)||!i(cLt)&&i(aLt),tablet:!i(cLt)&&!i(uLt)&&!i(aLt)&&(i(lLt)||i(hLt)),device:!i(cLt)&&(i(uLt)||i(lLt)||i(aLt)||i(hLt))||i(/\bokhttp\b/i)},windows:{phone:i(cLt),tablet:i(dLt),device:i(cLt)||i(dLt)},other:{blackberry:i(fLt),blackberry10:i(pLt),opera:i(_Lt),firefox:i(mLt),chrome:i(yLt),device:i(fLt)||i(pLt)||i(_Lt)||i(mLt)||i(yLt)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(Rnt={})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(Rnt={})[Rnt.UNKNOWN=0]="UNKNOWN",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.CANVAS=2]="CANVAS",(Rnt={})[Rnt.COLOR=16384]="COLOR",Rnt[Rnt.DEPTH=256]="DEPTH",Rnt[Rnt.STENCIL=1024]="STENCIL",(Rnt={})[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.ADD=1]="ADD",Rnt[Rnt.MULTIPLY=2]="MULTIPLY",Rnt[Rnt.SCREEN=3]="SCREEN",Rnt[Rnt.OVERLAY=4]="OVERLAY",Rnt[Rnt.DARKEN=5]="DARKEN",Rnt[Rnt.LIGHTEN=6]="LIGHTEN",Rnt[Rnt.COLOR_DODGE=7]="COLOR_DODGE",Rnt[Rnt.COLOR_BURN=8]="COLOR_BURN",Rnt[Rnt.HARD_LIGHT=9]="HARD_LIGHT",Rnt[Rnt.SOFT_LIGHT=10]="SOFT_LIGHT",Rnt[Rnt.DIFFERENCE=11]="DIFFERENCE",Rnt[Rnt.EXCLUSION=12]="EXCLUSION",Rnt[Rnt.HUE=13]="HUE",Rnt[Rnt.SATURATION=14]="SATURATION",Rnt[Rnt.COLOR=15]="COLOR",Rnt[Rnt.LUMINOSITY=16]="LUMINOSITY",Rnt[Rnt.NORMAL_NPM=17]="NORMAL_NPM",Rnt[Rnt.ADD_NPM=18]="ADD_NPM",Rnt[Rnt.SCREEN_NPM=19]="SCREEN_NPM",Rnt[Rnt.NONE=20]="NONE",Rnt[Rnt.SRC_OVER=0]="SRC_OVER",Rnt[Rnt.SRC_IN=21]="SRC_IN",Rnt[Rnt.SRC_OUT=22]="SRC_OUT",Rnt[Rnt.SRC_ATOP=23]="SRC_ATOP",Rnt[Rnt.DST_OVER=24]="DST_OVER",Rnt[Rnt.DST_IN=25]="DST_IN",Rnt[Rnt.DST_OUT=26]="DST_OUT",Rnt[Rnt.DST_ATOP=27]="DST_ATOP",Rnt[Rnt.ERASE=26]="ERASE",Rnt[Rnt.SUBTRACT=28]="SUBTRACT",Rnt[Rnt.XOR=29]="XOR",(Rnt={})[Rnt.POINTS=0]="POINTS",Rnt[Rnt.LINES=1]="LINES",Rnt[Rnt.LINE_LOOP=2]="LINE_LOOP",Rnt[Rnt.LINE_STRIP=3]="LINE_STRIP",Rnt[Rnt.TRIANGLES=4]="TRIANGLES",Rnt[Rnt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Rnt[Rnt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(Rnt={})[Rnt.RGBA=6408]="RGBA",Rnt[Rnt.RGB=6407]="RGB",Rnt[Rnt.ALPHA=6406]="ALPHA",Rnt[Rnt.LUMINANCE=6409]="LUMINANCE",Rnt[Rnt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Rnt[Rnt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Rnt[Rnt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt={})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(Rnt={})[Rnt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Rnt[Rnt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Rnt[Rnt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Rnt[Rnt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Rnt[Rnt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Rnt[Rnt.FLOAT=5126]="FLOAT",Rnt[Rnt.HALF_FLOAT=36193]="HALF_FLOAT",(Rnt={})[Rnt.FLOAT=0]="FLOAT",Rnt[Rnt.INT=1]="INT",Rnt[Rnt.UINT=2]="UINT",(Rnt=aUt=aUt||{})[Rnt.NEAREST=0]="NEAREST",Rnt[Rnt.LINEAR=1]="LINEAR",(Rnt=QDt=QDt||{})[Rnt.CLAMP=33071]="CLAMP",Rnt[Rnt.REPEAT=10497]="REPEAT",Rnt[Rnt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(Rnt=vUt=vUt||{})[Rnt.OFF=0]="OFF",Rnt[Rnt.POW2=1]="POW2",Rnt[Rnt.ON=2]="ON",Rnt[Rnt.ON_MANUAL=3]="ON_MANUAL",(Rnt={})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Rnt={})[Rnt.NO=0]="NO",Rnt[Rnt.YES=1]="YES",Rnt[Rnt.AUTO=2]="AUTO",Rnt[Rnt.BLEND=0]="BLEND",Rnt[Rnt.CLEAR=1]="CLEAR",Rnt[Rnt.BLIT=2]="BLIT",(Rnt=KDt=KDt||{})[Rnt.AUTO=0]="AUTO",Rnt[Rnt.MANUAL=1]="MANUAL",(Rnt=fUt=fUt||{}).LOW="lowp",Rnt.MEDIUM="mediump",Rnt.HIGH="highp",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.SCISSOR=1]="SCISSOR",Rnt[Rnt.STENCIL=2]="STENCIL",Rnt[Rnt.SPRITE=3]="SPRITE",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.LOW=2]="LOW",Rnt[Rnt.MEDIUM=4]="MEDIUM",Rnt[Rnt.HIGH=8]="HIGH";var xLt,gLt,ELt,TLt,bLt,ALt,SLt,ILt,RLt,OLt,wLt,CLt,PLt,NLt,MLt,LLt,DLt,ULt,FLt,BLt,kLt,GLt={MIPMAP_TEXTURES:vUt.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(xLt=32,ELt=!0,(vLt.tablet||vLt.phone)&&(vLt.apple.device&&(gLt=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(gLt[1],10)<11&&(ELt=!1),vLt.android.device&&(gLt=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(gLt[1],10)<7&&(ELt=!1)),ELt?xLt:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:KDt.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:QDt.CLAMP,SCALE_MODE:aUt.LINEAR,PRECISION_VERTEX:fUt.HIGH,PRECISION_FRAGMENT:vLt.apple.device?fUt.HIGH:fUt.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!vLt.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};(Rnt=TLt=TLt||{})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(vUt=bLt=bLt||{})[vUt.UNKNOWN=0]="UNKNOWN",vUt[vUt.WEBGL=1]="WEBGL",vUt[vUt.CANVAS=2]="CANVAS",(KDt=ALt=ALt||{})[KDt.COLOR=16384]="COLOR",KDt[KDt.DEPTH=256]="DEPTH",KDt[KDt.STENCIL=1024]="STENCIL",(QDt=SLt=SLt||{})[QDt.NORMAL=0]="NORMAL",QDt[QDt.ADD=1]="ADD",QDt[QDt.MULTIPLY=2]="MULTIPLY",QDt[QDt.SCREEN=3]="SCREEN",QDt[QDt.OVERLAY=4]="OVERLAY",QDt[QDt.DARKEN=5]="DARKEN",QDt[QDt.LIGHTEN=6]="LIGHTEN",QDt[QDt.COLOR_DODGE=7]="COLOR_DODGE",QDt[QDt.COLOR_BURN=8]="COLOR_BURN",QDt[QDt.HARD_LIGHT=9]="HARD_LIGHT",QDt[QDt.SOFT_LIGHT=10]="SOFT_LIGHT",QDt[QDt.DIFFERENCE=11]="DIFFERENCE",QDt[QDt.EXCLUSION=12]="EXCLUSION",QDt[QDt.HUE=13]="HUE",QDt[QDt.SATURATION=14]="SATURATION",QDt[QDt.COLOR=15]="COLOR",QDt[QDt.LUMINOSITY=16]="LUMINOSITY",QDt[QDt.NORMAL_NPM=17]="NORMAL_NPM",QDt[QDt.ADD_NPM=18]="ADD_NPM",QDt[QDt.SCREEN_NPM=19]="SCREEN_NPM",QDt[QDt.NONE=20]="NONE",QDt[QDt.SRC_OVER=0]="SRC_OVER",QDt[QDt.SRC_IN=21]="SRC_IN",QDt[QDt.SRC_OUT=22]="SRC_OUT",QDt[QDt.SRC_ATOP=23]="SRC_ATOP",QDt[QDt.DST_OVER=24]="DST_OVER",QDt[QDt.DST_IN=25]="DST_IN",QDt[QDt.DST_OUT=26]="DST_OUT",QDt[QDt.DST_ATOP=27]="DST_ATOP",QDt[QDt.ERASE=26]="ERASE",QDt[QDt.SUBTRACT=28]="SUBTRACT",QDt[QDt.XOR=29]="XOR",(aUt=ILt=ILt||{})[aUt.POINTS=0]="POINTS",aUt[aUt.LINES=1]="LINES",aUt[aUt.LINE_LOOP=2]="LINE_LOOP",aUt[aUt.LINE_STRIP=3]="LINE_STRIP",aUt[aUt.TRIANGLES=4]="TRIANGLES",aUt[aUt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",aUt[aUt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(fUt=RLt=RLt||{})[fUt.RGBA=6408]="RGBA",fUt[fUt.RGB=6407]="RGB",fUt[fUt.ALPHA=6406]="ALPHA",fUt[fUt.LUMINANCE=6409]="LUMINANCE",fUt[fUt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",fUt[fUt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",fUt[fUt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt=OLt=OLt||{})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(vUt=wLt=wLt||{})[vUt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",vUt[vUt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",vUt[vUt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",vUt[vUt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",vUt[vUt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",vUt[vUt.FLOAT=5126]="FLOAT",vUt[vUt.HALF_FLOAT=36193]="HALF_FLOAT",(KDt=CLt=CLt||{})[KDt.FLOAT=0]="FLOAT",KDt[KDt.INT=1]="INT",KDt[KDt.UINT=2]="UINT",(QDt=PLt=PLt||{})[QDt.NEAREST=0]="NEAREST",QDt[QDt.LINEAR=1]="LINEAR",(aUt=NLt=NLt||{})[aUt.CLAMP=33071]="CLAMP",aUt[aUt.REPEAT=10497]="REPEAT",aUt[aUt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(fUt=MLt=MLt||{})[fUt.OFF=0]="OFF",fUt[fUt.POW2=1]="POW2",fUt[fUt.ON=2]="ON",fUt[fUt.ON_MANUAL=3]="ON_MANUAL",(Rnt=LLt=LLt||{})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(vUt=DLt=DLt||{})[vUt.NO=0]="NO",vUt[vUt.YES=1]="YES",vUt[vUt.AUTO=2]="AUTO",vUt[vUt.BLEND=0]="BLEND",vUt[vUt.CLEAR=1]="CLEAR",vUt[vUt.BLIT=2]="BLIT",(KDt=ULt=ULt||{})[KDt.AUTO=0]="AUTO",KDt[KDt.MANUAL=1]="MANUAL",(QDt=FLt=FLt||{}).LOW="lowp",QDt.MEDIUM="mediump",QDt.HIGH="highp",(aUt=BLt=BLt||{})[aUt.NONE=0]="NONE",aUt[aUt.SCISSOR=1]="SCISSOR",aUt[aUt.STENCIL=2]="STENCIL",aUt[aUt.SPRITE=3]="SPRITE",(fUt=kLt=kLt||{})[fUt.NONE=0]="NONE",fUt[fUt.LOW=2]="LOW",fUt[fUt.MEDIUM=4]="MEDIUM",fUt[fUt.HIGH=8]="HIGH";r(23);var XLt={parse:_t.parse,format:_t.format,resolve:_t.resolve};GLt.RETINA_PREFIX=/@([0-9\.]+)x/;var HLt,VLt=GLt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,jLt="6.0.4";var YLt=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[SLt.NORMAL_NPM]=SLt.NORMAL,t[SLt.ADD_NPM]=SLt.ADD,t[SLt.SCREEN_NPM]=SLt.SCREEN,e[SLt.NORMAL]=SLt.NORMAL_NPM,e[SLt.ADD]=SLt.ADD_NPM,e[SLt.SCREEN]=SLt.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function zLt(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function WLt(t){return!(t&t-1||!t)}function ZLt(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}var KLt=0;var qLt={};function JLt(t,e,r){var i;void 0===r&&(r=3),qLt[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),qLt[e]=!0)}var QLt={},$Lt=Object.create(null),tDt=Object.create(null);eDt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},eDt.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},eDt.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(eDt.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(eDt.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function eDt(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||GLt.RESOLUTION,this.resize(t,e)}var rDt;function iDt(t,e){t=GLt.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var nDt,sDt=(oDt.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},oDt.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},oDt.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},oDt.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},oDt.prototype.contains=function(t){return-1!==this.items.indexOf(t)},oDt.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},oDt.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(oDt.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(oDt.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),oDt);function oDt(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(sDt.prototype,{dispatch:{value:sDt.prototype.emit},run:{value:sDt.prototype.emit}}),GLt.TARGET_FPMS=.06,(Rnt=nDt=nDt||{})[Rnt.INTERACTION=50]="INTERACTION",Rnt[Rnt.HIGH=25]="HIGH",Rnt[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.LOW=-25]="LOW",Rnt[Rnt.UTILITY=-50]="UTILITY";var aDt=(hDt.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},hDt.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},hDt.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},hDt.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},hDt);function hDt(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var uDt=(lDt.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},lDt.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},lDt.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},lDt.prototype.add=function(t,e,r){return void 0===r&&(r=nDt.NORMAL),this._addListener(new aDt(t,e,r))},lDt.prototype.addOnce=function(t,e,r){return void 0===r&&(r=nDt.NORMAL),this._addListener(new aDt(t,e,r,!0))},lDt.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},lDt.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(lDt.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),lDt.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},lDt.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},lDt.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},lDt.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*GLt.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(lDt.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(lDt.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,GLt.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(lDt.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(lDt,"shared",{get:function(){var t;return lDt._shared||((t=lDt._shared=new lDt).autoStart=!0,t._protected=!0),lDt._shared},enumerable:!1,configurable:!0}),Object.defineProperty(lDt,"system",{get:function(){var t;return lDt._system||((t=lDt._system=new lDt).autoStart=!0,t._protected=!0),lDt._system},enumerable:!1,configurable:!0}),lDt);function lDt(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new aDt(null,null,1/0),this.deltaMS=1/GLt.TARGET_FPMS,this.elapsedMS=1/GLt.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}cDt.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,nDt.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?uDt.shared:new uDt,t.autoStart&&this.start()},cDt.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function cDt(){}var dDt,fDt=2*Math.PI;Math.PI,Math.PI;(vUt=dDt=dDt||{})[vUt.POLY=0]="POLY",vUt[vUt.RECT=1]="RECT",vUt[vUt.CIRC=2]="CIRC",vUt[vUt.ELIP=3]="ELIP",vUt[vUt.RREC=4]="RREC";var pDt=(Object.defineProperty(_Dt.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(_Dt.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(_Dt.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(_Dt.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(_Dt,"EMPTY",{get:function(){return new _Dt(0,0,0,0)},enumerable:!1,configurable:!0}),_Dt.prototype.clone=function(){return new _Dt(this.x,this.y,this.width,this.height)},_Dt.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},_Dt.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},_Dt.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},_Dt.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},_Dt.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},_Dt.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},_Dt.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},_Dt.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},_Dt);function _Dt(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=dDt.RECT}yDt.prototype.clone=function(){return new yDt(this.x,this.y,this.radius)},yDt.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},yDt.prototype.getBounds=function(){return new pDt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},yDt.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function yDt(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=dDt.CIRC}mDt.prototype.clone=function(){return new mDt(this.x,this.y,this.width,this.height)},mDt.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},mDt.prototype.getBounds=function(){return new pDt(this.x-this.width,this.y-this.height,this.width,this.height)},mDt.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function mDt(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=dDt.ELIP}vDt.prototype.clone=function(){var t=new vDt(this.points.slice());return t.closeStroke=this.closeStroke,t},vDt.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},vDt.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function vDt(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=dDt.POLY,this.closeStroke=!0}xDt.prototype.clone=function(){return new xDt(this.x,this.y,this.width,this.height,this.radius)},xDt.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},xDt.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function xDt(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=dDt.RREC}var gDt=(EDt.prototype.clone=function(){return new EDt(this.x,this.y)},EDt.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},EDt.prototype.copyTo=function(t){return t.set(this.x,this.y),t},EDt.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},EDt.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},EDt.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},EDt);function EDt(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var TDt=(bDt.prototype.clone=function(t,e){return new bDt(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},bDt.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},bDt.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},bDt.prototype.copyTo=function(t){return t.set(this._x,this._y),t},bDt.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},bDt.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(bDt.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(bDt.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),bDt);function bDt(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var ADt=(SDt.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},SDt.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},SDt.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},SDt.prototype.apply=function(t,e){e=e||new gDt;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},SDt.prototype.applyInverse=function(t,e){e=e||new gDt;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},SDt.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},SDt.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},SDt.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},SDt.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},SDt.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},SDt.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},SDt.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(fDt-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},SDt.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},SDt.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},SDt.prototype.clone=function(){var t=new SDt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},SDt.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},SDt.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},SDt.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(SDt,"IDENTITY",{get:function(){return new SDt},enumerable:!1,configurable:!0}),Object.defineProperty(SDt,"TEMP_MATRIX",{get:function(){return new SDt},enumerable:!1,configurable:!0}),SDt);function SDt(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var IDt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],RDt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ODt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],wDt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],CDt=[],PDt=[],NDt=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];CDt.push(e);for(var r=0;r<16;r++)for(var i=NDt(IDt[t]*IDt[r]+ODt[t]*RDt[r]),n=NDt(RDt[t]*IDt[r]+wDt[t]*RDt[r]),s=NDt(IDt[t]*ODt[r]+ODt[t]*wDt[r]),o=NDt(RDt[t]*ODt[r]+wDt[t]*wDt[r]),a=0;a<16;a++)if(IDt[a]===i&&RDt[a]===n&&ODt[a]===s&&wDt[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new ADt;h.set(IDt[t],RDt[t],ODt[t],wDt[t],0,0),PDt.push(h)}}();var MDt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return IDt[t]},uY:function(t){return RDt[t]},vX:function(t){return ODt[t]},vY:function(t){return wDt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return CDt[t][e]},sub:function(t,e){return CDt[t][MDt.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?MDt.S:MDt.N:2*Math.abs(e)<=Math.abs(t)?0<t?MDt.E:MDt.W:0<e?0<t?MDt.SE:MDt.SW:0<t?MDt.NE:MDt.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=PDt[MDt.inv(e)];e.tx=r,e.ty=i,t.append(e)}};LDt.prototype.onChange=function(){this._localID++},LDt.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},LDt.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},LDt.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},LDt.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},LDt.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(LDt.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),LDt.IDENTITY=new LDt;function LDt(){this.worldTransform=new ADt,this.localTransform=new ADt,this.position=new TDt(this.onChange,this,0,0),this.scale=new TDt(this.onChange,this,1,1),this.pivot=new TDt(this.onChange,this,0,0),this.skew=new TDt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}GLt.PREFER_ENV=vLt.any?TLt.WEBGL:TLt.WEBGL2,GLt.STRICT_TEXTURE_CACHE=!1;var DDt=[];function UDt(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=DDt.length-1;0<=n;--n){var s=DDt[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var FDt=function(t,e){return(FDt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function BDt(t,e){function r(){this.constructor=t}FDt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var kDt=(GDt.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},GDt.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},GDt.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(GDt.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),GDt.prototype.update=function(){this.destroyed||this.onUpdate.emit()},GDt.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(GDt.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(GDt.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),GDt.prototype.style=function(t,e,r){return!1},GDt.prototype.dispose=function(){},GDt.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},GDt.test=function(t,e){return!1},GDt);function GDt(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new sDt("setRealSize"),this.onUpdate=new sDt("update"),this.onError=new sDt("onError")}var XDt,HDt=(BDt(VDt,XDt=kDt),VDt.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===LLt.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},VDt.prototype.dispose=function(){this.data=null},VDt.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},VDt);function VDt(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=XDt.call(this,e,i)||this).data=t,r}var jDt,YDt={scaleMode:PLt.NEAREST,format:RLt.RGBA,alphaMode:LLt.NPM},zDt=(BDt(WDt,jDt=pt.a),Object.defineProperty(WDt.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(WDt.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),WDt.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},WDt.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},WDt.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},WDt.prototype._refreshPOT=function(){this.isPowerOfTwo=WLt(this.realWidth)&&WLt(this.realHeight)},WDt.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},WDt.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},WDt.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},WDt.prototype.onError=function(t){this.emit("error",this,t)},WDt.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete tDt[this.cacheId],delete $Lt[this.cacheId],this.cacheId=null),this.dispose(),WDt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},WDt.prototype.dispose=function(){this.emit("dispose",this)},WDt.prototype.castToBaseTexture=function(){return this},WDt.from=function(t,e,r){void 0===r&&(r=GLt.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++KLt),t._pixiId),s=tDt[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new WDt(t,e)).cacheId=n,WDt.addToCache(s,n)),s},WDt.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new HDt(t,{width:e,height:r}),t=t instanceof Float32Array?wLt.FLOAT:wLt.UNSIGNED_BYTE;return new WDt(n,Object.assign(YDt,i||{width:e,height:r,type:t}))},WDt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),tDt[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),tDt[e]=t)},WDt.removeFromCache=function(t){if("string"==typeof t){var e=tDt[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete tDt[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete tDt[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},WDt._globalBatch=0,WDt);function WDt(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=jDt.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof kDt||((t=UDt(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||GLt.RESOLUTION,r.mipmap=void 0!==n?n:GLt.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:GLt.ANISOTROPIC_LEVEL,r.wrapMode=u||GLt.WRAP_MODE,r.scaleMode=void 0!==o?o:GLt.SCALE_MODE,r.format=l||RLt.RGBA,r.type=c||wLt.UNSIGNED_BYTE,r.target=d||OLt.TEXTURE_2D,r.alphaMode=void 0!==i?i:LLt.UNPACK,r.uid=++KLt,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var ZDt,KDt=(BDt(qDt,ZDt=kDt),qDt.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof kDt?this.addResourceAt(t[r],r):this.addResourceAt(UDt(t[r],e),r))},qDt.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},qDt.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},qDt.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");ZDt.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},qDt.prototype.unbind=function(t){ZDt.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},qDt.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},qDt);function qDt(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=ZDt.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new zDt;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var JDt,QDt=(BDt($Dt,JDt=KDt),$Dt.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},$Dt.prototype.bind=function(t){JDt.prototype.bind.call(this,t),t.target=OLt.TEXTURE_2D_ARRAY},$Dt.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},$Dt);function $Dt(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=JDt.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var tUt,eUt=(BDt(rUt,tUt=kDt),rUt.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(rDt=rDt||document.createElement("a")).href=t;var r=XLt.parse(rDt.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},rUt.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===LLt.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},rUt.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),tUt.prototype.update.call(this))},rUt.prototype.dispose=function(){this.source=null},rUt);function rUt(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=tUt.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var iUt,nUt=(BDt(sUt,iUt=eUt),sUt.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},sUt);function sUt(t){return iUt.call(this,t)||this}var oUt,aUt=(BDt(hUt,oUt=KDt),hUt.prototype.bind=function(t){oUt.prototype.bind.call(this,t),t.target=OLt.TEXTURE_CUBE_MAP},hUt.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=OLt.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},hUt.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<hUt.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},hUt.test=function(t){return Array.isArray(t)&&t.length===hUt.SIDES},hUt.SIDES=6,hUt);function hUt(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==hUt.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=oUt.call(this,6,{width:n,height:s})||this,a=0;a<hUt.SIDES;a++)r.items[a].target=OLt.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var uUt,lUt=(BDt(cUt,uUt=eUt),cUt.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},cUt.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===LLt.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},cUt.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return uUt.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(uUt.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},cUt.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,uUt.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},cUt.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},cUt);function cUt(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,eUt.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=uUt.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:GLt.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var dUt,fUt=(BDt(pUt,dUt=eUt),pUt.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},pUt.prototype._loadSvg=function(){var s=this,o=new Image;eUt.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++KLt,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},pUt.getSize=function(t){var e=pUt.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},pUt.prototype.dispose=function(){dUt.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},pUt.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},pUt.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,pUt);function pUt(t,e){var r=this;return e=e||{},(r=dUt.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var _Ut,Rnt=(BDt(yUt,_Ut=eUt),yUt.prototype.update=function(t){var e;this.destroyed||(e=uDt.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(_Ut.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},yUt.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},yUt.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},yUt.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},yUt.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},yUt.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(uDt.shared.add(this.update,this),this._isConnectedToTicker=!0)},yUt.prototype._onPlayStop=function(){this._isConnectedToTicker&&(uDt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},yUt.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},yUt.prototype.dispose=function(){this._isConnectedToTicker&&uDt.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),_Ut.prototype.dispose.call(this)},Object.defineProperty(yUt.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(uDt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(uDt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(yUt.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),yUt.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<yUt.TYPES.indexOf(e)},yUt.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],yUt.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},yUt);function yUt(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];eUt.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||yUt.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=_Ut.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var mUt,vUt=(BDt(xUt,mUt=eUt),xUt.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},xUt);function xUt(t){return mUt.call(this,t)||this}DDt.push(lUt,vUt,nUt,Rnt,fUt,HDt,aUt,QDt);var gUt={__proto__:null,Resource:kDt,BaseImageResource:eUt,INSTALLED:DDt,autoDetectResource:UDt,AbstractMultiResource:KDt,ArrayResource:QDt,BufferResource:HDt,CanvasResource:nUt,CubeResource:aUt,ImageResource:lUt,SVGResource:fUt,VideoResource:Rnt,ImageBitmapResource:vUt},fUt=(EUt.prototype.destroy=function(){this.renderer=null},EUt);function EUt(t){this.renderer=t}var TUt,bUt=(BDt(AUt,TUt=HDt),AUt.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===LLt.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},AUt);function AUt(){return null!==TUt&&TUt.apply(this,arguments)||this}var SUt=(Object.defineProperty(IUt.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),IUt.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new zDt(null,{scaleMode:PLt.NEAREST,resolution:1,mipmap:MLt.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},IUt.prototype.addDepthTexture=function(t){return this.depthTexture=t||new zDt(new bUt(null,{width:this.width,height:this.height}),{scaleMode:PLt.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MLt.OFF,format:RLt.DEPTH_COMPONENT,type:wLt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},IUt.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},IUt.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},IUt.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},IUt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},IUt.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},IUt);function IUt(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new sDt("disposeFramebuffer"),this.multisample=kLt.NONE}var RUt,OUt=(BDt(wUt,RUt=zDt),wUt.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},wUt.prototype.dispose=function(){this.framebuffer.dispose(),RUt.prototype.dispose.call(this)},wUt.prototype.destroy=function(){RUt.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},wUt);function wUt(t){var e=this,e=RUt.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=MLt.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new SUt(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var CUt=(PUt.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=MDt.add(r,MDt.NW),this.x0=s+i*MDt.uX(r),this.y0=e+n*MDt.uY(r),r=MDt.add(r,2),this.x1=s+i*MDt.uX(r),this.y1=e+n*MDt.uY(r),r=MDt.add(r,2),this.x2=s+i*MDt.uX(r),this.y2=e+n*MDt.uY(r),r=MDt.add(r,2),this.x3=s+i*MDt.uX(r),this.y3=e+n*MDt.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},PUt.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},PUt);function PUt(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var NUt,MUt=new CUt,LUt=(BDt(DUt,NUt=pt.a),DUt.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},DUt.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},DUt.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&$Lt[t.url]&&DUt.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,DUt.removeFromCache(this),this.textureCacheIds=null},DUt.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new DUt(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},DUt.prototype.updateUvs=function(){this._uvs===MUt&&(this._uvs=new CUt),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},DUt.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=GLt.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++KLt),t._pixiId),s=$Lt[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=iDt(t)),(s=new DUt(new zDt(t,e))).baseTexture.cacheId=n,zDt.addToCache(s.baseTexture,n),DUt.addToCache(s,n)),s},DUt.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=DUt.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},DUt.fromBuffer=function(t,e,r,i){return new DUt(zDt.fromBuffer(t,e,r,i))},DUt.fromLoader=function(t,e,r,i){t=new zDt(t,Object.assign({scaleMode:GLt.SCALE_MODE,resolution:iDt(e)},i)),i=t.resource;i instanceof lUt&&(i.url=e);var n=new DUt(t);return zDt.addToCache(n.baseTexture,r=r||e),DUt.addToCache(n,r),r!==e&&(zDt.addToCache(n.baseTexture,e),DUt.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},DUt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),$Lt[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),$Lt[e]=t)},DUt.removeFromCache=function(t){if("string"==typeof t){var e=$Lt[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete $Lt[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)$Lt[t.textureCacheIds[i]]===t&&delete $Lt[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(DUt.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(DUt.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(DUt.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(DUt.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(DUt.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),DUt.prototype.castToBaseTexture=function(){return this.baseTexture},DUt);function DUt(t,e,r,i,n,s){var o=NUt.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new pDt(0,0,1,1)),t instanceof DUt&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=MUt,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new gDt(s.x,s.y):new gDt(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function UUt(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}LUt.EMPTY=new LUt(new zDt),UUt(LUt.EMPTY),UUt(LUt.EMPTY.baseTexture),LUt.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new LUt(new zDt(new nUt(t)))}(),UUt(LUt.WHITE),UUt(LUt.WHITE.baseTexture);var FUt,BUt=(BDt(kUt,FUt=LUt),Object.defineProperty(kUt.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),kUt.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},kUt.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},kUt.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(JLt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new kUt(new OUt(t))},kUt);function kUt(t,e){e=FUt.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var GUt=(XUt.prototype.createTexture=function(t,e){e=new OUt(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new BUt(e)},XUt.prototype.getOptimalTexture=function(t,e,r){var i=XUt.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=zLt(t)))<<16|65535&(e=zLt(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},XUt.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},XUt.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},XUt.prototype.returnFilterTexture=function(t){this.returnTexture(t)},XUt.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},XUt.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=XUt.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},XUt.SCREEN_KEY="screen",XUt);function XUt(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var HUt=(VUt.prototype.destroy=function(){this.buffer=null},VUt.from=function(t,e,r,i,n){return new VUt(t,e,r,i,n)},VUt);function VUt(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=wLt.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var jUt=0,YUt=(zUt.prototype.update=function(t){this.data=t||this.data,this._updateID++},zUt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},zUt.prototype.destroy=function(){this.dispose(),this.data=null},zUt.from=function(t){return new zUt(t=t instanceof Array?new Float32Array(t):t)},zUt);function zUt(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=jUt++,this.disposeRunner=new sDt("disposeBuffer")}function WUt(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var ZUt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var KUt={5126:4,5123:2,5121:1},qUt=0,JUt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Rnt=(QUt.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof YUt||(e instanceof Array&&(e=new Float32Array(e)),e=new YUt(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new HUt(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},QUt.prototype.getAttribute=function(t){return this.attributes[t]},QUt.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},QUt.prototype.addIndex=function(t){return t instanceof YUt||(t instanceof Array&&(t=new Uint16Array(t)),t=new YUt(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},QUt.prototype.getIndex=function(){return this.indexBuffer},QUt.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new YUt;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*KUt[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=WUt(l);n[c]||(n[c]=new ZUt[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},QUt.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},QUt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},QUt.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},QUt.prototype.clone=function(){for(var t=new QUt,e=0;e<this.buffers.length;e++)t.buffers[e]=new YUt(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new HUt(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},QUt.merge=function(t){for(var e=new QUt,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new JUt[WUt(o.buffers[s].data)](i[s]),e.buffers[s]=new YUt(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*KUt[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},QUt);function QUt(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=qUt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new sDt("disposeGeometry"),this.refCount=0}var $Ut,t2t=(BDt(e2t,$Ut=Rnt),e2t);function e2t(){var t=$Ut.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var r2t,i2t=(BDt(n2t,r2t=Rnt),n2t.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},n2t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},n2t);function n2t(){var t=r2t.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new YUt(t.vertices),t.uvBuffer=new YUt(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var s2t=0,o2t=(a2t.prototype.update=function(){this.dirtyId++},a2t.prototype.add=function(t,e,r){this.uniforms[t]=new a2t(e,r)},a2t.from=function(t,e){return new a2t(t,e)},a2t);function a2t(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=s2t++,this.static=!!e}var h2t=(u2t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},u2t);function u2t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new pDt,this.destinationFrame=new pDt,this.bindingSourceFrame=new pDt,this.bindingDestinationFrame=new pDt,this.filters=[],this.transform=null}var l2t,c2t=[new gDt,new gDt,new gDt,new gDt],d2t=new ADt,f2t=(BDt(p2t,l2t=fUt),p2t.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new h2t,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(d2t.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},p2t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,DLt.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,DLt.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,DLt.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},p2t.prototype.bindAndClear=function(t,e){void 0===e&&(e=DLt.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===DLt.CLEAR||e===DLt.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},p2t.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(ILt.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(ILt.TRIANGLE_STRIP))},p2t.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(ADt.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},p2t.prototype.destroy=function(){this.texturePool.clear(!1)},p2t.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},p2t.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},p2t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},p2t.prototype.emptyPool=function(){this.texturePool.clear(!0)},p2t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},p2t.prototype.transformAABB=function(t,e){var r=c2t[0],i=c2t[1],n=c2t[2],s=c2t[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},p2t.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?d2t.copyFrom(n):d2t.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},p2t);function p2t(t){var e=l2t.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new GUt,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new t2t,e.quadUv=new i2t,e.tempRect=new pDt,e.activeState={},e.globalUniforms=new o2t({outputFrame:new pDt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var _2t=(y2t.prototype.flush=function(){},y2t.prototype.destroy=function(){this.renderer=null},y2t.prototype.start=function(){},y2t.prototype.stop=function(){this.flush()},y2t.prototype.render=function(t){},y2t);function y2t(t){this.renderer=t}var m2t,v2t=(BDt(x2t,m2t=fUt),x2t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},x2t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},x2t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},x2t.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},x2t.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},x2t);function x2t(t){var e=m2t.call(this,t)||this;return e.emptyRenderer=new _2t(t),e.currentRenderer=e.emptyRenderer,e}var g2t,E2t=0,T2t=(BDt(b2t,g2t=fUt),Object.defineProperty(b2t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),b2t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=E2t++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},b2t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=E2t++,this.renderer.runners.contextChange.emit(t)},b2t.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},b2t.prototype.createContext=function(t,e){var r;if(r=GLt.PREFER_ENV>=TLt.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},b2t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},b2t.prototype.handleContextLost=function(t){t.preventDefault()},b2t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},b2t.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},b2t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},b2t.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},b2t);function b2t(t){var e=g2t.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var A2t,S2t=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=kLt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},I2t=new pDt,R2t=(BDt(O2t,A2t=fUt),O2t.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new pDt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,GLt.PREFER_ENV===TLt.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},O2t.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},O2t.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(O2t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),O2t.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=ALt.COLOR|ALt.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},O2t.prototype.initFramebuffer=function(t){var e=this.gl,e=new S2t(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},O2t.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},O2t.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},O2t.prototype.detectSamples=function(t){var e=this.msaaSamples,r=kLt.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?kLt.NONE:r},O2t.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new SUt(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=I2t).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},O2t.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},O2t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},O2t.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},O2t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new pDt},O2t);function O2t(t){t=A2t.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new SUt(10,10),t.msaaSamples=null,t}var w2t,C2t=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},P2t={5126:4,5123:2,5121:1},N2t=(BDt(M2t,w2t=fUt),M2t.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=GLt.PREFER_ENV===TLt.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},M2t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},M2t.prototype.reset=function(){this.unbind()},M2t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},M2t.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},M2t.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},M2t.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*P2t[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*P2t[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*P2t[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new C2t(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},M2t.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},M2t.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},M2t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},M2t.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},M2t.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},M2t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},M2t);function M2t(t){t=w2t.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var L2t=(D2t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=BLt.NONE,this.autoDetect=!0),this._target=null},D2t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},D2t);function D2t(t){void 0===t&&(t=null),this.type=BLt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function U2t(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function F2t(t,e,r,i){var n=U2t(t,t.VERTEX_SHADER,e),s=U2t(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function B2t(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function k2t(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return B2t(2*e);case"bvec3":return B2t(3*e);case"bvec4":return B2t(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var G2t,X2t={},H2t=X2t;function V2t(){var t,e;return(H2t===X2t||H2t&&H2t.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=GLt.PREFER_ENV>=TLt.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),H2t=e),H2t}function j2t(t,e,r){if("precision"===t.substring(0,9))return r!==FLt.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===FLt.HIGH&&r!==FLt.HIGH?FLt.MEDIUM:e)+" float;\n"+t}var Y2t={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var z2t=null,W2t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Z2t(t,e){if(!z2t){var r=Object.keys(W2t);z2t={};for(var i=0;i<r.length;++i){var n=r[i];z2t[t[n]]=W2t[n]}}return z2t[e]}var K2t=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],q2t={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},J2t={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Q2t,$2t=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function tFt(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=$2t.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var eFt=0,rFt={},iFt=(nFt.prototype.extractData=function(t,e){var r=V2t();r?(e=F2t(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},nFt.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=Z2t(e,o.type),a={type:a,name:o.name,size:Y2t[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},nFt.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=Z2t(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:k2t(h,s.size)}}return r},Object.defineProperty(nFt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(nFt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),nFt.from=function(t,e,r){var i=t+e,n=QLt[i];return n||(QLt[i]=n=new nFt(t,e,r)),n},nFt);function nFt(t,e,r){void 0===r&&(r="pixi-shader"),this.id=eFt++,this.vertexSrc=t||nFt.defaultVertexSrc,this.fragmentSrc=e||nFt.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),rFt[r]?(rFt[r]++,r+="-"+rFt[r]):rFt[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=j2t(this.vertexSrc,GLt.PRECISION_VERTEX,FLt.HIGH),this.fragmentSrc=j2t(this.fragmentSrc,GLt.PRECISION_FRAGMENT,(G2t||(G2t=FLt.MEDIUM,(r=V2t())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),G2t=r.precision?FLt.HIGH:FLt.MEDIUM)),G2t))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var sFt=(oFt.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},oFt.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(oFt.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),oFt.from=function(t,e,r){return new oFt(iFt.from(t,e),r)},oFt);function oFt(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof o2t?e:new o2t(e):new o2t({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var aFt=(Object.defineProperty(hFt.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(hFt.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(hFt.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(hFt.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(hFt.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(hFt.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(hFt.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==SLt.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(hFt.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),hFt.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},hFt.for2d=function(){var t=new hFt;return t.depthTest=!1,t.blend=!0,t},hFt);function hFt(){this.data=0,this.blendMode=SLt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var uFt,lFt=(BDt(cFt,uFt=sFt),cFt.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(cFt.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(cFt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(cFt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),cFt);function cFt(t,e,r){var i=this,e=iFt.from(t||cFt.defaultVertexSrc,e||cFt.defaultFragmentSrc);return(i=uFt.call(this,e,r)||this).padding=0,i.resolution=GLt.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new aFt,i}var dFt=new ADt,fFt=(Object.defineProperty(pFt.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),pFt.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},pFt.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(dFt.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(dFt));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},pFt);function pFt(t,e){this._texture=t,this.mapCoord=new ADt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var _Ft,yFt=(BDt(mFt,_Ft=lFt),mFt.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new fFt(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},mFt);function mFt(t){var e=this,r=new ADt,e=_Ft.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var vFt,xFt=(BDt(gFt,vFt=fUt),gFt.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},gFt.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new L2t).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case BLt.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case BLt.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case BLt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},gFt.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case BLt.SCISSOR:this.renderer.scissor.pop();break;case BLt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case BLt.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},gFt.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=BLt.SPRITE:(t.type=BLt.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=BLt.SCISSOR)))},gFt.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new yFt(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},gFt.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},gFt);function gFt(t){t=vFt.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var EFt,vUt=(BDt(TFt,EFt=fUt),TFt.prototype.getStackLength=function(){return this.maskStack.length},TFt.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},TFt.prototype._useCurrent=function(){},TFt.prototype.destroy=function(){EFt.prototype.destroy.call(this),this.maskStack=null},TFt);function TFt(t){t=EFt.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var bFt,AFt=(BDt(SFt,bFt=vUt),SFt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},SFt.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},SFt.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},SFt.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},SFt);function SFt(t){t=bFt.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var IFt,RFt=(BDt(OFt,IFt=vUt),OFt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},OFt.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},OFt.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},OFt.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},OFt.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},OFt);function OFt(t){t=IFt.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var wFt,CFt=(BDt(PFt,wFt=fUt),PFt.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},PFt.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},PFt.prototype.setTransform=function(t){},PFt);function PFt(t){t=wFt.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new ADt,t.transform=null,t}var NFt,MFt=new pDt,LFt=new pDt,DFt=(BDt(UFt,NFt=fUt),UFt.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(MFt.width=t.frame.width,MFt.height=t.frame.height,e=MFt),r||(LFt.x=t.frame.x,LFt.y=t.frame.y,LFt.width=e.width,LFt.height=e.height,r=LFt),n=i.framebuffer):(s=o.resolution,e||(MFt.width=o.screen.width,MFt.height=o.screen.height,e=MFt),r||((r=MFt).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},UFt.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},UFt.prototype.resize=function(){this.bind(null)},UFt.prototype.reset=function(){this.bind(null)},UFt);function UFt(t){var e=NFt.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new pDt,e.destinationFrame=new pDt,e.viewportFrame=new pDt,e}var FFt=(BFt.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},BFt);function BFt(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var kFt,GFt=0,XFt={textureCount:0},HFt=(BDt(VFt,kFt=fUt),VFt.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Q2t)return Q2t;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Q2t=!0===t({a:"b"},"a","b")}catch(t){Q2t=!1}return Q2t}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},VFt.prototype.contextChange=function(t){this.gl=t,this.reset()},VFt.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(XFt.textureCount=0,this.syncUniformGroup(t.uniformGroup,XFt)),i},VFt.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},VFt.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},VFt.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},VFt.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<K2t.length;h++)if(K2t[h].test(n,o)){i.push(K2t[h].code(r,o)),a=!0;break}a||(s=(1===n.size?q2t:J2t)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},VFt.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},VFt.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},VFt.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=F2t(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:k2t(a.type,a.size)}}t=new FFt(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},VFt.prototype.reset=function(){this.program=null,this.shader=null},VFt.prototype.destroy=function(){this.destroyed=!0},VFt);function VFt(t){t=kFt.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=GFt++,t}var jFt,YFt=(BDt(zFt,jFt=fUt),zFt.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[SLt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.ADD]=[t.ONE,t.ONE],e[SLt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.NONE]=[0,0],e[SLt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[SLt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[SLt.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[SLt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[SLt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[SLt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[SLt.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[SLt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[SLt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[SLt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[SLt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},zFt.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},zFt.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},zFt.prototype.setBlend=function(t){this.updateCheck(zFt.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},zFt.prototype.setOffset=function(t){this.updateCheck(zFt.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},zFt.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},zFt.prototype.setDepthMask=function(t){this.gl.depthMask(t)},zFt.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},zFt.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},zFt.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},zFt.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},zFt.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},zFt.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},zFt.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},zFt.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},zFt);function zFt(t){t=jFt.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=SLt.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new aFt,t.defaultState.blend=!0,t}var WFt,ZFt=(BDt(KFt,WFt=fUt),KFt.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ULt.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},KFt.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},KFt.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},KFt);function KFt(t){t=WFt.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=GLt.GC_MAX_IDLE,t.checkCountMax=GLt.GC_MAX_CHECK_COUNT,t.mode=GLt.GC_MODE,t}var qFt,JFt=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},QFt=(BDt($Ft,qFt=fUt),$Ft.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new JFt(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new JFt(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},$Ft.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},$Ft.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},$Ft.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},$Ft.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==CLt.FLOAT&&this.renderer.texture.unbind(s)}},$Ft.prototype.initTexture=function(t){var e=new JFt(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},$Ft.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===wLt.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},$Ft.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==CLt.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},$Ft.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&function(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}(this.managedTextures,t,1))},$Ft.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==MLt.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=NLt.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},$Ft.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==MLt.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===PLt.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===PLt.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===PLt.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===PLt.LINEAR?i.LINEAR:i.NEAREST)},$Ft);function $Ft(t){t=qFt.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new zDt,t.hasIntegerTextures=!1,t}var tBt,eBt={__proto__:null,FilterSystem:f2t,BatchSystem:v2t,ContextSystem:T2t,FramebufferSystem:R2t,GeometrySystem:N2t,MaskSystem:xFt,ScissorSystem:AFt,StencilSystem:RFt,ProjectionSystem:CFt,RenderTextureSystem:DFt,ShaderSystem:HFt,StateSystem:YFt,TextureGCSystem:ZFt,TextureSystem:QFt},rBt=new ADt,fUt=(BDt(iBt,tBt=pt.a),iBt.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(iBt.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(iBt.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),iBt.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},iBt.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=BUt.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return rBt.tx=-i.x,rBt.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:rBt,skipUpdateTransform:!!t.parent}),r},iBt.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=bLt.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(iBt.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(iBt.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),iBt);function iBt(t,e){void 0===t&&(t=bLt.UNKNOWN);var r=tBt.call(this)||this;return e=Object.assign({},GLt.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new pDt(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||GLt.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(JLt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var nBt;BDt(sBt,nBt=fUt),sBt.create=function(t){if(HLt=void 0===HLt?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:GLt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():HLt)return new sBt(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},sBt.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},sBt.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof BUt?(JLt("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},sBt.prototype.resize=function(t,e){nBt.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},sBt.prototype.reset=function(){return this.runners.reset.emit(),this},sBt.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},sBt.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();nBt.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(sBt.prototype,"extract",{get:function(){return JLt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),sBt.registerPlugin=function(t,e){(sBt.__plugins=sBt.__plugins||{})[t]=e};function sBt(t){var e,r=nBt.call(this,bLt.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new sDt("destroy"),contextChange:new sDt("contextChange"),reset:new sDt("reset"),update:new sDt("update"),postrender:new sDt("postrender"),prerender:new sDt("prerender"),resize:new sDt("resize")},r.globalUniforms=new o2t({projectionMatrix:new ADt},!0),r.addSystem(xFt,"mask").addSystem(T2t,"context").addSystem(YFt,"state").addSystem(HFt,"shader").addSystem(QFt,"texture").addSystem(N2t,"geometry").addSystem(R2t,"framebuffer").addSystem(AFt,"scissor").addSystem(RFt,"stencil").addSystem(CFt,"projection").addSystem(ZFt,"textureGC").addSystem(f2t,"filter").addSystem(DFt,"renderTexture").addSystem(v2t,"batch"),r.initPlugins(sBt.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",VLt||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+jLt+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+jLt+" - "+e+" - http://www.pixijs.com/"),VLt=!0),r.resize(r.options.width,r.options.height),r}var oBt=function(){this.texArray=null,this.blend=0,this.type=ILt.TRIANGLES,this.start=0,this.size=0,this.data=null},aBt=(hBt.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},hBt);function hBt(){this.elements=[],this.ids=[],this.count=0}var uBt=(Object.defineProperty(lBt.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(lBt.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(lBt.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(lBt.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(lBt.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),lBt.prototype.view=function(t){return this[t+"View"]},lBt.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},lBt.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},lBt);function lBt(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var cBt,dBt=(BDt(fBt,cBt=_2t),fBt.prototype.contextChange=function(){var t=this.renderer.gl;GLt.PREFER_ENV===TLt.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),GLt.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=tFt(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},fBt.prototype.initFlushBuffers=function(){for(var t=fBt._drawCallPool,e=fBt._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new oBt);for(;e.length<i;)e.push(new aBt);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},fBt.prototype.onPrerender=function(){this._flushId=0},fBt.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},fBt.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=fBt._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++zDt._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;zDt._globalBatch=o},fBt.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=fBt._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=YLt[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},fBt.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},fBt.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;GLt.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},fBt.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=fBt._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},fBt.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},fBt.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),GLt.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},fBt.prototype.stop=function(){this.flush()},fBt.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),cBt.prototype.destroy.call(this)},fBt.prototype.getAttributeBuffer=function(t){var e=zLt(Math.ceil(t/8)),t=ZLt(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new uBt(e*this.vertexSize*4)),t},fBt.prototype.getIndexBuffer=function(t){var e=zLt(Math.ceil(t/12)),r=ZLt(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},fBt.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},fBt._drawCallPool=[],fBt._textureArrayPool=[],fBt);function fBt(t){var e=cBt.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=aFt.for2d(),e.size=4*GLt.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var pBt=(_Bt.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=o2t.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new iFt(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new ADt,default:this.defaultGroupCache[t]};return new sFt(this.programCache[t],i)},_Bt.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},_Bt);function _Bt(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var yBt,mBt=(BDt(vBt,yBt=Rnt),vBt);function vBt(t){void 0===t&&(t=!1);var e=yBt.call(this)||this;return e._buffer=new YUt(null,t,!1),e._indexBuffer=new YUt(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,wLt.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,wLt.FLOAT).addAttribute("aColor",e._buffer,4,!0,wLt.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,wLt.FLOAT).addIndex(e._indexBuffer),e}var xBt="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",gBt="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function EBt(){}(EBt.create=function(t){var e,t=Object.assign({vertex:xBt,fragment:gBt,geometryClass:mBt,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return BDt(o,e=dBt),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new pBt(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(EBt,"defaultVertexSrc",{get:function(){return xBt},enumerable:!1,configurable:!0}),Object.defineProperty(EBt,"defaultFragmentTemplate",{get:function(){return gBt},enumerable:!1,configurable:!0}),EBt).create();var TBt={};for(bBt in gUt)!function(t){Object.defineProperty(TBt,t,{get:function(){return JLt("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),gUt[t]}})}(bBt);var bBt,ABt={};for(bBt in eBt)!function(t){Object.defineProperty(ABt,t,{get:function(){return JLt("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),eBt[t]}})}(bBt);var SBt=function(t,e){return(SBt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var IBt,RBt,OBt,fUt=(SBt(RBt=CBt,OBt=IBt=lFt),RBt.prototype=null===OBt?Object.create(OBt):(wBt.prototype=OBt.prototype,new wBt),CBt);function wBt(){this.constructor=RBt}function CBt(){return IBt.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}function PBt(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var NBt=/iPhone/i,MBt=/iPod/i,LBt=/iPad/i,DBt=/\biOS-universal(?:.+)Mac\b/i,UBt=/\bAndroid(?:.+)Mobile\b/i,FBt=/Android/i,BBt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,kBt=/Silk/i,GBt=/Windows Phone/i,XBt=/\bWindows(?:.+)ARM\b/i,HBt=/BlackBerry/i,VBt=/BB10/i,jBt=/Opera Mini/i,YBt=/\b(CriOS|Chrome)(?:.+)Mobile/i,zBt=/Mobile(?:.+)Firefox\b/i;var WBt=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(NBt)&&!i(GBt),ipod:i(MBt),tablet:!i(NBt)&&(i(LBt)||PBt(e))&&!i(GBt),universal:i(DBt),device:(i(NBt)||i(MBt)||i(LBt)||i(DBt)||PBt(e))&&!i(GBt)},amazon:{phone:i(BBt),tablet:!i(BBt)&&i(kBt),device:i(BBt)||i(kBt)},android:{phone:!i(GBt)&&i(BBt)||!i(GBt)&&i(UBt),tablet:!i(GBt)&&!i(BBt)&&!i(UBt)&&(i(kBt)||i(FBt)),device:!i(GBt)&&(i(BBt)||i(kBt)||i(UBt)||i(FBt))||i(/\bokhttp\b/i)},windows:{phone:i(GBt),tablet:i(XBt),device:i(GBt)||i(XBt)},other:{blackberry:i(HBt),blackberry10:i(VBt),opera:i(jBt),firefox:i(zBt),chrome:i(YBt),device:i(HBt)||i(VBt)||i(jBt)||i(zBt)||i(YBt)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(Rnt={})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(Rnt={})[Rnt.UNKNOWN=0]="UNKNOWN",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.CANVAS=2]="CANVAS",(Rnt={})[Rnt.COLOR=16384]="COLOR",Rnt[Rnt.DEPTH=256]="DEPTH",Rnt[Rnt.STENCIL=1024]="STENCIL",(Rnt={})[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.ADD=1]="ADD",Rnt[Rnt.MULTIPLY=2]="MULTIPLY",Rnt[Rnt.SCREEN=3]="SCREEN",Rnt[Rnt.OVERLAY=4]="OVERLAY",Rnt[Rnt.DARKEN=5]="DARKEN",Rnt[Rnt.LIGHTEN=6]="LIGHTEN",Rnt[Rnt.COLOR_DODGE=7]="COLOR_DODGE",Rnt[Rnt.COLOR_BURN=8]="COLOR_BURN",Rnt[Rnt.HARD_LIGHT=9]="HARD_LIGHT",Rnt[Rnt.SOFT_LIGHT=10]="SOFT_LIGHT",Rnt[Rnt.DIFFERENCE=11]="DIFFERENCE",Rnt[Rnt.EXCLUSION=12]="EXCLUSION",Rnt[Rnt.HUE=13]="HUE",Rnt[Rnt.SATURATION=14]="SATURATION",Rnt[Rnt.COLOR=15]="COLOR",Rnt[Rnt.LUMINOSITY=16]="LUMINOSITY",Rnt[Rnt.NORMAL_NPM=17]="NORMAL_NPM",Rnt[Rnt.ADD_NPM=18]="ADD_NPM",Rnt[Rnt.SCREEN_NPM=19]="SCREEN_NPM",Rnt[Rnt.NONE=20]="NONE",Rnt[Rnt.SRC_OVER=0]="SRC_OVER",Rnt[Rnt.SRC_IN=21]="SRC_IN",Rnt[Rnt.SRC_OUT=22]="SRC_OUT",Rnt[Rnt.SRC_ATOP=23]="SRC_ATOP",Rnt[Rnt.DST_OVER=24]="DST_OVER",Rnt[Rnt.DST_IN=25]="DST_IN",Rnt[Rnt.DST_OUT=26]="DST_OUT",Rnt[Rnt.DST_ATOP=27]="DST_ATOP",Rnt[Rnt.ERASE=26]="ERASE",Rnt[Rnt.SUBTRACT=28]="SUBTRACT",Rnt[Rnt.XOR=29]="XOR",(Rnt={})[Rnt.POINTS=0]="POINTS",Rnt[Rnt.LINES=1]="LINES",Rnt[Rnt.LINE_LOOP=2]="LINE_LOOP",Rnt[Rnt.LINE_STRIP=3]="LINE_STRIP",Rnt[Rnt.TRIANGLES=4]="TRIANGLES",Rnt[Rnt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Rnt[Rnt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(Rnt={})[Rnt.RGBA=6408]="RGBA",Rnt[Rnt.RGB=6407]="RGB",Rnt[Rnt.ALPHA=6406]="ALPHA",Rnt[Rnt.LUMINANCE=6409]="LUMINANCE",Rnt[Rnt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Rnt[Rnt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Rnt[Rnt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt={})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(Rnt={})[Rnt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Rnt[Rnt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Rnt[Rnt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Rnt[Rnt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Rnt[Rnt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Rnt[Rnt.FLOAT=5126]="FLOAT",Rnt[Rnt.HALF_FLOAT=36193]="HALF_FLOAT",(Rnt={})[Rnt.FLOAT=0]="FLOAT",Rnt[Rnt.INT=1]="INT",Rnt[Rnt.UINT=2]="UINT",(Rnt=Ukt=Ukt||{})[Rnt.NEAREST=0]="NEAREST",Rnt[Rnt.LINEAR=1]="LINEAR",(Rnt=Rkt=Rkt||{})[Rnt.CLAMP=33071]="CLAMP",Rnt[Rnt.REPEAT=10497]="REPEAT",Rnt[Rnt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(Rnt=Wkt=Wkt||{})[Rnt.OFF=0]="OFF",Rnt[Rnt.POW2=1]="POW2",Rnt[Rnt.ON=2]="ON",Rnt[Rnt.ON_MANUAL=3]="ON_MANUAL",(Rnt={})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Rnt={})[Rnt.NO=0]="NO",Rnt[Rnt.YES=1]="YES",Rnt[Rnt.AUTO=2]="AUTO",Rnt[Rnt.BLEND=0]="BLEND",Rnt[Rnt.CLEAR=1]="CLEAR",Rnt[Rnt.BLIT=2]="BLIT",(Rnt=Akt=Akt||{})[Rnt.AUTO=0]="AUTO",Rnt[Rnt.MANUAL=1]="MANUAL",(Rnt=Hkt=Hkt||{}).LOW="lowp",Rnt.MEDIUM="mediump",Rnt.HIGH="highp",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.SCISSOR=1]="SCISSOR",Rnt[Rnt.STENCIL=2]="STENCIL",Rnt[Rnt.SPRITE=3]="SPRITE",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.LOW=2]="LOW",Rnt[Rnt.MEDIUM=4]="MEDIUM",Rnt[Rnt.HIGH=8]="HIGH";var ZBt,KBt,qBt,JBt,QBt,$Bt,t3t,e3t,r3t,i3t,n3t,s3t,o3t,a3t,h3t,u3t,l3t,c3t,d3t,f3t,p3t,_3t={MIPMAP_TEXTURES:Wkt.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(ZBt=32,qBt=!0,(WBt.tablet||WBt.phone)&&(WBt.apple.device&&(KBt=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(KBt[1],10)<11&&(qBt=!1),WBt.android.device&&(KBt=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(KBt[1],10)<7&&(qBt=!1)),qBt?ZBt:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Akt.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:Rkt.CLAMP,SCALE_MODE:Ukt.LINEAR,PRECISION_VERTEX:Hkt.HIGH,PRECISION_FRAGMENT:WBt.apple.device?Hkt.HIGH:Hkt.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!WBt.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};(Rnt=JBt=JBt||{})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(Wkt=QBt=QBt||{})[Wkt.UNKNOWN=0]="UNKNOWN",Wkt[Wkt.WEBGL=1]="WEBGL",Wkt[Wkt.CANVAS=2]="CANVAS",(Akt=$Bt=$Bt||{})[Akt.COLOR=16384]="COLOR",Akt[Akt.DEPTH=256]="DEPTH",Akt[Akt.STENCIL=1024]="STENCIL",(Rkt=t3t=t3t||{})[Rkt.NORMAL=0]="NORMAL",Rkt[Rkt.ADD=1]="ADD",Rkt[Rkt.MULTIPLY=2]="MULTIPLY",Rkt[Rkt.SCREEN=3]="SCREEN",Rkt[Rkt.OVERLAY=4]="OVERLAY",Rkt[Rkt.DARKEN=5]="DARKEN",Rkt[Rkt.LIGHTEN=6]="LIGHTEN",Rkt[Rkt.COLOR_DODGE=7]="COLOR_DODGE",Rkt[Rkt.COLOR_BURN=8]="COLOR_BURN",Rkt[Rkt.HARD_LIGHT=9]="HARD_LIGHT",Rkt[Rkt.SOFT_LIGHT=10]="SOFT_LIGHT",Rkt[Rkt.DIFFERENCE=11]="DIFFERENCE",Rkt[Rkt.EXCLUSION=12]="EXCLUSION",Rkt[Rkt.HUE=13]="HUE",Rkt[Rkt.SATURATION=14]="SATURATION",Rkt[Rkt.COLOR=15]="COLOR",Rkt[Rkt.LUMINOSITY=16]="LUMINOSITY",Rkt[Rkt.NORMAL_NPM=17]="NORMAL_NPM",Rkt[Rkt.ADD_NPM=18]="ADD_NPM",Rkt[Rkt.SCREEN_NPM=19]="SCREEN_NPM",Rkt[Rkt.NONE=20]="NONE",Rkt[Rkt.SRC_OVER=0]="SRC_OVER",Rkt[Rkt.SRC_IN=21]="SRC_IN",Rkt[Rkt.SRC_OUT=22]="SRC_OUT",Rkt[Rkt.SRC_ATOP=23]="SRC_ATOP",Rkt[Rkt.DST_OVER=24]="DST_OVER",Rkt[Rkt.DST_IN=25]="DST_IN",Rkt[Rkt.DST_OUT=26]="DST_OUT",Rkt[Rkt.DST_ATOP=27]="DST_ATOP",Rkt[Rkt.ERASE=26]="ERASE",Rkt[Rkt.SUBTRACT=28]="SUBTRACT",Rkt[Rkt.XOR=29]="XOR",(Ukt=e3t=e3t||{})[Ukt.POINTS=0]="POINTS",Ukt[Ukt.LINES=1]="LINES",Ukt[Ukt.LINE_LOOP=2]="LINE_LOOP",Ukt[Ukt.LINE_STRIP=3]="LINE_STRIP",Ukt[Ukt.TRIANGLES=4]="TRIANGLES",Ukt[Ukt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Ukt[Ukt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(Hkt=r3t=r3t||{})[Hkt.RGBA=6408]="RGBA",Hkt[Hkt.RGB=6407]="RGB",Hkt[Hkt.ALPHA=6406]="ALPHA",Hkt[Hkt.LUMINANCE=6409]="LUMINANCE",Hkt[Hkt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Hkt[Hkt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Hkt[Hkt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt=i3t=i3t||{})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(Wkt=n3t=n3t||{})[Wkt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Wkt[Wkt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Wkt[Wkt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Wkt[Wkt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Wkt[Wkt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Wkt[Wkt.FLOAT=5126]="FLOAT",Wkt[Wkt.HALF_FLOAT=36193]="HALF_FLOAT",(Akt=s3t=s3t||{})[Akt.FLOAT=0]="FLOAT",Akt[Akt.INT=1]="INT",Akt[Akt.UINT=2]="UINT",(Rkt=o3t=o3t||{})[Rkt.NEAREST=0]="NEAREST",Rkt[Rkt.LINEAR=1]="LINEAR",(Ukt=a3t=a3t||{})[Ukt.CLAMP=33071]="CLAMP",Ukt[Ukt.REPEAT=10497]="REPEAT",Ukt[Ukt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(Hkt=h3t=h3t||{})[Hkt.OFF=0]="OFF",Hkt[Hkt.POW2=1]="POW2",Hkt[Hkt.ON=2]="ON",Hkt[Hkt.ON_MANUAL=3]="ON_MANUAL",(Rnt=u3t=u3t||{})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Wkt=l3t=l3t||{})[Wkt.NO=0]="NO",Wkt[Wkt.YES=1]="YES",Wkt[Wkt.AUTO=2]="AUTO",Wkt[Wkt.BLEND=0]="BLEND",Wkt[Wkt.CLEAR=1]="CLEAR",Wkt[Wkt.BLIT=2]="BLIT",(Akt=c3t=c3t||{})[Akt.AUTO=0]="AUTO",Akt[Akt.MANUAL=1]="MANUAL",(Rkt=d3t=d3t||{}).LOW="lowp",Rkt.MEDIUM="mediump",Rkt.HIGH="highp",(Ukt=f3t=f3t||{})[Ukt.NONE=0]="NONE",Ukt[Ukt.SCISSOR=1]="SCISSOR",Ukt[Ukt.STENCIL=2]="STENCIL",Ukt[Ukt.SPRITE=3]="SPRITE",(Hkt=p3t=p3t||{})[Hkt.NONE=0]="NONE",Hkt[Hkt.LOW=2]="LOW",Hkt[Hkt.MEDIUM=4]="MEDIUM",Hkt[Hkt.HIGH=8]="HIGH";r(24);var y3t={parse:_t.parse,format:_t.format,resolve:_t.resolve};_3t.RETINA_PREFIX=/@([0-9\.]+)x/;var m3t,v3t=_3t.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,x3t="6.0.4";var g3t=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[t3t.NORMAL_NPM]=t3t.NORMAL,t[t3t.ADD_NPM]=t3t.ADD,t[t3t.SCREEN_NPM]=t3t.SCREEN,e[t3t.NORMAL]=t3t.NORMAL_NPM,e[t3t.ADD]=t3t.ADD_NPM,e[t3t.SCREEN]=t3t.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function E3t(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function T3t(t){return!(t&t-1||!t)}function b3t(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}var A3t=0;var S3t={};function I3t(t,e,r){var i;void 0===r&&(r=3),S3t[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),S3t[e]=!0)}var R3t={},O3t=Object.create(null),w3t=Object.create(null);C3t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},C3t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},C3t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(C3t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(C3t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function C3t(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||_3t.RESOLUTION,this.resize(t,e)}var P3t;function N3t(t,e){t=_3t.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var M3t,L3t=(D3t.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},D3t.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},D3t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},D3t.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},D3t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},D3t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},D3t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(D3t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(D3t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),D3t);function D3t(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(L3t.prototype,{dispatch:{value:L3t.prototype.emit},run:{value:L3t.prototype.emit}}),_3t.TARGET_FPMS=.06,(Rnt=M3t=M3t||{})[Rnt.INTERACTION=50]="INTERACTION",Rnt[Rnt.HIGH=25]="HIGH",Rnt[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.LOW=-25]="LOW",Rnt[Rnt.UTILITY=-50]="UTILITY";var U3t=(F3t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},F3t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},F3t.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},F3t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},F3t);function F3t(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var B3t=(k3t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},k3t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},k3t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},k3t.prototype.add=function(t,e,r){return void 0===r&&(r=M3t.NORMAL),this._addListener(new U3t(t,e,r))},k3t.prototype.addOnce=function(t,e,r){return void 0===r&&(r=M3t.NORMAL),this._addListener(new U3t(t,e,r,!0))},k3t.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},k3t.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(k3t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),k3t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},k3t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},k3t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},k3t.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*_3t.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(k3t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(k3t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,_3t.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(k3t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(k3t,"shared",{get:function(){var t;return k3t._shared||((t=k3t._shared=new k3t).autoStart=!0,t._protected=!0),k3t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(k3t,"system",{get:function(){var t;return k3t._system||((t=k3t._system=new k3t).autoStart=!0,t._protected=!0),k3t._system},enumerable:!1,configurable:!0}),k3t);function k3t(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new U3t(null,null,1/0),this.deltaMS=1/_3t.TARGET_FPMS,this.elapsedMS=1/_3t.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}G3t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,M3t.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?B3t.shared:new B3t,t.autoStart&&this.start()},G3t.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function G3t(){}var X3t,H3t=2*Math.PI;Math.PI,Math.PI;(Wkt=X3t=X3t||{})[Wkt.POLY=0]="POLY",Wkt[Wkt.RECT=1]="RECT",Wkt[Wkt.CIRC=2]="CIRC",Wkt[Wkt.ELIP=3]="ELIP",Wkt[Wkt.RREC=4]="RREC";var V3t=(Object.defineProperty(j3t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(j3t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(j3t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(j3t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(j3t,"EMPTY",{get:function(){return new j3t(0,0,0,0)},enumerable:!1,configurable:!0}),j3t.prototype.clone=function(){return new j3t(this.x,this.y,this.width,this.height)},j3t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},j3t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},j3t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},j3t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},j3t.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},j3t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},j3t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},j3t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},j3t);function j3t(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=X3t.RECT}Y3t.prototype.clone=function(){return new Y3t(this.x,this.y,this.radius)},Y3t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},Y3t.prototype.getBounds=function(){return new V3t(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Y3t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function Y3t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=X3t.CIRC}z3t.prototype.clone=function(){return new z3t(this.x,this.y,this.width,this.height)},z3t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},z3t.prototype.getBounds=function(){return new V3t(this.x-this.width,this.y-this.height,this.width,this.height)},z3t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function z3t(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=X3t.ELIP}W3t.prototype.clone=function(){var t=new W3t(this.points.slice());return t.closeStroke=this.closeStroke,t},W3t.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},W3t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function W3t(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=X3t.POLY,this.closeStroke=!0}Z3t.prototype.clone=function(){return new Z3t(this.x,this.y,this.width,this.height,this.radius)},Z3t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},Z3t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function Z3t(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=X3t.RREC}var K3t=(q3t.prototype.clone=function(){return new q3t(this.x,this.y)},q3t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},q3t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},q3t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},q3t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},q3t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},q3t);function q3t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var J3t=(Q3t.prototype.clone=function(t,e){return new Q3t(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},Q3t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},Q3t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},Q3t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},Q3t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Q3t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(Q3t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(Q3t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Q3t);function Q3t(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var $3t=(tkt.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},tkt.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},tkt.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},tkt.prototype.apply=function(t,e){e=e||new K3t;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},tkt.prototype.applyInverse=function(t,e){e=e||new K3t;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},tkt.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},tkt.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},tkt.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},tkt.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},tkt.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},tkt.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},tkt.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(H3t-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},tkt.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},tkt.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},tkt.prototype.clone=function(){var t=new tkt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},tkt.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},tkt.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},tkt.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(tkt,"IDENTITY",{get:function(){return new tkt},enumerable:!1,configurable:!0}),Object.defineProperty(tkt,"TEMP_MATRIX",{get:function(){return new tkt},enumerable:!1,configurable:!0}),tkt);function tkt(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var ekt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],rkt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ikt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],nkt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],skt=[],okt=[],akt=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];skt.push(e);for(var r=0;r<16;r++)for(var i=akt(ekt[t]*ekt[r]+ikt[t]*rkt[r]),n=akt(rkt[t]*ekt[r]+nkt[t]*rkt[r]),s=akt(ekt[t]*ikt[r]+ikt[t]*nkt[r]),o=akt(rkt[t]*ikt[r]+nkt[t]*nkt[r]),a=0;a<16;a++)if(ekt[a]===i&&rkt[a]===n&&ikt[a]===s&&nkt[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new $3t;h.set(ekt[t],rkt[t],ikt[t],nkt[t],0,0),okt.push(h)}}();var hkt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return ekt[t]},uY:function(t){return rkt[t]},vX:function(t){return ikt[t]},vY:function(t){return nkt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return skt[t][e]},sub:function(t,e){return skt[t][hkt.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?hkt.S:hkt.N:2*Math.abs(e)<=Math.abs(t)?0<t?hkt.E:hkt.W:0<e?0<t?hkt.SE:hkt.SW:0<t?hkt.NE:hkt.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=okt[hkt.inv(e)];e.tx=r,e.ty=i,t.append(e)}};ukt.prototype.onChange=function(){this._localID++},ukt.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},ukt.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},ukt.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},ukt.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},ukt.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(ukt.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),ukt.IDENTITY=new ukt;function ukt(){this.worldTransform=new $3t,this.localTransform=new $3t,this.position=new J3t(this.onChange,this,0,0),this.scale=new J3t(this.onChange,this,1,1),this.pivot=new J3t(this.onChange,this,0,0),this.skew=new J3t(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}_3t.PREFER_ENV=WBt.any?JBt.WEBGL:JBt.WEBGL2,_3t.STRICT_TEXTURE_CACHE=!1;var lkt=[];function ckt(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=lkt.length-1;0<=n;--n){var s=lkt[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var dkt=function(t,e){return(dkt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function fkt(t,e){function r(){this.constructor=t}dkt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var pkt=(_kt.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},_kt.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},_kt.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(_kt.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),_kt.prototype.update=function(){this.destroyed||this.onUpdate.emit()},_kt.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(_kt.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(_kt.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),_kt.prototype.style=function(t,e,r){return!1},_kt.prototype.dispose=function(){},_kt.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},_kt.test=function(t,e){return!1},_kt);function _kt(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new L3t("setRealSize"),this.onUpdate=new L3t("update"),this.onError=new L3t("onError")}var ykt,mkt=(fkt(vkt,ykt=pkt),vkt.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===u3t.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},vkt.prototype.dispose=function(){this.data=null},vkt.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},vkt);function vkt(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=ykt.call(this,e,i)||this).data=t,r}var xkt,gkt={scaleMode:o3t.NEAREST,format:r3t.RGBA,alphaMode:u3t.NPM},Ekt=(fkt(Tkt,xkt=pt.a),Object.defineProperty(Tkt.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(Tkt.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Tkt.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},Tkt.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},Tkt.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},Tkt.prototype._refreshPOT=function(){this.isPowerOfTwo=T3t(this.realWidth)&&T3t(this.realHeight)},Tkt.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},Tkt.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},Tkt.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},Tkt.prototype.onError=function(t){this.emit("error",this,t)},Tkt.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete w3t[this.cacheId],delete O3t[this.cacheId],this.cacheId=null),this.dispose(),Tkt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},Tkt.prototype.dispose=function(){this.emit("dispose",this)},Tkt.prototype.castToBaseTexture=function(){return this},Tkt.from=function(t,e,r){void 0===r&&(r=_3t.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++A3t),t._pixiId),s=w3t[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new Tkt(t,e)).cacheId=n,Tkt.addToCache(s,n)),s},Tkt.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new mkt(t,{width:e,height:r}),t=t instanceof Float32Array?n3t.FLOAT:n3t.UNSIGNED_BYTE;return new Tkt(n,Object.assign(gkt,i||{width:e,height:r,type:t}))},Tkt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),w3t[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),w3t[e]=t)},Tkt.removeFromCache=function(t){if("string"==typeof t){var e=w3t[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete w3t[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete w3t[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Tkt._globalBatch=0,Tkt);function Tkt(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=xkt.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof pkt||((t=ckt(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||_3t.RESOLUTION,r.mipmap=void 0!==n?n:_3t.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:_3t.ANISOTROPIC_LEVEL,r.wrapMode=u||_3t.WRAP_MODE,r.scaleMode=void 0!==o?o:_3t.SCALE_MODE,r.format=l||r3t.RGBA,r.type=c||n3t.UNSIGNED_BYTE,r.target=d||i3t.TEXTURE_2D,r.alphaMode=void 0!==i?i:u3t.UNPACK,r.uid=++A3t,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var bkt,Akt=(fkt(Skt,bkt=pkt),Skt.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof pkt?this.addResourceAt(t[r],r):this.addResourceAt(ckt(t[r],e),r))},Skt.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},Skt.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},Skt.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");bkt.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},Skt.prototype.unbind=function(t){bkt.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},Skt.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},Skt);function Skt(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=bkt.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new Ekt;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var Ikt,Rkt=(fkt(Okt,Ikt=Akt),Okt.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},Okt.prototype.bind=function(t){Ikt.prototype.bind.call(this,t),t.target=i3t.TEXTURE_2D_ARRAY},Okt.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},Okt);function Okt(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=Ikt.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var wkt,Ckt=(fkt(Pkt,wkt=pkt),Pkt.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(P3t=P3t||document.createElement("a")).href=t;var r=y3t.parse(P3t.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},Pkt.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===u3t.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},Pkt.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),wkt.prototype.update.call(this))},Pkt.prototype.dispose=function(){this.source=null},Pkt);function Pkt(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=wkt.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var Nkt,Mkt=(fkt(Lkt,Nkt=Ckt),Lkt.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},Lkt);function Lkt(t){return Nkt.call(this,t)||this}var Dkt,Ukt=(fkt(Fkt,Dkt=Akt),Fkt.prototype.bind=function(t){Dkt.prototype.bind.call(this,t),t.target=i3t.TEXTURE_CUBE_MAP},Fkt.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=i3t.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},Fkt.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<Fkt.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},Fkt.test=function(t){return Array.isArray(t)&&t.length===Fkt.SIDES},Fkt.SIDES=6,Fkt);function Fkt(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==Fkt.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=Dkt.call(this,6,{width:n,height:s})||this,a=0;a<Fkt.SIDES;a++)r.items[a].target=i3t.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var Bkt,kkt=(fkt(Gkt,Bkt=Ckt),Gkt.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},Gkt.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===u3t.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},Gkt.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return Bkt.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(Bkt.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},Gkt.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,Bkt.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},Gkt.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},Gkt);function Gkt(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,Ckt.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=Bkt.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:_3t.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var Xkt,Hkt=(fkt(Vkt,Xkt=Ckt),Vkt.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},Vkt.prototype._loadSvg=function(){var s=this,o=new Image;Ckt.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++A3t,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},Vkt.getSize=function(t){var e=Vkt.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},Vkt.prototype.dispose=function(){Xkt.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},Vkt.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},Vkt.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,Vkt);function Vkt(t,e){var r=this;return e=e||{},(r=Xkt.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var jkt,Rnt=(fkt(Ykt,jkt=Ckt),Ykt.prototype.update=function(t){var e;this.destroyed||(e=B3t.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(jkt.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},Ykt.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},Ykt.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},Ykt.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},Ykt.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},Ykt.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(B3t.shared.add(this.update,this),this._isConnectedToTicker=!0)},Ykt.prototype._onPlayStop=function(){this._isConnectedToTicker&&(B3t.shared.remove(this.update,this),this._isConnectedToTicker=!1)},Ykt.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},Ykt.prototype.dispose=function(){this._isConnectedToTicker&&B3t.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),jkt.prototype.dispose.call(this)},Object.defineProperty(Ykt.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(B3t.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(B3t.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(Ykt.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),Ykt.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<Ykt.TYPES.indexOf(e)},Ykt.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Ykt.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},Ykt);function Ykt(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];Ckt.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||Ykt.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=jkt.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var zkt,Wkt=(fkt(Zkt,zkt=Ckt),Zkt.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},Zkt);function Zkt(t){return zkt.call(this,t)||this}lkt.push(kkt,Wkt,Mkt,Rnt,Hkt,mkt,Ukt,Rkt);var Kkt={__proto__:null,Resource:pkt,BaseImageResource:Ckt,INSTALLED:lkt,autoDetectResource:ckt,AbstractMultiResource:Akt,ArrayResource:Rkt,BufferResource:mkt,CanvasResource:Mkt,CubeResource:Ukt,ImageResource:kkt,SVGResource:Hkt,VideoResource:Rnt,ImageBitmapResource:Wkt},Hkt=(qkt.prototype.destroy=function(){this.renderer=null},qkt);function qkt(t){this.renderer=t}var Jkt,Qkt=(fkt($kt,Jkt=mkt),$kt.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===u3t.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},$kt);function $kt(){return null!==Jkt&&Jkt.apply(this,arguments)||this}var tGt=(Object.defineProperty(eGt.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),eGt.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new Ekt(null,{scaleMode:o3t.NEAREST,resolution:1,mipmap:h3t.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},eGt.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Ekt(new Qkt(null,{width:this.width,height:this.height}),{scaleMode:o3t.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:h3t.OFF,format:r3t.DEPTH_COMPONENT,type:n3t.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},eGt.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},eGt.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},eGt.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},eGt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},eGt.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},eGt);function eGt(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new L3t("disposeFramebuffer"),this.multisample=p3t.NONE}var rGt,iGt=(fkt(nGt,rGt=Ekt),nGt.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},nGt.prototype.dispose=function(){this.framebuffer.dispose(),rGt.prototype.dispose.call(this)},nGt.prototype.destroy=function(){rGt.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},nGt);function nGt(t){var e=this,e=rGt.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=h3t.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new tGt(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var sGt=(oGt.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=hkt.add(r,hkt.NW),this.x0=s+i*hkt.uX(r),this.y0=e+n*hkt.uY(r),r=hkt.add(r,2),this.x1=s+i*hkt.uX(r),this.y1=e+n*hkt.uY(r),r=hkt.add(r,2),this.x2=s+i*hkt.uX(r),this.y2=e+n*hkt.uY(r),r=hkt.add(r,2),this.x3=s+i*hkt.uX(r),this.y3=e+n*hkt.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},oGt.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},oGt);function oGt(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var aGt,hGt=new sGt,uGt=(fkt(lGt,aGt=pt.a),lGt.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},lGt.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},lGt.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&O3t[t.url]&&lGt.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,lGt.removeFromCache(this),this.textureCacheIds=null},lGt.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new lGt(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},lGt.prototype.updateUvs=function(){this._uvs===hGt&&(this._uvs=new sGt),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},lGt.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=_3t.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++A3t),t._pixiId),s=O3t[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=N3t(t)),(s=new lGt(new Ekt(t,e))).baseTexture.cacheId=n,Ekt.addToCache(s.baseTexture,n),lGt.addToCache(s,n)),s},lGt.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=lGt.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},lGt.fromBuffer=function(t,e,r,i){return new lGt(Ekt.fromBuffer(t,e,r,i))},lGt.fromLoader=function(t,e,r,i){t=new Ekt(t,Object.assign({scaleMode:_3t.SCALE_MODE,resolution:N3t(e)},i)),i=t.resource;i instanceof kkt&&(i.url=e);var n=new lGt(t);return Ekt.addToCache(n.baseTexture,r=r||e),lGt.addToCache(n,r),r!==e&&(Ekt.addToCache(n.baseTexture,e),lGt.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},lGt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),O3t[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),O3t[e]=t)},lGt.removeFromCache=function(t){if("string"==typeof t){var e=O3t[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete O3t[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)O3t[t.textureCacheIds[i]]===t&&delete O3t[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(lGt.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(lGt.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(lGt.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(lGt.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(lGt.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),lGt.prototype.castToBaseTexture=function(){return this.baseTexture},lGt);function lGt(t,e,r,i,n,s){var o=aGt.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new V3t(0,0,1,1)),t instanceof lGt&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=hGt,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new K3t(s.x,s.y):new K3t(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function cGt(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}uGt.EMPTY=new uGt(new Ekt),cGt(uGt.EMPTY),cGt(uGt.EMPTY.baseTexture),uGt.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new uGt(new Ekt(new Mkt(t)))}(),cGt(uGt.WHITE),cGt(uGt.WHITE.baseTexture);var dGt,fGt=(fkt(pGt,dGt=uGt),Object.defineProperty(pGt.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),pGt.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},pGt.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},pGt.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(I3t("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new pGt(new iGt(t))},pGt);function pGt(t,e){e=dGt.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var _Gt=(yGt.prototype.createTexture=function(t,e){e=new iGt(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new fGt(e)},yGt.prototype.getOptimalTexture=function(t,e,r){var i=yGt.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=E3t(t)))<<16|65535&(e=E3t(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},yGt.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},yGt.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},yGt.prototype.returnFilterTexture=function(t){this.returnTexture(t)},yGt.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},yGt.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=yGt.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},yGt.SCREEN_KEY="screen",yGt);function yGt(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var mGt=(vGt.prototype.destroy=function(){this.buffer=null},vGt.from=function(t,e,r,i,n){return new vGt(t,e,r,i,n)},vGt);function vGt(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=n3t.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var xGt=0,gGt=(EGt.prototype.update=function(t){this.data=t||this.data,this._updateID++},EGt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},EGt.prototype.destroy=function(){this.dispose(),this.data=null},EGt.from=function(t){return new EGt(t=t instanceof Array?new Float32Array(t):t)},EGt);function EGt(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=xGt++,this.disposeRunner=new L3t("disposeBuffer")}function TGt(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var bGt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var AGt={5126:4,5123:2,5121:1},SGt=0,IGt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Rnt=(RGt.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof gGt||(e instanceof Array&&(e=new Float32Array(e)),e=new gGt(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new mGt(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},RGt.prototype.getAttribute=function(t){return this.attributes[t]},RGt.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},RGt.prototype.addIndex=function(t){return t instanceof gGt||(t instanceof Array&&(t=new Uint16Array(t)),t=new gGt(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},RGt.prototype.getIndex=function(){return this.indexBuffer},RGt.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new gGt;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*AGt[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=TGt(l);n[c]||(n[c]=new bGt[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},RGt.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},RGt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},RGt.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},RGt.prototype.clone=function(){for(var t=new RGt,e=0;e<this.buffers.length;e++)t.buffers[e]=new gGt(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new mGt(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},RGt.merge=function(t){for(var e=new RGt,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new IGt[TGt(o.buffers[s].data)](i[s]),e.buffers[s]=new gGt(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*AGt[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},RGt);function RGt(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=SGt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new L3t("disposeGeometry"),this.refCount=0}var OGt,wGt=(fkt(CGt,OGt=Rnt),CGt);function CGt(){var t=OGt.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var PGt,NGt=(fkt(MGt,PGt=Rnt),MGt.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},MGt.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},MGt);function MGt(){var t=PGt.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new gGt(t.vertices),t.uvBuffer=new gGt(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var LGt=0,DGt=(UGt.prototype.update=function(){this.dirtyId++},UGt.prototype.add=function(t,e,r){this.uniforms[t]=new UGt(e,r)},UGt.from=function(t,e){return new UGt(t,e)},UGt);function UGt(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=LGt++,this.static=!!e}var FGt=(BGt.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},BGt);function BGt(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new V3t,this.destinationFrame=new V3t,this.bindingSourceFrame=new V3t,this.bindingDestinationFrame=new V3t,this.filters=[],this.transform=null}var kGt,GGt=[new K3t,new K3t,new K3t,new K3t],XGt=new $3t,HGt=(fkt(VGt,kGt=Hkt),VGt.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new FGt,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(XGt.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},VGt.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,l3t.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,l3t.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,l3t.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},VGt.prototype.bindAndClear=function(t,e){void 0===e&&(e=l3t.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===l3t.CLEAR||e===l3t.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},VGt.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(e3t.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(e3t.TRIANGLE_STRIP))},VGt.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo($3t.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},VGt.prototype.destroy=function(){this.texturePool.clear(!1)},VGt.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},VGt.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},VGt.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},VGt.prototype.emptyPool=function(){this.texturePool.clear(!0)},VGt.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},VGt.prototype.transformAABB=function(t,e){var r=GGt[0],i=GGt[1],n=GGt[2],s=GGt[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},VGt.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?XGt.copyFrom(n):XGt.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},VGt);function VGt(t){var e=kGt.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new _Gt,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new wGt,e.quadUv=new NGt,e.tempRect=new V3t,e.activeState={},e.globalUniforms=new DGt({outputFrame:new V3t,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var jGt=(YGt.prototype.flush=function(){},YGt.prototype.destroy=function(){this.renderer=null},YGt.prototype.start=function(){},YGt.prototype.stop=function(){this.flush()},YGt.prototype.render=function(t){},YGt);function YGt(t){this.renderer=t}var zGt,WGt=(fkt(ZGt,zGt=Hkt),ZGt.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},ZGt.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},ZGt.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},ZGt.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},ZGt.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},ZGt);function ZGt(t){var e=zGt.call(this,t)||this;return e.emptyRenderer=new jGt(t),e.currentRenderer=e.emptyRenderer,e}var KGt,qGt=0,JGt=(fkt(QGt,KGt=Hkt),Object.defineProperty(QGt.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),QGt.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=qGt++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},QGt.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=qGt++,this.renderer.runners.contextChange.emit(t)},QGt.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},QGt.prototype.createContext=function(t,e){var r;if(r=_3t.PREFER_ENV>=JBt.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},QGt.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},QGt.prototype.handleContextLost=function(t){t.preventDefault()},QGt.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},QGt.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},QGt.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},QGt.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},QGt);function QGt(t){var e=KGt.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var $Gt,tXt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=p3t.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},eXt=new V3t,rXt=(fkt(iXt,$Gt=Hkt),iXt.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new V3t,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,_3t.PREFER_ENV===JBt.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},iXt.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},iXt.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(iXt.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),iXt.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=$Bt.COLOR|$Bt.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},iXt.prototype.initFramebuffer=function(t){var e=this.gl,e=new tXt(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},iXt.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},iXt.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},iXt.prototype.detectSamples=function(t){var e=this.msaaSamples,r=p3t.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?p3t.NONE:r},iXt.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new tGt(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=eXt).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},iXt.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},iXt.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},iXt.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},iXt.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new V3t},iXt);function iXt(t){t=$Gt.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new tGt(10,10),t.msaaSamples=null,t}var nXt,sXt=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},oXt={5126:4,5123:2,5121:1},aXt=(fkt(hXt,nXt=Hkt),hXt.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=_3t.PREFER_ENV===JBt.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},hXt.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},hXt.prototype.reset=function(){this.unbind()},hXt.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},hXt.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},hXt.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},hXt.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*oXt[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*oXt[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*oXt[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new sXt(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},hXt.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},hXt.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},hXt.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},hXt.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},hXt.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},hXt.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},hXt);function hXt(t){t=nXt.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var uXt=(lXt.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=f3t.NONE,this.autoDetect=!0),this._target=null},lXt.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},lXt);function lXt(t){void 0===t&&(t=null),this.type=f3t.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function cXt(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function dXt(t,e,r,i){var n=cXt(t,t.VERTEX_SHADER,e),s=cXt(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function fXt(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function pXt(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return fXt(2*e);case"bvec3":return fXt(3*e);case"bvec4":return fXt(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var _Xt,yXt={},mXt=yXt;function vXt(){var t,e;return(mXt===yXt||mXt&&mXt.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=_3t.PREFER_ENV>=JBt.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),mXt=e),mXt}function xXt(t,e,r){if("precision"===t.substring(0,9))return r!==d3t.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===d3t.HIGH&&r!==d3t.HIGH?d3t.MEDIUM:e)+" float;\n"+t}var gXt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var EXt=null,TXt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function bXt(t,e){if(!EXt){var r=Object.keys(TXt);EXt={};for(var i=0;i<r.length;++i){var n=r[i];EXt[t[n]]=TXt[n]}}return EXt[e]}var AXt=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],SXt={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},IXt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var RXt,OXt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function wXt(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=OXt.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var CXt=0,PXt={},NXt=(MXt.prototype.extractData=function(t,e){var r=vXt();r?(e=dXt(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},MXt.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=bXt(e,o.type),a={type:a,name:o.name,size:gXt[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},MXt.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=bXt(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:pXt(h,s.size)}}return r},Object.defineProperty(MXt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(MXt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),MXt.from=function(t,e,r){var i=t+e,n=R3t[i];return n||(R3t[i]=n=new MXt(t,e,r)),n},MXt);function MXt(t,e,r){void 0===r&&(r="pixi-shader"),this.id=CXt++,this.vertexSrc=t||MXt.defaultVertexSrc,this.fragmentSrc=e||MXt.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),PXt[r]?(PXt[r]++,r+="-"+PXt[r]):PXt[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=xXt(this.vertexSrc,_3t.PRECISION_VERTEX,d3t.HIGH),this.fragmentSrc=xXt(this.fragmentSrc,_3t.PRECISION_FRAGMENT,(_Xt||(_Xt=d3t.MEDIUM,(r=vXt())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),_Xt=r.precision?d3t.HIGH:d3t.MEDIUM)),_Xt))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var LXt=(DXt.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},DXt.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(DXt.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),DXt.from=function(t,e,r){return new DXt(NXt.from(t,e),r)},DXt);function DXt(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof DGt?e:new DGt(e):new DGt({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var UXt=(Object.defineProperty(FXt.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(FXt.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(FXt.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(FXt.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(FXt.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(FXt.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(FXt.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==t3t.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(FXt.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),FXt.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},FXt.for2d=function(){var t=new FXt;return t.depthTest=!1,t.blend=!0,t},FXt);function FXt(){this.data=0,this.blendMode=t3t.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var BXt,kXt=(fkt(GXt,BXt=LXt),GXt.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(GXt.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(GXt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(GXt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),GXt);function GXt(t,e,r){var i=this,e=NXt.from(t||GXt.defaultVertexSrc,e||GXt.defaultFragmentSrc);return(i=BXt.call(this,e,r)||this).padding=0,i.resolution=_3t.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new UXt,i}var XXt=new $3t,HXt=(Object.defineProperty(VXt.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),VXt.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},VXt.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(XXt.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(XXt));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},VXt);function VXt(t,e){this._texture=t,this.mapCoord=new $3t,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var jXt,YXt=(fkt(zXt,jXt=kXt),zXt.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new HXt(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},zXt);function zXt(t){var e=this,r=new $3t,e=jXt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var WXt,ZXt=(fkt(KXt,WXt=Hkt),KXt.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},KXt.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new uXt).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case f3t.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case f3t.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case f3t.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},KXt.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case f3t.SCISSOR:this.renderer.scissor.pop();break;case f3t.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case f3t.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},KXt.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=f3t.SPRITE:(t.type=f3t.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=f3t.SCISSOR)))},KXt.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new YXt(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},KXt.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},KXt);function KXt(t){t=WXt.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var qXt,Wkt=(fkt(JXt,qXt=Hkt),JXt.prototype.getStackLength=function(){return this.maskStack.length},JXt.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},JXt.prototype._useCurrent=function(){},JXt.prototype.destroy=function(){qXt.prototype.destroy.call(this),this.maskStack=null},JXt);function JXt(t){t=qXt.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var QXt,$Xt=(fkt(tHt,QXt=Wkt),tHt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},tHt.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},tHt.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},tHt.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},tHt);function tHt(t){t=QXt.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var eHt,rHt=(fkt(iHt,eHt=Wkt),iHt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},iHt.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},iHt.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},iHt.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},iHt.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},iHt);function iHt(t){t=eHt.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var nHt,sHt=(fkt(oHt,nHt=Hkt),oHt.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},oHt.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},oHt.prototype.setTransform=function(t){},oHt);function oHt(t){t=nHt.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new $3t,t.transform=null,t}var aHt,hHt=new V3t,uHt=new V3t,lHt=(fkt(cHt,aHt=Hkt),cHt.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(hHt.width=t.frame.width,hHt.height=t.frame.height,e=hHt),r||(uHt.x=t.frame.x,uHt.y=t.frame.y,uHt.width=e.width,uHt.height=e.height,r=uHt),n=i.framebuffer):(s=o.resolution,e||(hHt.width=o.screen.width,hHt.height=o.screen.height,e=hHt),r||((r=hHt).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},cHt.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},cHt.prototype.resize=function(){this.bind(null)},cHt.prototype.reset=function(){this.bind(null)},cHt);function cHt(t){var e=aHt.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new V3t,e.destinationFrame=new V3t,e.viewportFrame=new V3t,e}var dHt=(fHt.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},fHt);function fHt(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var pHt,_Ht=0,yHt={textureCount:0},mHt=(fkt(vHt,pHt=Hkt),vHt.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof RXt)return RXt;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");RXt=!0===t({a:"b"},"a","b")}catch(t){RXt=!1}return RXt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},vHt.prototype.contextChange=function(t){this.gl=t,this.reset()},vHt.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(yHt.textureCount=0,this.syncUniformGroup(t.uniformGroup,yHt)),i},vHt.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},vHt.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},vHt.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},vHt.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<AXt.length;h++)if(AXt[h].test(n,o)){i.push(AXt[h].code(r,o)),a=!0;break}a||(s=(1===n.size?SXt:IXt)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},vHt.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},vHt.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},vHt.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=dXt(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:pXt(a.type,a.size)}}t=new dHt(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},vHt.prototype.reset=function(){this.program=null,this.shader=null},vHt.prototype.destroy=function(){this.destroyed=!0},vHt);function vHt(t){t=pHt.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=_Ht++,t}var xHt,gHt=(fkt(EHt,xHt=Hkt),EHt.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[t3t.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.ADD]=[t.ONE,t.ONE],e[t3t.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.NONE]=[0,0],e[t3t.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[t3t.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[t3t.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[t3t.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[t3t.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[t3t.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[t3t.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[t3t.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[t3t.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[t3t.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[t3t.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},EHt.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},EHt.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},EHt.prototype.setBlend=function(t){this.updateCheck(EHt.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},EHt.prototype.setOffset=function(t){this.updateCheck(EHt.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},EHt.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},EHt.prototype.setDepthMask=function(t){this.gl.depthMask(t)},EHt.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},EHt.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},EHt.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},EHt.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},EHt.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},EHt.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},EHt.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},EHt.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},EHt);function EHt(t){t=xHt.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=t3t.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new UXt,t.defaultState.blend=!0,t}var THt,bHt=(fkt(AHt,THt=Hkt),AHt.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==c3t.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},AHt.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},AHt.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},AHt);function AHt(t){t=THt.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=_3t.GC_MAX_IDLE,t.checkCountMax=_3t.GC_MAX_CHECK_COUNT,t.mode=_3t.GC_MODE,t}var SHt,IHt=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},RHt=(fkt(OHt,SHt=Hkt),OHt.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new IHt(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new IHt(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},OHt.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},OHt.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},OHt.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},OHt.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==s3t.FLOAT&&this.renderer.texture.unbind(s)}},OHt.prototype.initTexture=function(t){var e=new IHt(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},OHt.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===n3t.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},OHt.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==s3t.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},OHt.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&function(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}(this.managedTextures,t,1))},OHt.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==h3t.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=a3t.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},OHt.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==h3t.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===o3t.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===o3t.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===o3t.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===o3t.LINEAR?i.LINEAR:i.NEAREST)},OHt);function OHt(t){t=SHt.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new Ekt,t.hasIntegerTextures=!1,t}var wHt,CHt={__proto__:null,FilterSystem:HGt,BatchSystem:WGt,ContextSystem:JGt,FramebufferSystem:rXt,GeometrySystem:aXt,MaskSystem:ZXt,ScissorSystem:$Xt,StencilSystem:rHt,ProjectionSystem:sHt,RenderTextureSystem:lHt,ShaderSystem:mHt,StateSystem:gHt,TextureGCSystem:bHt,TextureSystem:RHt},PHt=new $3t,Hkt=(fkt(NHt,wHt=pt.a),NHt.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(NHt.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(NHt.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),NHt.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},NHt.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=fGt.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return PHt.tx=-i.x,PHt.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:PHt,skipUpdateTransform:!!t.parent}),r},NHt.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=QBt.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(NHt.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(NHt.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),NHt);function NHt(t,e){void 0===t&&(t=QBt.UNKNOWN);var r=wHt.call(this)||this;return e=Object.assign({},_3t.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new V3t(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||_3t.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(I3t("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var MHt;fkt(LHt,MHt=Hkt),LHt.create=function(t){if(m3t=void 0===m3t?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:_3t.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():m3t)return new LHt(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},LHt.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},LHt.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof fGt?(I3t("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},LHt.prototype.resize=function(t,e){MHt.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},LHt.prototype.reset=function(){return this.runners.reset.emit(),this},LHt.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},LHt.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();MHt.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(LHt.prototype,"extract",{get:function(){return I3t("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),LHt.registerPlugin=function(t,e){(LHt.__plugins=LHt.__plugins||{})[t]=e};function LHt(t){var e,r=MHt.call(this,QBt.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new L3t("destroy"),contextChange:new L3t("contextChange"),reset:new L3t("reset"),update:new L3t("update"),postrender:new L3t("postrender"),prerender:new L3t("prerender"),resize:new L3t("resize")},r.globalUniforms=new DGt({projectionMatrix:new $3t},!0),r.addSystem(ZXt,"mask").addSystem(JGt,"context").addSystem(gHt,"state").addSystem(mHt,"shader").addSystem(RHt,"texture").addSystem(aXt,"geometry").addSystem(rXt,"framebuffer").addSystem($Xt,"scissor").addSystem(rHt,"stencil").addSystem(sHt,"projection").addSystem(bHt,"textureGC").addSystem(HGt,"filter").addSystem(lHt,"renderTexture").addSystem(WGt,"batch"),r.initPlugins(LHt.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",v3t||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+x3t+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+x3t+" - "+e+" - http://www.pixijs.com/"),v3t=!0),r.resize(r.options.width,r.options.height),r}var DHt=function(){this.texArray=null,this.blend=0,this.type=e3t.TRIANGLES,this.start=0,this.size=0,this.data=null},UHt=(FHt.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},FHt);function FHt(){this.elements=[],this.ids=[],this.count=0}var BHt=(Object.defineProperty(kHt.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(kHt.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(kHt.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(kHt.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(kHt.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),kHt.prototype.view=function(t){return this[t+"View"]},kHt.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},kHt.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},kHt);function kHt(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var GHt,XHt=(fkt(HHt,GHt=jGt),HHt.prototype.contextChange=function(){var t=this.renderer.gl;_3t.PREFER_ENV===JBt.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),_3t.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=wXt(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},HHt.prototype.initFlushBuffers=function(){for(var t=HHt._drawCallPool,e=HHt._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new DHt);for(;e.length<i;)e.push(new UHt);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},HHt.prototype.onPrerender=function(){this._flushId=0},HHt.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},HHt.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=HHt._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++Ekt._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;Ekt._globalBatch=o},HHt.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=HHt._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=g3t[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},HHt.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},HHt.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;_3t.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},HHt.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=HHt._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},HHt.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},HHt.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),_3t.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},HHt.prototype.stop=function(){this.flush()},HHt.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),GHt.prototype.destroy.call(this)},HHt.prototype.getAttributeBuffer=function(t){var e=E3t(Math.ceil(t/8)),t=b3t(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new BHt(e*this.vertexSize*4)),t},HHt.prototype.getIndexBuffer=function(t){var e=E3t(Math.ceil(t/12)),r=b3t(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},HHt.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},HHt._drawCallPool=[],HHt._textureArrayPool=[],HHt);function HHt(t){var e=GHt.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=UXt.for2d(),e.size=4*_3t.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var VHt=(jHt.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=DGt.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new NXt(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new $3t,default:this.defaultGroupCache[t]};return new LXt(this.programCache[t],i)},jHt.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},jHt);function jHt(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var YHt,zHt=(fkt(WHt,YHt=Rnt),WHt);function WHt(t){void 0===t&&(t=!1);var e=YHt.call(this)||this;return e._buffer=new gGt(null,t,!1),e._indexBuffer=new gGt(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,n3t.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,n3t.FLOAT).addAttribute("aColor",e._buffer,4,!0,n3t.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,n3t.FLOAT).addIndex(e._indexBuffer),e}var ZHt="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",KHt="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function qHt(){}(qHt.create=function(t){var e,t=Object.assign({vertex:ZHt,fragment:KHt,geometryClass:zHt,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return fkt(o,e=XHt),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new VHt(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(qHt,"defaultVertexSrc",{get:function(){return ZHt},enumerable:!1,configurable:!0}),Object.defineProperty(qHt,"defaultFragmentTemplate",{get:function(){return KHt},enumerable:!1,configurable:!0}),qHt).create();var JHt={};for(QHt in Kkt)!function(t){Object.defineProperty(JHt,t,{get:function(){return I3t("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),Kkt[t]}})}(QHt);var QHt,$Ht={};for(QHt in CHt)!function(t){Object.defineProperty($Ht,t,{get:function(){return I3t("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),CHt[t]}})}(QHt);var t4t=function(t,e){return(t4t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var e4t,r4t,i4t,Hkt=(t4t(r4t=s4t,i4t=e4t=kXt),r4t.prototype=null===i4t?Object.create(i4t):(n4t.prototype=i4t.prototype,new n4t),Object.defineProperty(s4t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(s4t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),s4t);function n4t(){this.constructor=r4t}function s4t(t,e){void 0===t&&(t=.5),void 0===e&&(e=Math.random());var r=e4t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=t,r.seed=e,r}function o4t(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var a4t=/iPhone/i,h4t=/iPod/i,u4t=/iPad/i,l4t=/\biOS-universal(?:.+)Mac\b/i,c4t=/\bAndroid(?:.+)Mobile\b/i,d4t=/Android/i,f4t=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,p4t=/Silk/i,_4t=/Windows Phone/i,y4t=/\bWindows(?:.+)ARM\b/i,m4t=/BlackBerry/i,v4t=/BB10/i,x4t=/Opera Mini/i,g4t=/\b(CriOS|Chrome)(?:.+)Mobile/i,E4t=/Mobile(?:.+)Firefox\b/i;var T4t=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(a4t)&&!i(_4t),ipod:i(h4t),tablet:!i(a4t)&&(i(u4t)||o4t(e))&&!i(_4t),universal:i(l4t),device:(i(a4t)||i(h4t)||i(u4t)||i(l4t)||o4t(e))&&!i(_4t)},amazon:{phone:i(f4t),tablet:!i(f4t)&&i(p4t),device:i(f4t)||i(p4t)},android:{phone:!i(_4t)&&i(f4t)||!i(_4t)&&i(c4t),tablet:!i(_4t)&&!i(f4t)&&!i(c4t)&&(i(p4t)||i(d4t)),device:!i(_4t)&&(i(f4t)||i(p4t)||i(c4t)||i(d4t))||i(/\bokhttp\b/i)},windows:{phone:i(_4t),tablet:i(y4t),device:i(_4t)||i(y4t)},other:{blackberry:i(m4t),blackberry10:i(v4t),opera:i(x4t),firefox:i(E4t),chrome:i(g4t),device:i(m4t)||i(v4t)||i(x4t)||i(E4t)||i(g4t)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(Rnt={})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(Rnt={})[Rnt.UNKNOWN=0]="UNKNOWN",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.CANVAS=2]="CANVAS",(Rnt={})[Rnt.COLOR=16384]="COLOR",Rnt[Rnt.DEPTH=256]="DEPTH",Rnt[Rnt.STENCIL=1024]="STENCIL",(Rnt={})[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.ADD=1]="ADD",Rnt[Rnt.MULTIPLY=2]="MULTIPLY",Rnt[Rnt.SCREEN=3]="SCREEN",Rnt[Rnt.OVERLAY=4]="OVERLAY",Rnt[Rnt.DARKEN=5]="DARKEN",Rnt[Rnt.LIGHTEN=6]="LIGHTEN",Rnt[Rnt.COLOR_DODGE=7]="COLOR_DODGE",Rnt[Rnt.COLOR_BURN=8]="COLOR_BURN",Rnt[Rnt.HARD_LIGHT=9]="HARD_LIGHT",Rnt[Rnt.SOFT_LIGHT=10]="SOFT_LIGHT",Rnt[Rnt.DIFFERENCE=11]="DIFFERENCE",Rnt[Rnt.EXCLUSION=12]="EXCLUSION",Rnt[Rnt.HUE=13]="HUE",Rnt[Rnt.SATURATION=14]="SATURATION",Rnt[Rnt.COLOR=15]="COLOR",Rnt[Rnt.LUMINOSITY=16]="LUMINOSITY",Rnt[Rnt.NORMAL_NPM=17]="NORMAL_NPM",Rnt[Rnt.ADD_NPM=18]="ADD_NPM",Rnt[Rnt.SCREEN_NPM=19]="SCREEN_NPM",Rnt[Rnt.NONE=20]="NONE",Rnt[Rnt.SRC_OVER=0]="SRC_OVER",Rnt[Rnt.SRC_IN=21]="SRC_IN",Rnt[Rnt.SRC_OUT=22]="SRC_OUT",Rnt[Rnt.SRC_ATOP=23]="SRC_ATOP",Rnt[Rnt.DST_OVER=24]="DST_OVER",Rnt[Rnt.DST_IN=25]="DST_IN",Rnt[Rnt.DST_OUT=26]="DST_OUT",Rnt[Rnt.DST_ATOP=27]="DST_ATOP",Rnt[Rnt.ERASE=26]="ERASE",Rnt[Rnt.SUBTRACT=28]="SUBTRACT",Rnt[Rnt.XOR=29]="XOR",(Rnt={})[Rnt.POINTS=0]="POINTS",Rnt[Rnt.LINES=1]="LINES",Rnt[Rnt.LINE_LOOP=2]="LINE_LOOP",Rnt[Rnt.LINE_STRIP=3]="LINE_STRIP",Rnt[Rnt.TRIANGLES=4]="TRIANGLES",Rnt[Rnt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Rnt[Rnt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(Rnt={})[Rnt.RGBA=6408]="RGBA",Rnt[Rnt.RGB=6407]="RGB",Rnt[Rnt.ALPHA=6406]="ALPHA",Rnt[Rnt.LUMINANCE=6409]="LUMINANCE",Rnt[Rnt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Rnt[Rnt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Rnt[Rnt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt={})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(Rnt={})[Rnt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Rnt[Rnt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Rnt[Rnt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Rnt[Rnt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Rnt[Rnt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Rnt[Rnt.FLOAT=5126]="FLOAT",Rnt[Rnt.HALF_FLOAT=36193]="HALF_FLOAT",(Rnt={})[Rnt.FLOAT=0]="FLOAT",Rnt[Rnt.INT=1]="INT",Rnt[Rnt.UINT=2]="UINT",(Rnt=yjt=yjt||{})[Rnt.NEAREST=0]="NEAREST",Rnt[Rnt.LINEAR=1]="LINEAR",(Rnt=ajt=ajt||{})[Rnt.CLAMP=33071]="CLAMP",Rnt[Rnt.REPEAT=10497]="REPEAT",Rnt[Rnt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(Rnt=Rjt=Rjt||{})[Rnt.OFF=0]="OFF",Rnt[Rnt.POW2=1]="POW2",Rnt[Rnt.ON=2]="ON",Rnt[Rnt.ON_MANUAL=3]="ON_MANUAL",(Rnt={})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Rnt={})[Rnt.NO=0]="NO",Rnt[Rnt.YES=1]="YES",Rnt[Rnt.AUTO=2]="AUTO",Rnt[Rnt.BLEND=0]="BLEND",Rnt[Rnt.CLEAR=1]="CLEAR",Rnt[Rnt.BLIT=2]="BLIT",(Rnt=njt=njt||{})[Rnt.AUTO=0]="AUTO",Rnt[Rnt.MANUAL=1]="MANUAL",(Rnt=Tjt=Tjt||{}).LOW="lowp",Rnt.MEDIUM="mediump",Rnt.HIGH="highp",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.SCISSOR=1]="SCISSOR",Rnt[Rnt.STENCIL=2]="STENCIL",Rnt[Rnt.SPRITE=3]="SPRITE",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.LOW=2]="LOW",Rnt[Rnt.MEDIUM=4]="MEDIUM",Rnt[Rnt.HIGH=8]="HIGH";var b4t,A4t,S4t,I4t,R4t,O4t,w4t,C4t,P4t,N4t,M4t,L4t,D4t,U4t,F4t,B4t,k4t,G4t,X4t,H4t,V4t,j4t={MIPMAP_TEXTURES:Rjt.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(b4t=32,S4t=!0,(T4t.tablet||T4t.phone)&&(T4t.apple.device&&(A4t=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(A4t[1],10)<11&&(S4t=!1),T4t.android.device&&(A4t=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(A4t[1],10)<7&&(S4t=!1)),S4t?b4t:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:njt.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:ajt.CLAMP,SCALE_MODE:yjt.LINEAR,PRECISION_VERTEX:Tjt.HIGH,PRECISION_FRAGMENT:T4t.apple.device?Tjt.HIGH:Tjt.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!T4t.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};(Rnt=I4t=I4t||{})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(Rjt=R4t=R4t||{})[Rjt.UNKNOWN=0]="UNKNOWN",Rjt[Rjt.WEBGL=1]="WEBGL",Rjt[Rjt.CANVAS=2]="CANVAS",(njt=O4t=O4t||{})[njt.COLOR=16384]="COLOR",njt[njt.DEPTH=256]="DEPTH",njt[njt.STENCIL=1024]="STENCIL",(ajt=w4t=w4t||{})[ajt.NORMAL=0]="NORMAL",ajt[ajt.ADD=1]="ADD",ajt[ajt.MULTIPLY=2]="MULTIPLY",ajt[ajt.SCREEN=3]="SCREEN",ajt[ajt.OVERLAY=4]="OVERLAY",ajt[ajt.DARKEN=5]="DARKEN",ajt[ajt.LIGHTEN=6]="LIGHTEN",ajt[ajt.COLOR_DODGE=7]="COLOR_DODGE",ajt[ajt.COLOR_BURN=8]="COLOR_BURN",ajt[ajt.HARD_LIGHT=9]="HARD_LIGHT",ajt[ajt.SOFT_LIGHT=10]="SOFT_LIGHT",ajt[ajt.DIFFERENCE=11]="DIFFERENCE",ajt[ajt.EXCLUSION=12]="EXCLUSION",ajt[ajt.HUE=13]="HUE",ajt[ajt.SATURATION=14]="SATURATION",ajt[ajt.COLOR=15]="COLOR",ajt[ajt.LUMINOSITY=16]="LUMINOSITY",ajt[ajt.NORMAL_NPM=17]="NORMAL_NPM",ajt[ajt.ADD_NPM=18]="ADD_NPM",ajt[ajt.SCREEN_NPM=19]="SCREEN_NPM",ajt[ajt.NONE=20]="NONE",ajt[ajt.SRC_OVER=0]="SRC_OVER",ajt[ajt.SRC_IN=21]="SRC_IN",ajt[ajt.SRC_OUT=22]="SRC_OUT",ajt[ajt.SRC_ATOP=23]="SRC_ATOP",ajt[ajt.DST_OVER=24]="DST_OVER",ajt[ajt.DST_IN=25]="DST_IN",ajt[ajt.DST_OUT=26]="DST_OUT",ajt[ajt.DST_ATOP=27]="DST_ATOP",ajt[ajt.ERASE=26]="ERASE",ajt[ajt.SUBTRACT=28]="SUBTRACT",ajt[ajt.XOR=29]="XOR",(yjt=C4t=C4t||{})[yjt.POINTS=0]="POINTS",yjt[yjt.LINES=1]="LINES",yjt[yjt.LINE_LOOP=2]="LINE_LOOP",yjt[yjt.LINE_STRIP=3]="LINE_STRIP",yjt[yjt.TRIANGLES=4]="TRIANGLES",yjt[yjt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",yjt[yjt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(Tjt=P4t=P4t||{})[Tjt.RGBA=6408]="RGBA",Tjt[Tjt.RGB=6407]="RGB",Tjt[Tjt.ALPHA=6406]="ALPHA",Tjt[Tjt.LUMINANCE=6409]="LUMINANCE",Tjt[Tjt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Tjt[Tjt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Tjt[Tjt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt=N4t=N4t||{})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(Rjt=M4t=M4t||{})[Rjt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Rjt[Rjt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Rjt[Rjt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Rjt[Rjt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Rjt[Rjt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Rjt[Rjt.FLOAT=5126]="FLOAT",Rjt[Rjt.HALF_FLOAT=36193]="HALF_FLOAT",(njt=L4t=L4t||{})[njt.FLOAT=0]="FLOAT",njt[njt.INT=1]="INT",njt[njt.UINT=2]="UINT",(ajt=D4t=D4t||{})[ajt.NEAREST=0]="NEAREST",ajt[ajt.LINEAR=1]="LINEAR",(yjt=U4t=U4t||{})[yjt.CLAMP=33071]="CLAMP",yjt[yjt.REPEAT=10497]="REPEAT",yjt[yjt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(Tjt=F4t=F4t||{})[Tjt.OFF=0]="OFF",Tjt[Tjt.POW2=1]="POW2",Tjt[Tjt.ON=2]="ON",Tjt[Tjt.ON_MANUAL=3]="ON_MANUAL",(Rnt=B4t=B4t||{})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Rjt=k4t=k4t||{})[Rjt.NO=0]="NO",Rjt[Rjt.YES=1]="YES",Rjt[Rjt.AUTO=2]="AUTO",Rjt[Rjt.BLEND=0]="BLEND",Rjt[Rjt.CLEAR=1]="CLEAR",Rjt[Rjt.BLIT=2]="BLIT",(njt=G4t=G4t||{})[njt.AUTO=0]="AUTO",njt[njt.MANUAL=1]="MANUAL",(ajt=X4t=X4t||{}).LOW="lowp",ajt.MEDIUM="mediump",ajt.HIGH="highp",(yjt=H4t=H4t||{})[yjt.NONE=0]="NONE",yjt[yjt.SCISSOR=1]="SCISSOR",yjt[yjt.STENCIL=2]="STENCIL",yjt[yjt.SPRITE=3]="SPRITE",(Tjt=V4t=V4t||{})[Tjt.NONE=0]="NONE",Tjt[Tjt.LOW=2]="LOW",Tjt[Tjt.MEDIUM=4]="MEDIUM",Tjt[Tjt.HIGH=8]="HIGH";r(25);var Y4t={parse:_t.parse,format:_t.format,resolve:_t.resolve};j4t.RETINA_PREFIX=/@([0-9\.]+)x/;var z4t,W4t=j4t.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,Z4t="6.0.4";var K4t=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[w4t.NORMAL_NPM]=w4t.NORMAL,t[w4t.ADD_NPM]=w4t.ADD,t[w4t.SCREEN_NPM]=w4t.SCREEN,e[w4t.NORMAL]=w4t.NORMAL_NPM,e[w4t.ADD]=w4t.ADD_NPM,e[w4t.SCREEN]=w4t.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function q4t(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function J4t(t){return!(t&t-1||!t)}function Q4t(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}function $4t(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}function tVt(t){return 0===t?0:t<0?-1:1}var eVt=0;var rVt={};function iVt(t,e,r){var i;void 0===r&&(r=3),rVt[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),rVt[e]=!0)}var nVt={},sVt=Object.create(null),oVt=Object.create(null);aVt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},aVt.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},aVt.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(aVt.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(aVt.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function aVt(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||j4t.RESOLUTION,this.resize(t,e)}var hVt;function uVt(t,e){t=j4t.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var lVt,cVt=(dVt.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},dVt.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},dVt.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},dVt.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},dVt.prototype.contains=function(t){return-1!==this.items.indexOf(t)},dVt.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},dVt.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(dVt.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(dVt.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),dVt);function dVt(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(cVt.prototype,{dispatch:{value:cVt.prototype.emit},run:{value:cVt.prototype.emit}}),j4t.TARGET_FPMS=.06,(Rnt=lVt=lVt||{})[Rnt.INTERACTION=50]="INTERACTION",Rnt[Rnt.HIGH=25]="HIGH",Rnt[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.LOW=-25]="LOW",Rnt[Rnt.UTILITY=-50]="UTILITY";var fVt=(pVt.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},pVt.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},pVt.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},pVt.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},pVt);function pVt(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var _Vt=(yVt.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},yVt.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},yVt.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},yVt.prototype.add=function(t,e,r){return void 0===r&&(r=lVt.NORMAL),this._addListener(new fVt(t,e,r))},yVt.prototype.addOnce=function(t,e,r){return void 0===r&&(r=lVt.NORMAL),this._addListener(new fVt(t,e,r,!0))},yVt.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},yVt.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(yVt.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),yVt.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},yVt.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},yVt.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},yVt.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*j4t.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(yVt.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(yVt.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,j4t.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(yVt.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(yVt,"shared",{get:function(){var t;return yVt._shared||((t=yVt._shared=new yVt).autoStart=!0,t._protected=!0),yVt._shared},enumerable:!1,configurable:!0}),Object.defineProperty(yVt,"system",{get:function(){var t;return yVt._system||((t=yVt._system=new yVt).autoStart=!0,t._protected=!0),yVt._system},enumerable:!1,configurable:!0}),yVt);function yVt(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new fVt(null,null,1/0),this.deltaMS=1/j4t.TARGET_FPMS,this.elapsedMS=1/j4t.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}mVt.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,lVt.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?_Vt.shared:new _Vt,t.autoStart&&this.start()},mVt.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function mVt(){}var vVt,xVt=2*Math.PI,gVt=180/Math.PI,EVt=Math.PI/180;(Rjt=vVt=vVt||{})[Rjt.POLY=0]="POLY",Rjt[Rjt.RECT=1]="RECT",Rjt[Rjt.CIRC=2]="CIRC",Rjt[Rjt.ELIP=3]="ELIP",Rjt[Rjt.RREC=4]="RREC";var TVt=(Object.defineProperty(bVt.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(bVt.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(bVt.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(bVt.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(bVt,"EMPTY",{get:function(){return new bVt(0,0,0,0)},enumerable:!1,configurable:!0}),bVt.prototype.clone=function(){return new bVt(this.x,this.y,this.width,this.height)},bVt.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},bVt.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},bVt.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},bVt.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},bVt.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},bVt.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},bVt.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},bVt.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},bVt);function bVt(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=vVt.RECT}AVt.prototype.clone=function(){return new AVt(this.x,this.y,this.radius)},AVt.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},AVt.prototype.getBounds=function(){return new TVt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},AVt.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function AVt(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=vVt.CIRC}SVt.prototype.clone=function(){return new SVt(this.x,this.y,this.width,this.height)},SVt.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},SVt.prototype.getBounds=function(){return new TVt(this.x-this.width,this.y-this.height,this.width,this.height)},SVt.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function SVt(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=vVt.ELIP}IVt.prototype.clone=function(){var t=new IVt(this.points.slice());return t.closeStroke=this.closeStroke,t},IVt.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},IVt.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function IVt(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=vVt.POLY,this.closeStroke=!0}RVt.prototype.clone=function(){return new RVt(this.x,this.y,this.width,this.height,this.radius)},RVt.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},RVt.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function RVt(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=vVt.RREC}var OVt=(wVt.prototype.clone=function(){return new wVt(this.x,this.y)},wVt.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},wVt.prototype.copyTo=function(t){return t.set(this.x,this.y),t},wVt.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},wVt.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},wVt.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},wVt);function wVt(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var CVt=(PVt.prototype.clone=function(t,e){return new PVt(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},PVt.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},PVt.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},PVt.prototype.copyTo=function(t){return t.set(this._x,this._y),t},PVt.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},PVt.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(PVt.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(PVt.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),PVt);function PVt(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var NVt=(MVt.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},MVt.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},MVt.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},MVt.prototype.apply=function(t,e){e=e||new OVt;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},MVt.prototype.applyInverse=function(t,e){e=e||new OVt;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},MVt.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},MVt.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},MVt.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},MVt.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},MVt.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},MVt.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},MVt.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(xVt-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},MVt.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},MVt.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},MVt.prototype.clone=function(){var t=new MVt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},MVt.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},MVt.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},MVt.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(MVt,"IDENTITY",{get:function(){return new MVt},enumerable:!1,configurable:!0}),Object.defineProperty(MVt,"TEMP_MATRIX",{get:function(){return new MVt},enumerable:!1,configurable:!0}),MVt);function MVt(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var LVt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],DVt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],UVt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],FVt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],BVt=[],kVt=[],GVt=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];BVt.push(e);for(var r=0;r<16;r++)for(var i=GVt(LVt[t]*LVt[r]+UVt[t]*DVt[r]),n=GVt(DVt[t]*LVt[r]+FVt[t]*DVt[r]),s=GVt(LVt[t]*UVt[r]+UVt[t]*FVt[r]),o=GVt(DVt[t]*UVt[r]+FVt[t]*FVt[r]),a=0;a<16;a++)if(LVt[a]===i&&DVt[a]===n&&UVt[a]===s&&FVt[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new NVt;h.set(LVt[t],DVt[t],UVt[t],FVt[t],0,0),kVt.push(h)}}();var XVt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return LVt[t]},uY:function(t){return DVt[t]},vX:function(t){return UVt[t]},vY:function(t){return FVt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return BVt[t][e]},sub:function(t,e){return BVt[t][XVt.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?XVt.S:XVt.N:2*Math.abs(e)<=Math.abs(t)?0<t?XVt.E:XVt.W:0<e?0<t?XVt.SE:XVt.SW:0<t?XVt.NE:XVt.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=kVt[XVt.inv(e)];e.tx=r,e.ty=i,t.append(e)}},HVt=(VVt.prototype.onChange=function(){this._localID++},VVt.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},VVt.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},VVt.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},VVt.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},VVt.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(VVt.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),VVt.IDENTITY=new VVt,VVt);function VVt(){this.worldTransform=new NVt,this.localTransform=new NVt,this.position=new CVt(this.onChange,this,0,0),this.scale=new CVt(this.onChange,this,1,1),this.pivot=new CVt(this.onChange,this,0,0),this.skew=new CVt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}j4t.PREFER_ENV=T4t.any?I4t.WEBGL:I4t.WEBGL2,j4t.STRICT_TEXTURE_CACHE=!1;var jVt=[];function YVt(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=jVt.length-1;0<=n;--n){var s=jVt[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var zVt=function(t,e){return(zVt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function WVt(t,e){function r(){this.constructor=t}zVt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var ZVt=(KVt.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},KVt.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},KVt.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(KVt.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),KVt.prototype.update=function(){this.destroyed||this.onUpdate.emit()},KVt.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(KVt.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(KVt.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),KVt.prototype.style=function(t,e,r){return!1},KVt.prototype.dispose=function(){},KVt.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},KVt.test=function(t,e){return!1},KVt);function KVt(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new cVt("setRealSize"),this.onUpdate=new cVt("update"),this.onError=new cVt("onError")}var qVt,JVt=(WVt(QVt,qVt=ZVt),QVt.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===B4t.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},QVt.prototype.dispose=function(){this.data=null},QVt.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},QVt);function QVt(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=qVt.call(this,e,i)||this).data=t,r}var $Vt,tjt={scaleMode:D4t.NEAREST,format:P4t.RGBA,alphaMode:B4t.NPM},ejt=(WVt(rjt,$Vt=pt.a),Object.defineProperty(rjt.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(rjt.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),rjt.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},rjt.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},rjt.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},rjt.prototype._refreshPOT=function(){this.isPowerOfTwo=J4t(this.realWidth)&&J4t(this.realHeight)},rjt.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},rjt.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},rjt.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},rjt.prototype.onError=function(t){this.emit("error",this,t)},rjt.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete oVt[this.cacheId],delete sVt[this.cacheId],this.cacheId=null),this.dispose(),rjt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},rjt.prototype.dispose=function(){this.emit("dispose",this)},rjt.prototype.castToBaseTexture=function(){return this},rjt.from=function(t,e,r){void 0===r&&(r=j4t.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++eVt),t._pixiId),s=oVt[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new rjt(t,e)).cacheId=n,rjt.addToCache(s,n)),s},rjt.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new JVt(t,{width:e,height:r}),t=t instanceof Float32Array?M4t.FLOAT:M4t.UNSIGNED_BYTE;return new rjt(n,Object.assign(tjt,i||{width:e,height:r,type:t}))},rjt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),oVt[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),oVt[e]=t)},rjt.removeFromCache=function(t){if("string"==typeof t){var e=oVt[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete oVt[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete oVt[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},rjt._globalBatch=0,rjt);function rjt(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=$Vt.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof ZVt||((t=YVt(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||j4t.RESOLUTION,r.mipmap=void 0!==n?n:j4t.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:j4t.ANISOTROPIC_LEVEL,r.wrapMode=u||j4t.WRAP_MODE,r.scaleMode=void 0!==o?o:j4t.SCALE_MODE,r.format=l||P4t.RGBA,r.type=c||M4t.UNSIGNED_BYTE,r.target=d||N4t.TEXTURE_2D,r.alphaMode=void 0!==i?i:B4t.UNPACK,r.uid=++eVt,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var ijt,njt=(WVt(sjt,ijt=ZVt),sjt.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof ZVt?this.addResourceAt(t[r],r):this.addResourceAt(YVt(t[r],e),r))},sjt.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},sjt.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},sjt.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");ijt.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},sjt.prototype.unbind=function(t){ijt.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},sjt.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},sjt);function sjt(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=ijt.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new ejt;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var ojt,ajt=(WVt(hjt,ojt=njt),hjt.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},hjt.prototype.bind=function(t){ojt.prototype.bind.call(this,t),t.target=N4t.TEXTURE_2D_ARRAY},hjt.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},hjt);function hjt(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=ojt.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var ujt,ljt=(WVt(cjt,ujt=ZVt),cjt.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(hVt=hVt||document.createElement("a")).href=t;var r=Y4t.parse(hVt.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},cjt.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===B4t.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},cjt.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),ujt.prototype.update.call(this))},cjt.prototype.dispose=function(){this.source=null},cjt);function cjt(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=ujt.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var djt,fjt=(WVt(pjt,djt=ljt),pjt.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},pjt);function pjt(t){return djt.call(this,t)||this}var _jt,yjt=(WVt(mjt,_jt=njt),mjt.prototype.bind=function(t){_jt.prototype.bind.call(this,t),t.target=N4t.TEXTURE_CUBE_MAP},mjt.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=N4t.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},mjt.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<mjt.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},mjt.test=function(t){return Array.isArray(t)&&t.length===mjt.SIDES},mjt.SIDES=6,mjt);function mjt(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==mjt.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=_jt.call(this,6,{width:n,height:s})||this,a=0;a<mjt.SIDES;a++)r.items[a].target=N4t.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var vjt,xjt=(WVt(gjt,vjt=ljt),gjt.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},gjt.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===B4t.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},gjt.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return vjt.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(vjt.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},gjt.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,vjt.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},gjt.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},gjt);function gjt(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,ljt.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=vjt.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:j4t.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var Ejt,Tjt=(WVt(bjt,Ejt=ljt),bjt.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},bjt.prototype._loadSvg=function(){var s=this,o=new Image;ljt.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++eVt,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},bjt.getSize=function(t){var e=bjt.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},bjt.prototype.dispose=function(){Ejt.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},bjt.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},bjt.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,bjt);function bjt(t,e){var r=this;return e=e||{},(r=Ejt.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var Ajt,Rnt=(WVt(Sjt,Ajt=ljt),Sjt.prototype.update=function(t){var e;this.destroyed||(e=_Vt.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(Ajt.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},Sjt.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},Sjt.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},Sjt.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},Sjt.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},Sjt.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(_Vt.shared.add(this.update,this),this._isConnectedToTicker=!0)},Sjt.prototype._onPlayStop=function(){this._isConnectedToTicker&&(_Vt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},Sjt.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},Sjt.prototype.dispose=function(){this._isConnectedToTicker&&_Vt.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),Ajt.prototype.dispose.call(this)},Object.defineProperty(Sjt.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(_Vt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(_Vt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(Sjt.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),Sjt.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<Sjt.TYPES.indexOf(e)},Sjt.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Sjt.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},Sjt);function Sjt(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];ljt.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||Sjt.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=Ajt.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var Ijt,Rjt=(WVt(Ojt,Ijt=ljt),Ojt.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},Ojt);function Ojt(t){return Ijt.call(this,t)||this}jVt.push(xjt,Rjt,fjt,Rnt,Tjt,JVt,yjt,ajt);var wjt={__proto__:null,Resource:ZVt,BaseImageResource:ljt,INSTALLED:jVt,autoDetectResource:YVt,AbstractMultiResource:njt,ArrayResource:ajt,BufferResource:JVt,CanvasResource:fjt,CubeResource:yjt,ImageResource:xjt,SVGResource:Tjt,VideoResource:Rnt,ImageBitmapResource:Rjt},Tjt=(Cjt.prototype.destroy=function(){this.renderer=null},Cjt);function Cjt(t){this.renderer=t}var Pjt,Njt=(WVt(Mjt,Pjt=JVt),Mjt.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===B4t.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},Mjt);function Mjt(){return null!==Pjt&&Pjt.apply(this,arguments)||this}var Ljt=(Object.defineProperty(Djt.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),Djt.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new ejt(null,{scaleMode:D4t.NEAREST,resolution:1,mipmap:F4t.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Djt.prototype.addDepthTexture=function(t){return this.depthTexture=t||new ejt(new Njt(null,{width:this.width,height:this.height}),{scaleMode:D4t.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:F4t.OFF,format:P4t.DEPTH_COMPONENT,type:M4t.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Djt.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Djt.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Djt.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},Djt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Djt.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},Djt);function Djt(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new cVt("disposeFramebuffer"),this.multisample=V4t.NONE}var Ujt,Fjt=(WVt(Bjt,Ujt=ejt),Bjt.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},Bjt.prototype.dispose=function(){this.framebuffer.dispose(),Ujt.prototype.dispose.call(this)},Bjt.prototype.destroy=function(){Ujt.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},Bjt);function Bjt(t){var e=this,e=Ujt.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=F4t.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new Ljt(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var kjt=(Gjt.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=XVt.add(r,XVt.NW),this.x0=s+i*XVt.uX(r),this.y0=e+n*XVt.uY(r),r=XVt.add(r,2),this.x1=s+i*XVt.uX(r),this.y1=e+n*XVt.uY(r),r=XVt.add(r,2),this.x2=s+i*XVt.uX(r),this.y2=e+n*XVt.uY(r),r=XVt.add(r,2),this.x3=s+i*XVt.uX(r),this.y3=e+n*XVt.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},Gjt.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},Gjt);function Gjt(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var Xjt,Hjt=new kjt,Vjt=(WVt(jjt,Xjt=pt.a),jjt.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},jjt.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},jjt.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&sVt[t.url]&&jjt.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,jjt.removeFromCache(this),this.textureCacheIds=null},jjt.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new jjt(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},jjt.prototype.updateUvs=function(){this._uvs===Hjt&&(this._uvs=new kjt),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},jjt.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=j4t.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++eVt),t._pixiId),s=sVt[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=uVt(t)),(s=new jjt(new ejt(t,e))).baseTexture.cacheId=n,ejt.addToCache(s.baseTexture,n),jjt.addToCache(s,n)),s},jjt.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=jjt.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},jjt.fromBuffer=function(t,e,r,i){return new jjt(ejt.fromBuffer(t,e,r,i))},jjt.fromLoader=function(t,e,r,i){t=new ejt(t,Object.assign({scaleMode:j4t.SCALE_MODE,resolution:uVt(e)},i)),i=t.resource;i instanceof xjt&&(i.url=e);var n=new jjt(t);return ejt.addToCache(n.baseTexture,r=r||e),jjt.addToCache(n,r),r!==e&&(ejt.addToCache(n.baseTexture,e),jjt.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},jjt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),sVt[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),sVt[e]=t)},jjt.removeFromCache=function(t){if("string"==typeof t){var e=sVt[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete sVt[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)sVt[t.textureCacheIds[i]]===t&&delete sVt[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(jjt.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(jjt.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(jjt.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(jjt.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(jjt.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),jjt.prototype.castToBaseTexture=function(){return this.baseTexture},jjt);function jjt(t,e,r,i,n,s){var o=Xjt.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new TVt(0,0,1,1)),t instanceof jjt&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=Hjt,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new OVt(s.x,s.y):new OVt(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function Yjt(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}Vjt.EMPTY=new Vjt(new ejt),Yjt(Vjt.EMPTY),Yjt(Vjt.EMPTY.baseTexture),Vjt.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new Vjt(new ejt(new fjt(t)))}(),Yjt(Vjt.WHITE),Yjt(Vjt.WHITE.baseTexture);var zjt,Wjt=(WVt(Zjt,zjt=Vjt),Object.defineProperty(Zjt.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Zjt.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},Zjt.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},Zjt.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(iVt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new Zjt(new Fjt(t))},Zjt);function Zjt(t,e){e=zjt.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var Kjt=(qjt.prototype.createTexture=function(t,e){e=new Fjt(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Wjt(e)},qjt.prototype.getOptimalTexture=function(t,e,r){var i=qjt.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=q4t(t)))<<16|65535&(e=q4t(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},qjt.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},qjt.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},qjt.prototype.returnFilterTexture=function(t){this.returnTexture(t)},qjt.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},qjt.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=qjt.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},qjt.SCREEN_KEY="screen",qjt);function qjt(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var Jjt=(Qjt.prototype.destroy=function(){this.buffer=null},Qjt.from=function(t,e,r,i,n){return new Qjt(t,e,r,i,n)},Qjt);function Qjt(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=M4t.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var $jt=0,t5t=(e5t.prototype.update=function(t){this.data=t||this.data,this._updateID++},e5t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e5t.prototype.destroy=function(){this.dispose(),this.data=null},e5t.from=function(t){return new e5t(t=t instanceof Array?new Float32Array(t):t)},e5t);function e5t(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=$jt++,this.disposeRunner=new cVt("disposeBuffer")}function r5t(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var i5t={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var n5t={5126:4,5123:2,5121:1},s5t=0,o5t={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Rnt=(a5t.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof t5t||(e instanceof Array&&(e=new Float32Array(e)),e=new t5t(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new Jjt(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},a5t.prototype.getAttribute=function(t){return this.attributes[t]},a5t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},a5t.prototype.addIndex=function(t){return t instanceof t5t||(t instanceof Array&&(t=new Uint16Array(t)),t=new t5t(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},a5t.prototype.getIndex=function(){return this.indexBuffer},a5t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new t5t;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*n5t[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=r5t(l);n[c]||(n[c]=new i5t[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},a5t.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},a5t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},a5t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},a5t.prototype.clone=function(){for(var t=new a5t,e=0;e<this.buffers.length;e++)t.buffers[e]=new t5t(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new Jjt(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},a5t.merge=function(t){for(var e=new a5t,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new o5t[r5t(o.buffers[s].data)](i[s]),e.buffers[s]=new t5t(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*n5t[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},a5t);function a5t(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=s5t++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new cVt("disposeGeometry"),this.refCount=0}var h5t,u5t=(WVt(l5t,h5t=Rnt),l5t);function l5t(){var t=h5t.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var c5t,d5t=(WVt(f5t,c5t=Rnt),f5t.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},f5t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},f5t);function f5t(){var t=c5t.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new t5t(t.vertices),t.uvBuffer=new t5t(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var p5t=0,_5t=(y5t.prototype.update=function(){this.dirtyId++},y5t.prototype.add=function(t,e,r){this.uniforms[t]=new y5t(e,r)},y5t.from=function(t,e){return new y5t(t,e)},y5t);function y5t(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=p5t++,this.static=!!e}var m5t=(v5t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},v5t);function v5t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new TVt,this.destinationFrame=new TVt,this.bindingSourceFrame=new TVt,this.bindingDestinationFrame=new TVt,this.filters=[],this.transform=null}var x5t,g5t=[new OVt,new OVt,new OVt,new OVt],E5t=new NVt,T5t=(WVt(b5t,x5t=Tjt),b5t.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new m5t,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(E5t.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},b5t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,k4t.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,k4t.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,k4t.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},b5t.prototype.bindAndClear=function(t,e){void 0===e&&(e=k4t.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===k4t.CLEAR||e===k4t.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},b5t.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(C4t.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(C4t.TRIANGLE_STRIP))},b5t.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(NVt.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},b5t.prototype.destroy=function(){this.texturePool.clear(!1)},b5t.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},b5t.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},b5t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},b5t.prototype.emptyPool=function(){this.texturePool.clear(!0)},b5t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},b5t.prototype.transformAABB=function(t,e){var r=g5t[0],i=g5t[1],n=g5t[2],s=g5t[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},b5t.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?E5t.copyFrom(n):E5t.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},b5t);function b5t(t){var e=x5t.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new Kjt,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new u5t,e.quadUv=new d5t,e.tempRect=new TVt,e.activeState={},e.globalUniforms=new _5t({outputFrame:new TVt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var A5t=(S5t.prototype.flush=function(){},S5t.prototype.destroy=function(){this.renderer=null},S5t.prototype.start=function(){},S5t.prototype.stop=function(){this.flush()},S5t.prototype.render=function(t){},S5t);function S5t(t){this.renderer=t}var I5t,R5t=(WVt(O5t,I5t=Tjt),O5t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},O5t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},O5t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},O5t.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},O5t.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},O5t);function O5t(t){var e=I5t.call(this,t)||this;return e.emptyRenderer=new A5t(t),e.currentRenderer=e.emptyRenderer,e}var w5t,C5t=0,P5t=(WVt(N5t,w5t=Tjt),Object.defineProperty(N5t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),N5t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=C5t++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},N5t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=C5t++,this.renderer.runners.contextChange.emit(t)},N5t.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},N5t.prototype.createContext=function(t,e){var r;if(r=j4t.PREFER_ENV>=I4t.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},N5t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},N5t.prototype.handleContextLost=function(t){t.preventDefault()},N5t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},N5t.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},N5t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},N5t.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},N5t);function N5t(t){var e=w5t.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var M5t,L5t=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=V4t.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},D5t=new TVt,U5t=(WVt(F5t,M5t=Tjt),F5t.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new TVt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,j4t.PREFER_ENV===I4t.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},F5t.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},F5t.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(F5t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),F5t.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=O4t.COLOR|O4t.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},F5t.prototype.initFramebuffer=function(t){var e=this.gl,e=new L5t(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},F5t.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},F5t.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},F5t.prototype.detectSamples=function(t){var e=this.msaaSamples,r=V4t.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?V4t.NONE:r},F5t.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new Ljt(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=D5t).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},F5t.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},F5t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},F5t.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},F5t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new TVt},F5t);function F5t(t){t=M5t.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new Ljt(10,10),t.msaaSamples=null,t}var B5t,k5t=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},G5t={5126:4,5123:2,5121:1},X5t=(WVt(H5t,B5t=Tjt),H5t.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=j4t.PREFER_ENV===I4t.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},H5t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},H5t.prototype.reset=function(){this.unbind()},H5t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},H5t.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},H5t.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},H5t.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*G5t[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*G5t[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*G5t[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new k5t(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},H5t.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},H5t.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},H5t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},H5t.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},H5t.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},H5t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},H5t);function H5t(t){t=B5t.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var V5t=(j5t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=H4t.NONE,this.autoDetect=!0),this._target=null},j5t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},j5t);function j5t(t){void 0===t&&(t=null),this.type=H4t.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function Y5t(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function z5t(t,e,r,i){var n=Y5t(t,t.VERTEX_SHADER,e),s=Y5t(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function W5t(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function Z5t(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return W5t(2*e);case"bvec3":return W5t(3*e);case"bvec4":return W5t(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var K5t,q5t={},J5t=q5t;function Q5t(){var t,e;return(J5t===q5t||J5t&&J5t.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=j4t.PREFER_ENV>=I4t.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),J5t=e),J5t}function $5t(t,e,r){if("precision"===t.substring(0,9))return r!==X4t.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===X4t.HIGH&&r!==X4t.HIGH?X4t.MEDIUM:e)+" float;\n"+t}var tYt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var eYt=null,rYt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function iYt(t,e){if(!eYt){var r=Object.keys(rYt);eYt={};for(var i=0;i<r.length;++i){var n=r[i];eYt[t[n]]=rYt[n]}}return eYt[e]}var nYt=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],sYt={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},oYt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var aYt,hYt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function uYt(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=hYt.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var lYt=0,cYt={},dYt=(fYt.prototype.extractData=function(t,e){var r=Q5t();r?(e=z5t(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},fYt.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=iYt(e,o.type),a={type:a,name:o.name,size:tYt[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},fYt.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=iYt(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:Z5t(h,s.size)}}return r},Object.defineProperty(fYt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(fYt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),fYt.from=function(t,e,r){var i=t+e,n=nVt[i];return n||(nVt[i]=n=new fYt(t,e,r)),n},fYt);function fYt(t,e,r){void 0===r&&(r="pixi-shader"),this.id=lYt++,this.vertexSrc=t||fYt.defaultVertexSrc,this.fragmentSrc=e||fYt.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),cYt[r]?(cYt[r]++,r+="-"+cYt[r]):cYt[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=$5t(this.vertexSrc,j4t.PRECISION_VERTEX,X4t.HIGH),this.fragmentSrc=$5t(this.fragmentSrc,j4t.PRECISION_FRAGMENT,(K5t||(K5t=X4t.MEDIUM,(r=Q5t())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),K5t=r.precision?X4t.HIGH:X4t.MEDIUM)),K5t))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var pYt=(_Yt.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},_Yt.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(_Yt.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),_Yt.from=function(t,e,r){return new _Yt(dYt.from(t,e),r)},_Yt);function _Yt(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof _5t?e:new _5t(e):new _5t({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var yYt=(Object.defineProperty(mYt.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(mYt.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(mYt.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(mYt.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(mYt.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(mYt.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(mYt.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==w4t.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(mYt.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),mYt.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},mYt.for2d=function(){var t=new mYt;return t.depthTest=!1,t.blend=!0,t},mYt);function mYt(){this.data=0,this.blendMode=w4t.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var vYt,Rjt=(WVt(xYt,vYt=pYt),xYt.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(xYt.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(xYt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(xYt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),xYt);function xYt(t,e,r){var i=this,e=dYt.from(t||xYt.defaultVertexSrc,e||xYt.defaultFragmentSrc);return(i=vYt.call(this,e,r)||this).padding=0,i.resolution=j4t.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new yYt,i}var gYt=new NVt,EYt=(Object.defineProperty(TYt.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),TYt.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},TYt.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(gYt.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(gYt));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},TYt);function TYt(t,e){this._texture=t,this.mapCoord=new NVt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var bYt,AYt=(WVt(SYt,bYt=Rjt),SYt.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new EYt(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},SYt);function SYt(t){var e=this,r=new NVt,e=bYt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var IYt,RYt=(WVt(OYt,IYt=Tjt),OYt.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},OYt.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new V5t).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case H4t.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case H4t.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case H4t.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},OYt.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case H4t.SCISSOR:this.renderer.scissor.pop();break;case H4t.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case H4t.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},OYt.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=H4t.SPRITE:(t.type=H4t.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=H4t.SCISSOR)))},OYt.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new AYt(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},OYt.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},OYt);function OYt(t){t=IYt.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var wYt,Rjt=(WVt(CYt,wYt=Tjt),CYt.prototype.getStackLength=function(){return this.maskStack.length},CYt.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},CYt.prototype._useCurrent=function(){},CYt.prototype.destroy=function(){wYt.prototype.destroy.call(this),this.maskStack=null},CYt);function CYt(t){t=wYt.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var PYt,NYt=(WVt(MYt,PYt=Rjt),MYt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},MYt.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},MYt.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},MYt.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},MYt);function MYt(t){t=PYt.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var LYt,DYt=(WVt(UYt,LYt=Rjt),UYt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},UYt.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},UYt.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},UYt.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},UYt.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},UYt);function UYt(t){t=LYt.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var FYt,BYt=(WVt(kYt,FYt=Tjt),kYt.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},kYt.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},kYt.prototype.setTransform=function(t){},kYt);function kYt(t){t=FYt.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new NVt,t.transform=null,t}var GYt,XYt=new TVt,HYt=new TVt,VYt=(WVt(jYt,GYt=Tjt),jYt.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(XYt.width=t.frame.width,XYt.height=t.frame.height,e=XYt),r||(HYt.x=t.frame.x,HYt.y=t.frame.y,HYt.width=e.width,HYt.height=e.height,r=HYt),n=i.framebuffer):(s=o.resolution,e||(XYt.width=o.screen.width,XYt.height=o.screen.height,e=XYt),r||((r=XYt).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},jYt.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},jYt.prototype.resize=function(){this.bind(null)},jYt.prototype.reset=function(){this.bind(null)},jYt);function jYt(t){var e=GYt.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new TVt,e.destinationFrame=new TVt,e.viewportFrame=new TVt,e}var YYt=(zYt.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},zYt);function zYt(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var WYt,ZYt=0,KYt={textureCount:0},qYt=(WVt(JYt,WYt=Tjt),JYt.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof aYt)return aYt;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");aYt=!0===t({a:"b"},"a","b")}catch(t){aYt=!1}return aYt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},JYt.prototype.contextChange=function(t){this.gl=t,this.reset()},JYt.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(KYt.textureCount=0,this.syncUniformGroup(t.uniformGroup,KYt)),i},JYt.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},JYt.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},JYt.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},JYt.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<nYt.length;h++)if(nYt[h].test(n,o)){i.push(nYt[h].code(r,o)),a=!0;break}a||(s=(1===n.size?sYt:oYt)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},JYt.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},JYt.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},JYt.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=z5t(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:Z5t(a.type,a.size)}}t=new YYt(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},JYt.prototype.reset=function(){this.program=null,this.shader=null},JYt.prototype.destroy=function(){this.destroyed=!0},JYt);function JYt(t){t=WYt.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=ZYt++,t}var QYt,$Yt=(WVt(t6t,QYt=Tjt),t6t.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[w4t.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.ADD]=[t.ONE,t.ONE],e[w4t.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.NONE]=[0,0],e[w4t.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[w4t.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w4t.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[w4t.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[w4t.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[w4t.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[w4t.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[w4t.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[w4t.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[w4t.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[w4t.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},t6t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},t6t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t6t.prototype.setBlend=function(t){this.updateCheck(t6t.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},t6t.prototype.setOffset=function(t){this.updateCheck(t6t.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t6t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t6t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t6t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t6t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t6t.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},t6t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t6t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t6t.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},t6t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t6t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t6t);function t6t(t){t=QYt.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=w4t.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new yYt,t.defaultState.blend=!0,t}var e6t,r6t=(WVt(i6t,e6t=Tjt),i6t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==G4t.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},i6t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},i6t.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},i6t);function i6t(t){t=e6t.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=j4t.GC_MAX_IDLE,t.checkCountMax=j4t.GC_MAX_CHECK_COUNT,t.mode=j4t.GC_MODE,t}var n6t,s6t=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},o6t=(WVt(a6t,n6t=Tjt),a6t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new s6t(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new s6t(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},a6t.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},a6t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},a6t.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},a6t.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==L4t.FLOAT&&this.renderer.texture.unbind(s)}},a6t.prototype.initTexture=function(t){var e=new s6t(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},a6t.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===M4t.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},a6t.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==L4t.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},a6t.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&$4t(this.managedTextures,t,1))},a6t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==F4t.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=U4t.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},a6t.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==F4t.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===D4t.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===D4t.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===D4t.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===D4t.LINEAR?i.LINEAR:i.NEAREST)},a6t);function a6t(t){t=n6t.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new ejt,t.hasIntegerTextures=!1,t}var h6t,u6t={__proto__:null,FilterSystem:T5t,BatchSystem:R5t,ContextSystem:P5t,FramebufferSystem:U5t,GeometrySystem:X5t,MaskSystem:RYt,ScissorSystem:NYt,StencilSystem:DYt,ProjectionSystem:BYt,RenderTextureSystem:VYt,ShaderSystem:qYt,StateSystem:$Yt,TextureGCSystem:r6t,TextureSystem:o6t},l6t=new NVt,Tjt=(WVt(c6t,h6t=pt.a),c6t.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(c6t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(c6t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),c6t.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},c6t.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=Wjt.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return l6t.tx=-i.x,l6t.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:l6t,skipUpdateTransform:!!t.parent}),r},c6t.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=R4t.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(c6t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(c6t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),c6t);function c6t(t,e){void 0===t&&(t=R4t.UNKNOWN);var r=h6t.call(this)||this;return e=Object.assign({},j4t.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new TVt(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||j4t.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(iVt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var d6t;WVt(f6t,d6t=Tjt),f6t.create=function(t){if(z4t=void 0===z4t?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:j4t.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():z4t)return new f6t(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},f6t.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},f6t.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof Wjt?(iVt("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},f6t.prototype.resize=function(t,e){d6t.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},f6t.prototype.reset=function(){return this.runners.reset.emit(),this},f6t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},f6t.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();d6t.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(f6t.prototype,"extract",{get:function(){return iVt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),f6t.registerPlugin=function(t,e){(f6t.__plugins=f6t.__plugins||{})[t]=e};function f6t(t){var e,r=d6t.call(this,R4t.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new cVt("destroy"),contextChange:new cVt("contextChange"),reset:new cVt("reset"),update:new cVt("update"),postrender:new cVt("postrender"),prerender:new cVt("prerender"),resize:new cVt("resize")},r.globalUniforms=new _5t({projectionMatrix:new NVt},!0),r.addSystem(RYt,"mask").addSystem(P5t,"context").addSystem($Yt,"state").addSystem(qYt,"shader").addSystem(o6t,"texture").addSystem(X5t,"geometry").addSystem(U5t,"framebuffer").addSystem(NYt,"scissor").addSystem(DYt,"stencil").addSystem(BYt,"projection").addSystem(r6t,"textureGC").addSystem(T5t,"filter").addSystem(VYt,"renderTexture").addSystem(R5t,"batch"),r.initPlugins(f6t.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",W4t||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+Z4t+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+Z4t+" - "+e+" - http://www.pixijs.com/"),W4t=!0),r.resize(r.options.width,r.options.height),r}var p6t=function(){this.texArray=null,this.blend=0,this.type=C4t.TRIANGLES,this.start=0,this.size=0,this.data=null},_6t=(y6t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},y6t);function y6t(){this.elements=[],this.ids=[],this.count=0}var m6t=(Object.defineProperty(v6t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(v6t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(v6t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(v6t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(v6t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),v6t.prototype.view=function(t){return this[t+"View"]},v6t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},v6t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},v6t);function v6t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var x6t,g6t=(WVt(E6t,x6t=A5t),E6t.prototype.contextChange=function(){var t=this.renderer.gl;j4t.PREFER_ENV===I4t.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),j4t.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=uYt(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},E6t.prototype.initFlushBuffers=function(){for(var t=E6t._drawCallPool,e=E6t._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new p6t);for(;e.length<i;)e.push(new _6t);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},E6t.prototype.onPrerender=function(){this._flushId=0},E6t.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},E6t.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=E6t._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++ejt._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;ejt._globalBatch=o},E6t.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=E6t._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=K4t[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},E6t.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},E6t.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;j4t.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},E6t.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=E6t._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},E6t.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},E6t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),j4t.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},E6t.prototype.stop=function(){this.flush()},E6t.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),x6t.prototype.destroy.call(this)},E6t.prototype.getAttributeBuffer=function(t){var e=q4t(Math.ceil(t/8)),t=Q4t(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new m6t(e*this.vertexSize*4)),t},E6t.prototype.getIndexBuffer=function(t){var e=q4t(Math.ceil(t/12)),r=Q4t(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},E6t.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},E6t._drawCallPool=[],E6t._textureArrayPool=[],E6t);function E6t(t){var e=x6t.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=yYt.for2d(),e.size=4*j4t.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var T6t=(b6t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=_5t.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new dYt(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new NVt,default:this.defaultGroupCache[t]};return new pYt(this.programCache[t],i)},b6t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},b6t);function b6t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var A6t,S6t=(WVt(I6t,A6t=Rnt),I6t);function I6t(t){void 0===t&&(t=!1);var e=A6t.call(this)||this;return e._buffer=new t5t(null,t,!1),e._indexBuffer=new t5t(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,M4t.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,M4t.FLOAT).addAttribute("aColor",e._buffer,4,!0,M4t.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,M4t.FLOAT).addIndex(e._indexBuffer),e}var R6t="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",O6t="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function w6t(){}(w6t.create=function(t){var e,t=Object.assign({vertex:R6t,fragment:O6t,geometryClass:S6t,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return WVt(o,e=g6t),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new T6t(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(w6t,"defaultVertexSrc",{get:function(){return R6t},enumerable:!1,configurable:!0}),Object.defineProperty(w6t,"defaultFragmentTemplate",{get:function(){return O6t},enumerable:!1,configurable:!0}),w6t).create();var C6t={};for(P6t in wjt)!function(t){Object.defineProperty(C6t,t,{get:function(){return iVt("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),wjt[t]}})}(P6t);var P6t,N6t={};for(P6t in u6t)!function(t){Object.defineProperty(N6t,t,{get:function(){return iVt("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),u6t[t]}})}(P6t);j4t.SORTABLE_CHILDREN=!1;var M6t=(L6t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},L6t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},L6t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?TVt.EMPTY:((t=t||new TVt(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},L6t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},L6t.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,t=t.ty,o=r*e.x+n*e.y+o,t=i*e.x+s*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},L6t.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},L6t.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},L6t.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},L6t.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},L6t.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},L6t.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},L6t.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},L6t.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},L6t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},L6t.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},L6t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},L6t.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},L6t);function L6t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var D6t=function(t,e){return(D6t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function U6t(t,e){function r(){this.constructor=t}D6t(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var F6t,Rnt=(U6t(B6t,F6t=pt.a),B6t.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(B6t.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},B6t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},B6t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},B6t.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new TVt),e=this._boundsRect),this._bounds.getRectangle(e)},B6t.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new TVt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new M6t);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},B6t.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},B6t.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},B6t.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},B6t.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},B6t.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(B6t.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new G6t),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),B6t.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},B6t.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(B6t.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(B6t.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(B6t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(B6t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(B6t.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(B6t.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(B6t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(B6t.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(B6t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(B6t.prototype,"angle",{get:function(){return this.transform.rotation*gVt},set:function(t){this.transform.rotation=t*EVt},enumerable:!1,configurable:!0}),Object.defineProperty(B6t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(B6t.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(B6t.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),B6t);function B6t(){var t=F6t.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new HVt,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new M6t,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var k6t,G6t=(U6t(X6t,k6t=Rnt),X6t);function X6t(){var t=null!==k6t&&k6t.apply(this,arguments)||this;return t.sortDirty=null,t}function H6t(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}Rnt.prototype.displayObjectUpdateTransform=Rnt.prototype.updateTransform;var V6t,j6t=(U6t(Y6t,V6t=Rnt),Y6t.prototype.onChildrenChange=function(t){},Y6t.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},Y6t.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},Y6t.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},Y6t.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},Y6t.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);$4t(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},Y6t.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},Y6t.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,$4t(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},Y6t.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,$4t(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},Y6t.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Y6t.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(H6t),this.sortDirty=!1},Y6t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},Y6t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},Y6t.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=V6t.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},Y6t.prototype._calculateBounds=function(){},Y6t.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},Y6t.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},Y6t.prototype._render=function(t){},Y6t.prototype.destroy=function(t){V6t.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(Y6t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Y6t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),Y6t);function Y6t(){var t=V6t.call(this)||this;return t.children=[],t.sortableChildren=j4t.SORTABLE_CHILDREN,t.sortDirty=!1,t}j6t.prototype.containerUpdateTransform=j6t.prototype.updateTransform;var z6t=function(t,e){return(z6t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var W6t,Z6t,K6t,q6t=new OVt,J6t=new Uint16Array([0,1,2,0,2,3]),Q6t=(z6t(Z6t=tzt,K6t=W6t=j6t),Z6t.prototype=null===K6t?Object.create(K6t):($6t.prototype=K6t.prototype,new $6t),tzt.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=tVt(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=tVt(this.scale.y)*this._height/this._texture.orig.height)},tzt.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},tzt.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,s=e.d,o=e.tx,a=e.ty,h=this.vertexData,u=t.trim,l=t.orig,c=this._anchor,d=0,f=0,e=0,t=0,e=u?(d=(f=u.x-c._x*l.width)+u.width,(t=u.y-c._y*l.height)+u.height):(d=(f=-c._x*l.width)+l.width,(t=-c._y*l.height)+l.height);if(h[0]=r*f+n*t+o,h[1]=s*t+i*f+a,h[2]=r*d+n*t+o,h[3]=s*t+i*d+a,h[4]=r*d+n*e+o,h[5]=s*e+i*d+a,h[6]=r*f+n*e+o,h[7]=s*e+i*f+a,this._roundPixels)for(var p=j4t.RESOLUTION,_=0;_<h.length;++_)h[_]=Math.round((h[_]*p|0)/p)}},tzt.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,h=n.d,u=n.tx,l=n.ty,t=-i._x*r.width,n=t+r.width,i=-i._y*r.height,r=i+r.height;e[0]=s*t+a*i+u,e[1]=h*i+o*t+l,e[2]=s*n+a*i+u,e[3]=h*i+o*n+l,e[4]=s*n+a*r+u,e[5]=h*r+o*n+l,e[6]=s*t+a*r+u,e[7]=h*r+o*t+l},tzt.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},tzt.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},tzt.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new TVt),t=this._localBoundsRect),this._bounds.getRectangle(t)):W6t.prototype.getLocalBounds.call(this,t)},tzt.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,q6t);var e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x,t=0;return q6t.x>=i&&q6t.x<i+e&&(t=-r*this.anchor.y,q6t.y>=t&&q6t.y<t+r)},tzt.prototype.destroy=function(t){W6t.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&(t="boolean"==typeof t?t:t&&t.baseTexture,this._texture.destroy(!!t)),this._texture=null},tzt.from=function(t,e){return new tzt(t instanceof Vjt?t:Vjt.from(t,e))},Object.defineProperty(tzt.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(tzt.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=tVt(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(tzt.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=tVt(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(tzt.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(tzt.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(tzt.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Vjt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),tzt);function $6t(){this.constructor=Z6t}function tzt(t){var e=W6t.call(this)||this;return e._anchor=new CVt(e._onAnchorUpdate,e,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),e._texture=null,e._width=0,e._height=0,e._tint=null,e._tintRGB=null,e.tint=16777215,e.blendMode=w4t.NORMAL,e._cachedTint=16777215,e.uvs=null,e.texture=t||Vjt.EMPTY,e.vertexData=new Float32Array(8),e.vertexTrimmedData=null,e._transformID=-1,e._textureID=-1,e._transformTrimmedID=-1,e._textureTrimmedID=-1,e.indices=J6t,e.pluginName="batch",e.isSprite=!0,e._roundPixels=j4t.ROUND_PIXELS,e}var ezt=new NVt;Rnt.prototype._cacheAsBitmap=!1,Rnt.prototype._cacheData=null,Rnt.prototype._cacheAsBitmapResolution=null;var rzt=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Rnt.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&((this._cacheAsBitmap=t)?(this._cacheData||(this._cacheData=new rzt),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),Rnt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},Rnt.prototype._initCachedDisplayObject=function(t){var e,r,i,n,s,o,a,h;this._cacheData&&this._cacheData.sprite||(e=this.alpha,this.alpha=1,t.batch.flush(),r=this.getLocalBounds(null,!0).clone(),this.filters&&(a=this.filters[0].padding,r.pad(a)),r.ceil(j4t.RESOLUTION),i=t.renderTexture.current,n=t.renderTexture.sourceFrame.clone(),s=t.renderTexture.destinationFrame.clone(),o=t.projection.transform,h=Wjt.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution}),a="cacheAsBitmap_"+ ++eVt,this._cacheData.textureCacheId=a,ejt.addToCache(h.baseTexture,a),Vjt.addToCache(h,a),a=this.transform.localTransform.copyTo(ezt).invert().translate(-r.x,-r.y),this.render=this._cacheData.originalRender,t.render(this,{renderTexture:h,clear:!0,transform:a,skipUpdateTransform:!1}),t.projection.transform=o,t.renderTexture.bind(i,n,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e,(h=new Q6t(h)).transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(r.x/r.width),h.anchor.y=-(r.y/r.height),h.alpha=e,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h))},Rnt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},Rnt.prototype._initCachedDisplayObjectCanvas=function(t){var e,r,i,n,s,o;this._cacheData&&this._cacheData.sprite||(e=this.getLocalBounds(null,!0),r=this.alpha,this.alpha=1,i=t.context,n=t._projTransform,e.ceil(j4t.RESOLUTION),o=Wjt.create({width:e.width,height:e.height}),s="cacheAsBitmap_"+ ++eVt,this._cacheData.textureCacheId=s,ejt.addToCache(o.baseTexture,s),Vjt.addToCache(o,s),this.transform.localTransform.copyTo(s=ezt),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:s,skipUpdateTransform:!1}),t.context=i,t._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r,(o=new Q6t(o)).transform.worldTransform=this.transform.worldTransform,o.anchor.x=-(e.x/e.width),o.anchor.y=-(e.y/e.height),o.alpha=r,o._bounds=this._bounds,this._cacheData.sprite=o,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=o.containsPoint.bind(o))},Rnt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Rnt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Rnt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ejt.removeFromCache(this._cacheData.textureCacheId),Vjt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Rnt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};function izt(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var nzt=/iPhone/i,szt=/iPod/i,ozt=/iPad/i,azt=/\biOS-universal(?:.+)Mac\b/i,hzt=/\bAndroid(?:.+)Mobile\b/i,uzt=/Android/i,lzt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,czt=/Silk/i,dzt=/Windows Phone/i,fzt=/\bWindows(?:.+)ARM\b/i,pzt=/BlackBerry/i,_zt=/BB10/i,yzt=/Opera Mini/i,mzt=/\b(CriOS|Chrome)(?:.+)Mobile/i,vzt=/Mobile(?:.+)Firefox\b/i;var xzt,gzt,Ezt,Tzt=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(nzt)&&!i(dzt),ipod:i(szt),tablet:!i(nzt)&&(i(ozt)||izt(e))&&!i(dzt),universal:i(azt),device:(i(nzt)||i(szt)||i(ozt)||i(azt)||izt(e))&&!i(dzt)},amazon:{phone:i(lzt),tablet:!i(lzt)&&i(czt),device:i(lzt)||i(czt)},android:{phone:!i(dzt)&&i(lzt)||!i(dzt)&&i(hzt),tablet:!i(dzt)&&!i(lzt)&&!i(hzt)&&(i(czt)||i(uzt)),device:!i(dzt)&&(i(lzt)||i(czt)||i(hzt)||i(uzt))||i(/\bokhttp\b/i)},windows:{phone:i(dzt),tablet:i(fzt),device:i(dzt)||i(fzt)},other:{blackberry:i(pzt),blackberry10:i(_zt),opera:i(yzt),firefox:i(vzt),chrome:i(mzt),device:i(pzt)||i(_zt)||i(yzt)||i(vzt)||i(mzt)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(Rnt={})[Rnt.WEBGL_LEGACY=0]="WEBGL_LEGACY",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.WEBGL2=2]="WEBGL2",(Rnt={})[Rnt.UNKNOWN=0]="UNKNOWN",Rnt[Rnt.WEBGL=1]="WEBGL",Rnt[Rnt.CANVAS=2]="CANVAS",(Rnt={})[Rnt.COLOR=16384]="COLOR",Rnt[Rnt.DEPTH=256]="DEPTH",Rnt[Rnt.STENCIL=1024]="STENCIL",(Rnt={})[Rnt.NORMAL=0]="NORMAL",Rnt[Rnt.ADD=1]="ADD",Rnt[Rnt.MULTIPLY=2]="MULTIPLY",Rnt[Rnt.SCREEN=3]="SCREEN",Rnt[Rnt.OVERLAY=4]="OVERLAY",Rnt[Rnt.DARKEN=5]="DARKEN",Rnt[Rnt.LIGHTEN=6]="LIGHTEN",Rnt[Rnt.COLOR_DODGE=7]="COLOR_DODGE",Rnt[Rnt.COLOR_BURN=8]="COLOR_BURN",Rnt[Rnt.HARD_LIGHT=9]="HARD_LIGHT",Rnt[Rnt.SOFT_LIGHT=10]="SOFT_LIGHT",Rnt[Rnt.DIFFERENCE=11]="DIFFERENCE",Rnt[Rnt.EXCLUSION=12]="EXCLUSION",Rnt[Rnt.HUE=13]="HUE",Rnt[Rnt.SATURATION=14]="SATURATION",Rnt[Rnt.COLOR=15]="COLOR",Rnt[Rnt.LUMINOSITY=16]="LUMINOSITY",Rnt[Rnt.NORMAL_NPM=17]="NORMAL_NPM",Rnt[Rnt.ADD_NPM=18]="ADD_NPM",Rnt[Rnt.SCREEN_NPM=19]="SCREEN_NPM",Rnt[Rnt.NONE=20]="NONE",Rnt[Rnt.SRC_OVER=0]="SRC_OVER",Rnt[Rnt.SRC_IN=21]="SRC_IN",Rnt[Rnt.SRC_OUT=22]="SRC_OUT",Rnt[Rnt.SRC_ATOP=23]="SRC_ATOP",Rnt[Rnt.DST_OVER=24]="DST_OVER",Rnt[Rnt.DST_IN=25]="DST_IN",Rnt[Rnt.DST_OUT=26]="DST_OUT",Rnt[Rnt.DST_ATOP=27]="DST_ATOP",Rnt[Rnt.ERASE=26]="ERASE",Rnt[Rnt.SUBTRACT=28]="SUBTRACT",Rnt[Rnt.XOR=29]="XOR",(Rnt={})[Rnt.POINTS=0]="POINTS",Rnt[Rnt.LINES=1]="LINES",Rnt[Rnt.LINE_LOOP=2]="LINE_LOOP",Rnt[Rnt.LINE_STRIP=3]="LINE_STRIP",Rnt[Rnt.TRIANGLES=4]="TRIANGLES",Rnt[Rnt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Rnt[Rnt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(Rnt={})[Rnt.RGBA=6408]="RGBA",Rnt[Rnt.RGB=6407]="RGB",Rnt[Rnt.ALPHA=6406]="ALPHA",Rnt[Rnt.LUMINANCE=6409]="LUMINANCE",Rnt[Rnt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Rnt[Rnt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Rnt[Rnt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(Rnt={})[Rnt.TEXTURE_2D=3553]="TEXTURE_2D",Rnt[Rnt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Rnt[Rnt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Rnt[Rnt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Rnt[Rnt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(Rnt={})[Rnt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Rnt[Rnt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Rnt[Rnt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Rnt[Rnt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Rnt[Rnt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Rnt[Rnt.FLOAT=5126]="FLOAT",Rnt[Rnt.HALF_FLOAT=36193]="HALF_FLOAT",(Rnt={})[Rnt.FLOAT=0]="FLOAT",Rnt[Rnt.INT=1]="INT",Rnt[Rnt.UINT=2]="UINT",(Rnt=fWt=fWt||{})[Rnt.NEAREST=0]="NEAREST",Rnt[Rnt.LINEAR=1]="LINEAR",(Rnt=xzt=xzt||{})[Rnt.CLAMP=33071]="CLAMP",Rnt[Rnt.REPEAT=10497]="REPEAT",Rnt[Rnt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(Rnt=gzt=gzt||{})[Rnt.OFF=0]="OFF",Rnt[Rnt.POW2=1]="POW2",Rnt[Rnt.ON=2]="ON",Rnt[Rnt.ON_MANUAL=3]="ON_MANUAL",(Rnt={})[Rnt.NPM=0]="NPM",Rnt[Rnt.UNPACK=1]="UNPACK",Rnt[Rnt.PMA=2]="PMA",Rnt[Rnt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",Rnt[Rnt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",Rnt[Rnt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Rnt={})[Rnt.NO=0]="NO",Rnt[Rnt.YES=1]="YES",Rnt[Rnt.AUTO=2]="AUTO",Rnt[Rnt.BLEND=0]="BLEND",Rnt[Rnt.CLEAR=1]="CLEAR",Rnt[Rnt.BLIT=2]="BLIT",(Rnt=Ezt=Ezt||{})[Rnt.AUTO=0]="AUTO",Rnt[Rnt.MANUAL=1]="MANUAL",(Rnt=oWt=oWt||{}).LOW="lowp",Rnt.MEDIUM="mediump",Rnt.HIGH="highp",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.SCISSOR=1]="SCISSOR",Rnt[Rnt.STENCIL=2]="STENCIL",Rnt[Rnt.SPRITE=3]="SPRITE",(Rnt={})[Rnt.NONE=0]="NONE",Rnt[Rnt.LOW=2]="LOW",Rnt[Rnt.MEDIUM=4]="MEDIUM",Rnt[Rnt.HIGH=8]="HIGH";var bzt,Azt,Szt,Izt,Rzt={MIPMAP_TEXTURES:gzt.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(bzt=32,Szt=!0,(Tzt.tablet||Tzt.phone)&&(Tzt.apple.device&&(Azt=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(Azt[1],10)<11&&(Szt=!1),Tzt.android.device&&(Azt=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(Azt[1],10)<7&&(Szt=!1)),Szt?bzt:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Ezt.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:xzt.CLAMP,SCALE_MODE:fWt.LINEAR,PRECISION_VERTEX:oWt.HIGH,PRECISION_FRAGMENT:Tzt.apple.device?oWt.HIGH:oWt.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!Tzt.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Ozt=2*Math.PI,wzt=180/Math.PI,Czt=Math.PI/180;(fWt=Izt=Izt||{})[fWt.POLY=0]="POLY",fWt[fWt.RECT=1]="RECT",fWt[fWt.CIRC=2]="CIRC",fWt[fWt.ELIP=3]="ELIP",fWt[fWt.RREC=4]="RREC";var Pzt=(Object.defineProperty(Nzt.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(Nzt.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(Nzt.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(Nzt.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(Nzt,"EMPTY",{get:function(){return new Nzt(0,0,0,0)},enumerable:!1,configurable:!0}),Nzt.prototype.clone=function(){return new Nzt(this.x,this.y,this.width,this.height)},Nzt.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},Nzt.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},Nzt.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},Nzt.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},Nzt.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},Nzt.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},Nzt.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},Nzt.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},Nzt);function Nzt(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=Izt.RECT}Mzt.prototype.clone=function(){return new Mzt(this.x,this.y,this.radius)},Mzt.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},Mzt.prototype.getBounds=function(){return new Pzt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Mzt.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function Mzt(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=Izt.CIRC}Lzt.prototype.clone=function(){return new Lzt(this.x,this.y,this.width,this.height)},Lzt.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},Lzt.prototype.getBounds=function(){return new Pzt(this.x-this.width,this.y-this.height,this.width,this.height)},Lzt.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function Lzt(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=Izt.ELIP}Dzt.prototype.clone=function(){var t=new Dzt(this.points.slice());return t.closeStroke=this.closeStroke,t},Dzt.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},Dzt.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function Dzt(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=Izt.POLY,this.closeStroke=!0}Uzt.prototype.clone=function(){return new Uzt(this.x,this.y,this.width,this.height,this.radius)},Uzt.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},Uzt.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function Uzt(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=Izt.RREC}var Fzt=(Bzt.prototype.clone=function(){return new Bzt(this.x,this.y)},Bzt.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},Bzt.prototype.copyTo=function(t){return t.set(this.x,this.y),t},Bzt.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},Bzt.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},Bzt.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},Bzt);function Bzt(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var kzt=(Gzt.prototype.clone=function(t,e){return new Gzt(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},Gzt.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},Gzt.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},Gzt.prototype.copyTo=function(t){return t.set(this._x,this._y),t},Gzt.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Gzt.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(Gzt.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(Gzt.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Gzt);function Gzt(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var Xzt=(Hzt.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Hzt.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},Hzt.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},Hzt.prototype.apply=function(t,e){e=e||new Fzt;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},Hzt.prototype.applyInverse=function(t,e){e=e||new Fzt;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},Hzt.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},Hzt.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},Hzt.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},Hzt.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},Hzt.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},Hzt.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},Hzt.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(Ozt-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},Hzt.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},Hzt.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Hzt.prototype.clone=function(){var t=new Hzt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Hzt.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Hzt.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Hzt.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(Hzt,"IDENTITY",{get:function(){return new Hzt},enumerable:!1,configurable:!0}),Object.defineProperty(Hzt,"TEMP_MATRIX",{get:function(){return new Hzt},enumerable:!1,configurable:!0}),Hzt);function Hzt(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var Vzt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],jzt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Yzt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],zzt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Wzt=[],Zzt=[],Kzt=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];Wzt.push(e);for(var r=0;r<16;r++)for(var i=Kzt(Vzt[t]*Vzt[r]+Yzt[t]*jzt[r]),n=Kzt(jzt[t]*Vzt[r]+zzt[t]*jzt[r]),s=Kzt(Vzt[t]*Yzt[r]+Yzt[t]*zzt[r]),o=Kzt(jzt[t]*Yzt[r]+zzt[t]*zzt[r]),a=0;a<16;a++)if(Vzt[a]===i&&jzt[a]===n&&Yzt[a]===s&&zzt[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new Xzt;h.set(Vzt[t],jzt[t],Yzt[t],zzt[t],0,0),Zzt.push(h)}}();var qzt=(Jzt.prototype.onChange=function(){this._localID++},Jzt.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},Jzt.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},Jzt.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},Jzt.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},Jzt.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(Jzt.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),Jzt.IDENTITY=new Jzt,Jzt);function Jzt(){this.worldTransform=new Xzt,this.localTransform=new Xzt,this.position=new kzt(this.onChange,this,0,0),this.scale=new kzt(this.onChange,this,1,1),this.pivot=new kzt(this.onChange,this,0,0),this.skew=new kzt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}var Qzt;r(26);(oWt={})[oWt.WEBGL_LEGACY=0]="WEBGL_LEGACY",oWt[oWt.WEBGL=1]="WEBGL",oWt[oWt.WEBGL2=2]="WEBGL2",(fWt={})[fWt.UNKNOWN=0]="UNKNOWN",fWt[fWt.WEBGL=1]="WEBGL",fWt[fWt.CANVAS=2]="CANVAS",(oWt={})[oWt.COLOR=16384]="COLOR",oWt[oWt.DEPTH=256]="DEPTH",oWt[oWt.STENCIL=1024]="STENCIL",(fWt=Qzt=Qzt||{})[fWt.NORMAL=0]="NORMAL",fWt[fWt.ADD=1]="ADD",fWt[fWt.MULTIPLY=2]="MULTIPLY",fWt[fWt.SCREEN=3]="SCREEN",fWt[fWt.OVERLAY=4]="OVERLAY",fWt[fWt.DARKEN=5]="DARKEN",fWt[fWt.LIGHTEN=6]="LIGHTEN",fWt[fWt.COLOR_DODGE=7]="COLOR_DODGE",fWt[fWt.COLOR_BURN=8]="COLOR_BURN",fWt[fWt.HARD_LIGHT=9]="HARD_LIGHT",fWt[fWt.SOFT_LIGHT=10]="SOFT_LIGHT",fWt[fWt.DIFFERENCE=11]="DIFFERENCE",fWt[fWt.EXCLUSION=12]="EXCLUSION",fWt[fWt.HUE=13]="HUE",fWt[fWt.SATURATION=14]="SATURATION",fWt[fWt.COLOR=15]="COLOR",fWt[fWt.LUMINOSITY=16]="LUMINOSITY",fWt[fWt.NORMAL_NPM=17]="NORMAL_NPM",fWt[fWt.ADD_NPM=18]="ADD_NPM",fWt[fWt.SCREEN_NPM=19]="SCREEN_NPM",fWt[fWt.NONE=20]="NONE",fWt[fWt.SRC_OVER=0]="SRC_OVER",fWt[fWt.SRC_IN=21]="SRC_IN",fWt[fWt.SRC_OUT=22]="SRC_OUT",fWt[fWt.SRC_ATOP=23]="SRC_ATOP",fWt[fWt.DST_OVER=24]="DST_OVER",fWt[fWt.DST_IN=25]="DST_IN",fWt[fWt.DST_OUT=26]="DST_OUT",fWt[fWt.DST_ATOP=27]="DST_ATOP",fWt[fWt.ERASE=26]="ERASE",fWt[fWt.SUBTRACT=28]="SUBTRACT",fWt[fWt.XOR=29]="XOR",(oWt={})[oWt.POINTS=0]="POINTS",oWt[oWt.LINES=1]="LINES",oWt[oWt.LINE_LOOP=2]="LINE_LOOP",oWt[oWt.LINE_STRIP=3]="LINE_STRIP",oWt[oWt.TRIANGLES=4]="TRIANGLES",oWt[oWt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",oWt[oWt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(fWt={})[fWt.RGBA=6408]="RGBA",fWt[fWt.RGB=6407]="RGB",fWt[fWt.ALPHA=6406]="ALPHA",fWt[fWt.LUMINANCE=6409]="LUMINANCE",fWt[fWt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",fWt[fWt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",fWt[fWt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(oWt={})[oWt.TEXTURE_2D=3553]="TEXTURE_2D",oWt[oWt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",oWt[oWt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",oWt[oWt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",oWt[oWt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",oWt[oWt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",oWt[oWt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",oWt[oWt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",oWt[oWt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(fWt={})[fWt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",fWt[fWt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",fWt[fWt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",fWt[fWt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",fWt[fWt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",fWt[fWt.FLOAT=5126]="FLOAT",fWt[fWt.HALF_FLOAT=36193]="HALF_FLOAT",(oWt={})[oWt.FLOAT=0]="FLOAT",oWt[oWt.INT=1]="INT",oWt[oWt.UINT=2]="UINT",(fWt={})[fWt.NEAREST=0]="NEAREST",fWt[fWt.LINEAR=1]="LINEAR",(oWt={})[oWt.CLAMP=33071]="CLAMP",oWt[oWt.REPEAT=10497]="REPEAT",oWt[oWt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(fWt={})[fWt.OFF=0]="OFF",fWt[fWt.POW2=1]="POW2",fWt[fWt.ON=2]="ON",fWt[fWt.ON_MANUAL=3]="ON_MANUAL",(oWt={})[oWt.NPM=0]="NPM",oWt[oWt.UNPACK=1]="UNPACK",oWt[oWt.PMA=2]="PMA",oWt[oWt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",oWt[oWt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",oWt[oWt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(fWt={})[fWt.NO=0]="NO",fWt[fWt.YES=1]="YES",fWt[fWt.AUTO=2]="AUTO",fWt[fWt.BLEND=0]="BLEND",fWt[fWt.CLEAR=1]="CLEAR",fWt[fWt.BLIT=2]="BLIT",(oWt={})[oWt.AUTO=0]="AUTO",oWt[oWt.MANUAL=1]="MANUAL",(fWt={}).LOW="lowp",fWt.MEDIUM="mediump",fWt.HIGH="highp",(oWt={})[oWt.NONE=0]="NONE",oWt[oWt.SCISSOR=1]="SCISSOR",oWt[oWt.STENCIL=2]="STENCIL",oWt[oWt.SPRITE=3]="SPRITE",(fWt={})[fWt.NONE=0]="NONE",fWt[fWt.LOW=2]="LOW",fWt[fWt.MEDIUM=4]="MEDIUM",fWt[fWt.HIGH=8]="HIGH";_t.parse,_t.format,_t.resolve;Rzt.RETINA_PREFIX=/@([0-9\.]+)x/;Rzt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;!function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[Qzt.NORMAL_NPM]=Qzt.NORMAL,t[Qzt.ADD_NPM]=Qzt.ADD,t[Qzt.SCREEN_NPM]=Qzt.SCREEN,e[Qzt.NORMAL]=Qzt.NORMAL_NPM,e[Qzt.ADD]=Qzt.ADD_NPM,e[Qzt.SCREEN]=Qzt.SCREEN_NPM;var i=[];i.push(e),i.push(t)}();Float32Array,Uint32Array,Int32Array,Uint8Array;function $zt(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}Object.create(null),Object.create(null);tWt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},tWt.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},tWt.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(tWt.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(tWt.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function tWt(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||Rzt.RESOLUTION,this.resize(t,e)}Rzt.SORTABLE_CHILDREN=!1;var eWt=(rWt.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},rWt.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},rWt.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Pzt.EMPTY:((t=t||new Pzt(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},rWt.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},rWt.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,t=t.ty,o=r*e.x+n*e.y+o,t=i*e.x+s*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},rWt.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},rWt.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},rWt.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},rWt.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},rWt.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},rWt.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},rWt.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},rWt.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},rWt.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},rWt.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},rWt.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},rWt.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},rWt);function rWt(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var iWt=function(t,e){return(iWt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function nWt(t,e){function r(){this.constructor=t}iWt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var sWt,oWt=(nWt(aWt,sWt=pt.a),aWt.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(aWt.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},aWt.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},aWt.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},aWt.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Pzt),e=this._boundsRect),this._bounds.getRectangle(e)},aWt.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Pzt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new eWt);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},aWt.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},aWt.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},aWt.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},aWt.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},aWt.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(aWt.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new uWt),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),aWt.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},aWt.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(aWt.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(aWt.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(aWt.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(aWt.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(aWt.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(aWt.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(aWt.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(aWt.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(aWt.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(aWt.prototype,"angle",{get:function(){return this.transform.rotation*wzt},set:function(t){this.transform.rotation=t*Czt},enumerable:!1,configurable:!0}),Object.defineProperty(aWt.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(aWt.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(aWt.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),aWt);function aWt(){var t=sWt.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new qzt,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new eWt,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var hWt,uWt=(nWt(lWt,hWt=oWt),lWt);function lWt(){var t=null!==hWt&&hWt.apply(this,arguments)||this;return t.sortDirty=null,t}function cWt(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}oWt.prototype.displayObjectUpdateTransform=oWt.prototype.updateTransform;var dWt,fWt=(nWt(pWt,dWt=oWt),pWt.prototype.onChildrenChange=function(t){},pWt.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},pWt.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},pWt.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},pWt.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},pWt.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);$zt(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},pWt.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},pWt.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,$zt(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},pWt.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,$zt(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},pWt.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},pWt.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(cWt),this.sortDirty=!1},pWt.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},pWt.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},pWt.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=dWt.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},pWt.prototype._calculateBounds=function(){},pWt.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},pWt.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},pWt.prototype._render=function(t){},pWt.prototype.destroy=function(t){dWt.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(pWt.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(pWt.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),pWt);function pWt(){var t=dWt.call(this)||this;return t.children=[],t.sortableChildren=Rzt.SORTABLE_CHILDREN,t.sortDirty=!1,t}fWt.prototype.containerUpdateTransform=fWt.prototype.updateTransform,oWt.prototype.name=null,fWt.prototype.getChildByName=function(t,e){for(var r=0,i=this.children.length;r<i;r++)if(this.children[r].name===t)return this.children[r];if(e)for(r=0,i=this.children.length;r<i;r++)if(this.children[r].getChildByName){var n=this.children[r].getChildByName(t,!0);if(n)return n}return null};function _Wt(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var yWt=/iPhone/i,mWt=/iPod/i,vWt=/iPad/i,xWt=/\biOS-universal(?:.+)Mac\b/i,gWt=/\bAndroid(?:.+)Mobile\b/i,EWt=/Android/i,TWt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,bWt=/Silk/i,AWt=/Windows Phone/i,SWt=/\bWindows(?:.+)ARM\b/i,IWt=/BlackBerry/i,RWt=/BB10/i,OWt=/Opera Mini/i,wWt=/\b(CriOS|Chrome)(?:.+)Mobile/i,CWt=/Mobile(?:.+)Firefox\b/i;var PWt,NWt,MWt,LWt=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(yWt)&&!i(AWt),ipod:i(mWt),tablet:!i(yWt)&&(i(vWt)||_Wt(e))&&!i(AWt),universal:i(xWt),device:(i(yWt)||i(mWt)||i(vWt)||i(xWt)||_Wt(e))&&!i(AWt)},amazon:{phone:i(TWt),tablet:!i(TWt)&&i(bWt),device:i(TWt)||i(bWt)},android:{phone:!i(AWt)&&i(TWt)||!i(AWt)&&i(gWt),tablet:!i(AWt)&&!i(TWt)&&!i(gWt)&&(i(bWt)||i(EWt)),device:!i(AWt)&&(i(TWt)||i(bWt)||i(gWt)||i(EWt))||i(/\bokhttp\b/i)},windows:{phone:i(AWt),tablet:i(SWt),device:i(AWt)||i(SWt)},other:{blackberry:i(IWt),blackberry10:i(RWt),opera:i(OWt),firefox:i(CWt),chrome:i(wWt),device:i(IWt)||i(RWt)||i(OWt)||i(CWt)||i(wWt)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(fWt={})[fWt.WEBGL_LEGACY=0]="WEBGL_LEGACY",fWt[fWt.WEBGL=1]="WEBGL",fWt[fWt.WEBGL2=2]="WEBGL2",(fWt={})[fWt.UNKNOWN=0]="UNKNOWN",fWt[fWt.WEBGL=1]="WEBGL",fWt[fWt.CANVAS=2]="CANVAS",(fWt={})[fWt.COLOR=16384]="COLOR",fWt[fWt.DEPTH=256]="DEPTH",fWt[fWt.STENCIL=1024]="STENCIL",(fWt={})[fWt.NORMAL=0]="NORMAL",fWt[fWt.ADD=1]="ADD",fWt[fWt.MULTIPLY=2]="MULTIPLY",fWt[fWt.SCREEN=3]="SCREEN",fWt[fWt.OVERLAY=4]="OVERLAY",fWt[fWt.DARKEN=5]="DARKEN",fWt[fWt.LIGHTEN=6]="LIGHTEN",fWt[fWt.COLOR_DODGE=7]="COLOR_DODGE",fWt[fWt.COLOR_BURN=8]="COLOR_BURN",fWt[fWt.HARD_LIGHT=9]="HARD_LIGHT",fWt[fWt.SOFT_LIGHT=10]="SOFT_LIGHT",fWt[fWt.DIFFERENCE=11]="DIFFERENCE",fWt[fWt.EXCLUSION=12]="EXCLUSION",fWt[fWt.HUE=13]="HUE",fWt[fWt.SATURATION=14]="SATURATION",fWt[fWt.COLOR=15]="COLOR",fWt[fWt.LUMINOSITY=16]="LUMINOSITY",fWt[fWt.NORMAL_NPM=17]="NORMAL_NPM",fWt[fWt.ADD_NPM=18]="ADD_NPM",fWt[fWt.SCREEN_NPM=19]="SCREEN_NPM",fWt[fWt.NONE=20]="NONE",fWt[fWt.SRC_OVER=0]="SRC_OVER",fWt[fWt.SRC_IN=21]="SRC_IN",fWt[fWt.SRC_OUT=22]="SRC_OUT",fWt[fWt.SRC_ATOP=23]="SRC_ATOP",fWt[fWt.DST_OVER=24]="DST_OVER",fWt[fWt.DST_IN=25]="DST_IN",fWt[fWt.DST_OUT=26]="DST_OUT",fWt[fWt.DST_ATOP=27]="DST_ATOP",fWt[fWt.ERASE=26]="ERASE",fWt[fWt.SUBTRACT=28]="SUBTRACT",fWt[fWt.XOR=29]="XOR",(fWt={})[fWt.POINTS=0]="POINTS",fWt[fWt.LINES=1]="LINES",fWt[fWt.LINE_LOOP=2]="LINE_LOOP",fWt[fWt.LINE_STRIP=3]="LINE_STRIP",fWt[fWt.TRIANGLES=4]="TRIANGLES",fWt[fWt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",fWt[fWt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(fWt={})[fWt.RGBA=6408]="RGBA",fWt[fWt.RGB=6407]="RGB",fWt[fWt.ALPHA=6406]="ALPHA",fWt[fWt.LUMINANCE=6409]="LUMINANCE",fWt[fWt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",fWt[fWt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",fWt[fWt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(fWt={})[fWt.TEXTURE_2D=3553]="TEXTURE_2D",fWt[fWt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",fWt[fWt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",fWt[fWt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",fWt[fWt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",fWt[fWt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",fWt[fWt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",fWt[fWt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",fWt[fWt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(fWt={})[fWt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",fWt[fWt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",fWt[fWt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",fWt[fWt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",fWt[fWt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",fWt[fWt.FLOAT=5126]="FLOAT",fWt[fWt.HALF_FLOAT=36193]="HALF_FLOAT",(fWt={})[fWt.FLOAT=0]="FLOAT",fWt[fWt.INT=1]="INT",fWt[fWt.UINT=2]="UINT",(fWt=V8t=V8t||{})[fWt.NEAREST=0]="NEAREST",fWt[fWt.LINEAR=1]="LINEAR",(fWt=PWt=PWt||{})[fWt.CLAMP=33071]="CLAMP",fWt[fWt.REPEAT=10497]="REPEAT",fWt[fWt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(fWt=NWt=NWt||{})[fWt.OFF=0]="OFF",fWt[fWt.POW2=1]="POW2",fWt[fWt.ON=2]="ON",fWt[fWt.ON_MANUAL=3]="ON_MANUAL",(fWt={})[fWt.NPM=0]="NPM",fWt[fWt.UNPACK=1]="UNPACK",fWt[fWt.PMA=2]="PMA",fWt[fWt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",fWt[fWt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",fWt[fWt.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(fWt={})[fWt.NO=0]="NO",fWt[fWt.YES=1]="YES",fWt[fWt.AUTO=2]="AUTO",fWt[fWt.BLEND=0]="BLEND",fWt[fWt.CLEAR=1]="CLEAR",fWt[fWt.BLIT=2]="BLIT",(fWt=MWt=MWt||{})[fWt.AUTO=0]="AUTO",fWt[fWt.MANUAL=1]="MANUAL",(fWt=v8t=v8t||{}).LOW="lowp",fWt.MEDIUM="mediump",fWt.HIGH="highp",(fWt={})[fWt.NONE=0]="NONE",fWt[fWt.SCISSOR=1]="SCISSOR",fWt[fWt.STENCIL=2]="STENCIL",fWt[fWt.SPRITE=3]="SPRITE",(fWt={})[fWt.NONE=0]="NONE",fWt[fWt.LOW=2]="LOW",fWt[fWt.MEDIUM=4]="MEDIUM",fWt[fWt.HIGH=8]="HIGH";var DWt,UWt,FWt,BWt,kWt={MIPMAP_TEXTURES:NWt.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(DWt=32,FWt=!0,(LWt.tablet||LWt.phone)&&(LWt.apple.device&&(UWt=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(UWt[1],10)<11&&(FWt=!1),LWt.android.device&&(UWt=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(UWt[1],10)<7&&(FWt=!1)),FWt?DWt:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:MWt.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:PWt.CLAMP,SCALE_MODE:V8t.LINEAR,PRECISION_VERTEX:v8t.HIGH,PRECISION_FRAGMENT:LWt.apple.device?v8t.HIGH:v8t.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!LWt.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},GWt=2*Math.PI,XWt=180/Math.PI,HWt=Math.PI/180;(V8t=BWt=BWt||{})[V8t.POLY=0]="POLY",V8t[V8t.RECT=1]="RECT",V8t[V8t.CIRC=2]="CIRC",V8t[V8t.ELIP=3]="ELIP",V8t[V8t.RREC=4]="RREC";var VWt=(Object.defineProperty(jWt.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(jWt.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(jWt.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(jWt.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(jWt,"EMPTY",{get:function(){return new jWt(0,0,0,0)},enumerable:!1,configurable:!0}),jWt.prototype.clone=function(){return new jWt(this.x,this.y,this.width,this.height)},jWt.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},jWt.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},jWt.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},jWt.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},jWt.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},jWt.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},jWt.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},jWt.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},jWt);function jWt(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=BWt.RECT}YWt.prototype.clone=function(){return new YWt(this.x,this.y,this.radius)},YWt.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},YWt.prototype.getBounds=function(){return new VWt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},YWt.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function YWt(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=BWt.CIRC}zWt.prototype.clone=function(){return new zWt(this.x,this.y,this.width,this.height)},zWt.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},zWt.prototype.getBounds=function(){return new VWt(this.x-this.width,this.y-this.height,this.width,this.height)},zWt.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function zWt(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=BWt.ELIP}WWt.prototype.clone=function(){var t=new WWt(this.points.slice());return t.closeStroke=this.closeStroke,t},WWt.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},WWt.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function WWt(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=BWt.POLY,this.closeStroke=!0}ZWt.prototype.clone=function(){return new ZWt(this.x,this.y,this.width,this.height,this.radius)},ZWt.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},ZWt.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function ZWt(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=BWt.RREC}var KWt=(qWt.prototype.clone=function(){return new qWt(this.x,this.y)},qWt.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},qWt.prototype.copyTo=function(t){return t.set(this.x,this.y),t},qWt.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},qWt.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},qWt.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},qWt);function qWt(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var JWt=(QWt.prototype.clone=function(t,e){return new QWt(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},QWt.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},QWt.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},QWt.prototype.copyTo=function(t){return t.set(this._x,this._y),t},QWt.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},QWt.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(QWt.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(QWt.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),QWt);function QWt(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var $Wt=(t8t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t8t.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},t8t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},t8t.prototype.apply=function(t,e){e=e||new KWt;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},t8t.prototype.applyInverse=function(t,e){e=e||new KWt;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},t8t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t8t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t8t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},t8t.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},t8t.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},t8t.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},t8t.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(GWt-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},t8t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},t8t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t8t.prototype.clone=function(){var t=new t8t;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t8t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t8t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t8t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t8t,"IDENTITY",{get:function(){return new t8t},enumerable:!1,configurable:!0}),Object.defineProperty(t8t,"TEMP_MATRIX",{get:function(){return new t8t},enumerable:!1,configurable:!0}),t8t);function t8t(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var e8t=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],r8t=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],i8t=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],n8t=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],s8t=[],o8t=[],a8t=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];s8t.push(e);for(var r=0;r<16;r++)for(var i=a8t(e8t[t]*e8t[r]+i8t[t]*r8t[r]),n=a8t(r8t[t]*e8t[r]+n8t[t]*r8t[r]),s=a8t(e8t[t]*i8t[r]+i8t[t]*n8t[r]),o=a8t(r8t[t]*i8t[r]+n8t[t]*n8t[r]),a=0;a<16;a++)if(e8t[a]===i&&r8t[a]===n&&i8t[a]===s&&n8t[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new $Wt;h.set(e8t[t],r8t[t],i8t[t],n8t[t],0,0),o8t.push(h)}}();var h8t=(u8t.prototype.onChange=function(){this._localID++},u8t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},u8t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},u8t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},u8t.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},u8t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(u8t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),u8t.IDENTITY=new u8t,u8t);function u8t(){this.worldTransform=new $Wt,this.localTransform=new $Wt,this.position=new JWt(this.onChange,this,0,0),this.scale=new JWt(this.onChange,this,1,1),this.pivot=new JWt(this.onChange,this,0,0),this.skew=new JWt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}var l8t;r(27);(v8t={})[v8t.WEBGL_LEGACY=0]="WEBGL_LEGACY",v8t[v8t.WEBGL=1]="WEBGL",v8t[v8t.WEBGL2=2]="WEBGL2",(V8t={})[V8t.UNKNOWN=0]="UNKNOWN",V8t[V8t.WEBGL=1]="WEBGL",V8t[V8t.CANVAS=2]="CANVAS",(v8t={})[v8t.COLOR=16384]="COLOR",v8t[v8t.DEPTH=256]="DEPTH",v8t[v8t.STENCIL=1024]="STENCIL",(V8t=l8t=l8t||{})[V8t.NORMAL=0]="NORMAL",V8t[V8t.ADD=1]="ADD",V8t[V8t.MULTIPLY=2]="MULTIPLY",V8t[V8t.SCREEN=3]="SCREEN",V8t[V8t.OVERLAY=4]="OVERLAY",V8t[V8t.DARKEN=5]="DARKEN",V8t[V8t.LIGHTEN=6]="LIGHTEN",V8t[V8t.COLOR_DODGE=7]="COLOR_DODGE",V8t[V8t.COLOR_BURN=8]="COLOR_BURN",V8t[V8t.HARD_LIGHT=9]="HARD_LIGHT",V8t[V8t.SOFT_LIGHT=10]="SOFT_LIGHT",V8t[V8t.DIFFERENCE=11]="DIFFERENCE",V8t[V8t.EXCLUSION=12]="EXCLUSION",V8t[V8t.HUE=13]="HUE",V8t[V8t.SATURATION=14]="SATURATION",V8t[V8t.COLOR=15]="COLOR",V8t[V8t.LUMINOSITY=16]="LUMINOSITY",V8t[V8t.NORMAL_NPM=17]="NORMAL_NPM",V8t[V8t.ADD_NPM=18]="ADD_NPM",V8t[V8t.SCREEN_NPM=19]="SCREEN_NPM",V8t[V8t.NONE=20]="NONE",V8t[V8t.SRC_OVER=0]="SRC_OVER",V8t[V8t.SRC_IN=21]="SRC_IN",V8t[V8t.SRC_OUT=22]="SRC_OUT",V8t[V8t.SRC_ATOP=23]="SRC_ATOP",V8t[V8t.DST_OVER=24]="DST_OVER",V8t[V8t.DST_IN=25]="DST_IN",V8t[V8t.DST_OUT=26]="DST_OUT",V8t[V8t.DST_ATOP=27]="DST_ATOP",V8t[V8t.ERASE=26]="ERASE",V8t[V8t.SUBTRACT=28]="SUBTRACT",V8t[V8t.XOR=29]="XOR",(v8t={})[v8t.POINTS=0]="POINTS",v8t[v8t.LINES=1]="LINES",v8t[v8t.LINE_LOOP=2]="LINE_LOOP",v8t[v8t.LINE_STRIP=3]="LINE_STRIP",v8t[v8t.TRIANGLES=4]="TRIANGLES",v8t[v8t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",v8t[v8t.TRIANGLE_FAN=6]="TRIANGLE_FAN",(V8t={})[V8t.RGBA=6408]="RGBA",V8t[V8t.RGB=6407]="RGB",V8t[V8t.ALPHA=6406]="ALPHA",V8t[V8t.LUMINANCE=6409]="LUMINANCE",V8t[V8t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",V8t[V8t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",V8t[V8t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(v8t={})[v8t.TEXTURE_2D=3553]="TEXTURE_2D",v8t[v8t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",v8t[v8t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",v8t[v8t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",v8t[v8t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",v8t[v8t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",v8t[v8t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",v8t[v8t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",v8t[v8t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(V8t={})[V8t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",V8t[V8t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",V8t[V8t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",V8t[V8t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",V8t[V8t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",V8t[V8t.FLOAT=5126]="FLOAT",V8t[V8t.HALF_FLOAT=36193]="HALF_FLOAT",(v8t={})[v8t.FLOAT=0]="FLOAT",v8t[v8t.INT=1]="INT",v8t[v8t.UINT=2]="UINT",(V8t={})[V8t.NEAREST=0]="NEAREST",V8t[V8t.LINEAR=1]="LINEAR",(v8t={})[v8t.CLAMP=33071]="CLAMP",v8t[v8t.REPEAT=10497]="REPEAT",v8t[v8t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(V8t={})[V8t.OFF=0]="OFF",V8t[V8t.POW2=1]="POW2",V8t[V8t.ON=2]="ON",V8t[V8t.ON_MANUAL=3]="ON_MANUAL",(v8t={})[v8t.NPM=0]="NPM",v8t[v8t.UNPACK=1]="UNPACK",v8t[v8t.PMA=2]="PMA",v8t[v8t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",v8t[v8t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",v8t[v8t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(V8t={})[V8t.NO=0]="NO",V8t[V8t.YES=1]="YES",V8t[V8t.AUTO=2]="AUTO",V8t[V8t.BLEND=0]="BLEND",V8t[V8t.CLEAR=1]="CLEAR",V8t[V8t.BLIT=2]="BLIT",(v8t={})[v8t.AUTO=0]="AUTO",v8t[v8t.MANUAL=1]="MANUAL",(V8t={}).LOW="lowp",V8t.MEDIUM="mediump",V8t.HIGH="highp",(v8t={})[v8t.NONE=0]="NONE",v8t[v8t.SCISSOR=1]="SCISSOR",v8t[v8t.STENCIL=2]="STENCIL",v8t[v8t.SPRITE=3]="SPRITE",(V8t={})[V8t.NONE=0]="NONE",V8t[V8t.LOW=2]="LOW",V8t[V8t.MEDIUM=4]="MEDIUM",V8t[V8t.HIGH=8]="HIGH";_t.parse,_t.format,_t.resolve;kWt.RETINA_PREFIX=/@([0-9\.]+)x/;kWt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;!function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[l8t.NORMAL_NPM]=l8t.NORMAL,t[l8t.ADD_NPM]=l8t.ADD,t[l8t.SCREEN_NPM]=l8t.SCREEN,e[l8t.NORMAL]=l8t.NORMAL_NPM,e[l8t.ADD]=l8t.ADD_NPM,e[l8t.SCREEN]=l8t.SCREEN_NPM;var i=[];i.push(e),i.push(t)}();Float32Array,Uint32Array,Int32Array,Uint8Array;function c8t(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}Object.create(null),Object.create(null);d8t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},d8t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},d8t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(d8t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(d8t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function d8t(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||kWt.RESOLUTION,this.resize(t,e)}kWt.SORTABLE_CHILDREN=!1;var f8t=(p8t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},p8t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},p8t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?VWt.EMPTY:((t=t||new VWt(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},p8t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},p8t.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,t=t.ty,o=r*e.x+n*e.y+o,t=i*e.x+s*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},p8t.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,r=o<r?o:r,i=i<s?s:i,n=n<o?o:n;e=(s=t[2])<e?s:e,r=(o=t[3])<r?o:r,i=i<s?s:i,n=n<o?o:n,e=(s=t[4])<e?s:e,r=(o=t[5])<r?o:r,i=i<s?s:i,n=n<o?o:n,s=t[6],r=(o=t[7])<r?o:r,i=i<s?s:i,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=r,this.maxX=i,this.maxY=n},p8t.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},p8t.prototype.addFrameMatrix=function(t,e,r,i,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=s*e+a*r+u,d=o*e+h*r+l,f=c<(f=this.minX)?c:f,p=d<(p=this.minY)?d:p,_=(_=this.maxX)<c?c:_,t=(t=this.maxY)<d?d:t;f=(c=s*i+a*r+u)<f?c:f,p=(d=o*i+h*r+l)<p?d:p,_=_<c?c:_,t=t<d?d:t,f=(c=s*e+a*n+u)<f?c:f,p=(d=o*e+h*n+l)<p?d:p,t=t<d?d:t,p=(d=o*i+h*n+l)<p?d:p,_=(_=_<c?c:_)<(c=s*i+a*n+u)?c:_,t=t<d?d:t,this.minX=f=c<f?c:f,this.minY=p,this.maxX=_,this.maxY=t},p8t.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<r;a+=2)var h=t[a],u=t[a+1],i=h<i?h:i,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=i,this.minY=n,this.maxX=s,this.maxY=o},p8t.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},p8t.prototype.addVerticesMatrix=function(t,e,r,i,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,y=r;y<i;y+=2)var m=e[y],v=e[y+1],x=o*m+h*v+l,m=u*v+a*m+c,d=Math.min(d,x-n),p=Math.max(p,x+n),f=Math.min(f,m-s),_=Math.max(_,m+s);this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},p8t.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},p8t.prototype.addBoundsMask=function(t,e){var r,i,n=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},p8t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},p8t.prototype.addBoundsArea=function(t,e){var r,i,n=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&s<=a&&(r=this.minX,i=this.minY,t=this.maxX,e=this.maxY,this.minX=n<r?n:r,this.minY=s<i?s:i,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},p8t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},p8t.prototype.addFramePad=function(t,e,r,i,n,s){e-=s,r+=n,i+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},p8t);function p8t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var _8t=function(t,e){return(_8t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function y8t(t,e){function r(){this.constructor=t}_8t(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var m8t,v8t=(y8t(x8t,m8t=pt.a),x8t.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(x8t.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},x8t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},x8t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},x8t.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new VWt),e=this._boundsRect),this._bounds.getRectangle(e)},x8t.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new VWt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new f8t);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,t},x8t.prototype.toGlobal=function(t,e,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},x8t.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},x8t.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},x8t.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},x8t.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(x8t.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new E8t),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),x8t.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},x8t.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(x8t.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(x8t.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(x8t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(x8t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(x8t.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(x8t.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(x8t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(x8t.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(x8t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(x8t.prototype,"angle",{get:function(){return this.transform.rotation*XWt},set:function(t){this.transform.rotation=t*HWt},enumerable:!1,configurable:!0}),Object.defineProperty(x8t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(x8t.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(x8t.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),x8t);function x8t(){var t=m8t.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new h8t,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new f8t,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var g8t,E8t=(y8t(T8t,g8t=v8t),T8t);function T8t(){var t=null!==g8t&&g8t.apply(this,arguments)||this;return t.sortDirty=null,t}function b8t(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}v8t.prototype.displayObjectUpdateTransform=v8t.prototype.updateTransform;var A8t,S8t,I8t,R8t,O8t,w8t,C8t,P8t,N8t,M8t,L8t,D8t,U8t,F8t,B8t,k8t,G8t,X8t,H8t,V8t=(y8t(j8t,A8t=v8t),j8t.prototype.onChildrenChange=function(t){},j8t.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},j8t.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},j8t.prototype.swapChildren=function(t,e){var r,i;t!==e&&(r=this.getChildIndex(t),i=this.getChildIndex(e),this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i))},j8t.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},j8t.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);c8t(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},j8t.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},j8t.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(1<e.length)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,c8t(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},j8t.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,c8t(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},j8t.prototype.removeChildren=function(t,e){var r=(e=void 0===e?this.children.length:e)-(t=void 0===t?0:t);if(0<r&&r<=e){for(var i=this.children.splice(t,r),n=0;n<i.length;++n)i[n].parent=null,i[n].transform&&(i[n].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(n=0;n<i.length;++n)i[n].emit("removed",this),this.emit("childRemoved",i[n],this,n);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},j8t.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(b8t),this.sortDirty=!1},j8t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},j8t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,r=this.children[t];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((e=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,e._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},j8t.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=A8t.prototype.getLocalBounds.call(this,t);if(!e)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return t},j8t.prototype._calculateBounds=function(){},j8t.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},j8t.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},j8t.prototype._render=function(t){},j8t.prototype.destroy=function(t){A8t.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(j8t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(j8t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),j8t);function j8t(){var t=A8t.call(this)||this;return t.children=[],t.sortableChildren=kWt.SORTABLE_CHILDREN,t.sortDirty=!1,t}V8t.prototype.containerUpdateTransform=V8t.prototype.updateTransform,v8t.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new KWt),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t},(v8t=S8t=S8t||{})[v8t.WEBGL_LEGACY=0]="WEBGL_LEGACY",v8t[v8t.WEBGL=1]="WEBGL",v8t[v8t.WEBGL2=2]="WEBGL2",(v8t=I8t=I8t||{})[v8t.UNKNOWN=0]="UNKNOWN",v8t[v8t.WEBGL=1]="WEBGL",v8t[v8t.CANVAS=2]="CANVAS",(v8t=R8t=R8t||{})[v8t.COLOR=16384]="COLOR",v8t[v8t.DEPTH=256]="DEPTH",v8t[v8t.STENCIL=1024]="STENCIL",(v8t=O8t=O8t||{})[v8t.NORMAL=0]="NORMAL",v8t[v8t.ADD=1]="ADD",v8t[v8t.MULTIPLY=2]="MULTIPLY",v8t[v8t.SCREEN=3]="SCREEN",v8t[v8t.OVERLAY=4]="OVERLAY",v8t[v8t.DARKEN=5]="DARKEN",v8t[v8t.LIGHTEN=6]="LIGHTEN",v8t[v8t.COLOR_DODGE=7]="COLOR_DODGE",v8t[v8t.COLOR_BURN=8]="COLOR_BURN",v8t[v8t.HARD_LIGHT=9]="HARD_LIGHT",v8t[v8t.SOFT_LIGHT=10]="SOFT_LIGHT",v8t[v8t.DIFFERENCE=11]="DIFFERENCE",v8t[v8t.EXCLUSION=12]="EXCLUSION",v8t[v8t.HUE=13]="HUE",v8t[v8t.SATURATION=14]="SATURATION",v8t[v8t.COLOR=15]="COLOR",v8t[v8t.LUMINOSITY=16]="LUMINOSITY",v8t[v8t.NORMAL_NPM=17]="NORMAL_NPM",v8t[v8t.ADD_NPM=18]="ADD_NPM",v8t[v8t.SCREEN_NPM=19]="SCREEN_NPM",v8t[v8t.NONE=20]="NONE",v8t[v8t.SRC_OVER=0]="SRC_OVER",v8t[v8t.SRC_IN=21]="SRC_IN",v8t[v8t.SRC_OUT=22]="SRC_OUT",v8t[v8t.SRC_ATOP=23]="SRC_ATOP",v8t[v8t.DST_OVER=24]="DST_OVER",v8t[v8t.DST_IN=25]="DST_IN",v8t[v8t.DST_OUT=26]="DST_OUT",v8t[v8t.DST_ATOP=27]="DST_ATOP",v8t[v8t.ERASE=26]="ERASE",v8t[v8t.SUBTRACT=28]="SUBTRACT",v8t[v8t.XOR=29]="XOR",(v8t=w8t=w8t||{})[v8t.POINTS=0]="POINTS",v8t[v8t.LINES=1]="LINES",v8t[v8t.LINE_LOOP=2]="LINE_LOOP",v8t[v8t.LINE_STRIP=3]="LINE_STRIP",v8t[v8t.TRIANGLES=4]="TRIANGLES",v8t[v8t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",v8t[v8t.TRIANGLE_FAN=6]="TRIANGLE_FAN",(v8t=C8t=C8t||{})[v8t.RGBA=6408]="RGBA",v8t[v8t.RGB=6407]="RGB",v8t[v8t.ALPHA=6406]="ALPHA",v8t[v8t.LUMINANCE=6409]="LUMINANCE",v8t[v8t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",v8t[v8t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",v8t[v8t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(v8t=P8t=P8t||{})[v8t.TEXTURE_2D=3553]="TEXTURE_2D",v8t[v8t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",v8t[v8t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",v8t[v8t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",v8t[v8t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",v8t[v8t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",v8t[v8t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",v8t[v8t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",v8t[v8t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(v8t=N8t=N8t||{})[v8t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",v8t[v8t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",v8t[v8t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",v8t[v8t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",v8t[v8t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",v8t[v8t.FLOAT=5126]="FLOAT",v8t[v8t.HALF_FLOAT=36193]="HALF_FLOAT",(v8t=M8t=M8t||{})[v8t.FLOAT=0]="FLOAT",v8t[v8t.INT=1]="INT",v8t[v8t.UINT=2]="UINT",(v8t=L8t=L8t||{})[v8t.NEAREST=0]="NEAREST",v8t[v8t.LINEAR=1]="LINEAR",(v8t=D8t=D8t||{})[v8t.CLAMP=33071]="CLAMP",v8t[v8t.REPEAT=10497]="REPEAT",v8t[v8t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(v8t=U8t=U8t||{})[v8t.OFF=0]="OFF",v8t[v8t.POW2=1]="POW2",v8t[v8t.ON=2]="ON",v8t[v8t.ON_MANUAL=3]="ON_MANUAL",(v8t=F8t=F8t||{})[v8t.NPM=0]="NPM",v8t[v8t.UNPACK=1]="UNPACK",v8t[v8t.PMA=2]="PMA",v8t[v8t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",v8t[v8t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",v8t[v8t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(v8t=B8t=B8t||{})[v8t.NO=0]="NO",v8t[v8t.YES=1]="YES",v8t[v8t.AUTO=2]="AUTO",v8t[v8t.BLEND=0]="BLEND",v8t[v8t.CLEAR=1]="CLEAR",v8t[v8t.BLIT=2]="BLIT",(v8t=k8t=k8t||{})[v8t.AUTO=0]="AUTO",v8t[v8t.MANUAL=1]="MANUAL",(v8t=G8t=G8t||{}).LOW="lowp",v8t.MEDIUM="mediump",v8t.HIGH="highp",(v8t=X8t=X8t||{})[v8t.NONE=0]="NONE",v8t[v8t.SCISSOR=1]="SCISSOR",v8t[v8t.STENCIL=2]="STENCIL",v8t[v8t.SPRITE=3]="SPRITE",(v8t=H8t=H8t||{})[v8t.NONE=0]="NONE",v8t[v8t.LOW=2]="LOW",v8t[v8t.MEDIUM=4]="MEDIUM",v8t[v8t.HIGH=8]="HIGH";function Y8t(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var z8t=/iPhone/i,W8t=/iPod/i,Z8t=/iPad/i,K8t=/\biOS-universal(?:.+)Mac\b/i,q8t=/\bAndroid(?:.+)Mobile\b/i,J8t=/Android/i,Q8t=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,$8t=/Silk/i,t7t=/Windows Phone/i,e7t=/\bWindows(?:.+)ARM\b/i,r7t=/BlackBerry/i,i7t=/BB10/i,n7t=/Opera Mini/i,s7t=/\b(CriOS|Chrome)(?:.+)Mobile/i,o7t=/Mobile(?:.+)Firefox\b/i;var a7t=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r,i=e.userAgent;return void 0!==(t=(i=void 0!==(t=i.split("[FBAN"))[1]?t[0]:i).split("Twitter"))[1]&&(i=t[0]),(i={apple:{phone:(i=(r=i,function(t){return t.test(r)}))(z8t)&&!i(t7t),ipod:i(W8t),tablet:!i(z8t)&&(i(Z8t)||Y8t(e))&&!i(t7t),universal:i(K8t),device:(i(z8t)||i(W8t)||i(Z8t)||i(K8t)||Y8t(e))&&!i(t7t)},amazon:{phone:i(Q8t),tablet:!i(Q8t)&&i($8t),device:i(Q8t)||i($8t)},android:{phone:!i(t7t)&&i(Q8t)||!i(t7t)&&i(q8t),tablet:!i(t7t)&&!i(Q8t)&&!i(q8t)&&(i($8t)||i(J8t)),device:!i(t7t)&&(i(Q8t)||i($8t)||i(q8t)||i(J8t))||i(/\bokhttp\b/i)},windows:{phone:i(t7t),tablet:i(e7t),device:i(t7t)||i(e7t)},other:{blackberry:i(r7t),blackberry10:i(i7t),opera:i(n7t),firefox:i(o7t),chrome:i(s7t),device:i(r7t)||i(i7t)||i(n7t)||i(o7t)||i(s7t)},any:!1,phone:!1,tablet:!1}).any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(self.navigator);(v8t={})[v8t.WEBGL_LEGACY=0]="WEBGL_LEGACY",v8t[v8t.WEBGL=1]="WEBGL",v8t[v8t.WEBGL2=2]="WEBGL2",(v8t={})[v8t.UNKNOWN=0]="UNKNOWN",v8t[v8t.WEBGL=1]="WEBGL",v8t[v8t.CANVAS=2]="CANVAS",(v8t={})[v8t.COLOR=16384]="COLOR",v8t[v8t.DEPTH=256]="DEPTH",v8t[v8t.STENCIL=1024]="STENCIL",(v8t={})[v8t.NORMAL=0]="NORMAL",v8t[v8t.ADD=1]="ADD",v8t[v8t.MULTIPLY=2]="MULTIPLY",v8t[v8t.SCREEN=3]="SCREEN",v8t[v8t.OVERLAY=4]="OVERLAY",v8t[v8t.DARKEN=5]="DARKEN",v8t[v8t.LIGHTEN=6]="LIGHTEN",v8t[v8t.COLOR_DODGE=7]="COLOR_DODGE",v8t[v8t.COLOR_BURN=8]="COLOR_BURN",v8t[v8t.HARD_LIGHT=9]="HARD_LIGHT",v8t[v8t.SOFT_LIGHT=10]="SOFT_LIGHT",v8t[v8t.DIFFERENCE=11]="DIFFERENCE",v8t[v8t.EXCLUSION=12]="EXCLUSION",v8t[v8t.HUE=13]="HUE",v8t[v8t.SATURATION=14]="SATURATION",v8t[v8t.COLOR=15]="COLOR",v8t[v8t.LUMINOSITY=16]="LUMINOSITY",v8t[v8t.NORMAL_NPM=17]="NORMAL_NPM",v8t[v8t.ADD_NPM=18]="ADD_NPM",v8t[v8t.SCREEN_NPM=19]="SCREEN_NPM",v8t[v8t.NONE=20]="NONE",v8t[v8t.SRC_OVER=0]="SRC_OVER",v8t[v8t.SRC_IN=21]="SRC_IN",v8t[v8t.SRC_OUT=22]="SRC_OUT",v8t[v8t.SRC_ATOP=23]="SRC_ATOP",v8t[v8t.DST_OVER=24]="DST_OVER",v8t[v8t.DST_IN=25]="DST_IN",v8t[v8t.DST_OUT=26]="DST_OUT",v8t[v8t.DST_ATOP=27]="DST_ATOP",v8t[v8t.ERASE=26]="ERASE",v8t[v8t.SUBTRACT=28]="SUBTRACT",v8t[v8t.XOR=29]="XOR",(v8t={})[v8t.POINTS=0]="POINTS",v8t[v8t.LINES=1]="LINES",v8t[v8t.LINE_LOOP=2]="LINE_LOOP",v8t[v8t.LINE_STRIP=3]="LINE_STRIP",v8t[v8t.TRIANGLES=4]="TRIANGLES",v8t[v8t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",v8t[v8t.TRIANGLE_FAN=6]="TRIANGLE_FAN",(v8t={})[v8t.RGBA=6408]="RGBA",v8t[v8t.RGB=6407]="RGB",v8t[v8t.ALPHA=6406]="ALPHA",v8t[v8t.LUMINANCE=6409]="LUMINANCE",v8t[v8t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",v8t[v8t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",v8t[v8t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(v8t={})[v8t.TEXTURE_2D=3553]="TEXTURE_2D",v8t[v8t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",v8t[v8t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",v8t[v8t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",v8t[v8t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",v8t[v8t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",v8t[v8t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",v8t[v8t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",v8t[v8t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(v8t={})[v8t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",v8t[v8t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",v8t[v8t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",v8t[v8t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",v8t[v8t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",v8t[v8t.FLOAT=5126]="FLOAT",v8t[v8t.HALF_FLOAT=36193]="HALF_FLOAT",(v8t={})[v8t.FLOAT=0]="FLOAT",v8t[v8t.INT=1]="INT",v8t[v8t.UINT=2]="UINT",(v8t=b9t=b9t||{})[v8t.NEAREST=0]="NEAREST",v8t[v8t.LINEAR=1]="LINEAR",(v8t=g9t=g9t||{})[v8t.CLAMP=33071]="CLAMP",v8t[v8t.REPEAT=10497]="REPEAT",v8t[v8t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(v8t=G9t=G9t||{})[v8t.OFF=0]="OFF",v8t[v8t.POW2=1]="POW2",v8t[v8t.ON=2]="ON",v8t[v8t.ON_MANUAL=3]="ON_MANUAL",(v8t={})[v8t.NPM=0]="NPM",v8t[v8t.UNPACK=1]="UNPACK",v8t[v8t.PMA=2]="PMA",v8t[v8t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",v8t[v8t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",v8t[v8t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(v8t={})[v8t.NO=0]="NO",v8t[v8t.YES=1]="YES",v8t[v8t.AUTO=2]="AUTO",v8t[v8t.BLEND=0]="BLEND",v8t[v8t.CLEAR=1]="CLEAR",v8t[v8t.BLIT=2]="BLIT",(v8t=V9t=V9t||{})[v8t.AUTO=0]="AUTO",v8t[v8t.MANUAL=1]="MANUAL",(v8t=N9t=N9t||{}).LOW="lowp",v8t.MEDIUM="mediump",v8t.HIGH="highp",(v8t={})[v8t.NONE=0]="NONE",v8t[v8t.SCISSOR=1]="SCISSOR",v8t[v8t.STENCIL=2]="STENCIL",v8t[v8t.SPRITE=3]="SPRITE",(v8t={})[v8t.NONE=0]="NONE",v8t[v8t.LOW=2]="LOW",v8t[v8t.MEDIUM=4]="MEDIUM",v8t[v8t.HIGH=8]="HIGH";var h7t,u7t,l7t,c7t={MIPMAP_TEXTURES:G9t.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(h7t=32,l7t=!0,(a7t.tablet||a7t.phone)&&(a7t.apple.device&&(u7t=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(u7t[1],10)<11&&(l7t=!1),a7t.android.device&&(u7t=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(u7t[1],10)<7&&(l7t=!1)),l7t?h7t:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:V9t.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:g9t.CLAMP,SCALE_MODE:b9t.LINEAR,PRECISION_VERTEX:N9t.HIGH,PRECISION_FRAGMENT:a7t.apple.device?N9t.HIGH:N9t.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!a7t.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},d7t=(r(28),{parse:_t.parse,format:_t.format,resolve:_t.resolve});c7t.RETINA_PREFIX=/@([0-9\.]+)x/;var f7t,p7t=c7t.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,_7t="6.0.4";var y7t=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[O8t.NORMAL_NPM]=O8t.NORMAL,t[O8t.ADD_NPM]=O8t.ADD,t[O8t.SCREEN_NPM]=O8t.SCREEN,e[O8t.NORMAL]=O8t.NORMAL_NPM,e[O8t.ADD]=O8t.ADD_NPM,e[O8t.SCREEN]=O8t.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();Float32Array,Uint32Array,Int32Array,Uint8Array;function m7t(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function v7t(t){return!(t&t-1||!t)}function x7t(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return e|=r,e|=r=(15<(t>>>=r)?1:0)<<2,(e|=r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}var g7t=0;var E7t={};function T7t(t,e,r){var i;void 0===r&&(r=3),E7t[e]||(void 0===(i=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),E7t[e]=!0)}var b7t={},A7t=Object.create(null),S7t=Object.create(null);I7t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},I7t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},I7t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(I7t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(I7t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function I7t(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||c7t.RESOLUTION,this.resize(t,e)}var R7t;function O7t(t,e){t=c7t.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}var w7t,C7t=(P7t.prototype.emit=function(t,e,r,i,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,r,i,n,s,o,a);return u===this.items&&this._aliasCount--,this},P7t.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},P7t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},P7t.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},P7t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},P7t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},P7t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(P7t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(P7t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),P7t);function P7t(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(C7t.prototype,{dispatch:{value:C7t.prototype.emit},run:{value:C7t.prototype.emit}}),c7t.TARGET_FPMS=.06,(G9t=w7t=w7t||{})[G9t.INTERACTION=50]="INTERACTION",G9t[G9t.HIGH=25]="HIGH",G9t[G9t.NORMAL=0]="NORMAL",G9t[G9t.LOW=-25]="LOW",G9t[G9t.UTILITY=-50]="UTILITY";var N7t=(M7t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},M7t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},M7t.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},M7t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},M7t);function M7t(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}var L7t=(D7t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},D7t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},D7t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},D7t.prototype.add=function(t,e,r){return void 0===r&&(r=w7t.NORMAL),this._addListener(new N7t(t,e,r))},D7t.prototype.addOnce=function(t,e,r){return void 0===r&&(r=w7t.NORMAL),this._addListener(new N7t(t,e,r,!0))},D7t.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},D7t.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(D7t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),D7t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},D7t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},D7t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},D7t.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((r=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*c7t.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(D7t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(D7t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,c7t.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(D7t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(D7t,"shared",{get:function(){var t;return D7t._shared||((t=D7t._shared=new D7t).autoStart=!0,t._protected=!0),D7t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(D7t,"system",{get:function(){var t;return D7t._system||((t=D7t._system=new D7t).autoStart=!0,t._protected=!0),D7t._system},enumerable:!1,configurable:!0}),D7t);function D7t(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new N7t(null,null,1/0),this.deltaMS=1/c7t.TARGET_FPMS,this.elapsedMS=1/c7t.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}U7t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,w7t.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?L7t.shared:new L7t,t.autoStart&&this.start()},U7t.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};function U7t(){}var F7t,B7t=2*Math.PI;Math.PI,Math.PI;(V9t=F7t=F7t||{})[V9t.POLY=0]="POLY",V9t[V9t.RECT=1]="RECT",V9t[V9t.CIRC=2]="CIRC",V9t[V9t.ELIP=3]="ELIP",V9t[V9t.RREC=4]="RREC";var k7t=(Object.defineProperty(G7t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(G7t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(G7t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(G7t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(G7t,"EMPTY",{get:function(){return new G7t(0,0,0,0)},enumerable:!1,configurable:!0}),G7t.prototype.clone=function(){return new G7t(this.x,this.y,this.width,this.height)},G7t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},G7t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},G7t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},G7t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},G7t.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(t-i,0),this},G7t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},G7t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=t-i,this},G7t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},G7t);function G7t(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=F7t.RECT}X7t.prototype.clone=function(){return new X7t(this.x,this.y,this.radius)},X7t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=r},X7t.prototype.getBounds=function(){return new k7t(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},X7t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};function X7t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=r,this.type=F7t.CIRC}H7t.prototype.clone=function(){return new H7t(this.x,this.y,this.width,this.height)},H7t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},H7t.prototype.getBounds=function(){return new k7t(this.x-this.width,this.y-this.height,this.width,this.height)},H7t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};function H7t(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.type=F7t.ELIP}V7t.prototype.clone=function(){var t=new V7t(this.points.slice());return t.closeStroke=this.closeStroke,t},V7t.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;n<i;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-o)+o&&(r=!r)}return r},V7t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"};function V7t(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=F7t.POLY,this.closeStroke=!0}j7t.prototype.clone=function(){return new j7t(this.x,this.y,this.width,this.height,this.radius)},j7t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},j7t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};function j7t(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=F7t.RREC}var Y7t=(z7t.prototype.clone=function(){return new z7t(this.x,this.y)},z7t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},z7t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},z7t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},z7t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},z7t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},z7t);function z7t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var W7t=(Z7t.prototype.clone=function(t,e){return new Z7t(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},Z7t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},Z7t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},Z7t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},Z7t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Z7t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(Z7t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(Z7t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Z7t);function Z7t(t,e,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=t,this.scope=e}var K7t=(q7t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},q7t.prototype.set=function(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this},q7t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},q7t.prototype.apply=function(t,e){e=e||new Y7t;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},q7t.prototype.applyInverse=function(t,e){e=e||new Y7t;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,t=t.y;return e.x=this.d*r*i+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},q7t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},q7t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},q7t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,t=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=t*e-this.ty*r,this.ty=t*r+this.ty*e,this},q7t.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},q7t.prototype.setTransform=function(t,e,r,i,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},q7t.prototype.prepend=function(t){var e,r,i=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},q7t.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(B7t-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t},q7t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},q7t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},q7t.prototype.clone=function(){var t=new q7t;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},q7t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},q7t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},q7t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(q7t,"IDENTITY",{get:function(){return new q7t},enumerable:!1,configurable:!0}),Object.defineProperty(q7t,"TEMP_MATRIX",{get:function(){return new q7t},enumerable:!1,configurable:!0}),q7t);function q7t(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}var J7t=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Q7t=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],$7t=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],t9t=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],e9t=[],r9t=[],i9t=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];e9t.push(e);for(var r=0;r<16;r++)for(var i=i9t(J7t[t]*J7t[r]+$7t[t]*Q7t[r]),n=i9t(Q7t[t]*J7t[r]+t9t[t]*Q7t[r]),s=i9t(J7t[t]*$7t[r]+$7t[t]*t9t[r]),o=i9t(Q7t[t]*$7t[r]+t9t[t]*t9t[r]),a=0;a<16;a++)if(J7t[a]===i&&Q7t[a]===n&&$7t[a]===s&&t9t[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new K7t;h.set(J7t[t],Q7t[t],$7t[t],t9t[t],0,0),r9t.push(h)}}();var n9t={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return J7t[t]},uY:function(t){return Q7t[t]},vX:function(t){return $7t[t]},vY:function(t){return t9t[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return e9t[t][e]},sub:function(t,e){return e9t[t][n9t.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?n9t.S:n9t.N:2*Math.abs(e)<=Math.abs(t)?0<t?n9t.E:n9t.W:0<e?0<t?n9t.SE:n9t.SW:0<t?n9t.NE:n9t.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);e=r9t[n9t.inv(e)];e.tx=r,e.ty=i,t.append(e)}};s9t.prototype.onChange=function(){this._localID++},s9t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},s9t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},s9t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},s9t.prototype.updateTransform=function(t){var e,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},s9t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(s9t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),s9t.IDENTITY=new s9t;function s9t(){this.worldTransform=new K7t,this.localTransform=new K7t,this.position=new W7t(this.onChange,this,0,0),this.scale=new W7t(this.onChange,this,1,1),this.pivot=new W7t(this.onChange,this,0,0),this.skew=new W7t(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}c7t.PREFER_ENV=a7t.any?S8t.WEBGL:S8t.WEBGL2,c7t.STRICT_TEXTURE_CACHE=!1;var o9t=[];function a9t(t,e){if(!t)return null;var r,i="";"string"!=typeof t||(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(i=r[1].toLowerCase());for(var n=o9t.length-1;0<=n;--n){var s=o9t[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var h9t=function(t,e){return(h9t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function u9t(t,e){function r(){this.constructor=t}h9t(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var l9t=(c9t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},c9t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},c9t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(c9t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),c9t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},c9t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(c9t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(c9t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),c9t.prototype.style=function(t,e,r){return!1},c9t.prototype.dispose=function(){},c9t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},c9t.test=function(t,e){return!1},c9t);function c9t(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new C7t("setRealSize"),this.onUpdate=new C7t("update"),this.onError=new C7t("onError")}var d9t,f9t=(u9t(p9t,d9t=l9t),p9t.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===F8t.UNPACK);var n=e.realWidth,t=e.realHeight;return r.width===n&&r.height===t?i.texSubImage2D(e.target,0,0,0,n,t,e.format,e.type,this.data):(r.width=n,r.height=t,i.texImage2D(e.target,0,r.internalFormat,n,t,0,e.format,r.type,this.data)),!0},p9t.prototype.dispose=function(){this.data=null},p9t.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},p9t);function p9t(t,e){var r=this,i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");return(r=d9t.call(this,e,i)||this).data=t,r}var _9t,y9t={scaleMode:L8t.NEAREST,format:C8t.RGBA,alphaMode:F8t.NPM},m9t=(u9t(v9t,_9t=pt.a),Object.defineProperty(v9t.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(v9t.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),v9t.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},v9t.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},v9t.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},v9t.prototype._refreshPOT=function(){this.isPowerOfTwo=v7t(this.realWidth)&&v7t(this.realHeight)},v9t.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},v9t.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},v9t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},v9t.prototype.onError=function(t){this.emit("error",this,t)},v9t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete S7t[this.cacheId],delete A7t[this.cacheId],this.cacheId=null),this.dispose(),v9t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},v9t.prototype.dispose=function(){this.emit("dispose",this)},v9t.prototype.castToBaseTexture=function(){return this},v9t.from=function(t,e,r){void 0===r&&(r=c7t.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++g7t),t._pixiId),s=S7t[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new v9t(t,e)).cacheId=n,v9t.addToCache(s,n)),s},v9t.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new f9t(t,{width:e,height:r}),t=t instanceof Float32Array?N8t.FLOAT:N8t.UNSIGNED_BYTE;return new v9t(n,Object.assign(y9t,i||{width:e,height:r,type:t}))},v9t.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),S7t[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),S7t[e]=t)},v9t.removeFromCache=function(t){if("string"==typeof t){var e=S7t[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete S7t[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete S7t[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},v9t._globalBatch=0,v9t);function v9t(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=_9t.call(this)||this,i=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,f=e.resolution,e=e.resourceOptions;return!t||t instanceof l9t||((t=a9t(t,e)).internal=!0),r.width=a||0,r.height=h||0,r.resolution=f||c7t.RESOLUTION,r.mipmap=void 0!==n?n:c7t.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:c7t.ANISOTROPIC_LEVEL,r.wrapMode=u||c7t.WRAP_MODE,r.scaleMode=void 0!==o?o:c7t.SCALE_MODE,r.format=l||C8t.RGBA,r.type=c||N8t.UNSIGNED_BYTE,r.target=d||P8t.TEXTURE_2D,r.alphaMode=void 0!==i?i:F8t.UNPACK,r.uid=++g7t,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<h,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}var x9t,g9t=(u9t(E9t,x9t=l9t),E9t.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof l9t?this.addResourceAt(t[r],r):this.addResourceAt(a9t(t[r],e),r))},E9t.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},E9t.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},E9t.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");x9t.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},E9t.prototype.unbind=function(t){x9t.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},E9t.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load},E9t);function E9t(t,e){var r=this,i=e||{},e=i.width,i=i.height;(r=x9t.call(this,e,i)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new m9t;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}var T9t,b9t=(u9t(A9t,T9t=g9t),A9t.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},A9t.prototype.bind=function(t){T9t.prototype.bind.call(this,t),t.target=P8t.TEXTURE_2D_ARRAY},A9t.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},A9t);function A9t(t,e){var r,i=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(r=t).length:t,i=T9t.call(this,t,{width:s,height:n})||this;return r&&i.initFromArray(r,e),i}var S9t,I9t=(u9t(R9t,S9t=l9t),R9t.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,(R7t=R7t||document.createElement("a")).href=t;var r=d7t.parse(R7t.href),t=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&t&&r.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},R9t.prototype.upload=function(t,e,r,i){var n=t.gl,s=e.realWidth,t=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===F8t.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==t?(r.width=s,r.height=t,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},R9t.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),S9t.prototype.update.call(this))},R9t.prototype.dispose=function(){this.source=null},R9t);function R9t(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;return(e=S9t.call(this,r,i)||this).source=t,e.noSubImage=!1,e}var O9t,w9t=(u9t(C9t,O9t=I9t),C9t.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},C9t);function C9t(t){return O9t.call(this,t)||this}var P9t,N9t=(u9t(M9t,P9t=g9t),M9t.prototype.bind=function(t){P9t.prototype.bind.call(this,t),t.target=P8t.TEXTURE_CUBE_MAP},M9t.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=P8t.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},M9t.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<M9t.SIDES;n++){var s=this.items[n];i[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},M9t.test=function(t){return Array.isArray(t)&&t.length===M9t.SIDES},M9t.SIDES=6,M9t);function M9t(t,e){var r=this,i=e||{},n=i.width,s=i.height,o=i.autoLoad,i=i.linkBaseTexture;if(t&&t.length!==M9t.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=P9t.call(this,6,{width:n,height:s})||this,a=0;a<M9t.SIDES;a++)r.items[a].target=P8t.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,t&&r.initFromArray(t,e),!1!==o&&r.load(),r}var L9t,D9t=(u9t(U9t,L9t=I9t),U9t.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var r=n.source;n.url=r.src;function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},U9t.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===F8t.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},U9t.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return L9t.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(L9t.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var i,n=!0,s=e._glTextures;for(i in s){var o=s[i];if(o!==r&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},U9t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,L9t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},U9t.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},U9t);function U9t(t,e){var r,i=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,I9t.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),i=L9t.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:c7t.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}var F9t,r=(u9t(B9t,F9t=I9t),B9t.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},B9t.prototype._loadSvg=function(){var s=this,o=new Image;I9t.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*s.scale,i=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(r=s._overrideWidth||s._overrideHeight/e*t,i=s._overrideHeight||s._overrideWidth/t*e);var r=Math.round(r),i=Math.round(i),n=s.source;n.width=r,n.height=i,n._pixiId="canvas_"+ ++g7t,n.getContext("2d").drawImage(o,0,0,t,e,0,0,r,i),s._resolve(),s._resolve=null}}},B9t.getSize=function(t){var e=B9t.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},B9t.prototype.dispose=function(){F9t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},B9t.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},B9t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,B9t);function B9t(t,e){var r=this;return e=e||{},(r=F9t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}var k9t,G9t=(u9t(X9t,k9t=I9t),X9t.prototype.update=function(t){var e;this.destroyed||(e=L7t.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(k9t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},X9t.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},X9t.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},X9t.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},X9t.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},X9t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(L7t.shared.add(this.update,this),this._isConnectedToTicker=!0)},X9t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(L7t.shared.remove(this.update,this),this._isConnectedToTicker=!1)},X9t.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},X9t.prototype.dispose=function(){this._isConnectedToTicker&&L7t.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),k9t.prototype.dispose.call(this)},Object.defineProperty(X9t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(L7t.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(L7t.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(X9t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),X9t.test=function(t,e){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<X9t.TYPES.indexOf(e)},X9t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],X9t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},X9t);function X9t(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];I9t.crossOrigin(i,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,u=a.mime,a=(h=h||t[s]).split("?").shift().toLowerCase(),a=a.substr(a.lastIndexOf(".")+1),u=u||X9t.MIME_TYPES[a]||"video/"+a;o.src=h,o.type=u,i.appendChild(o)}t=i}return(r=k9t.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}var H9t,V9t=(u9t(j9t,H9t=I9t),j9t.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},j9t);function j9t(t){return H9t.call(this,t)||this}o9t.push(D9t,V9t,w9t,G9t,r,f9t,N9t,b9t);var Y9t={__proto__:null,Resource:l9t,BaseImageResource:I9t,INSTALLED:o9t,autoDetectResource:a9t,AbstractMultiResource:g9t,ArrayResource:b9t,BufferResource:f9t,CanvasResource:w9t,CubeResource:N9t,ImageResource:D9t,SVGResource:r,VideoResource:G9t,ImageBitmapResource:V9t},r=(z9t.prototype.destroy=function(){this.renderer=null},z9t);function z9t(t){this.renderer=t}var W9t,Z9t=(u9t(K9t,W9t=f9t),K9t.prototype.upload=function(t,e,r){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===F8t.UNPACK);var n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,e.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,n,s,0,e.format,e.type,this.data)),!0},K9t);function K9t(){return null!==W9t&&W9t.apply(this,arguments)||this}var q9t=(Object.defineProperty(J9t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),J9t.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new m9t(null,{scaleMode:L8t.NEAREST,resolution:1,mipmap:U8t.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},J9t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new m9t(new Z9t(null,{width:this.width,height:this.height}),{scaleMode:L8t.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:U8t.OFF,format:C8t.DEPTH_COMPONENT,type:N8t.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},J9t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},J9t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},J9t.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},J9t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},J9t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},J9t);function J9t(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new C7t("disposeFramebuffer"),this.multisample=H8t.NONE}var Q9t,$9t=(u9t(tZt,Q9t=m9t),tZt.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},tZt.prototype.dispose=function(){this.framebuffer.dispose(),Q9t.prototype.dispose.call(this)},tZt.prototype.destroy=function(){Q9t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},tZt);function tZt(t){var e=this,e=Q9t.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,r=t||{},t=r.width,r=r.height;return e.mipmap=U8t.OFF,e.width=Math.ceil(t)||100,e.height=Math.ceil(r)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new q9t(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}var eZt=(rZt.prototype.set=function(t,e,r){var i,n,s,o=e.width,a=e.height;r?(i=t.width/2/o,n=t.height/2/a,s=t.x/o+i,e=t.y/a+n,r=n9t.add(r,n9t.NW),this.x0=s+i*n9t.uX(r),this.y0=e+n*n9t.uY(r),r=n9t.add(r,2),this.x1=s+i*n9t.uX(r),this.y1=e+n*n9t.uY(r),r=n9t.add(r,2),this.x2=s+i*n9t.uX(r),this.y2=e+n*n9t.uY(r),r=n9t.add(r,2),this.x3=s+i*n9t.uX(r),this.y3=e+n*n9t.uY(r)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},rZt.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},rZt);function rZt(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var iZt,nZt=new eZt,sZt=(u9t(oZt,iZt=pt.a),oZt.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},oZt.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},oZt.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&A7t[t.url]&&oZt.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,oZt.removeFromCache(this),this.textureCacheIds=null},oZt.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new oZt(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},oZt.prototype.updateUvs=function(){this._uvs===nZt&&(this._uvs=new eZt),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},oZt.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=c7t.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null,n=i?t:(t._pixiId||(s=e&&e.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+ ++g7t),t._pixiId),s=A7t[n];if(i&&r&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=O7t(t)),(s=new oZt(new m9t(t,e))).baseTexture.cacheId=n,m9t.addToCache(s.baseTexture,n),oZt.addToCache(s,n)),s},oZt.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=oZt.from(t,Object.assign({resourceOptions:r},e),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},oZt.fromBuffer=function(t,e,r,i){return new oZt(m9t.fromBuffer(t,e,r,i))},oZt.fromLoader=function(t,e,r,i){t=new m9t(t,Object.assign({scaleMode:c7t.SCALE_MODE,resolution:O7t(e)},i)),i=t.resource;i instanceof D9t&&(i.url=e);var n=new oZt(t);return m9t.addToCache(n.baseTexture,r=r||e),oZt.addToCache(n,r),r!==e&&(m9t.addToCache(n.baseTexture,e),oZt.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},oZt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),A7t[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),A7t[e]=t)},oZt.removeFromCache=function(t){if("string"==typeof t){var e=A7t[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete A7t[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)A7t[t.textureCacheIds[i]]===t&&delete A7t[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(oZt.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(oZt.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){e="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+r)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(oZt.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(oZt.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(oZt.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),oZt.prototype.castToBaseTexture=function(){return this.baseTexture},oZt);function oZt(t,e,r,i,n,s){var o=iZt.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new k7t(0,0,1,1)),t instanceof oZt&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o._uvs=nZt,o.uvMatrix=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new Y7t(s.x,s.y):new Y7t(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function aZt(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}sZt.EMPTY=new sZt(new m9t),aZt(sZt.EMPTY),aZt(sZt.EMPTY.baseTexture),sZt.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new sZt(new m9t(new w9t(t)))}(),aZt(sZt.WHITE),aZt(sZt.WHITE.baseTexture);var hZt,uZt=(u9t(lZt,hZt=sZt),Object.defineProperty(lZt.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),lZt.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},lZt.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},lZt.create=function(t){for(var e=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=e[i];return"number"==typeof t&&(T7t("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new lZt(new $9t(t))},lZt);function lZt(t,e){e=hZt.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var cZt=(dZt.prototype.createTexture=function(t,e){e=new $9t(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new uZt(e)},dZt.prototype.getOptimalTexture=function(t,e,r){var i=dZt.SCREEN_KEY;t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=m7t(t)))<<16|65535&(e=m7t(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=i,n.setResolution(r),n},dZt.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},dZt.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},dZt.prototype.returnFilterTexture=function(t){this.returnTexture(t)},dZt.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},dZt.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=dZt.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},dZt.SCREEN_KEY="screen",dZt);function dZt(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var fZt=(pZt.prototype.destroy=function(){this.buffer=null},pZt.from=function(t,e,r,i,n){return new pZt(t,e,r,i,n)},pZt);function pZt(t,e,r,i,n,s,o){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=N8t.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o}var _Zt=0,yZt=(mZt.prototype.update=function(t){this.data=t||this.data,this._updateID++},mZt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},mZt.prototype.destroy=function(){this.dispose(),this.data=null},mZt.from=function(t){return new mZt(t=t instanceof Array?new Float32Array(t):t)},mZt);function mZt(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=_Zt++,this.disposeRunner=new C7t("disposeBuffer")}function vZt(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var xZt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var gZt={5126:4,5123:2,5121:1},EZt=0,TZt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},G9t=(bZt.prototype.addAttribute=function(t,e,r,i,n,s,o,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof yZt||(e instanceof Array&&(e=new Float32Array(e)),e=new yZt(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new fZt(l,r,i,n,s,o,a),this.instanced=this.instanced||a,this},bZt.prototype.getAttribute=function(t){return this.attributes[t]},bZt.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},bZt.prototype.addIndex=function(t){return t instanceof yZt||(t instanceof Array&&(t=new Uint16Array(t)),t=new yZt(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},bZt.prototype.getIndex=function(){return this.indexBuffer},bZt.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new yZt;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),r.push(n.size*gZt[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var o=new ArrayBuffer(4*r),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=vZt(l);n[c]||(n[c]=new xZt[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*i+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},bZt.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},bZt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},bZt.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},bZt.prototype.clone=function(){for(var t=new bZt,e=0;e<this.buffers.length;e++)t.buffers[e]=new yZt(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new fZt(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},bZt.merge=function(t){for(var e=new bZt,r=[],i=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)i[a]=i[a]||0,i[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)r[s]=new TZt[vZt(o.buffers[s].data)](i[s]),e.buffers[s]=new yZt(r[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*gZt[d.type]/4)}for(s=0;s<t.length;s++){for(var f=t[s].indexBuffer.data,a=0;a<f.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=f.length}}return e},bZt);function bZt(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=EZt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new C7t("disposeGeometry"),this.refCount=0}var AZt,SZt=(u9t(IZt,AZt=G9t),IZt);function IZt(){var t=AZt.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var RZt,OZt=(u9t(wZt,RZt=G9t),wZt.prototype.map=function(t,e){var r,i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},wZt.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},wZt);function wZt(){var t=RZt.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new yZt(t.vertices),t.uvBuffer=new yZt(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var CZt=0,PZt=(NZt.prototype.update=function(){this.dirtyId++},NZt.prototype.add=function(t,e,r){this.uniforms[t]=new NZt(e,r)},NZt.from=function(t,e){return new NZt(t,e)},NZt);function NZt(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=CZt++,this.static=!!e}var MZt=(LZt.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},LZt);function LZt(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new k7t,this.destinationFrame=new k7t,this.bindingSourceFrame=new k7t,this.bindingDestinationFrame=new k7t,this.filters=[],this.transform=null}var DZt,UZt=[new Y7t,new Y7t,new Y7t,new Y7t],FZt=new K7t,BZt=(u9t(kZt,DZt=r),kZt.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new MZt,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var c=e[l],o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy;1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(a),h&&(d=this.tempRect.copyFrom(s.sourceFrame),r.projection.transform&&this.transformAABB(FZt.copyFrom(r.projection.transform).invert(),d),n.sourceFrame.fit(d)),this.roundFrame(n.sourceFrame,(s.current||r).resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)},kZt.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,s=i.inputPixel,o=i.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((s=i.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,t.renderTexture,B8t.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<r.length-1;++h){r[h].apply(this,a,l,B8t.CLEAR,e);var u=a,a=l,l=u}r[h].apply(this,a,t.renderTexture,B8t.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},kZt.prototype.bindAndClear=function(t,e){void 0===e&&(e=B8t.CLEAR);var r=this.renderer,i=r.renderTexture,n=r.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((r=this.tempRect).x=0,r.y=0,r.width=t.filterFrame.width,r.height=t.filterFrame.height,i.bind(t,t.filterFrame,r)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===B8t.CLEAR||e===B8t.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},kZt.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(w8t.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(w8t.TRIANGLE_STRIP))},kZt.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,r=e._texture.orig,n=t.set(n.width,0,0,n.height,i.x,i.y),i=e.worldTransform.copyTo(K7t.TEMP_MATRIX);return i.invert(),n.prepend(i),n.scale(1/r.width,1/r.height),n.translate(e.anchor.x,e.anchor.y),n},kZt.prototype.destroy=function(){this.texturePool.clear(!1)},kZt.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},kZt.prototype.getFilterTexture=function(t,e){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},kZt.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},kZt.prototype.emptyPool=function(){this.texturePool.clear(!0)},kZt.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},kZt.prototype.transformAABB=function(t,e){var r=UZt[0],i=UZt[1],n=UZt[2],s=UZt[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);var o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),t=Math.max(r.x,i.x,n.x,s.x),s=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=t-o,e.height=s-a},kZt.prototype.roundFrame=function(t,e,r,i,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if(!(0===o&&0===a||0===s&&0===h))return}(n=n?FZt.copyFrom(n):FZt.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},kZt);function kZt(t){var e=DZt.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new cZt,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new SZt,e.quadUv=new OZt,e.tempRect=new k7t,e.activeState={},e.globalUniforms=new PZt({outputFrame:new k7t,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}var GZt=(XZt.prototype.flush=function(){},XZt.prototype.destroy=function(){this.renderer=null},XZt.prototype.start=function(){},XZt.prototype.stop=function(){this.flush()},XZt.prototype.render=function(t){},XZt);function XZt(t){this.renderer=t}var HZt,VZt=(u9t(jZt,HZt=r),jZt.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},jZt.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},jZt.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},jZt.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;0<=i;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},jZt.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}},jZt);function jZt(t){var e=HZt.call(this,t)||this;return e.emptyRenderer=new GZt(t),e.currentRenderer=e.emptyRenderer,e}var YZt,zZt=0,WZt=(u9t(ZZt,YZt=r),Object.defineProperty(ZZt.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),ZZt.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=zZt++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},ZZt.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=zZt++,this.renderer.runners.contextChange.emit(t)},ZZt.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},ZZt.prototype.createContext=function(t,e){var r;if(r=c7t.PREFER_ENV>=S8t.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},ZZt.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},ZZt.prototype.handleContextLost=function(t){t.preventDefault()},ZZt.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},ZZt.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},ZZt.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},ZZt.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");t=r||!!t.getExtension("OES_element_index_uint");(this.supports.uint32Indices=t)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},ZZt);function ZZt(t){var e=YZt.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var KZt,qZt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=H8t.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},JZt=new k7t,QZt=(u9t($Zt,KZt=r),$Zt.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new k7t,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,c7t.PREFER_ENV===S8t.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},$Zt.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},$Zt.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty($Zt.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),$Zt.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=R8t.COLOR|R8t.DEPTH);var s=this.gl;s.clearColor(t,e,r,i),s.clear(n)},$Zt.prototype.initFramebuffer=function(t){var e=this.gl,e=new qZt(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},$Zt.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},$Zt.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),1<r.multisample&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n,s,o,a=[],h=0;h<i;h++)0===h&&1<r.multisample||(s=(n=t.colorTextures[h]).parentTextureArray||n,this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,n.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+h));1<a.length&&e.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},$Zt.prototype.detectSamples=function(t){var e=this.msaaSamples,r=H8t.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r=1===r?H8t.NONE:r},$Zt.prototype.blit=function(t,e,r){var i=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){o=i.glFramebuffers[o];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new q9t(i.width,i.height),o.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=o.blitFramebuffer).width=i.width,t.height=i.height}e||((e=JZt).width=i.width,e.height=i.height);i=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,i?s.NEAREST:s.LINEAR)}}},$Zt.prototype.disposeFramebuffer=function(t,e){var r,i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)))},$Zt.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},$Zt.prototype.forceStencil=function(){var t,e,r,i,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,r=n.height,n=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,r),t.stencil=n,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n))},$Zt.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new k7t},$Zt);function $Zt(t){t=KZt.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new q9t(10,10),t.msaaSamples=null,t}var tKt,eKt=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},rKt={5126:4,5123:2,5121:1},iKt=(u9t(nKt,tKt=r),nKt.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=c7t.PREFER_ENV===S8t.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,n){return s.drawElementsInstancedANGLE(t,e,r,i,n)},t.drawArraysInstanced=function(t,e,r,i){return s.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},nKt.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);n=i[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},nKt.prototype.reset=function(){this.unbind()},nKt.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i,n,s=t.buffers[r],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,i=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(i,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(i,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(i,s.data,n)))}},nKt.prototype.checkCompatibility=function(t,e){var r,i=t.attributes;for(r in e.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},nKt.prototype.getSignature=function(t,e){var r,i=t.attributes,n=e.attributeData,s=["g",t.id];for(r in i)n[r]&&s.push(r);return s.join("-")},nKt.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*rKt[l[h].type];for(h in l){var f=l[h],p=f.size;void 0===f.stride&&(c[f.buffer]===p*rKt[f.type]?f.stride=0:f.stride=c[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=p*rKt[f.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var _=0;_<u.length;_++){var y=u[_];y._glBuffers[n]||(y._glBuffers[n]=new eKt(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),r&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},nKt.prototype.disposeBuffer=function(t,e){var r,i;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],i=this.gl,t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},nKt.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),i.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},nKt.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},nKt.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,s=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o,a=null;for(o in s){var h=s[o],u=n[h.buffer]._glBuffers[i];if(e.attributeData[o]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[o].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},nKt.prototype.draw=function(t,e,r,i){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(r||0)*n,i||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(r||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize()),this},nKt.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},nKt);function nKt(t){t=tKt.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}var sKt=(oKt.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=X8t.NONE,this.autoDetect=!0),this._target=null},oKt.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},oKt);function oKt(t){void 0===t&&(t=null),this.type=X8t.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function aKt(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function hKt(t,e,r,i){var n=aKt(t,t.VERTEX_SHADER,e),s=aKt(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function uKt(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function lKt(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return uKt(2*e);case"bvec3":return uKt(3*e);case"bvec4":return uKt(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var cKt,dKt={},fKt=dKt;function pKt(){var t,e;return(fKt===dKt||fKt&&fKt.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=c7t.PREFER_ENV>=S8t.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),fKt=e),fKt}function _Kt(t,e,r){if("precision"===t.substring(0,9))return r!==G8t.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;return"precision "+(e===G8t.HIGH&&r!==G8t.HIGH?G8t.MEDIUM:e)+" float;\n"+t}var yKt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var mKt=null,vKt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function xKt(t,e){if(!mKt){var r=Object.keys(vKt);mKt={};for(var i=0;i<r.length;++i){var n=r[i];mKt[t[n]]=vKt[n]}}return mKt[e]}var gKt=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],EKt={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},TKt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var bKt,AKt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function SKt(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=AKt.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var IKt=0,RKt={},OKt=(wKt.prototype.extractData=function(t,e){var r=pKt();r?(e=hKt(r,t,e),this.attributeData=this.getAttributeData(e,r),this.uniformData=this.getUniformData(e,r),r.deleteProgram(e)):(this.uniformData={},this.attributeData={})},wKt.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=xKt(e,o.type),a={type:a,name:o.name,size:yKt[a],location:0};r[o.name]=a,i.push(a)}i.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<i.length;s++)i[s].location=s;return r},wKt.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=xKt(e,s.type);r[o]={type:h,size:s.size,isArray:a,value:lKt(h,s.size)}}return r},Object.defineProperty(wKt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(wKt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),wKt.from=function(t,e,r){var i=t+e,n=b7t[i];return n||(b7t[i]=n=new wKt(t,e,r)),n},wKt);function wKt(t,e,r){void 0===r&&(r="pixi-shader"),this.id=IKt++,this.vertexSrc=t||wKt.defaultVertexSrc,this.fragmentSrc=e||wKt.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),RKt[r]?(RKt[r]++,r+="-"+RKt[r]):RKt[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=_Kt(this.vertexSrc,c7t.PRECISION_VERTEX,G8t.HIGH),this.fragmentSrc=_Kt(this.fragmentSrc,c7t.PRECISION_FRAGMENT,(cKt||(cKt=G8t.MEDIUM,(r=pKt())&&r.getShaderPrecisionFormat&&(r=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT),cKt=r.precision?G8t.HIGH:G8t.MEDIUM)),cKt))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var CKt=(PKt.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},PKt.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(PKt.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),PKt.from=function(t,e,r){return new PKt(OKt.from(t,e),r)},PKt);function PKt(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof PZt?e:new PZt(e):new PZt({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}var NKt=(Object.defineProperty(MKt.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(MKt.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(MKt.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(MKt.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(MKt.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(MKt.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(MKt.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==O8t.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(MKt.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),MKt.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},MKt.for2d=function(){var t=new MKt;return t.depthTest=!1,t.blend=!0,t},MKt);function MKt(){this.data=0,this.blendMode=O8t.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var LKt,V9t=(u9t(DKt,LKt=CKt),DKt.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(DKt.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(DKt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(DKt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),DKt);function DKt(t,e,r){var i=this,e=OKt.from(t||DKt.defaultVertexSrc,e||DKt.defaultFragmentSrc);return(i=LKt.call(this,e,r)||this).padding=0,i.resolution=c7t.FILTER_RESOLUTION,i.enabled=!0,i.autoFit=!0,i.legacy=!!i.program.attributeData.aTextureCoord,i.state=new NKt,i}var UKt=new K7t,FKt=(Object.defineProperty(BKt.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),BKt.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e},BKt.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(UKt.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(UKt));t=e.baseTexture,r=this.uClampFrame,i=this.clampMargin/t.resolution,n=this.clampOffset;return r[0]=(e._frame.x+i+n)/t.width,r[1]=(e._frame.y+i+n)/t.height,r[2]=(e._frame.x+e._frame.width-i+n)/t.width,r[3]=(e._frame.y+e._frame.height-i+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},BKt);function BKt(t,e){this._texture=t,this.mapCoord=new K7t,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var kKt,GKt=(u9t(XKt,kKt=V9t),XKt.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new FKt(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},XKt);function XKt(t){var e=this,r=new K7t,e=kKt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}var HKt,VKt=(u9t(jKt,HKt=r),jKt.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},jKt.prototype.push=function(t,e){var r,i=e;switch(i.isMaskData||((r=this.maskDataPool.pop()||new sKt).pooled=!0,r.maskObject=e,i=r),i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case X8t.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case X8t.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case X8t.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},jKt.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case X8t.SCISSOR:this.renderer.scissor.pop();break;case X8t.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case X8t.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},jKt.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=X8t.SPRITE:(t.type=X8t.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(e=r.worldTransform,r=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),r=Math.round(r*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3==e&&(t.type=X8t.SCISSOR)))},jKt.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new GKt(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e;t=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=t,this.alphaMaskIndex++},jKt.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},jKt);function jKt(t){t=HKt.call(this,t)||this;return t.enableScissor=!0,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}var YKt,V9t=(u9t(zKt,YKt=r),zKt.prototype.getStackLength=function(){return this.maskStack.length},zKt.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},zKt.prototype._useCurrent=function(){},zKt.prototype.destroy=function(){YKt.prototype.destroy.call(this),this.maskStack=null},zKt);function zKt(t){t=YKt.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}var WKt,ZKt=(u9t(KKt,WKt=V9t),KKt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},KKt.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},KKt.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},KKt.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,s=r.destinationFrame,o=(e||this.renderer).resolution,a=s.width/n.width,h=s.height/n.height,r=((t.x-n.x)*a+s.x)*o,s=((t.y-n.y)*h+s.y)*o,a=t.width*a*o,h=t.height*h*o;i&&(r+=i.tx*o,s+=i.ty*o),e||(s=this.renderer.height-h-s),this.renderer.gl.scissor(r,s,a,h)},KKt);function KKt(t){t=WKt.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}var qKt,JKt=(u9t(QKt,qKt=V9t),QKt.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},QKt.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},QKt.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},QKt.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},QKt.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},QKt);function QKt(t){t=qKt.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}var $Kt,tqt=(u9t(eqt,$Kt=r),eqt.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},eqt.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=i*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-i-e.y*n.d},eqt.prototype.setTransform=function(t){},eqt);function eqt(t){t=$Kt.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new K7t,t.transform=null,t}var rqt,iqt=new k7t,nqt=new k7t,sqt=(u9t(oqt,rqt=r),oqt.prototype.bind=function(t,e,r){var i,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(i=t.baseTexture).resolution,e||(iqt.width=t.frame.width,iqt.height=t.frame.height,e=iqt),r||(nqt.x=t.frame.x,nqt.y=t.frame.y,nqt.width=e.width,nqt.height=e.height,r=nqt),n=i.framebuffer):(s=o.resolution,e||(iqt.width=o.screen.width,iqt.height=o.screen.height,e=iqt),r||((r=iqt).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*s,a.y=r.y*s,a.width=r.width*s,a.height=r.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,e,s,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},oqt.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r,i,n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==s.width||n.height!==s.height;o&&(r=(i=this.viewportFrame).x,n=i.y,s=i.width,i=i.height,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,n,s,i)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},oqt.prototype.resize=function(){this.bind(null)},oqt.prototype.reset=function(){this.bind(null)},oqt);function oqt(t){var e=rqt.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new k7t,e.destinationFrame=new k7t,e.viewportFrame=new k7t,e}var aqt=(hqt.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},hqt);function hqt(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var uqt,lqt=0,cqt={textureCount:0},dqt=(u9t(fqt,uqt=r),fqt.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof bKt)return bKt;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");bKt=!0===t({a:"b"},"a","b")}catch(t){bKt=!1}return bKt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},fqt.prototype.contextChange=function(t){this.gl=t,this.reset()},fqt.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(cqt.textureCount=0,this.syncUniformGroup(t.uniformGroup,cqt)),i},fqt.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},fqt.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},fqt.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},fqt.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var n=e[r];if(n){for(var s,o=t.uniforms[r],a=!1,h=0;h<gKt.length;h++)if(gKt[h].test(n,o)){i.push(gKt[h].code(r,o)),a=!0;break}a||(s=(1===n.size?EKt:TKt)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+s+";"))}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},fqt.prototype.getSignature=function(t,e){var r,i=[];for(r in t.uniforms)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},fqt.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},fqt.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(n in r.attributeData)i[n]=r.attributeData[n].location;var n,s=hKt(e,r.vertexSrc,r.fragmentSrc,i),o={};for(n in r.uniformData){var a=r.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:lKt(a.type,a.size)}}t=new aqt(s,o);return r.glPrograms[this.renderer.CONTEXT_UID]=t},fqt.prototype.reset=function(){this.program=null,this.shader=null},fqt.prototype.destroy=function(){this.destroyed=!0},fqt);function fqt(t){t=uqt.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=lqt++,t}var pqt,_qt=(u9t(yqt,pqt=r),yqt.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[O8t.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.ADD]=[t.ONE,t.ONE],e[O8t.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.NONE]=[0,0],e[O8t.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[O8t.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[O8t.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[O8t.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[O8t.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[O8t.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[O8t.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[O8t.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[O8t.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[O8t.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[O8t.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},yqt.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},yqt.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},yqt.prototype.setBlend=function(t){this.updateCheck(yqt.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},yqt.prototype.setOffset=function(t){this.updateCheck(yqt.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},yqt.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},yqt.prototype.setDepthMask=function(t){this.gl.depthMask(t)},yqt.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},yqt.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},yqt.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},yqt.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},yqt.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},yqt.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},yqt.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},yqt.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},yqt);function yqt(t){t=pqt.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=O8t.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.map[5]=t.setDepthMask,t.checks=[],t.defaultState=new NKt,t.defaultState.blend=!0,t}var mqt,vqt=(u9t(xqt,mqt=r),xqt.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==k8t.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},xqt.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var s=0,i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},xqt.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},xqt);function xqt(t){t=mqt.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=c7t.GC_MAX_IDLE,t.checkCountMax=c7t.GC_MAX_CHECK_COUNT,t.mode=c7t.GC_MODE,t}var gqt,Eqt=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0},Tqt=(u9t(bqt,gqt=r),bqt.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new Eqt(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Eqt(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},bqt.prototype.bind=function(t,e){void 0===e&&(e=0);var r,i=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null)},bqt.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},bqt.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)},bqt.prototype.ensureSamplerType=function(t){var e=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=t-1;0<=n;--n){var s=e[n];s&&s._glTextures[i].samplerType!==M8t.FLOAT&&this.renderer.texture.unbind(s)}},bqt.prototype.initTexture=function(t){var e=new Eqt(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},bqt.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===N8t.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},bqt.prototype.updateTexture=function(t){var e,r,i,n=t._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(i,t,n)?n.samplerType!==M8t.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,r=t.realHeight,i=i.gl,(n.width!==e||n.height!==r||n.dirtyId<0)&&(n.width=e,n.height=r,i.texImage2D(t.target,0,n.internalFormat,e,r,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},bqt.prototype.destroyTexture=function(t,e){var r=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&function(t,e,r){var i=t.length;if(!(i<=e||0===r)){for(var n=i-(r=i<e+r?i-e:r),s=e;s<n;++s)t[s]=t[s+r];t.length=n}}(this.managedTextures,t,1))},bqt.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==U8t.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=D8t.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},bqt.prototype.setStyle=function(t,e){var r,i=this.gl;e.mipmap&&t.mipmap!==U8t.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===L8t.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(r=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===L8t.LINEAR&&(e=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,e))):i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===L8t.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===L8t.LINEAR?i.LINEAR:i.NEAREST)},bqt);function bqt(t){t=gqt.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new m9t,t.hasIntegerTextures=!1,t}var Aqt,Sqt={__proto__:null,FilterSystem:BZt,BatchSystem:VZt,ContextSystem:WZt,FramebufferSystem:QZt,GeometrySystem:iKt,MaskSystem:VKt,ScissorSystem:ZKt,StencilSystem:JKt,ProjectionSystem:tqt,RenderTextureSystem:sqt,ShaderSystem:dqt,StateSystem:_qt,TextureGCSystem:vqt,TextureSystem:Tqt},Iqt=new K7t,r=(u9t(Rqt,Aqt=pt.a),Rqt.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(Rqt.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(Rqt.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),Rqt.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},Rqt.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);r=uZt.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return Iqt.tx=-i.x,Iqt.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:Iqt,skipUpdateTransform:!!t.parent}),r},Rqt.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=I8t.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(Rqt.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),Object.defineProperty(Rqt.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),Rqt);function Rqt(t,e){void 0===t&&(t=I8t.UNKNOWN);var r=Aqt.call(this)||this;return e=Object.assign({},c7t.RENDER_OPTIONS,e),r.options=e,r.type=t,r.screen=new k7t(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||c7t.RESOLUTION,r.useContextAlpha=e.useContextAlpha,r.autoDensity=!!e.autoDensity,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(T7t("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=e.transparent,r.backgroundAlpha=e.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var Oqt;u9t(wqt,Oqt=r),wqt.create=function(t){if(f7t=void 0===f7t?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:c7t.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}():f7t)return new wqt(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},wqt.prototype.addSystem=function(t,e){e=e||t.name;var r,i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=i,this.runners)this.runners[r].add(i);return this},wqt.prototype.render=function(t,e){var r,i,n,s;e&&(s=e instanceof uZt?(T7t("6.0.0","Renderer#render arguments changed, use options instead."),r=e,i=arguments[2],n=arguments[3],arguments[4]):(r=e.renderTexture,i=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=t),s||(s=t.enableTempParent(),t.updateTransform(),t.disableTempParent(s)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},wqt.prototype.resize=function(t,e){Oqt.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},wqt.prototype.reset=function(){return this.runners.reset.emit(),this},wqt.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},wqt.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();Oqt.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(wqt.prototype,"extract",{get:function(){return T7t("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),wqt.registerPlugin=function(t,e){(wqt.__plugins=wqt.__plugins||{})[t]=e};function wqt(t){var e,r=Oqt.call(this,I8t.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new C7t("destroy"),contextChange:new C7t("contextChange"),reset:new C7t("reset"),update:new C7t("update"),postrender:new C7t("postrender"),prerender:new C7t("prerender"),resize:new C7t("resize")},r.globalUniforms=new PZt({projectionMatrix:new K7t},!0),r.addSystem(VKt,"mask").addSystem(WZt,"context").addSystem(_qt,"state").addSystem(dqt,"shader").addSystem(Tqt,"texture").addSystem(iKt,"geometry").addSystem(QZt,"framebuffer").addSystem(ZKt,"scissor").addSystem(JKt,"stencil").addSystem(tqt,"projection").addSystem(vqt,"textureGC").addSystem(BZt,"filter").addSystem(sqt,"renderTexture").addSystem(VZt,"batch"),r.initPlugins(wqt.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,e=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",p7t||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=self.console).log.apply(t,["\n %c %c %c PixiJS "+_7t+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS "+_7t+" - "+e+" - http://www.pixijs.com/"),p7t=!0),r.resize(r.options.width,r.options.height),r}var Cqt=function(){this.texArray=null,this.blend=0,this.type=w8t.TRIANGLES,this.start=0,this.size=0,this.data=null},Pqt=(Nqt.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},Nqt);function Nqt(){this.elements=[],this.ids=[],this.count=0}var Mqt=(Object.defineProperty(Lqt.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(Lqt.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(Lqt.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(Lqt.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(Lqt.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),Lqt.prototype.view=function(t){return this[t+"View"]},Lqt.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},Lqt.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Lqt);function Lqt(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var Dqt,Uqt=(u9t(Fqt,Dqt=GZt),Fqt.prototype.contextChange=function(){var t=this.renderer.gl;c7t.PREFER_ENV===S8t.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),c7t.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=SKt(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},Fqt.prototype.initFlushBuffers=function(){for(var t=Fqt._drawCallPool,e=Fqt._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new Cqt);for(;e.length<i;)e.push(new Pqt);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},Fqt.prototype.onPrerender=function(){this._flushId=0},Fqt.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},Fqt.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=Fqt._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++m9t._globalBatch,a=0,h=r[0],u=0;i.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(i.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;m9t._globalBatch=o},Fqt.prototype.buildDrawCalls=function(t,e,r){var i=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=Fqt._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<r;++d){var f=i[d],p=f._texture.baseTexture,p=y7t[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&c.blend!==p&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,s,u,l),u+=f.vertexData.length/2*o,l+=f.indices.length,c.blend=p}e<r&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},Fqt.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},Fqt.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;c7t.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},Fqt.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=Fqt._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,i.set(this.state),r.drawElements(u,l,r.UNSIGNED_SHORT,2*c)}},Fqt.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},Fqt.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),c7t.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},Fqt.prototype.stop=function(){this.flush()},Fqt.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),Dqt.prototype.destroy.call(this)},Fqt.prototype.getAttributeBuffer=function(t){var e=m7t(Math.ceil(t/8)),t=x7t(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new Mqt(e*this.vertexSize*4)),t},Fqt.prototype.getIndexBuffer=function(t){var e=m7t(Math.ceil(t/12)),r=x7t(e),t=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);e=this._iBuffers[r];return e||(this._iBuffers[r]=e=new Uint16Array(t)),e},Fqt.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var s,o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(e=f)?(255*e<<24)+s:0===e?0:(255*e<<24)+(((s>>16&255)*e+.5|0)<<16)+(((s>>8&255)*e+.5|0)<<8)+((255&s)*e+.5|0)):t._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[i++]=c[_],a[i++]=c[_+1],a[i++]=u[_],a[i++]=u[_+1],o[i++]=p,a[i++]=d;for(_=0;_<l.length;_++)r[n++]=h+l[_]},Fqt._drawCallPool=[],Fqt._textureArrayPool=[],Fqt);function Fqt(t){var e=Dqt.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=NKt.for2d(),e.size=4*c7t.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var Bqt=(kqt.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=PZt.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new OKt(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new K7t,default:this.defaultGroupCache[t]};return new CKt(this.programCache[t],i)},kqt.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},kqt);function kqt(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var Gqt,Xqt=(u9t(Hqt,Gqt=G9t),Hqt);function Hqt(t){void 0===t&&(t=!1);var e=Gqt.call(this)||this;return e._buffer=new yZt(null,t,!1),e._indexBuffer=new yZt(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,N8t.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,N8t.FLOAT).addAttribute("aColor",e._buffer,4,!0,N8t.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,N8t.FLOAT).addIndex(e._indexBuffer),e}var Vqt="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",jqt="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function Yqt(){}(Yqt.create=function(t){var e,t=Object.assign({vertex:Vqt,fragment:jqt,geometryClass:Xqt,vertexSize:6},t),r=t.vertex,i=t.fragment,n=t.vertexSize,s=t.geometryClass;return u9t(o,e=Uqt),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new Bqt(r,i),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(Yqt,"defaultVertexSrc",{get:function(){return Vqt},enumerable:!1,configurable:!0}),Object.defineProperty(Yqt,"defaultFragmentTemplate",{get:function(){return jqt},enumerable:!1,configurable:!0}),Yqt).create();var zqt={};for(Wqt in Y9t)!function(t){Object.defineProperty(zqt,t,{get:function(){return T7t("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),Y9t[t]}})}(Wqt);var Wqt,Zqt={};for(Wqt in Sqt)!function(t){Object.defineProperty(Zqt,t,{get:function(){return T7t("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),Sqt[t]}})}(Wqt);var Kqt=function(t,e){return(Kqt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function qqt(t,e){function r(){this.constructor=t}Kqt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Jqt,Qqt=(qqt($qt,Jqt=aht),$qt.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],r=[],i=[],n=this.segWidth-1,s=this.segHeight-1,o=this.width/n,a=this.height/s,h=0;h<t;h++){var u=h%this.segWidth,l=h/this.segWidth|0;e.push(u*o,l*a),r.push(u/n,l/s)}for(var c=n*s,h=0;h<c;h++){var d=h%n,f=h/n|0,p=f*this.segWidth+d,_=f*this.segWidth+d+1,y=(1+f)*this.segWidth+d,d=(1+f)*this.segWidth+d+1;i.push(p,_,y,_,d,y)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},$qt);function $qt(t,e,r,i){void 0===t&&(t=100),void 0===e&&(e=100),void 0===r&&(r=10),void 0===i&&(i=10);var n=Jqt.call(this)||this;return n.segWidth=r,n.segHeight=i,n.width=t,n.height=e,n.build(),n}var tJt,eJt=(qqt(rJt,tJt=aht),Object.defineProperty(rJt.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),rJt.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),i=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),r.data=new Float32Array(4*t.length),i.data=new Uint16Array(6*(t.length-1)));var n=r.data,s=i.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;for(var o=0,a=t[0],h=this._width*this.textureScale,u=t.length,l=0;l<u;l++){var c,d,f=4*l;0<this.textureScale?(c=a.x-t[l].x,d=a.y-t[l].y,d=Math.sqrt(c*c+d*d),a=t[l],o+=d/h):o=l/(u-1),n[f]=o,n[f+1]=0,n[f+2]=o,n[f+3]=1}for(var p=0,l=0;l<u-1;l++)s[p++]=f=2*l,s[p++]=f+1,s[p++]=f+2,s[p++]=f+2,s[p++]=f+1,s[p++]=f+3;r.update(),i.update(),this.updateVertices()}}},rJt.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e=t[0],r=this.buffers[0].data,i=t.length,n=0;n<i;n++){var s=t[n],o=4*n,a=-((l=n<t.length-1?t[n+1]:s).x-e.x),h=l.y-e.y,u=Math.sqrt(h*h+a*a),l=0<this.textureScale?this.textureScale*this._width/2:this._width/2;h/=u,a/=u,h*=l,a*=l,r[o]=s.x+h,r[1+o]=s.y+a,r[2+o]=s.x-h,r[3+o]=s.y-a,e=s}this.buffers[0].update()}},rJt.prototype.update=function(){0<this.textureScale?this.build():this.updateVertices()},rJt);function rJt(t,e,r){void 0===t&&(t=200),void 0===r&&(r=0);var i=tJt.call(this,new Float32Array(4*e.length),new Float32Array(4*e.length),new Uint16Array(6*(e.length-1)))||this;return i.points=e,i._width=t,i.textureScale=r,i.build(),i}var iJt;qqt(nJt,iJt=eht),nJt.prototype._render=function(t){var e=this.geometry;!this.autoUpdate&&e._width===this.shader.texture.height||(e._width=this.shader.texture.height,e.update()),iJt.prototype._render.call(this,t)};function nJt(t,e,r){var i=this,n=new eJt(t.height,e,r=void 0===r?0:r),e=new nht(t);return 0<r&&(t.baseTexture.wrapMode=D8t.REPEAT),(i=iJt.call(this,n,e)||this).autoUpdate=!0,i}var sJt,G9t=(qqt(oJt,sJt=eht),oJt.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(oJt.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),oJt.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),sJt.prototype._render.call(this,t)},oJt.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),sJt.prototype.destroy.call(this,t)},oJt);function oJt(t,e,r){var i=this,e=new Qqt(t.width,t.height,e,r),r=new nht(sZt.WHITE);return(i=sJt.call(this,e,r)||this).texture=t,i}var aJt;qqt(hJt,aJt=eht),Object.defineProperty(hJt.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),hJt.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),aJt.prototype._render.call(this,t)};function hJt(t,e,r,i,n){void 0===t&&(t=sZt.EMPTY);var s=this,i=new aht(e,r,i);i.getBuffer("aVertexPosition").static=!1;t=new nht(t);return(s=aJt.call(this,i,t,null,n)||this).autoUpdate=!0,s}var uJt;qqt(lJt,uJt=G9t),lJt.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(lJt.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),lJt.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},lJt.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},lJt.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,t=this._topHeight+this._bottomHeight,t=this._height>t?1:this._height/t;return Math.min(e,t)},Object.defineProperty(lJt.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(lJt.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(lJt.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(lJt.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(lJt.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(lJt.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),lJt.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var r=1/this._origWidth,t=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=t*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-t*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()};function lJt(t,e,r,i,n){void 0===e&&(e=10),void 0===r&&(r=10),void 0===i&&(i=10),void 0===n&&(n=10);var s=uJt.call(this,sZt.WHITE,4,4)||this;return s._origWidth=t.orig.width,s._origHeight=t.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=e,s._rightWidth=i,s._topHeight=r,s._bottomHeight=n,s.texture=t,s}rE.registerPlugin("accessibility",u_),rE.registerPlugin("extract",FT),rE.registerPlugin("interaction",ky),rE.registerPlugin("particle",FR),rE.registerPlugin("prepare",P4),rE.registerPlugin("batch",dv),rE.registerPlugin("tilingSprite",NW),mS.registerPlugin(vnt),mS.registerPlugin(xm),mS.registerPlugin(NR),mS.registerPlugin(vN),mS.registerPlugin(lJ),a_.registerPlugin(t_),a_.registerPlugin(HT);function cJt(t){return(cJt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dJt(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function fJt(t,e){return(fJt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pJt(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=_Jt(r);return t=i?(t=_Jt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==cJt(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function _Jt(t){return(_Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yJt=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fJt(t,e)}(n,rs);var t,e,r,i=pJt(n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var t=$e.from("bg");return i.call(this,t,1,t.height)}return t=n,(e=[{key:"onResize",value:function(t,e){this.width=t,this.y=e-this.height}},{key:"onUpdate",value:function(t){this.tilePosition.x-=t}}])&&dJt(t.prototype,e),r&&dJt(t,r),n}();function mJt(t){return(mJt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vJt(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xJt(t,e){return(xJt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gJt(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=EJt(r);return t=i?(t=EJt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==mJt(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function EJt(t){return(EJt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var TJt=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xJt(t,e)}(n,rs);var t,e,r,i=gJt(n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var t=$e.from("ground");return i.call(this,t,1,t.height)}return t=n,(e=[{key:"onResize",value:function(t,e){this.width=t,this.y=e-this.height}},{key:"onUpdate",value:function(t){this.tilePosition.x-=t}}])&&vJt(t.prototype,e),r&&vJt(t,r),n}();function bJt(t){return(bJt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AJt(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function SJt(t,e){return(SJt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function IJt(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=RJt(r);return t=i?(t=RJt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==bJt(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function RJt(t){return(RJt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var OJt=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&SJt(t,e)}(n,rs);var t,e,r,i=IJt(n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var t=$e.from("clouds");return i.call(this,t,1,t.height)}return t=n,(e=[{key:"onResize",value:function(t,e){this.width=t}},{key:"onUpdate",value:function(t){this.tilePosition.x-=t}}])&&AJt(t.prototype,e),r&&AJt(t,r),n}();function wJt(t){return(wJt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CJt(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function PJt(t,e){return(PJt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function NJt(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=MJt(r);return t=i?(t=MJt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==wJt(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function MJt(t){return(MJt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LJt=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&PJt(t,e)}(n,rs);var t,e,r,i=NJt(n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var t=$e.from("mountains");return i.call(this,t,1,t.height)}return t=n,(e=[{key:"onResize",value:function(t,e){this.y=e-this.height,this.width=t}},{key:"onUpdate",value:function(t){this.tilePosition.x-=t}}])&&CJt(t.prototype,e),r&&CJt(t,r),n}();function DJt(t){return(DJt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UJt(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function FJt(t,e){return(FJt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function BJt(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=kJt(r);return t=i?(t=kJt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==DJt(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function kJt(t){return(kJt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var GJt=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&FJt(t,e)}(n,rs);var t,e,r,i=BJt(n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var t=$e.from("trees");return i.call(this,t,1,t.height)}return t=n,(e=[{key:"onResize",value:function(t,e){this.width=t,this.y=e-this.height+3}},{key:"onUpdate",value:function(t){this.tilePosition.x-=t}}])&&UJt(t.prototype,e),r&&UJt(t,r),n}();function XJt(t){return(XJt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HJt(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function VJt(t,e){return(VJt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jJt(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=YJt(r);return t=i?(t=YJt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==XJt(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function YJt(t){return(YJt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zJt=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&VJt(t,e)}(n,Kn);var t,e,r,i=jJt(n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var r=$e.from("filter");return(r=i.call(this,r,1,r.height)).val=0,r}return t=n,(e=[{key:"onResize",value:function(t,e){this.width=this.val}},{key:"onUpdate",value:function(t){}}])&&HJt(t.prototype,e),r&&HJt(t,r),n}(),WJt={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},ZJt={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},KJt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],qJt={CSS:{},springs:{}};function JJt(t,e,r){return Math.min(Math.max(t,e),r)}function QJt(t,e){return-1<t.indexOf(e)}function $Jt(t,e){return t.apply(null,e)}var tQt={arr:function(t){return Array.isArray(t)},obj:function(t){return QJt(Object.prototype.toString.call(t),"Object")},pth:function(t){return tQt.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||tQt.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},nil:function(t){return tQt.und(t)||null===t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return tQt.hex(t)||tQt.rgb(t)||tQt.hsl(t)},key:function(t){return!WJt.hasOwnProperty(t)&&!ZJt.hasOwnProperty(t)&&"targets"!==t&&"keyframes"!==t}};function eQt(t){t=/\(([^)]+)\)/.exec(t);return t?t[1].split(",").map(function(t){return parseFloat(t)}):[]}function rQt(i,r){var t=eQt(i),e=JJt(tQt.und(t[0])?1:t[0],.1,100),n=JJt(tQt.und(t[1])?100:t[1],.1,100),s=JJt(tQt.und(t[2])?10:t[2],.1,100),t=JJt(tQt.und(t[3])?0:t[3],.1,100),o=Math.sqrt(n/e),a=s/(2*Math.sqrt(n*e)),h=a<1?o*Math.sqrt(1-a*a):0,u=1,l=a<1?(a*o-t)/h:-t+o;function c(t){var e=r?r*t/1e3:t,e=a<1?Math.exp(-e*a*o)*(u*Math.cos(h*e)+l*Math.sin(h*e)):(u+l*e)*Math.exp(-e*o);return 0===t||1===t?t:1-e}return r?c:function(){var t=qJt.springs[i];if(t)return t;for(var e=0,r=0;;)if(1===c(e+=1/6)){if(16<=++r)break}else r=0;return t=e*(1/6)*1e3,qJt.springs[i]=t}}function iQt(e){return void 0===e&&(e=10),function(t){return Math.ceil(JJt(t,1e-6,1)*e)*(1/e)}}var nQt=function(s,e,o,r){if(0<=s&&s<=1&&0<=o&&o<=1){var a=new Float32Array(11);if(s!==e||o!==r)for(var t=0;t<11;++t)a[t]=oQt(.1*t,s,o);return function(t){return s===e&&o===r||0===t||1===t?t:oQt(i(t),e,r)}}function i(t){for(var e=0,r=1;10!==r&&a[r]<=t;++r)e+=.1;var i=e+.1*((t-a[--r])/(a[r+1]-a[r])),n=aQt(i,s,o);return.001<=n?function(t,e,r,i){for(var n=0;n<4;++n){var s=aQt(e,r,i);if(0===s)return e;e-=(oQt(e,r,i)-t)/s}return e}(t,i,s,o):0===n?i:function(t,e,r,i,n){for(var s,o,a=0;0<(s=oQt(o=e+(r-e)/2,i,n)-t)?r=o:e=o,1e-7<Math.abs(s)&&++a<10;);return o}(t,e,e+.1,s,o)}};function sQt(t,e){return 1-3*e+3*t}function oQt(t,e,r){return((sQt(e,r)*t+(3*r-6*e))*t+3*e)*t}function aQt(t,e,r){return 3*sQt(e,r)*t*t+2*(3*r-6*e)*t+3*e}var hQt,uQt,lQt=(hQt={linear:function(){return function(t){return t}}},uQt={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){for(var e,r=4;t<((e=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*e-2)/22-t,2)}},Elastic:function(t,e){void 0===e&&(e=.5);var r=JJt(t=void 0===t?1:t,1,10),i=JJt(e,.1,2);return function(t){return 0===t||1===t?t:-r*Math.pow(2,10*(t-1))*Math.sin((t-1-i/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/i)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach(function(t,e){uQt[t]=function(){return function(t){return Math.pow(t,e+2)}}}),Object.keys(uQt).forEach(function(t){var i=uQt[t];hQt["easeIn"+t]=i,hQt["easeOut"+t]=function(e,r){return function(t){return 1-i(e,r)(1-t)}},hQt["easeInOut"+t]=function(e,r){return function(t){return t<.5?i(e,r)(2*t)/2:1-i(e,r)(-2*t+2)/2}},hQt["easeOutIn"+t]=function(e,r){return function(t){return t<.5?(1-i(e,r)(1-2*t))/2:(i(e,r)(2*t-1)+1)/2}}}),hQt);function cQt(t,e){if(tQt.fnc(t))return t;var r=t.split("(")[0],i=lQt[r],n=eQt(t);switch(r){case"spring":return rQt(t,e);case"cubicBezier":return $Jt(nQt,n);case"steps":return $Jt(iQt,n);default:return $Jt(i,n)}}function dQt(t){try{return document.querySelectorAll(t)}catch(t){return}}function fQt(t,e){for(var r,i=t.length,n=2<=arguments.length?e:void 0,s=[],o=0;o<i;o++)o in t&&(r=t[o],e.call(n,r,o,t)&&s.push(r));return s}function pQt(t){return t.reduce(function(t,e){return t.concat(tQt.arr(e)?pQt(e):e)},[])}function _Qt(t){return tQt.arr(t)?t:(t=tQt.str(t)?dQt(t)||t:t)instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t]}function yQt(t,e){return t.some(function(t){return t===e})}function mQt(t){var e,r={};for(e in t)r[e]=t[e];return r}function vQt(t,e){var r,i=mQt(t);for(r in t)i[r]=(e.hasOwnProperty(r)?e:t)[r];return i}function xQt(t,e){var r,i=mQt(t);for(r in e)i[r]=(tQt.und(t[r])?e:t)[r];return i}function gQt(t){return tQt.rgb(t)?(e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(s=t))?"rgba("+e[1]+",1)":s:tQt.hex(t)?(o=(o=t).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,r,i){return e+e+r+r+i+i}),o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o),"rgba("+parseInt(o[1],16)+","+parseInt(o[2],16)+","+parseInt(o[3],16)+",1)"):tQt.hsl(t)?(s=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e=t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),o=parseInt(s[1],10)/360,t=parseInt(s[2],10)/100,e=parseInt(s[3],10)/100,s=s[4]||1,0==t?r=i=n=e:(r=a(t=2*e-(e=e<.5?e*(1+t):e+t-e*t),e,o+1/3),i=a(t,e,o),n=a(t,e,o-1/3)),"rgba("+255*r+","+255*i+","+255*n+","+s+")"):void 0;var e,r,i,n,s,o;function a(t,e,r){return r<0&&(r+=1),1<r&&--r,r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}}function EQt(t){t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(t)return t[1]}function TQt(t,e){return tQt.fnc(t)?t(e.target,e.id,e.total):t}function bQt(t,e){return t.getAttribute(e)}function AQt(t,e,r){if(yQt([r,"deg","rad","turn"],EQt(e)))return e;var i=qJt.CSS[e+r];if(!tQt.und(i))return i;var n=document.createElement(t.tagName),i=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;i.appendChild(n),n.style.position="absolute",n.style.width=100+r;t=100/n.offsetWidth;i.removeChild(n);t*=parseFloat(e);return qJt.CSS[e+r]=t}function SQt(t,e,r){if(e in t.style){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=t.style[e]||getComputedStyle(t).getPropertyValue(i)||"0";return r?AQt(t,i,r):i}}function IQt(t,e){return tQt.dom(t)&&!tQt.inp(t)&&(!tQt.nil(bQt(t,e))||tQt.svg(t)&&t[e])?"attribute":tQt.dom(t)&&yQt(KJt,e)?"transform":tQt.dom(t)&&"transform"!==e&&SQt(t,e)?"css":null!=t[e]?"object":void 0}function RQt(t){if(tQt.dom(t)){for(var e,r=t.style.transform||"",i=/(\w+)\(([^)]*)\)/g,n=new Map;e=i.exec(r);)n.set(e[1],e[2]);return n}}function OQt(t,e,r,i){var n=QJt(e,"scale")?1:0+(QJt(n=e,"translate")||"perspective"===n?"px":QJt(n,"rotate")||QJt(n,"skew")?"deg":void 0),n=RQt(t).get(e)||n;return r&&(r.transforms.list.set(e,n),r.transforms.last=e),i?AQt(t,n,i):n}function wQt(t,e,r,i){switch(IQt(t,e)){case"transform":return OQt(t,e,i,r);case"css":return SQt(t,e,r);case"attribute":return bQt(t,e);default:return t[e]||0}}function CQt(t,e){var r=/^(\*=|\+=|-=)/.exec(t);if(!r)return t;var i=EQt(t)||0,n=parseFloat(e),s=parseFloat(t.replace(r[0],""));switch(r[0][0]){case"+":return n+s+i;case"-":return n-s+i;case"*":return n*s+i}}function PQt(t,e){if(tQt.col(t))return gQt(t);if(/\s/g.test(t))return t;var r=EQt(t),t=r?t.substr(0,t.length-r.length):t;return e?t+e:t}function NQt(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function MQt(t){for(var e,r=t.points,i=0,n=0;n<r.numberOfItems;n++){var s=r.getItem(n);0<n&&(i+=NQt(e,s)),e=s}return i}function LQt(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return 2*Math.PI*bQt(t,"r");case"rect":return 2*bQt(r=t,"width")+2*bQt(r,"height");case"line":return NQt({x:bQt(e=t,"x1"),y:bQt(e,"y1")},{x:bQt(e,"x2"),y:bQt(e,"y2")});case"polyline":return MQt(t);case"polygon":return e=t.points,MQt(t)+NQt(e.getItem(e.numberOfItems-1),e.getItem(0))}var e,r}function DQt(t,e){var r=e||{},i=r.el||function(t){for(var e=t.parentNode;tQt.svg(e)&&tQt.svg(e.parentNode);)e=e.parentNode;return e}(t),n=i.getBoundingClientRect(),e=bQt(i,"viewBox"),t=n.width,n=n.height,e=r.viewBox||(e?e.split(" "):[0,0,t,n]);return{el:i,viewBox:e,x:+e[0],y:+e[1],w:t,h:n,vW:e[2],vH:e[3]}}function UQt(t,e){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=PQt(tQt.pth(t)?t.totalLength:t,e)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:tQt.str(t)||e?i.split(r):[]}}function FQt(t){return fQt(t?pQt(tQt.arr(t)?t.map(_Qt):_Qt(t)):[],function(t,e,r){return r.indexOf(t)===e})}function BQt(t){var r=FQt(t);return r.map(function(t,e){return{target:t,id:e,total:r.length,transforms:{list:RQt(t)}}})}function kQt(e){for(var r=fQt(pQt(e.map(function(t){return Object.keys(t)})),function(t){return tQt.key(t)}).reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[]),n={},t=0;t<r.length;t++)!function(t){var i=r[t];n[i]=e.map(function(t){var e,r={};for(e in t)tQt.key(e)?e==i&&(r.value=t[e]):r[e]=t[e];return r})}(t);return n}function GQt(t,e){var r,i=[],n=e.keyframes;for(r in e=n?xQt(kQt(n),e):e)tQt.key(r)&&i.push({name:r,tweens:function(t,r){var e,i=mQt(r);/^spring/.test(i.easing)&&(i.duration=rQt(i.easing)),tQt.arr(t)&&(2===(e=t.length)&&!tQt.obj(t[0])?t={value:t}:tQt.fnc(r.duration)||(i.duration=r.duration/e));var n=tQt.arr(t)?t:[t];return n.map(function(t,e){t=tQt.obj(t)&&!tQt.pth(t)?t:{value:t};return tQt.und(t.delay)&&(t.delay=e?0:r.delay),tQt.und(t.endDelay)&&(t.endDelay=e===n.length-1?r.endDelay:0),t}).map(function(t){return xQt(t,i)})}(e[r],t)});return i}function XQt(a,h){var u;return a.tweens.map(function(t){var e=function(t,e){var r,i={};for(r in t){var n=TQt(t[r],e);tQt.arr(n)&&1===(n=n.map(function(t){return TQt(t,e)})).length&&(n=n[0]),i[r]=n}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}(t,h),r=e.value,i=tQt.arr(r)?r[1]:r,n=EQt(i),s=wQt(h.target,a.name,n,h),o=u?u.to.original:s,t=tQt.arr(r)?r[0]:o,s=EQt(t)||EQt(s),s=n||s;return tQt.und(i)&&(i=o),e.from=UQt(t,s),e.to=UQt(CQt(i,t),s),e.start=u?u.end:0,e.end=e.start+e.delay+e.duration+e.endDelay,e.easing=cQt(e.easing,e.duration),e.isPath=tQt.pth(r),e.isPathTargetInsideSVG=e.isPath&&tQt.svg(h.target),e.isColor=tQt.col(e.from.original),e.isColor&&(e.round=1),u=e})}var HQt={css:function(t,e,r){return t.style[e]=r},attribute:function(t,e,r){return t.setAttribute(e,r)},object:function(t,e,r){return t[e]=r},transform:function(t,e,r,i,n){var s;i.list.set(e,r),e!==i.last&&!n||(s="",i.list.forEach(function(t,e){s+=e+"("+t+") "}),t.style.transform=s)}};function VQt(t,o){BQt(t).forEach(function(t){for(var e in o){var r=TQt(o[e],t),i=t.target,n=EQt(r),s=wQt(i,e,n,t),n=CQt(PQt(r,n||EQt(s)),s),s=IQt(i,e);HQt[s](i,e,n,t.transforms,!0)}})}function jQt(t,r){return fQt(pQt(t.map(function(e){return r.map(function(t){return function(t,e){var r=IQt(t.target,e.name);if(r){var i=XQt(e,t),n=i[i.length-1];return{type:r,property:e.name,animatable:t,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}(e,t)})})),function(t){return!tQt.und(t)})}function YQt(t,e){function r(t){return t.timelineOffset||0}var i=t.length,n={};return n.duration=i?Math.max.apply(Math,t.map(function(t){return r(t)+t.duration})):e.duration,n.delay=i?Math.min.apply(Math,t.map(function(t){return r(t)+t.delay})):e.delay,n.endDelay=i?n.duration-Math.max.apply(Math,t.map(function(t){return r(t)+t.duration-t.endDelay})):e.endDelay,n}var zQt=0;var WQt,ZQt=[],KQt=("undefined"!=typeof document&&document.addEventListener("visibilitychange",function(){QQt.suspendWhenDocumentHidden&&(JQt()?WQt=cancelAnimationFrame(WQt):(ZQt.forEach(function(t){return t._onDocumentVisibility()}),KQt()))}),function(){WQt||JQt()&&QQt.suspendWhenDocumentHidden||!(0<ZQt.length)||(WQt=requestAnimationFrame(qQt))});function qQt(t){for(var e=ZQt.length,r=0;r<e;){var i=ZQt[r];i.paused?(ZQt.splice(r,1),e--):(i.tick(t),r++)}WQt=0<r?requestAnimationFrame(qQt):void 0}function JQt(){return document&&document.hidden}function QQt(t){var s,o=0,a=0,h=0,u=0,l=null;function c(t){var e=window.Promise&&new Promise(function(t){return l=t});return t.finished=e}var e,r,i,n,b=(r=vQt(WJt,e=t=void 0===t?{}:t),i=GQt(n=vQt(ZJt,e),e),t=BQt(e.targets),i=YQt(e=jQt(t,i),n),n=zQt,zQt++,xQt(r,{id:n,children:[],animatables:t,animations:e,duration:i.duration,delay:i.delay,endDelay:i.endDelay}));c(b);function d(){var t=b.direction;"alternate"!==t&&(b.direction="normal"!==t?"normal":"reverse"),b.reversed=!b.reversed,s.forEach(function(t){return t.reversed=b.reversed})}function f(t){return b.reversed?b.duration-t:t}function p(){o=0,a=f(b.currentTime)*(1/QQt.speed)}function _(t,e){e&&e.seek(t-e.timelineOffset)}function y(e){for(var t=0,r=b.animations,i=r.length;t<i;){var n=r[t],s=n.animatable,o=n.tweens,a=o.length-1,h=o[a];a&&(h=fQt(o,function(t){return e<t.end})[0]||h);for(var o=JJt(e-h.start-h.delay,0,h.duration)/h.duration,u=isNaN(o)?1:h.easing(o),l=h.to.strings,c=h.round,d=[],f=h.to.numbers.length,p=void 0,_=0;_<f;_++){var y=void 0,m=h.to.numbers[_],v=h.from.numbers[_]||0,y=h.isPath?function(e,r,t){function i(t){return e.el.getPointAtLength(1<=r+(t=void 0===t?0:t)?r+t:0)}var n=DQt(e.el,e.svg),s=i(),o=i(-1),a=i(1),h=t?1:n.w/n.vW,u=t?1:n.h/n.vH;switch(e.property){case"x":return(s.x-n.x)*h;case"y":return(s.y-n.y)*u;case"angle":return 180*Math.atan2(a.y-o.y,a.x-o.x)/Math.PI}}(h.value,u*m,h.isPathTargetInsideSVG):v+u*(m-v);c&&(h.isColor&&2<_||(y=Math.round(y*c)/c)),d.push(y)}var x=l.length;if(x)for(var p=l[0],g=0;g<x;g++){l[g];var E=l[g+1],T=d[g];isNaN(T)||(p+=E?T+E:T+" ")}else p=d[0];HQt[n.type](s.target,n.property,p,s.transforms),n.currentValue=p,t++}}function m(t){b[t]&&!b.passThrough&&b[t](b)}function v(t){var e=b.duration,r=b.delay,i=e-b.endDelay,n=f(t);b.progress=JJt(n/e*100,0,100),b.reversePlayback=n<b.currentTime,s&&function(t){if(b.reversePlayback)for(var e=u;e--;)_(t,s[e]);else for(var r=0;r<u;r++)_(t,s[r])}(n),!b.began&&0<b.currentTime&&(b.began=!0,m("begin")),!b.loopBegan&&0<b.currentTime&&(b.loopBegan=!0,m("loopBegin")),n<=r&&0!==b.currentTime&&y(0),(i<=n&&b.currentTime!==e||!e)&&y(e),r<n&&n<i?(b.changeBegan||(b.changeBegan=!0,b.changeCompleted=!1,m("changeBegin")),m("change"),y(n)):b.changeBegan&&(b.changeCompleted=!0,b.changeBegan=!1,m("changeComplete")),b.currentTime=JJt(n,0,e),b.began&&m("update"),e<=t&&(a=0,b.remaining&&!0!==b.remaining&&b.remaining--,b.remaining?(o=h,m("loopComplete"),b.loopBegan=!1,"alternate"===b.direction&&d()):(b.paused=!0,b.completed||(b.completed=!0,m("loopComplete"),m("complete"),!b.passThrough&&"Promise"in window&&(l(),c(b)))))}return b.reset=function(){var t=b.direction;b.passThrough=!1,b.currentTime=0,b.progress=0,b.paused=!0,b.began=!1,b.loopBegan=!1,b.changeBegan=!1,b.completed=!1,b.changeCompleted=!1,b.reversePlayback=!1,b.reversed="reverse"===t,b.remaining=b.loop,s=b.children;for(var e=u=s.length;e--;)b.children[e].reset();(b.reversed&&!0!==b.loop||"alternate"===t&&1===b.loop)&&b.remaining++,y(b.reversed?b.duration:0)},b._onDocumentVisibility=p,b.set=function(t,e){return VQt(t,e),b},b.tick=function(t){v(((h=t)+(a-(o=o||h)))*QQt.speed)},b.seek=function(t){v(f(t))},b.pause=function(){b.paused=!0,p()},b.play=function(){b.paused&&(b.completed&&b.reset(),b.paused=!1,ZQt.push(b),p(),KQt())},b.reverse=function(){d(),b.completed=!b.reversed,p()},b.restart=function(){b.reset(),b.play()},b.remove=function(t){t$t(FQt(t),b)},b.reset(),b.autoplay&&b.play(),b}function $Qt(t,e){for(var r=e.length;r--;)yQt(t,e[r].animatable.target)&&e.splice(r,1)}function t$t(t,e){var r=e.animations,i=e.children;$Qt(t,r);for(var n=i.length;n--;){var s=i[n],o=s.animations;$Qt(t,o),o.length||s.children.length||i.splice(n,1)}r.length||i.length||e.pause()}QQt.version="3.2.1",QQt.speed=1,QQt.suspendWhenDocumentHidden=!0,QQt.running=ZQt,QQt.remove=function(t){for(var e=FQt(t),r=ZQt.length;r--;)t$t(e,ZQt[r])},QQt.get=wQt,QQt.set=VQt,QQt.convertPx=AQt,QQt.path=function(t,e){var r=tQt.str(t)?dQt(t)[0]:t,i=e||100;return function(t){return{property:t,el:r,svg:DQt(r),totalLength:LQt(r)*(i/100)}}},QQt.setDashoffset=function(t){var e=LQt(t);return t.setAttribute("stroke-dasharray",e),e},QQt.stagger=function(t,e){var a=(e=void 0===e?{}:e).direction||"normal",h=e.easing?cQt(e.easing):null,u=e.grid,l=e.axis,c=e.from||0,d="first"===c,f="center"===c,p="last"===c,_=tQt.arr(t),y=_?parseFloat(t[0]):parseFloat(t),m=_?parseFloat(t[1]):0,v=EQt(_?t[1]:t)||0,x=e.start||0+(_?y:0),g=[],E=0;return function(t,e,r){if(d&&(c=0),f&&(c=(r-1)/2),p&&(c=r-1),!g.length){for(var i,n,s,o=0;o<r;o++)u?(n=f?(u[0]-1)/2:c%u[0],s=f?(u[1]-1)/2:Math.floor(c/u[0]),i=n-o%u[0],n=s-Math.floor(o/u[0]),s=Math.sqrt(i*i+n*n),"x"===l&&(s=-i),g.push(s="y"===l?-n:s)):g.push(Math.abs(c-o)),E=Math.max.apply(Math,g);h&&(g=g.map(function(t){return h(t/E)*E})),"reverse"===a&&(g=g.map(function(t){return l?t<0?-1*t:-t:Math.abs(E-t)}))}return x+(_?(m-y)/E:y)*(Math.round(100*g[e])/100)+v}},QQt.timeline=function(o){var a=QQt(o=void 0===o?{}:o);return a.duration=0,a.add=function(t,e){var r=ZQt.indexOf(a),i=a.children;function n(t){t.passThrough=!0}-1<r&&ZQt.splice(r,1);for(var s=0;s<i.length;s++)n(i[s]);r=xQt(t,vQt(ZJt,o));r.targets=r.targets||o.targets;t=a.duration;r.autoplay=!1,r.direction=a.direction,r.timelineOffset=tQt.und(e)?t:CQt(e,t),n(a),a.seek(r.timelineOffset);r=QQt(r);n(r),i.push(r);r=YQt(i,o);return a.delay=r.delay,a.endDelay=r.endDelay,a.duration=r.duration,a.seek(0),a.reset(),a.autoplay&&a.play(),a},a},QQt.easing=cQt,QQt.penner=lQt,QQt.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};var e$t=QQt;function r$t(t){return(r$t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i$t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n$t(t,e){return(n$t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s$t(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=o$t(r);return t=i?(t=o$t(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r$t(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function o$t(t){return(o$t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var a$t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n$t(t,e)}(n,Kn);var t,e,r,i=s$t(n);function n(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(r=i.call(this,$e.EMPTY)).xPos=t,r.yPos=e,r.sprite=Kn.from("player"),r.sprite.anchor.set(.5),r.addChild(r.sprite),r.animationSpeed=1,r.animate(),r}return t=n,(e=[{key:"animate",value:function(){}},{key:"onResize",value:function(t,e){this.width=4,this.height=4,this.x=t*this.xPos,this.y=e*this.yPos}},{key:"onUpdate",value:function(t){this.xPos=.5+t}}])&&i$t(t.prototype,e),r&&i$t(t,r),n}();function h$t(t){return(h$t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u$t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l$t(t,e){return(l$t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c$t(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=d$t(r);return t=i?(t=d$t(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==h$t(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function d$t(t){return(d$t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f$t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l$t(t,e)}(n,Kn);var t,e,r,i=c$t(n);function n(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(r=i.call(this,$e.EMPTY)).xPos=t,r.yPos=e,r.sprite=Kn.from("zombie"),r.sprite.anchor.set(.5),r.addChild(r.sprite),r.animate(),r}return t=n,(e=[{key:"animate",value:function(){e$t({targets:this.sprite,x:{value:3,duration:2e3,easing:"easeInOutCubic"},loop:!0,direction:"alternate"}),e$t({targets:this.sprite,duration:750,y:{value:2,easing:"easeInOutQuad"},loop:!0,direction:"alternate"});this.sprite.rotation=.02,e$t({targets:this.sprite,duration:1e3,rotation:{value:-.02,easing:"easeInOutQuad"},loop:!0,direction:"alternate"})}},{key:"onResize",value:function(t,e){this.width=4,this.height=4,this.x=t*this.xPos,this.y=e*this.yPos,this.tint=16776960}},{key:"onUpdate",value:function(t){this.xPos=.5-t}}])&&u$t(t.prototype,e),r&&u$t(t,r),n}();function p$t(t){return(p$t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _$t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function y$t(t,e){return(y$t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m$t(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=x$t(r);return t=i?(t=x$t(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==p$t(t)&&"function"!=typeof t?v$t(e):t}}function v$t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x$t(t){return(x$t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Hkt=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y$t(t,e)}(n,Gn);var t,e,r,i=m$t(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=i.call(this,{width:window.innerWidth,height:window.innerHeight}),document.body.appendChild(t.view),t.init(),window.addEventListener("resize",t.onResize.bind(v$t(t))),t.playerProxDist=.3,t.zombieProxDist=.3,t.userSpeed=3,t.leftTime=300,t.easing=1e-4,t.startTime=new Date,t.timeText,t.zombieAteCntText,t.isZombie=!1,t.atePlayer=!1,t.zombieAteCnt=0,t}return t=n,(e=[{key:"init",value:function(){this.loader.add("bg","./assets/bg.png"),this.loader.add("ground","./assets/ground.png"),this.loader.add("player","./assets/player.png"),this.loader.add("trees","./assets/trees.png"),this.loader.add("mountains","./assets/mountains.png"),this.loader.add("clouds","./assets/clouds.png"),this.loader.add("filter","./assets/filter.png"),this.loader.add("zombie","./assets/zombie.png"),this.playerTextureArray=[];for(var t=0;t<15;t++){var e="",r=Nv.from("./assets/player/player_"+(e=t<10?"0":e)+t+".png");this.playerTextureArray.push(r)}this.zombieTextureArray=[];for(var i=0;i<16;i++){var e="",n=Nv.from("./assets/zombie/zombie_"+(e=i<10?"0":e)+i+".png");this.zombieTextureArray.push(n)}this.loader.load(this.draw.bind(this))}},{key:"draw",value:function(){var a=this;this.userSpeed=5,this.playerProxDist=.3,this.zombieProxDist=.3,this.zombieAteCnt=0,this.background=new yJt,this.ground=new TJt,this.trees=new GJt,this.mountains=new LJt,this.clouds=new OJt,this.filter=new zJt(0),this.player=new a$t(.5,.83),this.zombie=new f$t(2,.83),this.playerProx=new a$t(.5+this.playerProxDist,.83),this.zombieProx=new f$t(.5-this.zombieProxDist,.83),this.player1=new a$t(.9,.83),this.player2=new a$t(.95,.83),this.player3=new a$t(.86,.84),this.player4=new a$t(.92,.83),this.zombie1=new f$t(.15,.83),this.zombie2=new f$t(.06,.83),this.zombie3=new f$t(.12,.84),this.zombie4=new f$t(.18,.83);var t=new _Z({fontFamily:"Arial",fontSize:40,fontStyle:"italic",fontWeight:"bold",fill:["#ffffff","#00ff99"],stroke:"#4a1850",strokeThickness:5,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6,wordWrap:!0,wordWrapWidth:440,lineJoin:"round"});this.timeText=new IZ("Time: 0",t),this.timeText.x=1170,this.timeText.y=30,this.idText=new IZ("Dino",t),this.idText.x=680,this.idText.y=540,this.zombieAteCntText=new IZ("",t),this.zombieAteCntText.x=50,this.zombieAteCntText.y=30,this.stage.addChild(this.background,this.mountains,this.ground,this.trees,this.clouds,this.filter,this.player,this.zombie,this.playerProx,this.zombieProx,this.zombie1,this.zombie2,this.zombie3,this.zombie4,this.timeText,this.zombieAteCntText),this.stage.addChild(this.player1,this.player2,this.player3,this.player4),this.stage.addChild(this.idText),this.onResize(),this.ticker.add(function(){var t=new Date,e=t-a.startTime;e/=1e3;var e=Math.round(600-e),r=parseInt(e/60),i=e%60,n=i<10?0:"";e=t-a.startTime,e/=100,e=Math.round(e);for(var s=0;s<15;s++)e%15==s&&(a.player.sprite.texture=a.playerTextureArray[s]),(e+3)%15==s&&(a.player1.sprite.texture=a.playerTextureArray[s]),(e+5)%15==s&&(a.player2.sprite.texture=a.playerTextureArray[s]),(e+8)%15==s&&(a.player3.sprite.texture=a.playerTextureArray[s]),(e+10)%15==s&&(a.player4.sprite.texture=a.playerTextureArray[s]),(e+13)%15==s&&(a.playerProx.sprite.texture=a.playerTextureArray[s]);for(var o=0;o<16;o++)e%15==o&&(a.zombie.sprite.texture=a.zombieTextureArray[o]),(e+3)%15==o&&(a.zombie1.sprite.texture=a.zombieTextureArray[o]),(e+5)%15==o&&(a.zombie2.sprite.texture=a.zombieTextureArray[o]),(e+8)%15==o&&(a.zombie3.sprite.texture=a.zombieTextureArray[o]),(e+10)%15==o&&(a.zombie4.sprite.texture=a.zombieTextureArray[o]),(e+13)%15==o&&(a.zombieProx.sprite.texture=a.zombieTextureArray[o]);a.timeText.text="Time: ".concat(r,":").concat(n).concat(i),e<=0&&(a.timeText.text="End!")}),this.ticker.add(this.onUpdate.bind(this))}},{key:"onUpdate",value:function(t){this.isZombie?(this.zombieProxDist=this.zombieProxDist+.001*Math.random()-55e-5,this.zombieProxDist=Math.max(this.zombieProxDist,.35),this.zombieProxDist=Math.min(this.zombieProxDist,.43),this.zombieAteCntText.text="Ate Human!: ".concat(this.zombieAteCnt),this.playerProxDist<.47?(this.playerProxDist=this.playerProxDist+.002+2e-4*Math.random()-2e-4,this.playerProxDist):(this.atePlayer=!0,this.zombieAteCnt++,this.playerProxDist=.1)):this.zombieProxDist<.47?(this.zombieProxDist=this.zombieProxDist+2e-4+.002*Math.random()-2e-4,this.zombieProxDist):(this.isZombie=!0,this.zombieAteCntText.text="Ate Human!: ".concat(this.zombieAteCnt),this.player.onUpdate(2),this.zombie.onUpdate(0),this.zombieProxDist=.45),this.playerProx.onUpdate(.5-this.playerProxDist),this.zombieProx.onUpdate(.5-this.zombieProxDist),this.ground.onUpdate(t*this.userSpeed),this.trees.onUpdate(t*this.userSpeed),this.mountains.onUpdate(t*this.userSpeed*.7),this.clouds.onUpdate(t*this.userSpeed*2),this.onResize()}},{key:"onResize",value:function(){this.renderer.resize(window.innerWidth,window.innerHeight);var t=this.renderer.width,e=this.renderer.height;this.background.onResize(t,e),this.ground.onResize(t,e),this.trees.onResize(t,e),this.mountains.onResize(t,e),this.clouds.onResize(t,e),this.isZombie?this.filter.val=t:this.filter.val=0,this.filter.onResize(),this.player.onResize(t,e),this.zombie.onResize(t,e),this.playerProx.onResize(t,e),this.zombieProx.onResize(t,e),this.player1.onResize(t,e),this.player2.onResize(t,e),this.player3.onResize(t,e),this.player4.onResize(t,e),this.zombie1.onResize(t,e),this.zombie2.onResize(t,e),this.zombie3.onResize(t,e),this.zombie4.onResize(t,e)}}])&&_$t(t.prototype,e),r&&_$t(t,r),n}();Tn.registerPlugin("batch",Le),Tn.registerPlugin("tilingSprite",xe),Gn.registerPlugin(ee),Gn.registerPlugin(Oe),new Hkt}]);